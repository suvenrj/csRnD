cscope 15 $HOME/benchmarks/SPEC/SPECjbb2005/src               0000389501
	@spec/jbb/Address.java

7 
·ckage
 
	g¥ec
.
	gjbb
;

9 
impÜt
 
	gjava
.
	gut
.
	gRªdom
;

11 
public
 cÏs 
	cAdd»ss
 {

13 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

20 
´iv©e
 
SŒšg
 
	m¡»‘1
;

22 
´iv©e
 
SŒšg
 
	m¡»‘2
;

24 
´iv©e
 
SŒšg
 
	mc™y
;

26 
´iv©e
 
SŒšg
 
	m¡©e
;

28 
´iv©e
 
SŒšg
 
	mz
;

30 
public
 
	$Add»ss
() {

33 
public
 
synchrÚized
 
	$£tUsšgRªdom
(
Rªdom
 
r
) {

34 
¡»‘1
 = 
Ãw
 
	`SŒšg
(
JBBut
.
	`ü—‹_¿ndom_a_¡ršg
(10, 20, 
r
));

35 
¡»‘1
 = 
Ãw
 
	`SŒšg
(
JBBut
.
	`ü—‹_¿ndom_a_¡ršg
(10, 20, 
r
));

36 
¡»‘2
 = 
Ãw
 
	`SŒšg
(
JBBut
.
	`ü—‹_¿ndom_a_¡ršg
(10, 20, 
r
));

37 
c™y
 = 
Ãw
 
	`SŒšg
(
JBBut
.
	`ü—‹_¿ndom_a_¡ršg
(10, 20, 
r
));

38 
¡©e
 = 
Ãw
 
	`SŒšg
(
JBBut
.
	`ü—‹_¿ndom_a_¡ršg
(2, 2, 
r
));

39 
z
 = 
Ãw
 
	`SŒšg
(
JBBut
.
	`ü—‹_¿ndom_n_¡ršg
(9, 9, 
r
));

40 
	}
}

42 
public
 
synchrÚized
 
	$£tUsšgRªdom
(
w¬ehou£Id
) {

43 
¡»‘1
 = 
Ãw
 
	`SŒšg
(
JBBut


44 .
	`ü—‹_¿ndom_a_¡ršg
(10, 20, 
w¬ehou£Id
));

45 
¡»‘1
 = 
Ãw
 
	`SŒšg
(
JBBut


46 .
	`ü—‹_¿ndom_a_¡ršg
(10, 20, 
w¬ehou£Id
));

47 
¡»‘2
 = 
Ãw
 
	`SŒšg
(
JBBut


48 .
	`ü—‹_¿ndom_a_¡ršg
(10, 20, 
w¬ehou£Id
));

49 
c™y
 = 
Ãw
 
	`SŒšg
(
JBBut
.
	`ü—‹_¿ndom_a_¡ršg
(10, 20, 
w¬ehou£Id
));

50 
¡©e
 = 
Ãw
 
	`SŒšg
(
JBBut
.
	`ü—‹_¿ndom_a_¡ršg
(2, 2, 
w¬ehou£Id
));

51 
z
 = 
Ãw
 
	`SŒšg
(
JBBut
.
	`ü—‹_¿ndom_n_¡ršg
(9, 9, 
w¬ehou£Id
));

52 
	}
}

54 
public
 
synchrÚized
 
	$di¥Ïy
() {

55 
Sy¡em
.
out
.
	`´šn
("****** ADDRESS display *********************");

56 
Sy¡em
.
out
.
	`´šn
(" SŒ“ˆ1 i  " + 
¡»‘1
);

57 
Sy¡em
.
out
.
	`´šn
(" SŒ“ˆ2 i  " + 
¡»‘2
);

58 
Sy¡em
.
out
.
	`´šn
(" C™y‚ami  " + 
c™y
);

59 
Sy¡em
.
out
.
	`´šn
(" S‹‚ami  " + 
¡©e
);

60 
Sy¡em
.
out
.
	`´šn
(" Z codi  " + 
z
);

61 
Sy¡em
.
out
.
	`´šn
("********************************************");

62 
	}
}

64 
public
 
synchrÚized
 
SŒšg
 
	$g‘SŒ“t1
() {

65 
SŒšg
 
‹mp
 = 
¡»‘1
;

66  
‹mp
;

67 
	}
}

69 
public
 
synchrÚized
 
SŒšg
 
	$g‘SŒ“t2
() {

70 
SŒšg
 
‹mp
 = 
¡»‘2
;

71  
‹mp
;

72 
	}
}

74 
public
 
synchrÚized
 
SŒšg
 
	$g‘C™y
() {

75 
SŒšg
 
‹mp
 = 
c™y
;

76  
‹mp
;

77 
	}
}

79 
public
 
synchrÚized
 
SŒšg
 
	$g‘S‹
() {

80 
SŒšg
 
‹mp
 = 
¡©e
;

81  
‹mp
;

82 
	}
}

84 
public
 
synchrÚized
 
SŒšg
 
	$g‘Z
() {

85 
SŒšg
 
‹mp
 = 
z
;

86  
‹mp
;

87 
	}
}

	@spec/jbb/Company.java

9 
·ckage
 
	g¥ec
.
	gjbb
;

11 
impÜt
 
	gjava
.
	gÏng
.
	gIÁeg”
;

12 
impÜt
 
	gjava
.
	g‹xt
.
	gDecim®FÜm©
;

13 
impÜt
 
	gjava
.
	gut
.*;

14 
impÜt
 
	gjava
.
	gut
.
	gloggšg
.
	gLev–
;

15 
impÜt
 
	gjava
.
	gut
.
	gloggšg
.
	gLogg”
;

16 
impÜt
 
	gjava
.
	gio
.
	gPrštSŒ—m
;

18 
public
 cÏs 
	cCom·ny
 {

20 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

27 
´iv©e
 
PrštSŒ—m
 
	moutPrİFe
;

29 
´iv©e
 
PrštSŒ—m
 
	moutD–iv”›sFe
;

31 
´iv©e
 
SŒšg
 
	m´İP»fix
 = 
nuÎ
;

33 
´iv©e
 
	mObjeù
[] 
	mw¬ehou£TabË
;

35 
´iv©e
 
JBBD©aStÜage
 
	mcu¡om”TabË
;

37 
´iv©e
 
JBBSÜ‹dStÜage
 
	mÏ¡NameCu¡om”TabË
;

39 
´iv©e
 
JBBD©aStÜage
 
	m™emTabË
;

41 
´iv©e
 
	mObjeù
[] 
	mtim”d©aTabË
;

43 
´iv©e
 
	mObjeù
[] 
	mw¬ehou£CÚš”s
;

46 
´iv©e
 
	m¿mpup_time
;

48 
´iv©e
 
	mm—su»m’t_time
;

50 
´iv©e
 
Tim”D©a
 
	mcom·nyTim”D©a
;

52 
´iv©e
 
	m–­£d_time
;

55 
´iv©e
 
	mP»viousMaxW¬ehou£s
;

58 
´iv©e
 
	mMaxW¬ehou£s
;

60 
´iv©e
 
	mMaxDi¡riùsP”W¬ehou£
;

62 
´iv©e
 
	mMaxCu¡om”sP”Di¡riù
;

64 
´iv©e
 
	mMaxI‹ms
;

66 
´iv©e
 
	mMaxStock
;

68 
´iv©e
 
	mIn™ŸlOrd”s
;

70 
´iv©e
 
	mIn™ŸlNewOrd”s
;

72 
´iv©e
 
	mIn™ŸlHi¡Ü›s
;

74 
´iv©e
 
	mw¬ehou£C­ac™y
 = 
JBBmaš
.
maxWh
; ;

76 
´iv©e
 
A¼ayLi¡
 
	mw¬ehou£Th»ads
;

78 
´iv©e
 
	mjvm_š¡ªûs
 = 0;

80 
´iv©e
 
	m³r_jvm_w¬ehou£_¿mpup
 = 0.5f;

82 
´iv©e
 
	m³r_jvm_w¬ehou£_¿mpdown
 = 0.5f;

85 
Objeù
 
	mš™Th»adsS‹Chªge
 = 
nuÎ
;

87 
Objeù
 
	mš™Th»adsCouÁMÚ™Ü
 = 
nuÎ
;

89 
	mš™Th»adsCouÁ
 = 0;

91 
Objeù
 
	mth»adsDÚeCouÁMÚ™Ü
 = 
nuÎ
;

93 
	mth»adsDÚeCouÁ
 = 0;

95 
Objeù
 
	m¡İTh»adsCouÁMÚ™Ü
 = 
nuÎ
;

97 
	m¡İTh»adsCouÁ
 = 0;

99 
	$£tOuuts
(
PrštSŒ—m
 
oPrİFe
, PrštSŒ—m 
oD–iv”›sFe
) {

100 
outPrİFe
 = 
oPrİFe
;

101 
outD–iv”›sFe
 = 
oD–iv”›sFe
;

104 
public
 
	erunModes
 {

105 
DEFAULT_MODE
, 
MULTI_RAMP
, 
RAMP_UP
, 
RECORDING
, 
RAMP_DOWN
, 
STOP


106 
	}
};

108 
´iv©e
 vŞ©
runModes
 
	gmode
 =„unModes.
DEFAULT_MODE
;

110 
public
 
	$Com·ny
() {

111 
JBBut
.
	`¿ndom_š™
(
w¬ehou£C­ac™y
);

112 
Sy¡em
.
out
.
	`´šn
("Constructinghe company‚ow Hang....on");

113 
Sy¡em
.
out
.
	`´šn
("");

114 
w¬ehou£CÚš”s
 = 
Ãw
 
Objeù
[
w¬ehou£C­ac™y
];

115 
w¬ehou£TabË
 = 
Ãw
 
Objeù
[
w¬ehou£C­ac™y
];

116 
cu¡om”TabË
 = 
Inäa¡ruùu»
.
	`ü—‹StÜage
();

117 
Ï¡NameCu¡om”TabË
 = 
Inäa¡ruùu»
.
	`ü—‹SÜ‹dStÜage
();

118 
™emTabË
 = 
Inäa¡ruùu»
.
	`ü—‹StÜage
();

119 
tim”d©aTabË
 = 
Ãw
 
Objeù
[
w¬ehou£C­ac™y
];

120 
com·nyTim”D©a
 = 
Ãw
 
	`Tim”D©a
();

121 
MaxW¬ehou£s
 = 0;

122 
š™Th»adsS‹Chªge
 = 
Ãw
 
	`Objeù
();

123 
š™Th»adsCouÁMÚ™Ü
 = 
Ãw
 
	`Objeù
();

124 
š™Th»adsCouÁ
 = 0;

125 
th»adsDÚeCouÁMÚ™Ü
 = 
Ãw
 
	`Objeù
();

126 
th»adsDÚeCouÁ
 = 0;

127 
¡İTh»adsCouÁMÚ™Ü
 = 
Ãw
 
	`Objeù
();

128 
¡İTh»adsCouÁ
 = 0;

130 
w¬ehou£Th»ads
 = 
Ãw
 
	`A¼ayLi¡
(
w¬ehou£C­ac™y
);

131 
	}
}

133 
PrštSŒ—m
 
	$g‘OutD–iv”›sFe
() {

134  
outD–iv”›sFe
;

135 
	}
}

137 
public
 
	$g‘MaxW¬ehou£s
() {

138  
MaxW¬ehou£s
;

139 
	}
}

141 
public
 
	$g‘MaxDi¡riùsP”W¬ehou£
() {

142  
MaxDi¡riùsP”W¬ehou£
;

143 
	}
}

145 
public
 
	$g‘MaxCu¡om”sP”Di¡riù
() {

146  
MaxCu¡om”sP”Di¡riù
;

147 
	}
}

149 
public
 
	$g‘MaxI‹ms
() {

150  
MaxI‹ms
;

151 
	}
}

153 
public
 
	$g‘In™ŸlOrd”s
() {

154  
In™ŸlOrd”s
;

155 
	}
}

157 
public
 
	$g‘In™ŸlNewOrd”s
() {

158  
In™ŸlNewOrd”s
;

159 
	}
}

161 
public
 
synchrÚized
 
	$´imeW™hDummyD©a
(
numb”_of_w¬ehou£s
,

162 
choiû
) {

163 
choiû
) {

165 
P»viousMaxW¬ehou£s
 = 
MaxW¬ehou£s
;

166 ià(
P»viousMaxW¬ehou£s
 == 0)

167 
MaxW¬ehou£s
 = 
numb”_of_w¬ehou£s
;

169 ++
MaxW¬ehou£s
;

170 
SŒšg
 
msg
 = "Lßdšg W¬ehou£ " + 
MaxW¬ehou£s
 + "...";

171 
Sy¡em
.
out
.
	`´šn
(
msg
);

172 
JBBut
.
	`g‘Log
().
	`šfo
(
msg
);

176 ià(
P»viousMaxW¬ehou£s
 == 0) {

177 
	`lßdI‹mTabË
();

179 
	`lßdW¬ehou£TabË
();

180 
	`lßdCu¡om”TabË
();

181 
	`lßdW¬ehou£Hi¡ÜyTabË
();

182 
	`lßdIn™ŸlOrd”s
();

183 
Sy¡em
.
out
.
	`´šn
("");

184 
Sy¡em
.
out
.
	`´šn
("");

188 
P»viousMaxW¬ehou£s
 = 
MaxW¬ehou£s
;

189 ià(
P»viousMaxW¬ehou£s
 == 0)

190 
MaxW¬ehou£s
 = 
numb”_of_w¬ehou£s
;

192 ++
MaxW¬ehou£s
;

193 
SŒšg
 
msg
 = "Lßdšg W¬ehou£ " + 
MaxW¬ehou£s
 + "...";

194 
Sy¡em
.
out
.
	`´šn
(
msg
);

195 
JBBut
.
	`g‘Log
().
	`šfo
(
msg
);

199 ià(
P»viousMaxW¬ehou£s
 == 0) {

200 
	`lßdI‹mTabË
();

205 
	`lßdW¬ehou£TabË
();

209 
	`lßdCu¡om”TabË
();

216 
	`lßdIn™ŸlOrd”s
();

217 
Sy¡em
.
out
.
	`´šn
("");

218 
Sy¡em
.
out
.
	`´šn
("");

222 
	}
}

224 
public
 
synchrÚized
 
	$¡¬tAutom©ed
(
šW¬ehou£Id
,

225 
¿mpup_time
, 
m—su»m’t_time
) {

226 
com·nyTim”D©a
.
	`z”oTim”D©a
();

227 
this
.
¿mpup_time
 =„ampup_time;

228 
this
.
m—su»m’t_time
 = measurement_time;

229 
Tim”D©a
 
w¬ehou£Tim”D©a
 = 
	`g‘Tim”D©aPŒ
(
šW¬ehou£Id
);

230 
w¬ehou£Tim”D©a
.
	`z”oTim”D©a
();

231 
w¬ehou£Tim”D©a
.
	`£tRampUpTime
(
¿mpup_time
);

232 
w¬ehou£Tim”D©a
.
	`£tM—su»m’tTime
(
m—su»m’t_time
);

233 
	}
}

235 
public
 
synchrÚized
 
	$¡¬tV®id©iÚ
(
šW¬ehou£Id
) {

236 
com·nyTim”D©a
.
	`z”oTim”D©a
();

237 
Tim”D©a
 
w¬ehou£Tim”D©a
 = 
	`g‘Tim”D©aPŒ
(
šW¬ehou£Id
);

238 
w¬ehou£Tim”D©a
.
	`z”oTim”D©a
();

239 
	}
}

241 
public
 
synchrÚized
 
	$addW¬ehou£Th»ad
(
T¿n§ùiÚMªag”
 
tm
) {

242 
w¬ehou£Th»ads
.
	`add
(
tm
);

243 
	}
}

245 
public
 
synchrÚized
 
	$´•¬eFÜS¹
() {

246 
š™Th»adsCouÁ
 = 0;

247 
th»adsDÚeCouÁ
 = 0;

248 
¡İTh»adsCouÁ
 = 0;

249 
mode
 = 
runModes
.
DEFAULT_MODE
;

250 
w¬ehou£Th»ads
.
	`ş—r
();

251 
	}
}

253 
	$g‘EÏp£dTime
() {

254  
–­£d_time
;

255 
	}
}

258 
public
 
W¬ehou£
 
	$g‘W¬ehou£PŒ
(
w¬ehou£Id
, 
boŞ—n
 
lockFÏg
) {

260 
W¬ehou£
 
»suÉ
;

261 
»suÉ
 = (
W¬ehou£
è
w¬ehou£TabË
[
w¬ehou£Id
];

262  
»suÉ
;

263 
	}
}

266 
public
 
Cu¡om”
 
	$g‘Cu¡om”
(
cu¡om”Id
, 
boŞ—n
 
lockæag
) {

268 
Cu¡om”
 
»suÉ
;

269 
»suÉ
 = (
Cu¡om”
è
cu¡om”TabË
.
	`g‘
(
cu¡om”Id
);

270 ià(
JBBut
.
	`g‘Log
().
	`isLoggabË
(
Lev–
.
FINEST
)) {

271 
Logg”
 
log
 = 
JBBut
.
	`g‘Log
();

272 
log
.
	`fše¡
("Company::getCustomer");

273 
log
.
	`fše¡
(" cu¡om”Id=" + 
cu¡om”Id
);

274 
log
.
	`fše¡
(" Cu¡om”=" + 
»suÉ
);

277  
»suÉ
;

278 
	}
}

280 
public
 
boŞ—n
 
	$isCu¡om”
(
cu¡om”Id
) {

281  
cu¡om”TabË
.
	`cÚšsKey
(
cu¡om”Id
);

282 
	}
}

284 
public
 
	$budUniqueCu¡om”Key
(
w¬ehou£Id
, 
by‹
 
di¡riùId
,

285 
cu¡om”Id
) {

287 
key
 = 
w¬ehou£Id
;

288 
key
 = key << 12;

289 
key
 +ğ
di¡riùId
;

290 
key
 = key << 40;

291 
key
 +ğ
cu¡om”Id
;

292  
key
;

293 
	}
}

296 
public
 
Cu¡om”
 
	$g‘Cu¡om”ByLa¡Name
(
w¬ehou£Id
, 
by‹
 
di¡riùId
,

297 
SŒšg
 
Ï¡_Çme
) {

298 
SŒšg
 
cu¡Key
 = 
IÁeg”
.
	`toSŒšg
((è
w¬ehou£Id
) + "_"

299 + 
IÁeg”
.
	`toSŒšg
((è
di¡riùId
è+ "_" + 
Ï¡_Çme
;

300 
SŒšg
 
Ï¡Cu¡Key
 = 
cu¡Key
 + "_~";

301 
LÚg
 
cu¡Id
 = (LÚgè
Ï¡NameCu¡om”TabË
.
	`g‘MedŸnV®ue
(
cu¡Key
,

302 
Ï¡Cu¡Key
);

303  (
Cu¡om”
è
cu¡om”TabË
.
	`g‘
(
cu¡Id
);

304 
	}
}

306 
public
 
synchrÚized
 
	$£tJVMIn¡ªûV®ues
(
š¡ªûCouÁ
) {

307 
this
.
jvm_š¡ªûs
 = 
š¡ªûCouÁ
;

308 
	}
}

310 
public
 
synchrÚized
 
	$£tMuÉiJVMRampšgV®ues
(
¿mpup
, 
¿mpdown
) {

311 
this
.
³r_jvm_w¬ehou£_¿mpup
 = 
¿mpup
;

312 
this
.
³r_jvm_w¬ehou£_¿mpdown
 = 
¿mpdown
;

313 
	}
}

315 
public
 
synchrÚized
 
	$£tPİuÏtiÚV®ues
(
pİuÏtiÚ_ba£
) {

316 ià(
pİuÏtiÚ_ba£
 > 0) {

317 
MaxDi¡riùsP”W¬ehou£
 = 10;

318 
MaxCu¡om”sP”Di¡riù
 = 
pİuÏtiÚ_ba£
;

319 ià(
JBBmaš
.
ov”rideI‹mTabËSize
 > 0) {

320 
MaxI‹ms
 = 
JBBmaš
.
ov”rideI‹mTabËSize
;

323 
MaxI‹ms
 = 20000;

329 
MaxDi¡riùsP”W¬ehou£
 = 5;

330 
MaxCu¡om”sP”Di¡riù
 = 30;

331 
MaxI‹ms
 = 100;

333 
MaxStock
 = 
MaxI‹ms
;

334 
In™ŸlOrd”s
 = 
MaxCu¡om”sP”Di¡riù
;

335 
In™ŸlNewOrd”s
 = (è(
MaxCu¡om”sP”Di¡riù
 * 0.30);

336 
In™ŸlHi¡Ü›s
 = 
MaxCu¡om”sP”Di¡riù
;

337 
	}
}

339 
public
 
synchrÚized
 
	$£tPİuÏtiÚV®ues
(
pİuÏtiÚ_ba£
,

340 
™embË_size
) {

341 ià(
pİuÏtiÚ_ba£
 > 0) {

342 
MaxDi¡riùsP”W¬ehou£
 = 10;

343 
MaxCu¡om”sP”Di¡riù
 = 
pİuÏtiÚ_ba£
;

344 
MaxI‹ms
 = 
™embË_size
;

349 
MaxDi¡riùsP”W¬ehou£
 = 5;

350 
MaxCu¡om”sP”Di¡riù
 = 30;

351 
MaxI‹ms
 = 100;

353 
MaxStock
 = 
MaxI‹ms
;

354 
In™ŸlOrd”s
 = 
MaxCu¡om”sP”Di¡riù
;

355 
In™ŸlNewOrd”s
 = (è(
MaxCu¡om”sP”Di¡riù
 * 0.30);

356 
In™ŸlHi¡Ü›s
 = 
MaxCu¡om”sP”Di¡riù
;

357 
	}
}

359 
public
 
synchrÚized
 
Tim”D©a
 
	$g‘Tim”D©aPŒ
(
w¬ehou£Id
) {

360 
Tim”D©a
 
‹mp
;

363 ià(
w¬ehou£Id
 == 0)

364 
‹mp
 = 
com·nyTim”D©a
;

366 
‹mp
 = (
Tim”D©a
è
tim”d©aTabË
[
w¬ehou£Id
];

367  
‹mp
;

368 
	}
}

370 
public
 
synchrÚized
 
	$ŒimOrd”sFÜS‹adyS‹
() {

371 
w¬ehou£Id
;

372 
W¬ehou£
 
w¬ehou£PŒ
;

373 
š™ŸlOrd”s
 = 
this
.
	`g‘In™ŸlOrd”s
();

374 
š™ŸlNewOrd”s
 = 
this
.
	`g‘In™ŸlNewOrd”s
();

376 
w¬ehou£Id
 = 1; w¬ehou£Id <ğ
MaxW¬ehou£s
; warehouseId++) {

377 
w¬ehou£PŒ
 = 
	`g‘W¬ehou£PŒ
(
w¬ehou£Id
, 
çl£
);

378 
w¬ehou£PŒ
.
	`ŒimOrd”sFÜS‹adyS‹
(
š™ŸlOrd”s
,

379 
š™ŸlNewOrd”s
);

381 
	}
}

383 
public
 
	$di¥ÏyResuÉTÙ®s
(
boŞ—n
 
showW¬ehou£D‘a
) {

384 
w¬ehou£Id
;

385 
Tim”D©a
 
w¬ehou£Tim”D©a
;

387 
	`synchrÚized
 (
š™Th»adsS‹Chªge
) {

388 
š™Th»adsCouÁ
 !ğ
MaxW¬ehou£s
) {

389 
Œy
 {

390 
š™Th»adsS‹Chªge
.
	`wa™
();

392 
	`ÿtch
 (
IÁ”ru±edExû±iÚ
 
e
) {

397 ià(
JBBmaš
.
muÉiJVMMode
) {

398 
Sy¡em
.
out
.
	`´šn
(
JBBmaš
.
š¡ªûId
 + ":READY");

399 
JBBmaš
.
socOut
.
	`´šn
(JBBmaš.
š¡ªûId
 + ":READY");

400 
JBBmaš
.
socOut
.
	`æush
();

401 
SŒšg
 
mesg
 = "NULL";

402 
SŒšg
 
ÃedMsg
 = 
JBBmaš
.
š¡ªûId
 + ":START";

403 
Œy
 {

404 !
mesg
.
	`m©ches
(
ÃedMsg
))

405 
mesg
 = 
JBBmaš
.
socIn
.
	`»adLše
();

407 
	`ÿtch
 (
java
.
io
.
IOExû±iÚ
 
exûp
) {

408 
JBBut
.
	`g‘Log
().
	`log
(
Lev–
.
WARNING
,

409 
exûp
 + ": Unableo„ead from socket",ƒxcep);

410 
Sy¡em
.
	`ex™
(1);

412 
SŒšg
 
mes§geReûived
 = ">>>>>>>> GÙ Mes§ge: " + 
mesg
;

413 
JBBut
.
	`g‘Log
().
	`šfo
(
mes§geReûived
);

414 
Sy¡em
.
out
.
	`´šn
(
mes§geReûived
);

417 
	`£ŒunMode
(
runModes
.
RAMP_UP
);

418 
	`synchrÚized
 (
š™Th»adsCouÁMÚ™Ü
) {

419 
š™Th»adsCouÁMÚ™Ü
.
	`nÙifyAÎ
();

421 
SŒšg
 
msg
;

422 
¡¬t_time
 = 0;

423 
’d_time
 = 0;

424 
¡¬t_¿mpup_time
 = 0;

425 
’d_¿mpdown_time
 = 0;

426 
Decim®FÜm©
 
df
 = 
Ãw
 
	`Decim®FÜm©
("#####.##");

427 
tmpTime
 = 0;

428 ià(
JBBmaš
.
muÉiJVMMode
) {

429 
	`£ŒunMode
(
runModes
.
MULTI_RAMP
);

431 
¡¬t_¿mpup_time
 = 
Sy¡em
.
	`cu¼’tTimeMlis
();

432 
tmpTime
 = ()
³r_jvm_w¬ehou£_¿mpup
;

433 
msg
 = "User Thread Multi-JVM Rampup…adding began "

434 + 
Ãw
 
	`D©e
().
	`toSŒšg
(è+ " fÜ " + 
tmpTime
 + " seconds";

435 
JBBut
.
	`g‘Log
().
	`šfo
(
msg
);

436 
Sy¡em
.
out
.
	`´šn
(
msg
);

437 
JBBut
.
	`SecÚdsToSË•
((è
tmpTime
);

439 ià(
¿mpup_time
 > 0) {

440 
msg
 = "U£¸Th»ad Rampu°begª " + 
Ãw
 
	`D©e
().
	`toSŒšg
() + " for "

441 + 
df
.
	`fÜm©
(
¿mpup_time
 / 60.) + " minutes";

442 
JBBut
.
	`g‘Log
().
	`šfo
(
msg
);

443 
Sy¡em
.
out
.
	`´šn
(
msg
);

444 
JBBut
.
	`SecÚdsToSË•
((è
¿mpup_time
);

446 ià(
m—su»m’t_time
 > 0) {

447 
msg
 = "Timšg M—su»m’ˆbegª " + 
Ãw
 
	`D©e
().
	`toSŒšg
() + " for "

448 + 
df
.
	`fÜm©
(
m—su»m’t_time
 / 60.) + " minutes";

449 
	`£ŒunMode
(
runModes
.
RECORDING
);

450 
¡¬t_time
 = 
Sy¡em
.
	`cu¼’tTimeMlis
();

451 
JBBut
.
	`g‘Log
().
	`šfo
(
msg
);

452 
Sy¡em
.
out
.
	`´šn
(
msg
);

454 
JBBut
.
	`SecÚdsToSË•
((è
m—su»m’t_time
);

456 
’d_time
 = 
Sy¡em
.
	`cu¼’tTimeMlis
();

457 
msg
 = "Timšg M—su»m’ˆ’ded " + 
Ãw
 
	`D©e
().
	`toSŒšg
();

458 
JBBut
.
	`g‘Log
().
	`šfo
(
msg
);

459 
Sy¡em
.
out
.
	`´šn
(
msg
);

460 ià(
JBBmaš
.
muÉiJVMMode
) {

461 
	`£ŒunMode
(
runModes
.
MULTI_RAMP
);

463 
tmpTime
 = (è
³r_jvm_w¬ehou£_¿mpdown
;

464 
msg
 = "User Thread Multi-JVM Rampdown…adding began "

465 + 
Ãw
 
	`D©e
().
	`toSŒšg
(è+ " fÜ " + 
tmpTime
 + " seconds";

466 
JBBut
.
	`g‘Log
().
	`šfo
(
msg
);

467 
Sy¡em
.
out
.
	`´šn
(
msg
);

468 
JBBut
.
	`SecÚdsToSË•
((è
tmpTime
);

469 
’d_¿mpdown_time
 = 
Sy¡em
.
	`cu¼’tTimeMlis
();

471 
	`£ŒunMode
(
runModes
.
RAMP_DOWN
);

472 
–­£d_time
 = 
’d_time
 - 
¡¬t_time
;

473 
Sy¡em
.
out
.
	`´šn
("");

474 
	`synchrÚized
 (
th»adsDÚeCouÁMÚ™Ü
) {

475 
th»adsDÚeCouÁ
 !ğ
MaxW¬ehou£s
) {

476 
Œy
 {

477 
th»adsDÚeCouÁMÚ™Ü
.
	`wa™
();

479 
	`ÿtch
 (
IÁ”ru±edExû±iÚ
 
e
) {

483 
	`£ŒunMode
(
runModes
.
STOP
);

484 
	`synchrÚized
 (
¡İTh»adsCouÁMÚ™Ü
) {

485 
¡İTh»adsCouÁ
 !ğ
MaxW¬ehou£s
) {

486 
Œy
 {

487 
¡İTh»adsCouÁMÚ™Ü
.
	`wa™
();

489 
	`ÿtch
 (
IÁ”ru±edExû±iÚ
 
e
) {

494 
outPrİFe
.
	`´šn
(
´İP»fix
 + "w¬ehou£s=" + 
MaxW¬ehou£s
);

495 ià(
JBBmaš
.
muÉiJVMMode
) {

496 
outPrİFe
.
	`´šn
(
´İP»fix
 + "start_rampup_time_milliseconds="

497 + 
¡¬t_¿mpup_time
);

498 
outPrİFe
.
	`´šn
(
´İP»fix
 + "end_rampdown_time_milliseconds="

499 + 
’d_¿mpdown_time
);

501 
outPrİFe
.
	`´šn
(
´İP»fix
 + "start_time_milliseconds="

502 + 
¡¬t_time
);

503 
outPrİFe
.
	`´šn
(
´İP»fix
 + "’d_time_mli£cÚds=" + 
’d_time
);

504 
outPrİFe


505 .
	`´šn
(
´İP»fix
 + "–­£d_mli£cÚds=" + 
–­£d_time
);

506 
Sy¡em
.
out
.
	`´šn
("");

507 
tÙ®_w¬ehou£_Œªs
 = 0;

508 
mš_Œª§ùiÚ_couÁ
 = 
LÚg
.
MAX_VALUE
;

509 
max_Œª§ùiÚ_couÁ
 = 
LÚg
.
MIN_VALUE
;

510 
w¬ehou£Id
 = 1; w¬ehou£Id <ğ
MaxW¬ehou£s
; warehouseId++) {

512 
w¬ehou£Tim”D©a
 = 
	`g‘Tim”D©aPŒ
(
w¬ehou£Id
);

513 
w¬ehou£Tim”D©a
.
	`ÿlcuÏ‹Re¥Ú£TimeSts
();

518 ià(
showW¬ehou£D‘a
)

519 
w¬ehou£Tim”D©a
.
	`´İResuÉs
(
´İP»fix
 + "warehouse_"

520 + 
w¬ehou£Id
 + ".", 
outPrİFe
);

521 
tÙ®_w¬ehou£_Œªs
 = 0;

522 
txÁy³
 = 0;xÁy³ < 
T¿n§ùiÚ
.
maxTxnTy³s
;xntype++) {

523 
tÙ®_w¬ehou£_Œªs
 +ğ
w¬ehou£Tim”D©a


524 .
	`g‘T¿n§ùiÚCouÁ
(
txÁy³
);

526 ià(
tÙ®_w¬ehou£_Œªs
 < 
mš_Œª§ùiÚ_couÁ
) {

527 
mš_Œª§ùiÚ_couÁ
 = 
tÙ®_w¬ehou£_Œªs
;

529 ià(
tÙ®_w¬ehou£_Œªs
 > 
max_Œª§ùiÚ_couÁ
) {

530 
max_Œª§ùiÚ_couÁ
 = 
tÙ®_w¬ehou£_Œªs
;

534 
Sy¡em
.
out
.
	`´šn
("Calculating„esults");

535 
com·nyTim”D©a
.
	`ÿlcuÏ‹Re¥Ú£TimeSts
();

536 
com·nyTim”D©a
.
	`di¥ÏyTh»adResuÉs
();

537 
diff
 = 
max_Œª§ùiÚ_couÁ
 - 
mš_Œª§ùiÚ_couÁ
;

538 
diff_pù
 = 100 * (è
diff
 / (è
max_Œª§ùiÚ_couÁ
;

539 
Sy¡em
.
out
.
	`´šn
("");

540 
Sy¡em
.
out
.
	`´šn
("Minimumransactions by‡ warehouse = "

541 + 
mš_Œª§ùiÚ_couÁ
);

542 
Sy¡em
.
out
.
	`´šn
("Maximumransactions by‡ warehouse = "

543 + 
max_Œª§ùiÚ_couÁ
);

544 
Sy¡em
.
out
.
	`´šn
("Difã»nû (th»ad s´—dèğ" + 
diff
 + " ("

545 + 
df
.
	`fÜm©
(
diff_pù
) + "%)");

546 
Sy¡em
.
out
.
	`´šn
("");

547 
com·nyTim”D©a
.
	`di¥ÏyResuÉs
(

548 ("COMPANY w™h " + 
MaxW¬ehou£s
 + " w¬ehou£ "), 
JBBut


549 .
	`cu¼’tTÙ®Mem
(), 
JBBut
.
	`cu¼’tF»eMem
());

550 
com·nyTim”D©a
.
	`´İResuÉs
(
´İP»fix
 + "com·ny.", 
outPrİFe
,

551 
JBBut
.
	`cu¼’tTÙ®Mem
(), JBBut.
	`cu¼’tF»eMem
());

552 
com·nyTim”D©a


553 .
	`´İTh»adResuÉs
(
´İP»fix
 + "com·ny.", 
outPrİFe
);

554 
outPrİFe
.
	`´šn
(
´İP»fix
 + "company.min_warehouse_transactions="

555 + 
mš_Œª§ùiÚ_couÁ
);

556 
outPrİFe
.
	`´šn
(
´İP»fix
 + "company.max_warehouse_transactions="

557 + 
max_Œª§ùiÚ_couÁ
);

558 ià(
T¿n§ùiÚ
.
¡—dyS‹Mem
) {

559 
	`ŒimOrd”sFÜS‹adyS‹
();

561 
	`£ŒunMode
(
runModes
.
DEFAULT_MODE
);

562 
	}
}

564 
public
 
synchrÚized
 
	$lßdW¬ehou£TabË
() {

565 
i
 = (è(
P»viousMaxW¬ehou£s
 + 1); i <ğ
MaxW¬ehou£s
; ++i) {

567 
W¬ehou£
 
ÃwW¬ehou£
 = 
Ãw
 
	`W¬ehou£
();

568 
ÃwW¬ehou£
.
	`š™W¬ehou£
(
this
, 
™emTabË
, 
i
);

569 
ÃwW¬ehou£
.
	`£tUsšgRªdom
(
i
);

570 
w¬ehou£TabË
[
i
] = 
ÃwW¬ehou£
;

571 
Tim”D©a
 
ÃwTim”D©a
 = 
Ãw
 
	`Tim”D©a
();

572 
tim”d©aTabË
[
i
] = 
ÃwTim”D©a
;

574 
	}
}

576 
public
 
synchrÚized
 
	$lßdCu¡om”TabË
() {

579 
cu¡om”Id
;

580 
cu¡om”s_lßded
 = 0;

582 
w¬ehou£Id
 = (è(
P»viousMaxW¬ehou£s
 + 1); w¬ehou£Id <ğ
MaxW¬ehou£s
; ++warehouseId) {

584 
by‹
 
di¡riùId
 = 1; di¡riùId <ğ
MaxDi¡riùsP”W¬ehou£
; ++districtId) {

586 
cu¡om”Id
 = 1; cu¡om”Id <ğ
MaxCu¡om”sP”Di¡riù
; ++customerId) {

589 
Cu¡om”
 
ÃwCu¡om”
 = 
Ãw
 
	`Cu¡om”
();

590 
ÃwCu¡om”
.
	`£tUsšgRªdom
(
cu¡om”Id
, 
w¬ehou£Id
,

591 
di¡riùId
);

592 
uniqueCu¡om”Numb”
 = 
	`budUniqueCu¡om”Key
(

593 
w¬ehou£Id
, 
di¡riùId
, 
cu¡om”Id
);

594 
cu¡om”TabË
.
	`put
(
uniqueCu¡om”Numb”
, 
ÃwCu¡om”
);

595 
SŒšg
 
cu¡NameKey
 = 
IÁeg”
.
	`toSŒšg
((è
w¬ehou£Id
)

596 + "_" + 
IÁeg”
.
	`toSŒšg
((è
di¡riùId
) + "_"

597 + 
ÃwCu¡om”
.
	`g‘La¡Name
() + "_"

598 + 
IÁeg”
.
	`toSŒšg
((è
cu¡om”Id
);

599 
Ï¡NameCu¡om”TabË


600 .
	`put
(
cu¡NameKey
, 
uniqueCu¡om”Numb”
);

601 ià(
JBBut
.
	`g‘Log
().
	`isLoggabË
(
Lev–
.
FINEST
)) {

602 
Logg”
 
log
 = 
JBBut
.
	`g‘Log
();

603 
log
.
	`fše¡
("Company::loadCustomerTable");

604 
log
.
	`fše¡
("‚ewCu¡om”=" + 
ÃwCu¡om”
);

605 
log
.
	`fše¡
(" cu¡om”Id=" + 
cu¡om”Id
);

606 
log
.
	`fše¡
(" di¡riùId=" + 
di¡riùId
);

607 
log
.
	`fše¡
(" w¬ehou£Id=" + 
w¬ehou£Id
);

608 
log
.
	`fše¡
(" uniqueCustomerNumber="

609 + 
uniqueCu¡om”Numb”
);

610 
log
.
	`fše¡
(" cu¡NameKey=" + 
cu¡NameKey
);

613 
cu¡om”s_lßded
 +ğ
cu¡om”Id
 - 1;

616 
	}
}

618 
public
 
	$£ŒunMode
(
runModes
 
šmode
) {

620 
T¿n§ùiÚMªag”
 
tm
;

621 
i
 = 0; i < 
w¬ehou£Th»ads
.
	`size
(); i++) {

622 
tm
 = (
T¿n§ùiÚMªag”
è
w¬ehou£Th»ads
.
	`g‘
(
i
);

623 
tm
.
	`£ŒunMode
(
šmode
);

625 
mode
 = 
šmode
;

626 
	}
}

628 
public
 
synchrÚized
 
	$lßdI‹mTabË
() {

629 
i
 = 1; i <ğ
MaxI‹ms
; ++i) {

630 
I‹m
 
ªI‹m
 = 
Ãw
 
	`I‹m
();

631 
ªI‹m
.
	`£tUsšgRªdom
(
i
);

632 
™emTabË
.
	`put
(
i
, 
ªI‹m
);

634 
	}
}

636 
public
 
synchrÚized
 
	$dumpW¬ehou£TabË
() {

637 
	}
}

639 
public
 
synchrÚized
 
	$dumpCu¡om”TabË
() {

640 
	}
}

642 
public
 
synchrÚized
 
	$dumpI‹mTabË
() {

643 
	}
}

645 
public
 
synchrÚized
 
	$lßdW¬ehou£Hi¡ÜyTabË
() {

646 
i
 = (è(
P»viousMaxW¬ehou£s
 + 1); i <ğ
MaxW¬ehou£s
; ++i) {

647 ((
W¬ehou£
è
w¬ehou£TabË
[
i
]).
	`lßdHi¡ÜyTabË
();

649 
	}
}

651 
public
 
synchrÚized
 
	$lßdIn™ŸlOrd”s
() {

653 
w¬ehou£Id
 = (è(
P»viousMaxW¬ehou£s
 + 1); w¬ehou£Id <ğ
MaxW¬ehou£s
; ++warehouseId) {

654 
NewOrd”T¿n§ùiÚ
 
ÃwOrd”T¿n§ùiÚ
 = 
Ãw
 
	`NewOrd”T¿n§ùiÚ
(

655 
this
, 
w¬ehou£Id
);

657 
by‹
 
di¡riùId
 = 1; di¡riùId <ğ
MaxDi¡riùsP”W¬ehou£
; ++districtId) {

659 
cu¡om”Id
 = 1; cu¡om”Id <ğ
MaxCu¡om”sP”Di¡riù
; ++customerId) {

660 
ÃwOrd”T¿n§ùiÚ
.
	`š™
();

661 
ÃwOrd”T¿n§ùiÚ
.
	`£tDi¡riùªdCu¡om”
(
di¡riùId
,

662 
cu¡om”Id
);

663 
ÃwOrd”T¿n§ùiÚ
.
	`´oûssP»lßdedOrd”s
();

667 
	}
}

669 
	$£tPrİOuutP»fix
(
SŒšg
 
s
) {

670 
´İP»fix
 = 
s
;

671 
	}
}

	@spec/jbb/Controller.java

7 
·ckage
 
	g¥ec
.
	gjbb
;

9 
impÜt
 
	gjava
.
	gio
.*;

10 
impÜt
 
	gjava
.
	gÃt
.*;

12 
public
 cÏs 
	cCÚŒŞËr
 {

14 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

19 
´iv©e
 
	mpÜt
 = 1500;

21 
´iv©e
 
SŒšg
 
	mho¡
 = "localhost";

23 
´iv©e
 
SŒšg
 
	mdeçuÉOuutDœ
 = 
JBBmaš
.
deçuÉOuutDœ
;

25 
´iv©e
 
SŒšg
 
	mouutDœ
 = 
nuÎ
;

27 
´iv©e
 
SŒšg
 
	m´İFe
 = 
JBBmaš
.
deçuÉPrİsFeName
;

29 
´iv©e
 
SŒšg
 
	mrunOuutSubDœ
 = 
nuÎ
;

31 
´iv©e
 [] 
	m£qu’ûOfW¬ehou£s
;

33 
´iv©e
 
	mnumIn¡
 = 1;

35 
´iv©e
 
	$»adPrİ”t›s
() {

36 
JBBPrİ”t›s
 
´İ
 = 
Ãw
 
	`JBBPrİ”t›s
(
´İFe
);

37 ià(!
´İ
.
	`g‘Prİs
()) {

38 
Sy¡em
.
out


39 .
	`´šn
("ERROR: Properties Fileƒrror;…lease start‡gain");

43 
ouutDœ
 = 
´İ
.
	`g‘O±iÚ®Prİ”ty
("input.output_directory");

44 ià(
ouutDœ
 =ğ
nuÎ
) {

45 
ouutDœ
 = 
deçuÉOuutDœ
;

48 
i
 = 0;

49 
£qL’
;

50 ià(
´İ
.
£qu’ûOfW¬ehou£s
 =ğ
nuÎ
) {

51 
£qL’
 = (
´İ
.
’dšgNumb”W¬ehou£s
 -…rİ.
¡¬tšgNumb”W¬ehou£s
)

52 / 
´İ
.
šüem’tNumb”W¬ehou£s
 + 1;

53 
£qu’ûOfW¬ehou£s
 = 
Ãw
 [
£qL’
];

54 
num_wh
 = 
´İ
.
¡¬tšgNumb”W¬ehou£s
;‚um_wh <ğ´İ.
’dšgNumb”W¬ehou£s
;‚um_wh +ğ´İ.
šüem’tNumb”W¬ehou£s
) {

55 
£qu’ûOfW¬ehou£s
[
i
] = 
num_wh
;

56 
i
++;

60 
£qL’
 = 
´İ
.
£qu’ûOfW¬ehou£s
.
Ëngth
;

61 
£qu’ûOfW¬ehou£s
 = 
Ãw
 [
£qL’
];

62 
£qu’ûOfW¬ehou£s
 = 
´İ
.sequenceOfWarehouses;

65 
numIn¡
 = 
´İ
.
jvm_š¡ªûs
;

68 
´iv©e
 
	$£tOuutDœeùÜy
() {

69 
RunSequ’ûr
 
subdœRs
 = 
Ãw
 
	`RunSequ’ûr
(
ouutDœ
, "SPECjbbMultiJVM.",

70 
nuÎ
);

71 
runOuutSubDœ
 = 
ouutDœ
 + 
Fe
.
£·¿tÜ
 + "SPECjbbMultiJVM."

72 + 
subdœRs
.
	`g‘SeqSŒšg
();

73 ià(!
	`š™OuutDœ
(
runOuutSubDœ
)) {

76 
	}
}

78 
´iv©e
 
boŞ—n
 
	$š™OuutDœ
(
SŒšg
 
dœ
) {

79 
Fe
 
ouut_dœeùÜy_fe
 = 
Ãw
 
	`Fe
(
dœ
);

80 ià(
ouut_dœeùÜy_fe
.
	`exi¡s
()) {

82 ià(!
ouut_dœeùÜy_fe
.
	`isDœeùÜy
()) {

83 
Sy¡em
.
out


84 .
	`´šn
("ERROR: Specified input.output_directory is‚ot‡ directory: "

85 + 
dœ
);

86  
çl£
;

90 ià(!
ouut_dœeùÜy_fe
.
	`mkdœs
()) {

91 
Sy¡em
.
out


92 .
	`´šn
("ERROR: Cannot create input.output_directory: "

93 + 
dœ
);

94  
çl£
;

97  
Œue
;

98 
	}
}

100 
public
 
	$maš
(
SŒšg
 
¬gs
[]) {

101 
¬gIdx
 = 0;

102 
¬gIdx
 !ğ
¬gs
.
Ëngth
) {

103 ià(
¬gs
[
¬gIdx
].
	`m©ches
("-port")) {

104 
pÜt
 = 
IÁeg”
.
	`·r£IÁ
(
¬gs
[
¬gIdx
 + 1]);

105 
¬gIdx
 += 2;

107 ià(
¬gs
[
¬gIdx
].
	`m©ches
("-propfile")) {

108 
´İFe
 = 
¬gs
[
¬gIdx
 + 1];

109 
¬gIdx
 += 2;

112 
	`»adPrİ”t›s
();

113 
	`£tOuutDœeùÜy
();

114 
S”v”Sock‘
 
£rv”_soc
[] = 
Ãw
 S”v”Sock‘[
numIn¡
 + 1];

115 
Sock‘
 
soc
[] = 
Ãw
 Sock‘[
numIn¡
 + 1];

116 
Bufã»dR—d”
 
socIn
[] = 
Ãw
 Bufã»dR—d”[
numIn¡
 + 1];

117 
PrštWr™”
 
socOut
[] = 
Ãw
 PrštWr™”[
numIn¡
 + 1];

118 
Œy
 {

120 
i
 = 1; i <ğ
numIn¡
; ++i) {

121 
£rv”_soc
[
i
] = 
Ãw
 
	`S”v”Sock‘
(
pÜt
 + i);

125 
soc
[
i
] = 
£rv”_soc
[i].
	`acû±
();

126 
Sy¡em
.
out
.
	`´šn
("Acû±ed cl›Á " + 
soc
[
i
].
	`g‘IÃtAdd»ss
()

127 + ":" + 
soc
[
i
].
	`g‘PÜt
());

128 
socIn
[
i
] = 
Ãw
 
	`Bufã»dR—d”
Òew 
	`IÅutSŒ—mR—d”
(
soc
[i]

129 .
	`g‘IÅutSŒ—m
()));

130 
socOut
[
i
] = 
Ãw
 
	`PrštWr™”
Òew 
	`OuutSŒ—mWr™”
(
soc
[i]

131 .
	`g‘OuutSŒ—m
()));

134 
£qndx
 = 0; seqndx < 
£qu’ûOfW¬ehou£s
.
Ëngth
; seqndx++) {

135 
wh
 = 
£qu’ûOfW¬ehou£s
[
£qndx
];

138 
i
 = 1; i <ğ
numIn¡
; ++i) {

140 
SŒšg
 
mesg
 = "NULL";

141 
SŒšg
 
ÃedMsg
 = 
i
 + ":READY";

142 !
mesg
.
	`m©ches
(
ÃedMsg
))

143 
mesg
 = 
socIn
[
i
].
	`»adLše
();

147 
i
 = 1; i <ğ
numIn¡
; ++i) {

149 
SŒšg
 
mesg
 = 
i
 + ":START";

150 
socOut
[
i
].
	`´šn
(
mesg
);

151 
socOut
[
i
].
	`æush
();

154 ià(
£qndx
 =ğ
£qu’ûOfW¬ehou£s
.
Ëngth
 - 1) {

155 
Sy¡em
.
out
.
	`´šn
(
wh
 + " wh: Reading FINISHED state fromhe jbb instances");

156 
i
 = 1; i <ğ
numIn¡
; ++i) {

157 
Sy¡em
.
out
.
	`´šn
("Wa™šg fÜ FINISHED from " + 
i
);

158 
SŒšg
 
mesg
 = "NULL";

159 
SŒšg
 
ÃedMsg
 = 
i
 + ":FINISHED";

160 
SŒšg
 
ex™Msg
 = 
i
 + ":EXIT";

161 !
mesg
.
	`m©ches
(
ÃedMsg
))

162 
mesg
 = 
socIn
[
i
].
	`»adLše
();

163 
socOut
[
i
].
	`´šn
(
ex™Msg
);

164 
Sy¡em
.
out
.
	`´šn
("GÙ"+ 
mesg
);

170 
Sy¡em
.
out
.
	`´šn
("Waiting 20 seconds for‡ll jvm instanceoƒxit");

172 
Sy¡em
.
out


173 .
	`´šn
("Received FINISHED from‡ll jvm instances,‚ow summarizehe„eports...");

175 
boŞ—n
 
İts
 = 
çl£
;

176 
SŒšg
 
İŠ
 = 
nuÎ
;

177 
boŞ—n
 
İth
 = 
çl£
;

178 
boŞ—n
 
İ‹
 = 
Œue
;

179 
¥ec
.
»pÜ‹r
.
MuÉiVMR•Üt
 
r
 = 
Ãw
 s³c.»pÜ‹r.
	`MuÉiVMR•Üt
(

180 
runOuutSubDœ
, 
İts
, 
İŠ
, 
İth
, 
İ‹
);

181 
r
.
	`´št
(
runOuutSubDœ
 + 
Fe
.
£·¿tÜ
 + "index.html");

182 
¥ec
.
»pÜ‹r
.
MuÉiVMTxtR•Üt
 
¬
 = 
Ãw
 s³c.»pÜ‹r.
	`MuÉiVMTxtR•Üt
(

183 
İŠ
, 
runOuutSubDœ
, 
İts
);

184 
¬
.
	`´št
(
runOuutSubDœ
 + 
Fe
.
£·¿tÜ
 + "MultiVMReport.txt");

185 
Sy¡em
.
out
.
	`´šn
("benchmark„un complete.");

186 
Sy¡em
.
	`ex™
(0);

188 
	`ÿtch
 (
Exû±iÚ
 
exûp
) {

189 
Sy¡em
.
”r
.
	`´šn
(
exûp
 + ":ƒrror");

190 
Sy¡em
.
	`ex™
(1);

192 
	}
}

	@spec/jbb/Customer.java

1  
·ckage
 
	g¥ec
.
	gjbb
; 
impÜt
 
	gjava
.
	gm©h
.
	gBigDecim®
; impÜˆjava.
	gut
.*; 
public
 cÏs 
	cCu¡om”
 {

	@spec/jbb/CustomerReportTransaction.java

7 
·ckage
 
	g¥ec
.
	gjbb
;

9 
impÜt
 
	g¥ec
.
	gjbb
.
	gšäa
.
	gUt
.
	gT¿n§ùiÚLogBufãr
;

10 
impÜt
 
	g¥ec
.
	gjbb
.
	gšäa
.
	gUt
.
	gXMLT¿n§ùiÚLog
;

11 
impÜt
 
	gjava
.
	gm©h
.
	gBigDecim®
;

12 
impÜt
 
	gjava
.
	gut
.*;

14 şas 
	cCu¡om”R•ÜtT¿n§ùiÚ
 
ex‹nds
 
	mT¿n§ùiÚ
 {

16 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

23 
´iv©e
 
Com·ny
 
	mcom·ny
;

25 
´iv©e
 
	mw¬ehou£Id
;

27 
´iv©e
 
by‹
 
	mdi¡riùId
;

29 
´iv©e
 
boŞ—n
 
	mhome
;

31 
´iv©e
 
	mu£_cu¡om”Id
;

33 
´iv©e
 
SŒšg
 
	mcu¡_Ï¡_Çme
;

35 
´iv©e
 
	mcu¡om”Id
;

37 
´iv©e
 
	mcu¡om”W¬ehou£Id
;

39 
´iv©e
 
by‹
 
	mcu¡om”Di¡riùId
;

41 
´iv©e
 
D©e
 
	m»pÜtTime
;

43 
´iv©e
 
W¬ehou£
 
	mw¬ehou£PŒ
;

45 
´iv©e
 
Di¡riù
 
	mdi¡riùPŒ
;

47 
´iv©e
 
Cu¡om”
 
	mcu¡om”PŒ
;

49 
´iv©e
 
T¿n§ùiÚLogBufãr
 
	mš™Log
;

51 
´iv©e
 
T¿n§ùiÚLogBufãr
 
	mcu¡om”Log
;

53 
´iv©e
 
XMLT¿n§ùiÚLog
 
	mxmlCu¡om”Log
;

55 
	mÏ¡Paym’tsQuªt™y
 = 5;

57 
	mÏ¡Ord”sQuªt™y
 = 5;

59 
D©e
 
	m·ym’tD©es
[] = 
Ãw
 D©e[
Ï¡Paym’tsQuªt™y
];

61 
BigDecim®
 
	m·ym’tAmouÁ
[] = 
Ãw
 BigDecim®[
Ï¡Paym’tsQuªt™y
];

63 
D©e
 
	mÜd”D©es
[] = 
Ãw
 D©e[
Ï¡Ord”sQuªt™y
];

65 
BigDecim®
 
	mÜd”AmouÁ
[] = 
Ãw
 BigDecim®[
Ï¡Ord”sQuªt™y
];

67 
	mSŒšg
[] 
	mv®id©iÚSü“n
 = {

91 
	gboŞ—n
[] 
	gcheckLše
 = {

92 
Œue
, 
çl£
,rue,rue,rue,rue,rue,rue,rue, false,rue,

93 
Œue
,rue, 
çl£
, false, false, false, false,rue, false,rue,

94 
Œue
,rue,rue

97 
public
 
	$Cu¡om”R•ÜtT¿n§ùiÚ
(
Com·ny
 
šCom·ny
, 
šW¬ehou£Id
) {

98 
com·ny
 = 
šCom·ny
;

99 
w¬ehou£Id
 = 
šW¬ehou£Id
;

100 
w¬ehou£PŒ
 = 
com·ny
.
	`g‘W¬ehou£PŒ
(
w¬ehou£Id
, 
çl£
);

101 
cu¡om”Log
 = 
Ãw
 
	`T¿n§ùiÚLogBufãr
();

102 
	`£tupCu¡om”Log
();

103 
xmlCu¡om”Log
 = 
Ãw
 
	`XMLT¿n§ùiÚLog
();

104 
š™Log
 = 
Ãw
 
	`T¿n§ùiÚLogBufãr
(
cu¡om”Log
);

105 
	`£tupIn™Log
();

106 
	}
}

108 
´iv©e
 
	$£tupCu¡om”Log
() {

109 
cu¡om”Log
.
	`putText
("CUSTOMER REPORT", 33, 0, 15);

110 
cu¡om”Log
.
	`putText
("Date:", 0, 1, 5);

111 
cu¡om”Log
.
	`putText
("Warehouse:", 0, 3, 10);

112 
cu¡om”Log
.
	`putText
("District:", 41, 3, 9);

113 
cu¡om”Log
.
	`putText
("Customer:", 0, 8, 9);

114 
cu¡om”Log
.
	`putText
("Cust-Warehouse:", 16, 8, 15);

115 
cu¡om”Log
.
	`putText
("Cust-District:", 38, 8, 14);

116 
cu¡om”Log
.
	`putText
("Name:", 0, 9, 5);

117 
cu¡om”Log
.
	`putText
("Since:", 49, 9, 6);

118 
cu¡om”Log
.
	`putText
("Credit:", 49, 10, 7);

119 
cu¡om”Log
.
	`putText
("%Disc:", 49, 11, 6);

120 
cu¡om”Log
.
	`putText
("Last…ayments", 0, 12, 13);

121 
cu¡om”Log
.
	`putText
("Date:", 22, 12, 5);

122 
cu¡om”Log
.
	`putText
("Amount:", 46, 12, 7);

123 
cu¡om”Log
.
	`putText
("Last orders", 0, 18, 11);

124 
cu¡om”Log
.
	`putText
("Date:", 22, 18, 5);

125 
cu¡om”Log
.
	`putText
("Amount:", 46, 18, 7);

126 
	}
}

128 
´iv©e
 
	$£tupIn™Log
() {

129 
i
;

130 
š™Log
.
	`putText
("DD-MM-YYYY", 6, 1, 10);

131 
š™Log
.
	`putText
("hh:mm:ss", 17, 1, 8);

132 
š™Log
.
	`putCh¬Fl
('9', 11, 3, 4);

133 
š™Log
.
	`putCh¬Fl
('9', 51, 3, 2);

134 
š™Log
.
	`putCh¬Fl
('X', 0, 4, 20);

135 
š™Log
.
	`putCh¬Fl
('X', 41, 4, 20);

136 
š™Log
.
	`putCh¬Fl
('X', 0, 5, 20);

137 
š™Log
.
	`putCh¬Fl
('X', 41, 5, 20);

138 
š™Log
.
	`putCh¬Fl
('X', 0, 6, 20);

139 
š™Log
.
	`putCh¬Fl
('X', 21, 6, 2);

140 
š™Log
.
	`putText
("XXXXX-XXXX", 24, 6, 10);

141 
š™Log
.
	`putCh¬Fl
('X', 41, 6, 20);

142 
š™Log
.
	`putCh¬Fl
('X', 62, 6, 2);

143 
š™Log
.
	`putText
("XXXXX-XXXX", 65, 6, 10);

144 
š™Log
.
	`putCh¬Fl
('9', 10, 8, 4);

145 
š™Log
.
	`putCh¬Fl
('9', 32, 8, 4);

146 
š™Log
.
	`putCh¬Fl
('9', 53, 8, 2);

147 
š™Log
.
	`putCh¬Fl
('X', 8, 9, 16);

148 
š™Log
.
	`putCh¬Fl
('X', 25, 9, 2);

149 
š™Log
.
	`putCh¬Fl
('X', 28, 9, 16);

150 
š™Log
.
	`putText
("DD-MM-YYYY", 57, 9, 10);

151 
š™Log
.
	`putCh¬Fl
('X', 8, 10, 20);

152 
š™Log
.
	`putCh¬Fl
('X', 57, 10, 2);

153 
š™Log
.
	`putCh¬Fl
('X', 8, 11, 20);

154 
š™Log
.
	`putText
("99.99", 57, 11, 5);

155 
i
 = 0; i < 5; i++) {

156 
š™Log
.
	`putText
("DD-MM-YYYY", 22, 13 + 
i
, 10);

157 
š™Log
.
	`putText
("hh:mm:ss", 33, 13 + 
i
, 8);

158 
š™Log
.
	`putText
("$9999.99", 45, 13 + 
i
, 8);

160 
i
 = 0; i < 5; i++) {

161 
š™Log
.
	`putText
("DD-MM-YYYY", 22, 19 + 
i
, 10);

162 
š™Log
.
	`putText
("hh:mm:ss", 33, 19 + 
i
, 8);

163 
š™Log
.
	`putText
("$9999.99", 45, 19 + 
i
, 8);

165 
	}
}

167 
public
 
SŒšg
 
	$g‘M’uName
() {

169 
	}
}

171 
public
 
synchrÚized
 
	$d–‘e
() {

172 
	}
}

174 
public
 
synchrÚized
 
	$š™
() {

175 
JBBut
.
	`g‘Log
().
	`’‹ršg
("spec.jbb.CustomerReportTransaction", "init");

176 
di¡riùId
 = (
by‹
è
JBBut
.
	`¿ndom
(1, 
com·ny


177 .
	`g‘MaxDi¡riùsP”W¬ehou£
(), 
w¬ehou£Id
);

178 
di¡riùPŒ
 = 
w¬ehou£PŒ
.
	`g‘Di¡riùPŒ
(
di¡riùId
, 
çl£
);

179 
x
 = (è
JBBut
.
	`¿ndom
(1, 100, 
w¬ehou£Id
);

180 
y
 = (è
JBBut
.
	`¿ndom
(1, 100, 
w¬ehou£Id
);

181 ià(
y
 <= 60) {

182 
cu¡_Ï¡_Çme
 = 
JBBut
.
	`choo£_¿ndom_Ï¡_Çme
(
com·ny


183 .
	`g‘MaxCu¡om”sP”Di¡riù
(), 
w¬ehou£Id
);

184 
u£_cu¡om”Id
 = 'F';

187 
cu¡om”Id
 = 
JBBut
.
	`ü—‹_¿ndom_cu¡om”_id
(
com·ny


188 .
	`g‘MaxCu¡om”sP”Di¡riù
(), 
w¬ehou£Id
);

189 
u£_cu¡om”Id
 = 'T';

191 ià(
x
 <= 85) {

192 
cu¡om”Di¡riùId
 = 
di¡riùId
;

193 
cu¡om”W¬ehou£Id
 = 
w¬ehou£Id
;

196 
cu¡om”Di¡riùId
 = (
by‹
è
JBBut
.
	`¿ndom
(1, 
com·ny


197 .
	`g‘MaxDi¡riùsP”W¬ehou£
(), 
w¬ehou£Id
);

198 
maxW¬ehou£s
 = 
com·ny
.
	`g‘MaxW¬ehou£s
();

199 
cu¡om”W¬ehou£Id
 = (è
JBBut
.
	`¿ndom
(1, 
maxW¬ehou£s
,

200 
w¬ehou£Id
); (
cu¡om”W¬ehou£Id
 == warehouseId)

201 && (
maxW¬ehou£s
 > 1); 
cu¡om”W¬ehou£Id
 = (è
JBBut


202 .
	`¿ndom
(1, 
maxW¬ehou£s
, 
w¬ehou£Id
))

205 
home
 = (
cu¡om”W¬ehou£Id
 =ğ
w¬ehou£Id
);

206 
JBBut
.
	`g‘Log
().
	`ex™šg
("spec.jbb.CustomerReportTransaction", "init");

207 
	}
}

209 
public
 
boŞ—n
 
	$´oûss
() {

210 
JBBut
.
	`g‘Log
().
	`’‹ršg
("spec.jbb.CustomerReportTransaction",

212 
SŒšg
 
w¬ehou£Çme
 = 
w¬ehou£PŒ
.
	`g‘Name
();

213 
u£_cu¡om”Id
) {

215 
uniqueCu¡om”Id
 = 
com·ny
.
	`budUniqueCu¡om”Key
(

216 
cu¡om”W¬ehou£Id
, 
cu¡om”Di¡riùId
, 
cu¡om”Id
);

218 
cu¡om”PŒ
 = 
com·ny
.
	`g‘Cu¡om”
(
uniqueCu¡om”Id
, 
Œue
);

223 
cu¡om”PŒ
 = 
com·ny


224 .
	`g‘Cu¡om”ByLa¡Name
(
cu¡om”W¬ehou£Id
,

225 
cu¡om”Di¡riùId
, 
cu¡_Ï¡_Çme
);

227 ià(
cu¡om”PŒ
 =ğ
nuÎ
) {

230 
JBBD©aStÜage
 
hi¡ÜyTabË
 = 
w¬ehou£PŒ
.
	`g‘Hi¡ÜyTabË
();

231 
I‹¿tÜ
 
hi¡ÜyI‹r
 = 
hi¡ÜyTabË
.
	`–em’ts
();

232 
Hi¡Üy
 
hi¡Üy
;

233 
Hi¡Üy
 
·ym’ts
[] = 
Ãw
 Hi¡Üy[
hi¡ÜyTabË
.
	`size
()];

234 
hi¡CouÁ
 = 0;

235 
i
 = 0;

236 
hi¡ÜyI‹r
.
	`hasNext
()) {

237 
hi¡Üy
 = (
Hi¡Üy
è
hi¡ÜyI‹r
.
	`Ãxt
();

238 ià(
hi¡Üy
.
	`g‘Cu¡om”Id
(è=ğ
cu¡om”PŒ
.
	`g‘Id
()) {

239 
hi¡CouÁ
++;

240 
·ym’ts
[
hi¡CouÁ
] = 
hi¡Üy
;

243 
i
 = 
hi¡CouÁ
; i > 0; i--) {

244 ià(
hi¡CouÁ
 - 
i
 < 
Ï¡Paym’tsQuªt™y
) {

245 
·ym’tD©es
[
hi¡CouÁ
 - 
i
] = 
·ym’ts
[i].
	`g‘D©e
();

246 
·ym’tAmouÁ
[
hi¡CouÁ
 - 
i
] = 
·ym’ts
[i].
	`g‘AmouÁ
();

252 
JBBD©aStÜage
 
Üd”TabË
 = 
di¡riùPŒ
.
	`g‘Ord”TabË
();

253 
I‹¿tÜ
 
Üd”I‹r
 = 
Üd”TabË
.
	`–em’ts
();

254 
Ord”
 
Üd”
;

255 
Ord”
 
Ï¡Ord”s
[] = 
Ãw
 Ord”[
Üd”TabË
.
	`size
()];

256 
Üd”CouÁ
 = 0;

257 
Ï¡Ord”sQuªt™y
 = 5;

258 
Üd”I‹r
.
	`hasNext
()) {

259 
Üd”
 = (
Ord”
è
Üd”I‹r
.
	`Ãxt
();

260 ià(
Üd”
.
	`g‘Cu¡om”PŒ
(è=ğ
cu¡om”PŒ
) {

261 
Üd”CouÁ
++;

262 
Ï¡Ord”s
[
Üd”CouÁ
] = 
Üd”
;

265 
i
 = 
Üd”CouÁ
; i > 0; i--) {

266 ià(
Üd”CouÁ
 - 
i
 < 
Ï¡Ord”sQuªt™y
) {

267 
Üd”D©es
[
Üd”CouÁ
 - 
i
] = 
Ï¡Ord”s
[i].
	`g‘EÁryTime
();

268 
Üd”AmouÁ
[
Üd”CouÁ
 - 
i
] = 
Ï¡Ord”s
[i]

269 .
	`g‘TÙ®AmouÁ
();

275 
»pÜtTime
 = 
Ãw
 
	`D©e
();

278 
JBBut
.
	`g‘Log
().
	`ex™šg
("spec.jbb.CustomerReportTransaction",

280  
Œue
;

281 
	}
}

283 
public
 
synchrÚized
 
	$di¥Ïy
() {

284 
Sy¡em
.
out
.
	`´šn
("CustomerTransaction Display *********************");

285 
Sy¡em
.
out
.
	`´šn
("W¬ehou£ ID i " + 
w¬ehou£Id


287 
Sy¡em
.
out
.
	`´šn
("Di¡riù ID i " + 
di¡riùId


289 
Sy¡em
.
out
.
	`´šn
("Cu¡om” ID i " + 
cu¡om”Id


291 
Sy¡em
.
out


292 .
	`´šn
("**************************************************");

293 
	}
}

295 
public
 
synchrÚized
 
	$š™ŸlizeT¿n§ùiÚLog
() {

323 
JBBut
.
	`g‘Log
().
	`’‹ršg
("spec.jbb.CustomerReportTransaction",

325 ià(
T¿n§ùiÚ
.
’abËLogWr™e
)

326 
š™Log
.
	`di¥Ïy
();

327 
JBBut
.
	`g‘Log
().
	`ex™šg
("spec.jbb.CustomerReportTransaction",

329 
	}
}

331 
public
 
synchrÚized
 
	$´oûssT¿n§ùiÚLog
() {

332 
JBBut
.
	`g‘Log
().
	`’‹ršg
("spec.jbb.CustomerReportTransaction",

334 
cu¡om”Log
.
	`ş—rBufãr
();

335 
xmlCu¡om”Log
.
	`ş—r
();

336 
	`£tupCu¡om”Log
();

337 
Add»ss
 
w¬e_addr
 = 
w¬ehou£PŒ
.
	`g‘Add»ss
();

338 
Add»ss
 
di¡_addr
 = 
di¡riùPŒ
.
	`g‘Add»ss
();

339 
SŒšg
 
phÚe
;

340 
SŒšg
 
z
;

345 
cu¡om”Log
.
	`putD©e
(
»pÜtTime
, 6, 1, 10);

346 
cu¡om”Log
.
	`putTime
(
»pÜtTime
, 17, 1, 8);

348 
cu¡om”Log
.
	`putIÁ
(
w¬ehou£Id
, 11, 3, 4);

349 
cu¡om”Log
.
	`putIÁ
(
di¡riùId
, 51, 3, 2);

351 
cu¡om”Log
.
	`putText
(
w¬e_addr
.
	`g‘SŒ“t1
(), 0, 4, 20);

352 
cu¡om”Log
.
	`putText
(
di¡_addr
.
	`g‘SŒ“t1
(), 41, 4, 20);

354 
cu¡om”Log
.
	`putText
(
w¬e_addr
.
	`g‘SŒ“t2
(), 0, 5, 20);

355 
cu¡om”Log
.
	`putText
(
di¡_addr
.
	`g‘SŒ“t2
(), 41, 5, 20);

358 
cu¡om”Log
.
	`putText
(
w¬e_addr
.
	`g‘C™y
(), 0, 6, 20);

359 
cu¡om”Log
.
	`putText
(
w¬e_addr
.
	`g‘S‹
(), 21, 6, 2);

360 
z
 = 
w¬e_addr
.
	`g‘Z
();

361 
cu¡om”Log
.
	`putSub¡ršg
(
z
, 24, 6, 0, 5);

362 
cu¡om”Log
.
	`putCh¬
('-', 29, 6);

363 
cu¡om”Log
.
	`putSub¡ršg
(
z
, 30, 6, 5, 4);

364 
cu¡om”Log
.
	`putText
(
di¡_addr
.
	`g‘C™y
(), 41, 6, 20);

365 
cu¡om”Log
.
	`putText
(
di¡_addr
.
	`g‘S‹
(), 62, 6, 2);

366 
z
 = 
di¡_addr
.
	`g‘Z
();

367 
cu¡om”Log
.
	`putSub¡ršg
(
z
, 65, 6, 0, 5);

368 
cu¡om”Log
.
	`putCh¬
('-', 70, 6);

369 
cu¡om”Log
.
	`putSub¡ršg
(
z
, 71, 6, 5, 4);

372 ià(
cu¡om”PŒ
 !ğ
nuÎ
) {

373 
Add»ss
 
cu¡_addr
 = 
cu¡om”PŒ
.
	`g‘Add»ss
();

374 
D©e
 
cu¡D©e
 = 
cu¡om”PŒ
.
	`g‘Sšû
();

375 
cu¡om”Log
.
	`putIÁ
(
cu¡om”PŒ
.
	`g‘Id
(), 10, 8, 4);

376 
cu¡om”Log
.
	`putIÁ
(
cu¡om”PŒ
.
	`g‘W¬ehou£Id
(), 32, 8, 4);

377 
cu¡om”Log
.
	`putIÁ
(
cu¡om”PŒ
.
	`g‘Di¡riùId
(), 53, 8, 2);

379 
cu¡om”Log
.
	`putText
(
cu¡om”PŒ
.
	`g‘Fœ¡Name
(), 8, 9, 16);

380 
cu¡om”Log
.
	`putText
(
cu¡om”PŒ
.
	`g‘MiddËName
(), 25, 9, 2);

381 
cu¡om”Log
.
	`putText
(
cu¡om”PŒ
.
	`g‘La¡Name
(), 28, 9, 16);

382 
cu¡om”Log
.
	`putD©e
(
cu¡D©e
, 57, 9, 10);

384 
cu¡om”Log
.
	`putText
(
cu¡_addr
.
	`g‘SŒ“t1
(), 8, 10, 20);

385 
cu¡om”Log
.
	`putText
(
cu¡om”PŒ
.
	`g‘C»d™Stus
(), 57, 10, 2);

387 
cu¡om”Log
.
	`putText
(
cu¡_addr
.
	`g‘SŒ“t2
(), 8, 11, 20);

388 
cu¡om”Log
.
	`putDoubË
(
cu¡om”PŒ
.
	`g‘DiscouÁR©e
().
	`movePoštRight
(

389 2).
	`toSŒšg
(), 57, 11, 5);

396 
i
 = 0; i < 
Ï¡Paym’tsQuªt™y
; i++) {

397 ià(
·ym’tD©es
[
i
] !ğ
nuÎ
) {

398 
cu¡om”Log
.
	`putD©e
(
·ym’tD©es
[
i
], 22, 13 + i, 10);

399 
cu¡om”Log
.
	`putTime
(
·ym’tD©es
[
i
], 33, 13 + i, 8);

400 
cu¡om”Log
.
	`putDŞÏrs
(
·ym’tAmouÁ
[
i
], 45, 13 + i, 8);

412 
i
 = 0; i < 
Ï¡Ord”sQuªt™y
; i++) {

413 ià(
Üd”D©es
[
i
] !ğ
nuÎ
) {

414 
cu¡om”Log
.
	`putD©e
(
Üd”D©es
[
i
], 22, 19 + i, 10);

415 
cu¡om”Log
.
	`putTime
(
Üd”D©es
[
i
], 33, 19 + i, 8);

416 
cu¡om”Log
.
	`putDŞÏrs
(
Üd”AmouÁ
[
i
], 45, 19 + i, 8);

424 
xmlCu¡om”Log
.
	`pİuÏ‹XML
(
cu¡om”Log
);

425 ià(
T¿n§ùiÚ
.
’abËLogWr™e
)

426 
cu¡om”Log
.
	`di¥Ïy
();

427 ià(
T¿n§ùiÚ
.
v®id©iÚFÏg
) {

428 
SŒšg
[] 
s
 = 
cu¡om”Log
.
	`v®id©e
();

429 ià(
s
.
Ëngth
 !ğ
v®id©iÚSü“n
.length) {

430 
Sy¡em
.
out


431 .
	`´šn
("VALIDATION ERROR: mismatch in screen†engths for CustomerReportTransaction");

432 
Sy¡em
.
out
.
	`´šn
(" Screen†ength should be: "

433 + 
v®id©iÚSü“n
.
Ëngth
);

434 
Sy¡em
.
out
.
	`´šn
(" Sü“ÀËngth is: " + 
s
.
Ëngth
);

435 
T¿n§ùiÚ
.
	`šv®id©eRun
();

437 
i
 = 0; i < 
v®id©iÚSü“n
.
Ëngth
; i++) {

438 ià(
checkLše
[
i
]) {

439 ià(!
s
[
i
].
	`equ®s
(
v®id©iÚSü“n
[i])) {

440 
Sy¡em
.
out


441 .
	`´šn
("VALIDATION ERROR: incorrect output for CustomerReportTransaction");

442 
Sy¡em
.
out
.
	`´šn
(" Lš" + (
i
 + 1)

443 + " should be: |" + 
v®id©iÚSü“n
[
i
] + "|");

444 
Sy¡em
.
out
.
	`´šn
(" Lš" + (
i
 + 1) + " is: |"

445 + 
s
[
i
] + "|");

446 
T¿n§ùiÚ
.
	`šv®id©eRun
();

451 
JBBut
.
	`g‘Log
().
	`ex™šg
("spec.jbb.CustomerReportTransaction",

453 
	}
}

	@spec/jbb/DeliveryHandler.java

6 
·ckage
 
	g¥ec
.
	gjbb
;

8 
impÜt
 
	gjava
.
	gÏng
.
	gSŒšg
;

9 
impÜt
 
	gjava
.
	gio
.
	gPrštSŒ—m
;

11 şas 
	cD–iv”yHªdËr
 {

13 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

20 
´iv©e
 
PrštSŒ—m
 
	moutFe
;

22 
public
 
	$D–iv”yHªdËr
(
PrštSŒ—m
 
ps
) {

23 
	`synchrÚized
 (
	`g‘CÏss
()) {

24 
outFe
 = 
ps
;

28 
public
 
	$hªdËD–iv”y
(
D–iv”yT¿n§ùiÚ
 
d–iv”yT¿n§ùiÚ
) {

30 
d–iv”yT¿n§ùiÚ
.
	`´•roûss
();

32 
d–iv”yT¿n§ùiÚ
.
	`di¥Ïy
(
outFe
);

33 
	}
}

	@spec/jbb/DeliveryTransaction.java

8 
·ckage
 
	g¥ec
.
	gjbb
;

10 
impÜt
 
	gjava
.
	gut
.*;

11 
impÜt
 
	gjava
.
	gio
.
	gPrštSŒ—m
;

12 
impÜt
 
	g¥ec
.
	gjbb
.
	gšäa
.
	gUt
.
	gT¿n§ùiÚLogBufãr
;

13 
impÜt
 
	g¥ec
.
	gjbb
.
	gšäa
.
	gUt
.
	gXMLT¿n§ùiÚLog
;

14 
impÜt
 
	gjava
.
	gm©h
.
	gBigDecim®
;

16 şas 
	cD–iv”yT¿n§ùiÚ
 
ex‹nds
 
	mT¿n§ùiÚ
 {

18 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

25 
´iv©e
 
Com·ny
 
	mcom·ny
;

27 
´iv©e
 
	mw¬ehou£Id
;

29 
´iv©e
 
	mÿ¼›rId
;

31 
´iv©e
 
D–iv”yHªdËr
 
	md–iv”yHªdËr
;

33 
´iv©e
 
W¬ehou£
 
	mw¬ehou£PŒ
;

35 
´iv©e
 
	md–iv”yTime
;

37 
´iv©e
 
T¿n§ùiÚLogBufãr
 
	md–iv”yLog
;

39 
´iv©e
 
T¿n§ùiÚLogBufãr
 
	mš™Log
;

41 
´iv©e
 
T¿n§ùiÚLogBufãr
 
	mqueuedLog
;

43 
´iv©e
 
XMLT¿n§ùiÚLog
 
	mxmlD–iv”yLog
;

45 
	mSŒšg
[] 
	mv®id©iÚLog
 = {

52 
	gboŞ—n
[] 
	gcheckLše
 = {

53 
Œue
,rue,rue,rue,rue,rue,rue,rue,rue,rue,rue,

54 
Œue
,rue,rue,rue,rue,rue,rue,rue,rue,rue,rue,

55 
Œue
,rue

58 
public
 
	$D–iv”yT¿n§ùiÚ
(
Com·ny
 
aCom·ny
, 
aW¬ehou£
) {

59 
com·ny
 = 
aCom·ny
;

60 
w¬ehou£Id
 = 
aW¬ehou£
;

61 
w¬ehou£PŒ
 = 
com·ny
.
	`g‘W¬ehou£PŒ
(
w¬ehou£Id
, 
çl£
);

62 
d–iv”yHªdËr
 = 
Ãw
 
	`D–iv”yHªdËr
(
aCom·ny
.
	`g‘OutD–iv”›sFe
());

63 
d–iv”yLog
 = 
Ãw
 
	`T¿n§ùiÚLogBufãr
();

64 
	`£tupD–iv”yLog
();

65 
xmlD–iv”yLog
 = 
Ãw
 
	`XMLT¿n§ùiÚLog
();

66 
š™Log
 = 
Ãw
 
	`T¿n§ùiÚLogBufãr
(
d–iv”yLog
);

67 
	`£tupIn™Log
();

68 
queuedLog
 = 
Ãw
 
	`T¿n§ùiÚLogBufãr
(16, 64);

69 
	}
}

71 
´iv©e
 
	$£tupD–iv”yLog
() {

72 
d–iv”yLog
.
	`putText
("Delivery", 37, 0, 8);

73 
d–iv”yLog
.
	`putText
("Warehouse:", 0, 1, 10);

74 
d–iv”yLog
.
	`putIÁ
(
w¬ehou£Id
, 11, 1, 4);

75 
d–iv”yLog
.
	`putText
("Carrier Number:", 0, 3, 15);

76 
d–iv”yLog
.
	`putText
("Execution Status:", 0, 5, 17);

77 
	}
}

79 
´iv©e
 
	$£tupIn™Log
() {

80 
š™Log
.
	`putCh¬Fl
('9', 16, 3, 2);

81 
š™Log
.
	`putCh¬Fl
('X', 18, 5, 25);

82 
	}
}

84 
public
 
SŒšg
 
	$g‘M’uName
() {

86 
	}
}

88 
public
 
	$d–‘e
() {

89 
	}
}

91 
public
 
	$š™
() {

92 
JBBut
.
	`g‘Log
().
	`’‹ršg
("spec.jbb.DeliveryTransaction", "init");

93 
ÿ¼›rId
 = (è
JBBut
.
	`¿ndom
(1, 10, 
w¬ehou£Id
);

94 
JBBut
.
	`g‘Log
().
	`ex™šg
("spec.jbb.DeliveryTransaction", "init");

95 
	}
}

97 
public
 
boŞ—n
 
	$´•roûss
() {

99 
queuedLog
.
	`putText
("Warehouse:", 0, 1, 10);

100 
queuedLog
.
	`putIÁ
(
w¬ehou£Id
, 11, 1, 4);

102 
queuedLog
.
	`putText
("Carrier ID:", 16, 1, 12);

103 
queuedLog
.
	`putIÁ
(
ÿ¼›rId
, 28, 1, 2);

105 
queuedLog
.
	`putText
("Items Delivered", 0, 2, 15);

106 
queuedLog
.
	`putText
("District Order", 0, 3, 25);

107 
di¡CouÁ
 = 
w¬ehou£PŒ
.
	`g‘Di¡riùCouÁ
();

108 
di¡Id
;

110 
Di¡riù
 
cu¼’tDi¡riù
;

111 
D©e
 
d–D©e
 = 
Ãw
 
	`D©e
();

112 
di¡Id
 = 1; di¡Id <ğ
di¡CouÁ
; distId++) {

113 
cu¼’tDi¡riù
 = 
w¬ehou£PŒ
.
	`g‘Di¡riù
(
di¡Id
);

115 
I‹¿tÜ
 
possibËOrd”I‹r
 = 
cu¼’tDi¡riù
.
	`ÃwOrd”I‹r
();

116 
NewOrd”
 
possibËNewOrd”
 = 
nuÎ
;

117 
Ord”
 
possibËOrd”
 = 
nuÎ
;

118 
Cu¡om”
 
possibËCu¡om”PŒ
 = 
nuÎ
;

119 
Ord”lše
[] 
»quœedOrd”Lše
;

120 
Ord”lše
 
Üd”lše
;

121 
possibËOrd”I‹r
.
	`hasNext
()) {

122 
possibËNewOrd”
 = (
NewOrd”
è
possibËOrd”I‹r
.
	`Ãxt
();

123 
possibËOrd”
 = (
Ord”
è
possibËNewOrd”
.
	`g‘Ord”PŒ
();

124 
possibËCu¡om”PŒ
 = (
Cu¡om”
è
possibËOrd”
.
	`g‘Cu¡om”PŒ
();

126 
BigDecim®
 
hisB®ªû
 = 
possibËCu¡om”PŒ
.
	`g‘B®ªû
();

127 
BigDecim®
 
Üd”AmouÁ
 = 
possibËOrd”
.
	`g‘TÙ®AmouÁ
();

128 ià((
hisB®ªû
.
	`com·»To
(
Üd”AmouÁ
)) == -1) {

133 
»quœedOrd”Lše
 = 
possibËOrd”
.
	`g‘Ord”lšeLi¡
();

134 
i
 = 0; i < 
»quœedOrd”Lše
.
Ëngth
; i++) {

135 
Üd”lše
 = (
Ord”lše
è
»quœedOrd”Lše
[
i
];

136 ià(
Üd”lše
 =ğ
nuÎ
) {

139 
»quœedQuªt™y
 = 
Üd”lše
.
	`g‘Quªt™y
();

140 
™emId
 = 
Üd”lše
.
	`g‘I‹mId
();

141 
Stock
 
¡ock
 = 
w¬ehou£PŒ
.
	`»Œ›veStock
(
™emId
);

142 
avaabËQuªt™y
 = 
¡ock
.
	`g‘Quªt™y
();

143 ià(
avaabËQuªt™y
 >ğ
»quœedQuªt™y
) {

144 
¡ock
.
	`chªgeQuªt™y
(-
»quœedQuªt™y
);

149 ià(
possibËNewOrd”
 !ğ
nuÎ
) {

150 
NewOrd”
 
cu¼’tNewOrd”
 = 
cu¼’tDi¡riù


151 .
	`»moveNewOrd”
(
possibËNewOrd”
.
	`g‘Id
());

152 ià(
T¿n§ùiÚ
.
¡—dyS‹Mem
) {

153 
cu¼’tDi¡riù


154 .
	`»moveOldNewOrd”s
((
com·ny
.
	`g‘In™ŸlOrd”s
() - company

155 .
	`g‘In™ŸlNewOrd”s
()));

156 
cu¼’tDi¡riù
.
	`»moveOldOrd”s
(
com·ny
.
	`g‘In™ŸlOrd”s
());

158 
Ord”
 
m©chšgOrd”
 = 
cu¼’tNewOrd”
.
	`g‘Ord”PŒ
();

159 
m©chšgOrd”
.
	`£tC¬r›rId
(
ÿ¼›rId
);

160 
m©chšgOrd”
.
	`d©eOrd”lšes
(
d–D©e
);

161 
queuedLog
.
	`putIÁ
(
cu¼’tDi¡riù
.
	`g‘Id
(), 6, 
di¡Id
 + 3, 2);

162 
queuedLog
.
	`putIÁ
(
cu¼’tDi¡riù
.
	`g‘Id
(), 20, 
di¡Id
 + 3, 5);

164 
Cu¡om”
 
cu¡om”PŒ
 = 
m©chšgOrd”
.
	`g‘Cu¡om”PŒ
();

165 
cu¡om”PŒ
.
	`adju¡B®ªû
(
m©chšgOrd”
.
	`g‘TÙ®AmouÁ
());

166 
cu¡om”PŒ
.
	`šüem’tD–iv”yCouÁ
();

171 
D©e
 
dayTime
 = 
Ãw
 
	`D©e
();

172 
queuedLog
.
	`putText
("Processing finished‡t:", 0, 14, 23);

173 
queuedLog
.
	`putD©e
(
dayTime
, 24, 14, 10);

174 
queuedLog
.
	`putTime
(
dayTime
, 36, 14, 10);

175  
Œue
;

176 
	}
}

178 
public
 
synchrÚized
 
	$di¥Ïy
(
PrštSŒ—m
 
out
) {

199 
	`synchrÚized
 (
out
) {

200 ià(
T¿n§ùiÚ
.
’abËLogWr™e
)

201 
queuedLog
.
	`di¥Ïy
(
out
);

204 
	}
}

206 
public
 
	$š™ŸlizeT¿n§ùiÚLog
() {

207 
JBBut
.
	`g‘Log
().
	`’‹ršg
("spec.jbb.DeliveryTransaction",

220 ià(
T¿n§ùiÚ
.
’abËLogWr™e
)

221 
š™Log
.
	`di¥Ïy
();

222 
JBBut
.
	`g‘Log
().
	`ex™šg
("spec.jbb.DeliveryTransaction",

224 
	}
}

226 
public
 
synchrÚized
 
	$´oûssT¿n§ùiÚLog
() {

227 
JBBut
.
	`g‘Log
().
	`’‹ršg
("spec.jbb.DeliveryTransaction",

229 
d–iv”yLog
.
	`ş—rBufãr
();

230 
xmlD–iv”yLog
.
	`ş—r
();

231 
	`£tupD–iv”yLog
();

241 
d–iv”yLog
.
	`putIÁ
(
ÿ¼›rId
, 16, 3, 2);

244 
d–iv”yLog
.
	`putText
("Delivery has been queued", 18, 5, 25);

248 
xmlD–iv”yLog
.
	`pİuÏ‹XML
(
d–iv”yLog
);

249 ià(
T¿n§ùiÚ
.
’abËLogWr™e
)

250 
d–iv”yLog
.
	`di¥Ïy
();

251 ià(
T¿n§ùiÚ
.
v®id©iÚFÏg
) {

252 
SŒšg
[] 
s
 = 
d–iv”yLog
.
	`v®id©e
();

253 ià(
s
.
Ëngth
 !ğ
v®id©iÚLog
.length) {

254 
SŒšgBufãr
 
sb
 = 
Ãw
 
	`SŒšgBufãr
(200);

255 
sb


256 .
	`­³nd
("VALIDATION ERROR: mismatch in screen†engths for DeliveryTransaction");

257 
sb
.
	`­³nd
(
Sy¡em
.
	`g‘Prİ”ty
("line.separator"));

258 
sb
.
	`­³nd
(" Screen†ength should be: "

259 + 
v®id©iÚLog
.
Ëngth
);

260 
sb
.
	`­³nd
(
Sy¡em
.
	`g‘Prİ”ty
("line.separator"));

261 
sb
.
	`­³nd
(" Sü“ÀËngth is: " + 
s
.
Ëngth
);

262 
JBBut
.
	`g‘Log
().
	`w¬nšg
(
sb
.
	`toSŒšg
());

263 
T¿n§ùiÚ
.
	`šv®id©eRun
();

265 
i
 = 0; i < 
v®id©iÚLog
.
Ëngth
; i++) {

266 ià(
checkLše
[
i
]) {

267 ià(!
s
[
i
].
	`equ®s
(
v®id©iÚLog
[i])) {

268 
SŒšgBufãr
 
sb
 = 
Ãw
 
	`SŒšgBufãr
(200);

269 
sb


270 .
	`­³nd
("VALIDATION ERROR: incorrect output for DeliveryTransaction");

271 
sb
.
	`­³nd
(
Sy¡em
.
	`g‘Prİ”ty
("line.separator"));

272 
sb
.
	`­³nd
(" Lš" + (
i
 + 1) + " should be: |"

273 + 
v®id©iÚLog
[
i
] + "|");

274 
sb
.
	`­³nd
(
Sy¡em
.
	`g‘Prİ”ty
("line.separator"));

275 
sb
.
	`­³nd
(" Lš" + (
i
 + 1è+ " is: |" + 
s
[i]

277 
JBBut
.
	`g‘Log
().
	`w¬nšg
(
sb
.
	`toSŒšg
());

278 
T¿n§ùiÚ
.
	`šv®id©eRun
();

283 
JBBut
.
	`g‘Log
().
	`ex™šg
("spec.jbb.DeliveryTransaction",

285 
	}
}

287 
public
 
synchrÚized
 
boŞ—n
 
	$´oûss
() {

288 
JBBut
.
	`g‘Log
().
	`’‹ršg
("spec.jbb.DeliveryTransaction", "process");

289 
D©e
 
dayTime
 = 
Ãw
 
	`D©e
();

291 
queuedLog
.
	`ş—rBufãr
();

292 
queuedLog
.
	`putText
("Queueing Time:", 0, 0, 12);

293 
queuedLog
.
	`putD©e
(
dayTime
, 12, 0, 10);

294 
queuedLog
.
	`putTime
(
dayTime
, 24, 0, 10);

296 
d–iv”yHªdËr
.
	`hªdËD–iv”y
(
this
);

297 
JBBut
.
	`g‘Log
().
	`ex™šg
("spec.jbb.DeliveryTransaction", "process");

298  
Œue
;

299 
	}
}

	@spec/jbb/District.java

8 
·ckage
 
	g¥ec
.
	gjbb
;

10 
impÜt
 
	gjava
.
	gut
.*;

11 
impÜt
 
	gjava
.
	gut
.
	gloggšg
.
	gLev–
;

12 
impÜt
 
	gjava
.
	gut
.
	gloggšg
.
	gLogg”
;

13 
impÜt
 
	gjava
.
	gm©h
.
	gBigDecim®
;

15 
public
 cÏs 
	cDi¡riù
 {

17 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

24 
´iv©e
 
JBBSÜ‹dStÜage
 
	mÜd”TabË
;

26 
´iv©e
 
JBBSÜ‹dStÜage
 
	mÃwOrd”TabË
;

29 
´iv©e
 
SŒšg
 
	mÇme
;

31 
´iv©e
 
Add»ss
 
	madd»ss
;

33 
´iv©e
 
BigDecim®
 
	mxR©e
;

35 
´iv©e
 
BigDecim®
 
	mytd
;

37 
´iv©e
 
	mÃxtOrd”
;

39 
´iv©e
 
by‹
 
	mdi¡riùId
;

41 
´iv©e
 
	mw¬ehou£Id
;

43 
´iv©e
 
	mŞde¡Ord”
;

45 
public
 
	$Di¡riù
(
šW¬ehou£Id
, 
by‹
 
šDi¡riùId
) {

46 
di¡riùId
 = 
šDi¡riùId
;

47 
w¬ehou£Id
 = 
šW¬ehou£Id
;

48 
add»ss
 = 
Ãw
 
	`Add»ss
();

49 
ÃxtOrd”
 = 1;

50 
Üd”TabË
 = 
Inäa¡ruùu»
.
	`ü—‹SÜ‹dStÜage
();

51 
ÃwOrd”TabË
 = 
Inäa¡ruùu»
.
	`ü—‹SÜ‹dStÜage
();

54 
public
 
	$g‘Id
() {

55  
di¡riùId
;

56 
	}
};

58 
public
 
BigDecim®
 
	$g‘TaxR©e
() {

59  
xR©e
;

60 
	}
};

62 
public
 
Add»ss
 
	$g‘Add»ss
() {

63  
add»ss
;

64 
	}
}

66 
public
 
synchrÚized
 
	$Ï¡Ord”Id
() {

67 
‹mp
 = 
ÃxtOrd”
 - 1;

68  
‹mp
;

69 
	}
}

71 
public
 
synchrÚized
 
	$ÃxtOrd”Id
() {

72 
‹mp
 = 
ÃxtOrd”
++;

73  
‹mp
;

74 
	}
}

76 
public
 
synchrÚized
 
	$di¥Ïy
() {

77 
Sy¡em
.
out
.
	`´šn
("District display ****************************");

78 
Sy¡em
.
out
.
	`´šn
("di¡riùId i =======ğ" + 
di¡riùId
);

79 
Sy¡em
.
out
.
	`´šn
("w¬ehou£ID =ğ" + 
w¬ehou£Id
);

80 
Sy¡em
.
out
.
	`´šn
("Çmi  ===ğ" + 
Çme
);

81 
add»ss
.
	`di¥Ïy
();

82 
Sy¡em
.
out
.
	`´šn
("*********************************************");

83 
	}
}

85 
public
 
synchrÚized
 
	$»ûivePaym’t
(
BigDecim®
 
·ym’tAmouÁ
) {

86 
ytd
 = ytd.
	`add
(
·ym’tAmouÁ
);

87 
	}
}

89 
public
 
synchrÚized
 
	$£tUsšgRªdom
() {

90 
Çme
 = 
Ãw
 
	`SŒšg
(
JBBut
.
	`ü—‹_¿ndom_a_¡ršg
(6, 10, 
w¬ehou£Id
));

91 
add»ss
.
	`£tUsšgRªdom
(
w¬ehou£Id
);

92 
‹mp
 = 
JBBut
.
	`ü—‹_¿ndom_æßt_v®_»tuº
(0.0f, 0.2000f,

93 0.0001f, 
w¬ehou£Id
);

94 
xR©e
 = 
Ãw
 
	`BigDecim®
(
‹mp
).
	`£tSÿË
(4, 
BigDecim®
.
ROUND_HALF_UP
);

96 
ytd
 = 
BigDecim®
.
	`v®ueOf
(3000000L, 2);

97 
	}
}

99 
public
 
synchrÚized
 
	$addOrd”
(
Ord”
 
ªOrd”
) {

100 
Üd”TabË
.
	`put
(
ªOrd”
.
	`g‘Id
(),‡nOrder);

101 
	}
}

103 
public
 
synchrÚized
 
Ord”
 
	$»Œ›veOrd”
(
Ord”
 
Üd”
) {

104  (
Ord”
è
Üd”TabË
.
	`g‘
(
Üd”
.
	`g‘Id
());

105 
	}
}

107 
public
 
synchrÚized
 
	$»moveOlde¡Ord”
() {

108 
Şde¡Ord”
++;

109 
boŞ—n
 
»moved
 = 
Üd”TabË
.
	`d–‘eFœ¡EÁ™›s
();

110 ià(!
»moved
) {

111 
JBBut
.
	`g‘Log
().
	`w¬nšg
(

113 + 
Şde¡Ord”
 + ", di¡riùId=" + 
di¡riùId


114 + ", w¬ehou£Id=" + 
w¬ehou£Id
);

116 
	}
}

118 
public
 
synchrÚized
 
	$»moveOldOrd”s
(
mšOrd”s
) {

119 
size
 = 
Üd”TabË
.
	`size
();

120 
boŞ—n
 
»moved
 = 
Üd”TabË
.
	`d–‘eFœ¡EÁ™›s
(
size
 - 
mšOrd”s
);

121 ià(
»moved
) {

122 
Şde¡Ord”
 +ğ
size
 - 
mšOrd”s
;

125 
JBBut
.
	`g‘Log
().
	`w¬nšg
(

127 + 
di¡riùId
 + ", w¬ehou£Id=" + 
w¬ehou£Id


128 + ", size=" + 
Üd”TabË
.
	`size
());

130 ià(
JBBut
.
	`g‘Log
().
	`isLoggabË
(
Lev–
.
FINEST
)) {

131 
Logg”
 
log
 = 
JBBut
.
	`g‘Log
();

132 
log
.
	`fše¡
("SteadyStaterimmed orderTableo "

133 + (
Üd”TabË
.
	`size
()è+ "ƒËm’ts, from " + 
size


135 
log
.
	`fše¡
(" fÜ di¡riùId=" + 
di¡riùId
 + " warehouseId="

136 + 
w¬ehou£Id
);

138 
	}
}

140 
public
 
synchrÚized
 
	$»moveOldNewOrd”s
(
mšNewOrd”s
) {

141 
size
 = 
ÃwOrd”TabË
.
	`size
();

142 
boŞ—n
 
»moved
 = 
ÃwOrd”TabË


143 .
	`d–‘eFœ¡EÁ™›s
(
size
 - 
mšNewOrd”s
);

144 ià(!
»moved
) {

145 
JBBut
.
	`g‘Log
().
	`w¬nšg
(

147 + 
di¡riùId
 + ", w¬ehou£Id=" + 
w¬ehou£Id


148 + ", size=" + 
ÃwOrd”TabË
.
	`size
());

150 ià(
JBBut
.
	`g‘Log
().
	`isLoggabË
(
Lev–
.
FINEST
)) {

151 
Logg”
 
log
 = 
JBBut
.
	`g‘Log
();

152 
log
.
	`fše¡
("SteadyStaterimmed‚ewOrderTableo "

153 + 
ÃwOrd”TabË
.
	`size
(è+ "ƒËm’ts, from " + 
size


155 
log
.
	`fše¡
(" fÜ di¡riùId=" + 
di¡riùId
 + ", warehouseId="

156 + 
w¬ehou£Id
);

158 
	}
}

160 
public
 
synchrÚized
 
	$addNewOrd”
(
NewOrd”
 
aNewOrd”
) {

161 
ÃwOrd”TabË
.
	`put
(
aNewOrd”
.
	`g‘Id
(),‡NewOrder);

162 
	}
}

164 
public
 
synchrÚized
 
NewOrd”
 
	$»moveFœ¡NewOrd”
() {

165 
NewOrd”
 
‹mp
 = 
nuÎ
;

166 
‹mp
 = (
NewOrd”
è
ÃwOrd”TabË
.
	`»moveFœ¡EËm
();

167  
‹mp
;

168 
	}
}

170 
public
 
synchrÚized
 
JBBD©aStÜage
 
	$g‘Ord”TabË
() {

171  
Üd”TabË
;

172 
	}
}

174 
public
 
synchrÚized
 
SŒšg
 
	$g‘Name
() {

175  
Çme
;

176 
	}
}

178 
public
 
synchrÚized
 
I‹¿tÜ
 
	$ÃwOrd”I‹r
() {

179  (
I‹¿tÜ
è
ÃwOrd”TabË
.
	`–em’ts
();

180 
	}
}

182 
public
 
synchrÚized
 
NewOrd”
 
	$»moveNewOrd”
(
Objeù
 
key
) {

183 
NewOrd”
 
‹mp
 = (NewOrd”è
ÃwOrd”TabË
.
	`g‘
(
key
);

184  (
NewOrd”
è
ÃwOrd”TabË
.
	`»move
(
key
);

185 
	}
}

	@spec/jbb/History.java

8 
·ckage
 
	g¥ec
.
	gjbb
;

10 
impÜt
 
	gjava
.
	gut
.*;

11 
impÜt
 
	gjava
.
	gm©h
.
	gBigDecim®
;

13 
public
 cÏs 
	cHi¡Üy
 {

15 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

22 
´iv©e
 
D©e
 
	md©e
;

24 
´iv©e
 
SŒšg
 
	md©a
;

26 
´iv©e
 
BigDecim®
 
	mamouÁ
;

28 
´iv©e
 
	mcu¡om”Id
;

30 
´iv©e
 
by‹
 
	mcu¡om”Di¡riùId
;

32 
´iv©e
 
	mcu¡om”W¬ehou£Id
;

34 
´iv©e
 
by‹
 
	mdi¡riùId
;

36 
´iv©e
 
	mw¬ehou£Id
;

38 
public
 
	$Hi¡Üy
(
šCu¡om”Id
, 
by‹
 
šCu¡om”Di¡riùId
,

39 
šCu¡om”W¬ehou£Id
, 
by‹
 
šDi¡riùId
,

40 
šW¬ehou£Id
, 
D©e
 
šD©e
, 
BigDecim®
 
šAmouÁ
, 
SŒšg
 
šD©a
) {

41 
cu¡om”Id
 = 
šCu¡om”Id
;

42 
cu¡om”Di¡riùId
 = 
šCu¡om”Di¡riùId
;

43 
cu¡om”W¬ehou£Id
 = 
šCu¡om”W¬ehou£Id
;

44 
di¡riùId
 = 
šDi¡riùId
;

45 
w¬ehou£Id
 = 
šW¬ehou£Id
;

46 
d©e
 = 
šD©e
;

47 
amouÁ
 = 
šAmouÁ
;

48 
d©a
 = 
šD©a
;

51 
public
 
	$Hi¡Üy
() {

52 
	}
}

54 
public
 
	$š™Hi¡Üy
(
šCu¡om”Id
, 
by‹
 
šCu¡om”Di¡riùId
,

55 
šCu¡om”W¬ehou£Id
, 
by‹
 
šDi¡riùId
,

56 
šW¬ehou£Id
, 
D©e
 
šD©e
, 
BigDecim®
 
šAmouÁ
, 
SŒšg
 
šD©a
) {

57 
cu¡om”Id
 = 
šCu¡om”Id
;

58 
cu¡om”Di¡riùId
 = 
šCu¡om”Di¡riùId
;

59 
cu¡om”W¬ehou£Id
 = 
šCu¡om”W¬ehou£Id
;

60 
di¡riùId
 = 
šDi¡riùId
;

61 
w¬ehou£Id
 = 
šW¬ehou£Id
;

62 
d©e
 = 
šD©e
;

63 
amouÁ
 = 
šAmouÁ
;

64 
d©a
 = 
šD©a
;

65 
	}
}

67 
public
 
synchrÚized
 
SŒšg
 
	$budD©a
(
SŒšg
 
w¬ehou£Name
,

68 
SŒšg
 
di¡riùName
) {

69 
d©a
 = 
Ãw
 
	`SŒšg
((
w¬ehou£Name
 + " " + 
di¡riùName
));

70 
SŒšg
 
‹mp
 = 
d©a
;

71  
‹mp
;

72 
	}
}

74 
public
 
	$g‘Cu¡om”Id
() {

75 
‹mp
 = 
cu¡om”Id
;

76  
‹mp
;

77 
	}
}

79 
public
 
D©e
 
	$g‘D©e
() {

80 
D©e
 
‹mp
 = 
d©e
;

81  
‹mp
;

82 
	}
}

84 
public
 
BigDecim®
 
	$g‘AmouÁ
() {

85 
BigDecim®
 
‹mp
 = 
amouÁ
;

86  
‹mp
;

87 
	}
}

	@spec/jbb/Infrastructure.java

4 
·ckage
 
	g¥ec
.
	gjbb
;

6 
impÜt
 
	gjava
.
	gut
.
	gI‹¿tÜ
;

8 şas 
	cInäa¡ruùu»
 {

9 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

16 
´iv©e
 şas 
	cSynchrÚizedJBBD©aStÜage
 
im¶em’ts
 
	mJBBD©aStÜage
 {

17 
JBBD©aStÜage
 
	ms
;

19 
SynchrÚizedJBBD©aStÜage
(
JBBD©aStÜage
 
s
) {

20 
	mthis
.
	ms
 = 
s
;

23 
public
 
boŞ—n
 
cÚšsKey
(
Objeù
 
o
) {

24 
synchrÚized
 (
s
) {

25  
	ms
.
cÚšsKey
(
o
);

29 
public
 
Objeù
 
g‘
(Objeù 
o
) {

30 
synchrÚized
 (
s
) {

31  
	ms
.
g‘
(
o
);

35 
public
 
Objeù
 
put
(Objeù 
key
, Objeù 
v®ue
) {

36 
synchrÚized
 (
s
) {

37  
	ms
.
put
(
key
, 
v®ue
);

41 
public
 
Objeù
 
»move
(Objeù 
o
) {

42 
synchrÚized
 (
s
) {

43  
	ms
.
»move
(
o
);

47 
public
 
size
() {

48 
synchrÚized
 (
s
) {

49  
	ms
.
size
();

53 
public
 
I‹¿tÜ
 
–em’ts
() {

54 
synchrÚized
 (
s
) {

55  
	ms
.
–em’ts
();

60 
´iv©e
 şas 
	cSynchrÚizedJBBSÜ‹dStÜage
 
ex‹nds


61 
SynchrÚizedJBBD©aStÜage
 
im¶em’ts
 
	gJBBSÜ‹dStÜage
 {

62 
SynchrÚizedJBBSÜ‹dStÜage
(
JBBSÜ‹dStÜage
 
s
) {

63 
su³r
(
s
);

66 
public
 
Objeù
 
»moveFœ¡EËm
() {

67 
synchrÚized
 (
s
) {

68  ((
	gJBBSÜ‹dStÜage
è
	gs
).
»moveFœ¡EËm
();

72 
public
 
boŞ—n
 
d–‘eFœ¡EÁ™›s
(
quªt
) {

73 
synchrÚized
 (
s
) {

74  ((
	gJBBSÜ‹dStÜage
è
	gs
).
d–‘eFœ¡EÁ™›s
(
quªt
);

78 
public
 
boŞ—n
 
d–‘eFœ¡EÁ™›s
() {

79 
synchrÚized
 (
s
) {

80  ((
	gJBBSÜ‹dStÜage
è
	gs
).
d–‘eFœ¡EÁ™›s
();

84 
public
 
Objeù
 
g‘MedŸnV®ue
(Objeù 
fœ¡Key
, Objeù 
Ï¡Key
) {

85 
synchrÚized
 (
s
) {

86  ((
	gJBBSÜ‹dStÜage
è
	gs
).
g‘MedŸnV®ue
(
fœ¡Key
, 
Ï¡Key
);

91 
´iv©e
 
JBBD©aStÜage
 
	$synchStÜage
(
JBBD©aStÜage
 
s
) {

92  
Ãw
 
	`SynchrÚizedJBBD©aStÜage
(
s
);

93 
	}
}

95 
public
 
JBBD©aStÜage
 
	$ü—‹StÜage
() {

96  
Ãw
 
	`M­D©aStÜage
();

97 
	}
}

99 
public
 
JBBD©aStÜage
 
	$ü—‹StÜage
(
boŞ—n
 
synch
) {

100 
JBBD©aStÜage
 
s
 = 
	`ü—‹StÜage
();

101 ià(
synch
) {

102 
s
 = 
	`synchStÜage
(s);

104  
s
;

105 
	}
}

107 
public
 
JBBSÜ‹dStÜage
 
	$ü—‹SÜ‹dStÜage
() {

108  
Ãw
 
	`T»eM­D©aStÜage
();

109 
	}
}

	@spec/jbb/Item.java

8 
·ckage
 
	g¥ec
.
	gjbb
;

10 
impÜt
 
	gjava
.
	gm©h
.
	gBigDecim®
;

12 
public
 cÏs 
	cI‹m
 {

14 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

21 
´iv©e
 
SŒšg
 
	mÇme
;

23 
´iv©e
 
SŒšg
 
	mb¿ndInfÜm©iÚ
;

25 
´iv©e
 
BigDecim®
 
	m´iû
;

27 
´iv©e
 
	mid
;

29 
public
 
	$I‹m
() {

32 
public
 
	$g‘Id
() {

33  
id
;

34 
	}
}

36 
public
 
SŒšg
 
	$g‘Name
() {

37  
Çme
;

38 
	}
}

40 
public
 
SŒšg
 
	$g‘B¿ndInfo
() {

41  
b¿ndInfÜm©iÚ
;

42 
	}
}

44 
public
 
BigDecim®
 
	$g‘Priû
() {

45  
´iû
;

46 
	}
}

48 
public
 
synchrÚized
 
	$£tUsšgRªdom
(
šId
) {

49 
id
 = 
šId
;

50 
Çme
 = 
Ãw
 
	`SŒšg
(
JBBut
.
	`ü—‹_¿ndom_a_¡ršg
(14, 24));

51 
‹mp
 = 
JBBut
.
	`ü—‹_¿ndom_æßt_v®_»tuº
(1.00f, 100.00f,

53 
´iû
 = 
Ãw
 
	`BigDecim®
(
‹mp
).
	`£tSÿË
(2, 
BigDecim®
.
ROUND_HALF_UP
);

54 
b¿ndInfÜm©iÚ
 = 
Ãw
 
	`SŒšg
(
JBBut
.
	`ü—‹_a_¡ršg_w™h_Üigš®
(26,

55 50, 10, 
nuÎ
));

56 
	}
}

	@spec/jbb/JBBDataStorage.java

7 
·ckage
 
	g¥ec
.
	gjbb
;

9 
impÜt
 
	gjava
.
	gut
.
	gI‹¿tÜ
;

11 
public
 
š‹rçû
 
	gJBBD©aStÜage
 {

13 
fš®
 
SŒšg
 
	gCOPYRIGHT
 = "SPECjbb2005,"

23 
boŞ—n
 
cÚšsKey
(
Objeù
 
key
);

28 
Objeù
 
g‘
(Objeù 
key
);

33 
Objeù
 
put
(Objeù 
key
, Objeù 
v®ue
);

38 
Objeù
 
»move
(Objeù 
key
);

43 
size
();

48 
I‹¿tÜ
 
–em’ts
();

	@spec/jbb/JBBLogFormatter.java

7 
·ckage
 
	g¥ec
.
	gjbb
;

9 
impÜt
 
	gjava
.
	gut
.
	gloggšg
.
	gLogRecÜd
;

10 
impÜt
 
	gjava
.
	gut
.
	gloggšg
.
	gSim¶eFÜm©‹r
;

12 
public
 cÏs 
	cJBBLogFÜm©‹r
 
ex‹nds
 
	mSim¶eFÜm©‹r
 {

13 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

20 
´Ùeùed
 
fš®
 
SŒšg
 
	mARROW_SEPARATOR
 = " -> ";

22 
´Ùeùed
 
fš®
 
SŒšg
 
	mNEW_LINE_STRING
 = 
Sy¡em


23 .
g‘Prİ”ty
("line.separator");

25 
public
 
SŒšg
 
	$fÜm©
(
LogRecÜd
 
»cÜd
) {

26 
SŒšgBufãr
 
sb
 = 
Ãw
 
	`SŒšgBufãr
(
su³r
.
	`fÜm©
(
»cÜd
));

27 
pos
 = 
sb
.
	`šdexOf
(
JBBLogFÜm©‹r
.
NEW_LINE_STRING
);

28 ià(
pos
 != -1) {

29 
’d
 = 
pos
 + 
JBBLogFÜm©‹r
.
NEW_LINE_STRING
.
	`Ëngth
();

30 
sb
.
	`»¶aû
(
pos
, 
’d
, 
JBBLogFÜm©‹r
.
ARROW_SEPARATOR
);

32  (
sb
.
	`toSŒšg
());

34 
	}
}

	@spec/jbb/JBBProperties.java

7 
·ckage
 
	g¥ec
.
	gjbb
;

9 
impÜt
 
	gjava
.
	gut
.*;

10 
impÜt
 
	gjava
.
	gut
.
	gloggšg
.
	gLev–
;

11 
impÜt
 
	gjava
.
	gio
.*;

13 
public
 cÏs 
	cJBBPrİ”t›s
 {

15 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

22 
´iv©e
 
Prİ”t›s
 
	mPrİ”t›sFÜB©ch
;

24 
SŒšg
 
	mv®
;

26 
public
 
	mw¬ehou£PİuÏtiÚBa£
;

28 
public
 
	mÜd”lšesP”Ord”
;

30 
public
 
	m¿mpupSecÚds
;

32 
public
 
	mm—su»m’tSecÚds
;

34 
public
 
	mex³ùedP—kW¬ehou£
 = 4;

37 
public
 
boŞ—n
 
	md‘”mši¡icRªdomS“d
 = 
çl£
;

39 
public
 
	mjvm_š¡ªûs
 = 1;

41 
public
 
	m³r_jvm_w¬ehou£_¿mpup
 = 0f;

43 
public
 
	m³r_jvm_w¬ehou£_¿mpdown
 = 0f;

45 
public
 
	mwa™TimeP”ûÁ
;

47 
public
 
boŞ—n
 
	mshowW¬ehou£D‘a
 = 
çl£
;

49 
public
 
	m¡¬tšgNumb”W¬ehou£s
;

51 
public
 
	mšüem’tNumb”W¬ehou£s
;

53 
public
 
	m’dšgNumb”W¬ehou£s
;

55 
public
 [] 
	m£qu’ûOfW¬ehou£s
;

57 
public
 
boŞ—n
 
	m¡—dyS‹FÏg
;

59 
public
 
boŞ—n
 
	msü“nWr™eFÏg
;

61 
public
 
boŞ—n
 
	mcheckThroughput
;

63 
public
 
	mmšBTPSR©io
;

65 
public
 
	mov”rideI‹mTabËSize
 = 20000;

67 
public
 
boŞ—n
 
	munifÜmRªdomI‹ms
 = 
Œue
;

69 
public
 
boŞ—n
 
	m´štPrİ”t›sAndArgs
 = 
Œue
;

71 
´iv©e
 
Lev–
 
	m­¶iÿtiÚLoggšgLev–
 = Lev–.
ALL
;

73 
´iv©e
 
fš®
 
	mCOMPLIANT_RATE_³r_jvm_w¬ehou£_¿mpup
 = 3.0f;

75 
´iv©e
 
fš®
 
	mCOMPLIANT_RATE_³r_jvm_w¬ehou£_¿mpdown
 = 20.0f;

77 
´iv©e
 
fš®
 
	mCOMPLIANT_RATE_w¬ehou£PİuÏtiÚBa£
 = 60;

79 
´iv©e
 
fš®
 
	mCOMPLIANT_RATE_Üd”lšesP”Ord”
 = 10;

81 
´iv©e
 
fš®
 
	mCOMPLIANT_RATE_¿mpupSecÚds
 = 30;

83 
´iv©e
 
fš®
 
	mCOMPLIANT_RATE_m—su»m’tSecÚds
 = 240;

85 
´iv©e
 
fš®
 
	mCOMPLIANT_RATE_wa™TimeP”ûÁ
 = 0;

87 
´iv©e
 
fš®
 
boŞ—n
 
	mCOMPLIANT_RATE_¡—dyS‹FÏg
 = 
Œue
;

89 
´iv©e
 
fš®
 
boŞ—n
 
	mCOMPLIANT_RATE_sü“nWr™eFÏg
 = 
çl£
;

91 
´iv©e
 
fš®
 
boŞ—n
 
	mCOMPLIANT_RATE_unifÜmRªdomI‹ms
 = 
Œue
;

93 
´iv©e
 
fš®
 
	mCOMPLIANT_RATE_ov”rideI‹mTabËSize
 = 20000;

95 
´iv©e
 
fš®
 
boŞ—n
 
	mCOMPLIANT_RATE_d‘”mši¡icRªdomS“d
 = 
çl£
;

97 
´iv©e
 
fš®
 
Lev–
 
	mCOMPLIANT_RATE_­¶iÿtiÚLoggšgLev–
 = Lev–.
INFO
;

99 
public
 
	$JBBPrİ”t›s
(
SŒšg
 
´İ”t›sFeName
) {

100 
Sy¡em
.
out
.
	`´šn
("");

101 
Sy¡em
.
out
.
	`´šn
("Lßdšg…rİ”t› äom " + 
´İ”t›sFeName
);

102 
Œy
 {

103 
FeIÅutSŒ—m
 
Prİ”t›sFe
 = 
Ãw
 
	`FeIÅutSŒ—m
(

104 
´İ”t›sFeName
);

105 
Prİ”t›sFÜB©ch
 = 
Ãw
 
	`Prİ”t›s
();

106 
Prİ”t›sFÜB©ch
.
	`lßd
(
Prİ”t›sFe
);

108 
	`ÿtch
 (
IOExû±iÚ
 
e
) {

109 
JBBut
.
	`g‘Log
().
	`log
(
Lev–
.
WARNING
,

110 "ERROR: Prİ”t› F”rÜ;…Ëa£ s¹‡gaš", 
e
);

113 
v®
 = 
	`g‘O±iÚ®Prİ”ty
("input.include_file");

114 ià(
v®
 !ğ
nuÎ
) {

115 
Œy
 {

116 
FeIÅutSŒ—m
 
InşudedPrİ”t›sFe
 = 
Ãw
 
	`FeIÅutSŒ—m
(

117 
v®
);

118 
Prİ”t›sFÜB©ch
.
	`lßd
(
InşudedPrİ”t›sFe
);

120 
	`ÿtch
 (
IOExû±iÚ
 
e
) {

121 
JBBut


122 .
	`g‘Log
()

123 .
	`log
(

124 
Lev–
.
WARNING
,

126 
e
);

132 
public
 
SŒšg
 
	$g‘RequœedPrİ”ty
(
SŒšg
 
s
) {

133 
Œy
 {

134  (
Prİ”t›sFÜB©ch
.
	`g‘Prİ”ty
(
s
).
	`Œim
());

136 
	`ÿtch
 (
NuÎPoš‹rExû±iÚ
 
e
) {

137 
JBBut
.
	`g‘Log
().
	`log
(

138 
Lev–
.
WARNING
,

139 "ERROR: Prİ”ty " + 
s


141 
e
);

142  (
nuÎ
);

144 
	}
}

146 
public
 
	$£tRequœedPrİ”ty
(
SŒšg
 
´İ”ty
, SŒšg 
v®ue
) {

147 
Œy
 {

149 
Prİ”t›sFÜB©ch
.
	`put
(
´İ”ty
, 
v®ue
);

151 
	`ÿtch
 (
NuÎPoš‹rExû±iÚ
 
e
) {

152 
JBBut
.
	`g‘Log
()

153 .
	`log
(
Lev–
.
WARNING
, "ERROR: s‘tšg " + 
´İ”ty
, 
e
);

155 
	}
}

157 
public
 
SŒšg
 
	$g‘O±iÚ®Prİ”ty
(
SŒšg
 
s
) {

158 
Œy
 {

159  (
Prİ”t›sFÜB©ch
.
	`g‘Prİ”ty
(
s
).
	`Œim
());

161 
	`ÿtch
 (
NuÎPoš‹rExû±iÚ
 
e
) {

162  (
nuÎ
);

164 
	}
}

166 
public
 
boŞ—n
 
	$g‘Prİs
() {

167 
SŒšg
 
´efix
 = "input.";

168 
SŒšg
 
v®
;

169 
tmpV®ue
 = 0;

170 
boŞ—n
 
»tv®
 = 
Œue
;

171 
boŞ—n
 
v®id_w¬ehou£_£qu’û
 = 
çl£
;

172 
£qu’ûOfW¬ehou£s
 = 
nuÎ
;

173 
v®
 = 
	`g‘RequœedPrİ”ty
(
´efix
 + "suite");

174 ià(
v®
 !ğ
nuÎ
) {

175 ià(
v®
.
	`equ®s
("SPECjbb")) {

176 
checkThroughput
 = 
çl£
;

179 
Sy¡em
.
out
.
	`´šn
("ERROR: Property fileƒrror");

180 
Sy¡em
.
out
.
	`´šn
(" suite must be SPECjbb");

181 
»tv®
 = 
çl£
;

185 
»tv®
 = 
çl£
;

187 
v®
 = 
	`g‘RequœedPrİ”ty
(
´efix
 + "log_level");

188 ià(
v®
 !ğ
nuÎ
) {

189 
Œy
 {

190 
­¶iÿtiÚLoggšgLev–
 = 
Lev–
.
	`·r£
(
v®
);

192 
	`ÿtch
 (
IÎeg®Argum’tExû±iÚ
 
Ÿe
) {

196 
»tv®
 = 
çl£
;

200 
»tv®
 = 
çl£
;

202 ià(
checkThroughput
) {

203 
v®
 = 
	`g‘RequœedPrİ”ty
(
´efix
 + "min_capacity_ratio");

204 ià(
v®
 !ğ
nuÎ
) {

205 
mšBTPSR©io
 = 
Flßt
.
	`v®ueOf
(
v®
).
	`æßtV®ue
();

208 
»tv®
 = 
çl£
;

211 
v®
 = 
	`g‘O±iÚ®Prİ”ty
(
´efix
 + "warehouse_population");

212 ià(
v®
 !ğ
nuÎ
) {

213 
w¬ehou£PİuÏtiÚBa£
 = 
IÁeg”
.
	`·r£IÁ
(
v®
);

216 
w¬ehou£PİuÏtiÚBa£
 = 60;

217 
Prİ”t›sFÜB©ch
.
	`put
(
´efix
 + "warehouse_population", "60");

219 
v®
 = 
	`g‘O±iÚ®Prİ”ty
(
´efix
 + "orderlines_per_order");

220 ià(
v®
 !ğ
nuÎ
) {

221 
Üd”lšesP”Ord”
 = 
IÁeg”
.
	`·r£IÁ
(
v®
);

224 
Üd”lšesP”Ord”
 = 10;

225 
Prİ”t›sFÜB©ch
.
	`put
(
´efix
 + "orderlines_per_order", "10");

227 
v®
 = 
	`g‘RequœedPrİ”ty
(
´efix
 + "ramp_up_seconds");

228 ià(
v®
 !ğ
nuÎ
) {

229 
¿mpupSecÚds
 = 
IÁeg”
.
	`·r£IÁ
(
v®
);

232 
»tv®
 = 
çl£
;

234 
v®
 = 
	`g‘RequœedPrİ”ty
(
´efix
 + "jvm_instances");

235 ià(
v®
 !ğ
nuÎ
) {

236 
jvm_š¡ªûs
 = 
IÁeg”
.
	`·r£IÁ
(
v®
);

239 
»tv®
 = 
çl£
;

241 
v®
 = 
	`g‘RequœedPrİ”ty
(
´efix
 + "per_jvm_warehouse_rampup");

242 ià(
v®
 !ğ
nuÎ
) {

243 
³r_jvm_w¬ehou£_¿mpup
 = 
Flßt
.
	`·r£Flßt
(
v®
);

246 
»tv®
 = 
çl£
;

248 
v®
 = 
	`g‘RequœedPrİ”ty
(
´efix
 + "per_jvm_warehouse_rampdown");

249 ià(
v®
 !ğ
nuÎ
) {

250 
³r_jvm_w¬ehou£_¿mpdown
 = 
Flßt
.
	`·r£Flßt
(
v®
);

253 
»tv®
 = 
çl£
;

255 
v®
 = 
	`g‘RequœedPrİ”ty
(
´efix
 + "measurement_seconds");

256 ià(
v®
 !ğ
nuÎ
) {

257 
m—su»m’tSecÚds
 = 
IÁeg”
.
	`·r£IÁ
(
v®
);

260 
»tv®
 = 
çl£
;

262 
v®
 = 
	`g‘O±iÚ®Prİ”ty
(
´efix
 + "expected_peak_warehouse");

263 ià(
v®
 !ğ
nuÎ
) {

264 
tmpV®ue
 = 
IÁeg”
.
	`·r£IÁ
(
v®
);

265 ià(
tmpV®ue
 == 0) {

266 
tmpV®ue
 = 
RuÁime
.
	`g‘RuÁime
().
	`avaabËProûssÜs
();

267 ià(
jvm_š¡ªûs
 > 1 && 
tmpV®ue
 > 1)

268 
ex³ùedP—kW¬ehou£
 = 
RuÁime
.
	`g‘RuÁime
()

269 .
	`avaabËProûssÜs
()

270 / 
jvm_š¡ªûs
;

272 
ex³ùedP—kW¬ehou£
 = 
RuÁime
.
	`g‘RuÁime
()

273 .
	`avaabËProûssÜs
();

276 if(
tmpV®ue
 =ğ
RuÁime
.
	`g‘RuÁime
().
	`avaabËProûssÜs
()){

277 
Sy¡em
.
out
.
	`´šn
("W¬nšg: Ex¶ic™ly s‘tšg " + 
´efix
 + "expected_peak_warehouse");

278 
Sy¡em
.
out
.
	`´šn
("requires submission‡nd„eview by SPEC in ordero…ublishhe„esult.");

280 
ex³ùedP—kW¬ehou£
 = 
tmpV®ue
;

284 
tmpV®ue
 = 
RuÁime
.
	`g‘RuÁime
().
	`avaabËProûssÜs
();

285 ià(
jvm_š¡ªûs
 > 1 && 
tmpV®ue
 > 1)

286 
ex³ùedP—kW¬ehou£
 = 
RuÁime
.
	`g‘RuÁime
()

287 .
	`avaabËProûssÜs
()

288 / 
jvm_š¡ªûs
;

290 
ex³ùedP—kW¬ehou£
 = 
RuÁime
.
	`g‘RuÁime
()

291 .
	`avaabËProûssÜs
();

293 
Prİ”t›sFÜB©ch
.
	`put
(
´efix
 + "ex³ùed_³ak_w¬ehou£", 
SŒšg


294 .
	`v®ueOf
(
ex³ùedP—kW¬ehou£
));

295 
v®
 = 
	`g‘RequœedPrİ”ty
(
´efix
 + "deterministic_random_seed");

296 ià(
v®
 !ğ
nuÎ
) {

297 
d‘”mši¡icRªdomS“d
 = 
BoŞ—n
.
	`·r£BoŞ—n
(
v®
);

300 
»tv®
 = 
çl£
;

302 
v®
 = 
	`g‘O±iÚ®Prİ”ty
(
´efix
 + "wait_time_percent");

303 ià(
v®
 !ğ
nuÎ
) {

304 
wa™TimeP”ûÁ
 = 
IÁeg”
.
	`·r£IÁ
(
v®
);

307 
wa™TimeP”ûÁ
 = 0;

308 
Prİ”t›sFÜB©ch
.
	`put
(
´efix
 + "wait_time_percent", "0");

310 
v®
 = 
	`g‘O±iÚ®Prİ”ty
(
´efix
 + "screen_write");

311 ià(
v®
 !ğ
nuÎ
) {

312 ià(
v®
.
	`equ®s
("true")) {

313 
sü“nWr™eFÏg
 = 
Œue
;

315 ià(
v®
.
	`equ®s
("false")) {

316 
sü“nWr™eFÏg
 = 
çl£
;

319 
Sy¡em
.
out
.
	`´šn
("ERROR: Property fileƒrror");

320 
Sy¡em
.
out
.
	`´šn
(" screen_write must be 'true' or 'false'");

321 
»tv®
 = 
çl£
;

325 
sü“nWr™eFÏg
 = 
çl£
;

326 
Prİ”t›sFÜB©ch
.
	`put
(
´efix
 + "screen_write", "false");

328 
v®
 = 
	`g‘O±iÚ®Prİ”ty
(
´efix
 + "steady_state");

329 ià(
v®
 !ğ
nuÎ
) {

330 ià(
v®
.
	`equ®s
("true")) {

331 
¡—dyS‹FÏg
 = 
Œue
;

333 ià(
v®
.
	`equ®s
("false")) {

334 
¡—dyS‹FÏg
 = 
çl£
;

337 
Sy¡em
.
out
.
	`´šn
("ERROR: Property fileƒrror");

338 
Sy¡em
.
out
.
	`´šn
(" steady_state must be 'true' or 'false'");

339 
»tv®
 = 
çl£
;

343 
¡—dyS‹FÏg
 = 
Œue
;

344 
Prİ”t›sFÜB©ch
.
	`put
(
´efix
 + "steady_state", "true");

346 
v®
 = 
	`g‘O±iÚ®Prİ”ty
(
´efix
 + "override_itemtable_size");

347 ià(
v®
 !ğ
nuÎ
) {

348 
ov”rideI‹mTabËSize
 = 
IÁeg”
.
	`·r£IÁ
(
v®
);

350 
v®
 = 
	`g‘O±iÚ®Prİ”ty
(
´efix
 + "uniform_random_items");

351 ià(
v®
 !ğ
nuÎ
) {

352 ià(
v®
.
	`equ®s
("true")) {

353 
unifÜmRªdomI‹ms
 = 
Œue
;

355 ià(
v®
.
	`equ®s
("false")) {

356 
unifÜmRªdomI‹ms
 = 
çl£
;

359 
Sy¡em
.
out
.
	`´šn
("ERROR: Property fileƒrror");

360 
Sy¡em
.
out


361 .
	`´šn
(" uniform_random_items must berue or false");

362 
»tv®
 = 
çl£
;

365 
v®
 = 
	`g‘O±iÚ®Prİ”ty
(
´efix
 + "starting_number_warehouses");

366 ià(
v®
 !ğ
nuÎ
) {

367 
¡¬tšgNumb”W¬ehou£s
 = 
IÁeg”
.
	`·r£IÁ
(
v®
);

369 
v®
 = 
	`g‘O±iÚ®Prİ”ty
(
´efix
 + "increment_number_warehouses");

370 ià(
v®
 !ğ
nuÎ
) {

371 
šüem’tNumb”W¬ehou£s
 = 
IÁeg”
.
	`·r£IÁ
(
v®
);

373 
v®
 = 
	`g‘O±iÚ®Prİ”ty
(
´efix
 + "ending_number_warehouses");

374 ià(
v®
 !ğ
nuÎ
) {

375 
’dšgNumb”W¬ehou£s
 = 
IÁeg”
.
	`·r£IÁ
(
v®
);

378 
’dšgNumb”W¬ehou£s
 = 
ex³ùedP—kW¬ehou£
 * 2;

379 ià(
’dšgNumb”W¬ehou£s
 < 8)

380 
’dšgNumb”W¬ehou£s
 = 8;

381 
Prİ”t›sFÜB©ch
.
	`put
(
´efix
 + "’dšg_numb”_w¬ehou£s", 
SŒšg


382 .
	`v®ueOf
(
’dšgNumb”W¬ehou£s
));

384 ià((
¡¬tšgNumb”W¬ehou£s
 > 0)

385 && (
’dšgNumb”W¬ehou£s
 >ğ
¡¬tšgNumb”W¬ehou£s
)

386 && (
šüem’tNumb”W¬ehou£s
 > 0)) {

387 
v®id_w¬ehou£_£qu’û
 = 
Œue
;

389 
v®
 = 
	`g‘O±iÚ®Prİ”ty
(
´efix
 + "sequence_of_number_of_warehouses");

390 ià(
v®
 !ğ
nuÎ
) {

391 ià(
v®id_w¬ehou£_£qu’û
) {

392 
Sy¡em
.
out
.
	`´šn
("ERROR: Property fileƒrror");

393 
Sy¡em
.
out


394 .
	`´šn
(" Cannot specify both sequence_of_number_of_warehouses‡nd {starting,ending,increment}_number_warehouses");

395 
»tv®
 = 
çl£
;

398 
¡¬tIndex
 = 0;

399 
ÃxtS·û
;

400 
numEÁr›s
 = 0;

401 (
ÃxtS·û
 = 
v®
.
	`šdexOf
(' ', 
¡¬tIndex
)) > 0) {

402 
numEÁr›s
++;

403 
¡¬tIndex
 = 
ÃxtS·û
 + 1;

405 
numEÁr›s
++;

406 
£qu’ûOfW¬ehou£s
 = 
Ãw
 [
numEÁr›s
];

407 
¡¬tIndex
 = 0;

408 
numEÁr›s
 = 0;

409 (
ÃxtS·û
 = 
v®
.
	`šdexOf
(' ', 
¡¬tIndex
)) > 0) {

410 
£qu’ûOfW¬ehou£s
[
numEÁr›s
] = 
IÁeg”
.
	`·r£IÁ
(
v®


411 .
	`sub¡ršg
(
¡¬tIndex
, 
ÃxtS·û
));

412 
numEÁr›s
++;

413 
¡¬tIndex
 = 
ÃxtS·û
 + 1;

415 
£qu’ûOfW¬ehou£s
[
numEÁr›s
] = 
IÁeg”
.
	`·r£IÁ
(
v®


416 .
	`sub¡ršg
(
¡¬tIndex
, 
v®
.
	`Ëngth
()));

417 
numEÁr›s
++;

418 
v®id_w¬ehou£_£qu’û
 = 
Œue
;

419 
i
 = 1; i < 
numEÁr›s
; i++) {

420 ià(
£qu’ûOfW¬ehou£s
[
i
] < sequenceOfWarehouses[i - 1]) {

421 
v®id_w¬ehou£_£qu’û
 = 
çl£
;

427 
v®
 = 
	`g‘O±iÚ®Prİ”ty
(
´efix
 + "print_properties_and_args");

428 ià(
v®
 !ğ
nuÎ
) {

429 ià(
v®
.
	`equ®s
("true")) {

430 
´štPrİ”t›sAndArgs
 = 
Œue
;

432 ià(
v®
.
	`equ®s
("false")) {

433 
´štPrİ”t›sAndArgs
 = 
çl£
;

436 
Sy¡em
.
out
.
	`´šn
("ERROR: Property fileƒrror");

437 
Sy¡em
.
out


438 .
	`´šn
("…rint_properties_and_args must berue or false");

439 
»tv®
 = 
çl£
;

442 
Sy¡em
.
out
.
	`´šn
("\nInput Properties:");

443 
Sy¡em
.
out
.
	`´šn
("…er_jvm_warehouse_rampup = "

444 + 
³r_jvm_w¬ehou£_¿mpup
);

445 
Sy¡em
.
out
.
	`´šn
("…er_jvm_warehouse_rampdown = "

446 + 
³r_jvm_w¬ehou£_¿mpdown
);

447 
Sy¡em
.
out
.
	`´šn
(" jvm_š¡ªû ğ" + 
jvm_š¡ªûs
);

448 
Sy¡em
.
out
.
	`´šn
(" deterministic_random_seed = "

449 + 
d‘”mši¡icRªdomS“d
);

450 
Sy¡em
.
out
.
	`´šn
("„amp_up_£cÚd ğ" + 
¿mpupSecÚds
);

451 
Sy¡em
.
out
.
	`´šn
(" m—su»m’t_£cÚd ğ" + 
m—su»m’tSecÚds
);

453 ià(
checkThroughput
) {

459 ià(
£qu’ûOfW¬ehou£s
 =ğ
nuÎ
) {

460 
Sy¡em
.
out
.
	`´šn
(" starting_number_warehouses = "

461 + 
¡¬tšgNumb”W¬ehou£s
);

462 
Sy¡em
.
out
.
	`´šn
(" increment_number_warehouses = "

463 + 
šüem’tNumb”W¬ehou£s
);

464 
Sy¡em
.
out
.
	`´šn
("ƒnding_number_warehouses = "

465 + 
’dšgNumb”W¬ehou£s
);

466 
Sy¡em
.
out
.
	`´šn
("ƒxpected_peak_warehouse = "

467 + 
ex³ùedP—kW¬ehou£
);

470 
Sy¡em
.
out
.
	`´št
(" sequence_of_number_of_warehouses = ");

471 
i
 = 0; i < 
£qu’ûOfW¬ehou£s
.
Ëngth
; i++) {

472 
Sy¡em
.
out
.
	`´št
(" " + 
£qu’ûOfW¬ehou£s
[
i
]);

474 
Sy¡em
.
out
.
	`´šn
("ƒxpected_peak_warehouse = "

475 + 
ex³ùedP—kW¬ehou£
);

476 
Sy¡em
.
out
.
	`´šn
("");

478 ià(!
v®id_w¬ehou£_£qu’û
) {

479 
Sy¡em
.
out
.
	`´šn
("ERROR: Property fileƒrror");

480 
Sy¡em
.
out
.
	`´šn
(" No valid warehouse sequence specified.");

482 ià(
ov”rideI‹mTabËSize
 > 0) {

489  
»tv®
 && 
v®id_w¬ehou£_£qu’û
;

490 
	}
}

492 
public
 
boŞ—n
 
	$cİyPrİsToOuut
(
PrštSŒ—m
 
outRawFe
) {

493 
boŞ—n
 
»tv®
 = 
Œue
;

494 
SŒšg
[] 
šput_´İs
 = {

507 
num_´İs
 = 0;

508 
Enum”©iÚ
 
e
 = 
Prİ”t›sFÜB©ch
.
	`´İ”tyNames
();ƒ

509 .
	`hasMÜeEËm’ts
();) {

510 
SŒšg
 
Çme
 = (SŒšgè
e
.
	`ÃxtEËm’t
();

511 ià(
Çme
.
	`¡¬tsW™h
("config.")) {

512 
num_´İs
++;

514 ià(
Çme
.
	`¡¬tsW™h
("input.")) {

515 
boŞ—n
 
found
 = 
çl£
;

516 
i
 = 0; i < 
šput_´İs
.
Ëngth
; i++) {

517 ià(
Çme
.
	`equ®s
("šput." + 
šput_´İs
[
i
])) {

518 
found
 = 
Œue
;

522 ià(
found
) {

523 
num_´İs
++;

525 ià(
Çme
.
	`equ®s
("input.min_capacity_ratio")) {

526 ià(
checkThroughput
) {

527 
num_´İs
++;

530 
Sy¡em
.
out
.
	`´šn
("ERROR: Property fileƒrror");

531 
Sy¡em
.
out


532 .
	`´šn
(" input.min_capacity_ratio invalid for input.suite=SPECjbb");

533 
»tv®
 = 
çl£
;

536 ià(
Çme
.
	`equ®s
("input.show_warehouse_detail")) {

537 ià(
Prİ”t›sFÜB©ch
.
	`g‘Prİ”ty
(

538 "šput.show_w¬ehou£_d‘a").
	`equ®sIgnÜeCa£
(

540 
showW¬ehou£D‘a
 = 
Œue
;

541 
num_´İs
++;

544 
Sy¡em
.
out
.
	`´šn
("ERROR: Property fileƒrror");

545 
Sy¡em
.
out
.
	`´šn
(" UÄecognized…rİ”ty: " + 
Çme
);

546 
»tv®
 = 
çl£
;

552 
Sy¡em
.
out
.
	`´šn
("ERROR: Property fileƒrror");

553 
Sy¡em
.
out
.
	`´šn
(" UÄecognized…rİ”ty: " + 
Çme
);

554 
»tv®
 = 
çl£
;

557 ià(
»tv®
) {

558 
VeùÜ
 
keyvec
 = 
Ãw
 
	`VeùÜ
(
Prİ”t›sFÜB©ch
.
	`keyS‘
());

559 
CŞËùiÚs
.
	`sÜt
(
keyvec
);

560 
i
 = 0; i < 
keyvec
.
	`size
(); i++) {

561 
SŒšg
 
´İsKey
 = (SŒšgè
keyvec
.
	`–em’tAt
(
i
);

562 
SŒšg
 
sv®ue
 = 
Prİ”t›sFÜB©ch
.
	`g‘Prİ”ty
(
´İsKey
);

563 
outRawFe
.
	`´šn
(
´İsKey
 + "=" + 
sv®ue
);

565 
IÁeg”
 
´ocsAva
 = 
Ãw
 
	`IÁeg”
(
RuÁime
.
	`g‘RuÁime
()

566 .
	`avaabËProûssÜs
());

567 
outRawFe
.
	`´šn
("config.sw.procsAvailtoJava" + "="

568 + 
´ocsAva
.
	`toSŒšg
());

570  
»tv®
;

571 
	}
}

573 
public
 
SŒšg
 
	$£tPrİ
(
SŒšg
 
´İ
, SŒšg 
v®ue
) {

574 
Prİ”t›sFÜB©ch
.
	`put
(
´İ
, 
v®ue
);

575  
Prİ”t›sFÜB©ch
.
	`g‘Prİ”ty
(
´İ
);

576 
	}
}

578 
´iv©e
 
boŞ—n
 
	$checkCom¶Ÿnû
(
aùu®V®ue
, 
com¶ŸÁV®ue
,

579 
SŒšg
 
Çme
) {

581 ià(
aùu®V®ue
 !ğ
com¶ŸÁV®ue
) {

582 
Sy¡em
.
out
.
	`´šn
("INVALID: " + 
Çme
 + " = " + 
aùu®V®ue


583 + ", mu¡ b" + 
com¶ŸÁV®ue
);

584  
çl£
;

586  
Œue
;

587 
	}
}

589 
´iv©e
 
boŞ—n
 
	$checkCom¶Ÿnû
(
boŞ—n
 
aùu®V®ue
,

590 
boŞ—n
 
com¶ŸÁV®ue
, 
SŒšg
 
Çme
) {

592 ià(
aùu®V®ue
 !ğ
com¶ŸÁV®ue
) {

593 
Sy¡em
.
out
.
	`´šn
("INVALID: " + 
Çme
 + " = " + 
aùu®V®ue


594 + ", mu¡ b" + 
com¶ŸÁV®ue
);

595  
çl£
;

597  
Œue
;

598 
	}
}

600 
´iv©e
 
boŞ—n
 
	$checkCom¶Ÿnû
(
aùu®V®ue
, 
com¶ŸÁV®ue
,

601 
SŒšg
 
Çme
) {

603 ià(
aùu®V®ue
 !ğ
com¶ŸÁV®ue
) {

604 
Sy¡em
.
out
.
	`´šn
("INVALID: " + 
Çme
 + " = " + 
aùu®V®ue


605 + ", mu¡ b" + 
com¶ŸÁV®ue
);

606  
çl£
;

608  
Œue
;

609 
	}
}

611 
´iv©e
 
boŞ—n
 
	$checkCom¶Ÿnû
(
Lev–
 
aùu®V®ue
, Lev– 
com¶ŸÁV®ue
,

612 
SŒšg
 
Çme
) {

614 ià(
aùu®V®ue
.
	`equ®s
(
com¶ŸÁV®ue
è=ğ
çl£
) {

615 
Sy¡em
.
out
.
	`´šn
("INVALID: " + 
Çme
 + " = " + 
aùu®V®ue


616 + ", mu¡ b" + 
com¶ŸÁV®ue
);

617  
çl£
;

619  
Œue
;

620 
	}
}

622 
public
 
	$checkCom¶Ÿnû
() {

623 
boŞ—n
 
com¶ŸÁ
 = 
Œue
;

624 
Sy¡em
.
out
.
	`´šn
("\n\nChecking whether„un will be valid");

625 ià(
checkThroughput
) {

628 
com¶ŸÁ
 = 
	`checkCom¶Ÿnû
(
w¬ehou£PİuÏtiÚBa£
,

629 
COMPLIANT_RATE_w¬ehou£PİuÏtiÚBa£
,

631 && 
com¶ŸÁ
;

632 
com¶ŸÁ
 = 
	`checkCom¶Ÿnû
(
Üd”lšesP”Ord”
,

633 
COMPLIANT_RATE_Üd”lšesP”Ord”
, "orderlines_per_order")

634 && 
com¶ŸÁ
;

635 
com¶ŸÁ
 = 
	`checkCom¶Ÿnû
(
d‘”mši¡icRªdomS“d
,

636 
COMPLIANT_RATE_d‘”mši¡icRªdomS“d
,

638 && 
com¶ŸÁ
;

639 
com¶ŸÁ
 = 
	`checkCom¶Ÿnû
(
³r_jvm_w¬ehou£_¿mpup
,

640 
COMPLIANT_RATE_³r_jvm_w¬ehou£_¿mpup
,

642 && 
com¶ŸÁ
;

643 
com¶ŸÁ
 = 
	`checkCom¶Ÿnû
(
³r_jvm_w¬ehou£_¿mpdown
,

644 
COMPLIANT_RATE_³r_jvm_w¬ehou£_¿mpdown
,

646 && 
com¶ŸÁ
;

647 
com¶ŸÁ
 = 
	`checkCom¶Ÿnû
(
¿mpupSecÚds
,

648 
COMPLIANT_RATE_¿mpupSecÚds
, "ramp_up_seconds")

649 && 
com¶ŸÁ
;

650 
com¶ŸÁ
 = 
	`checkCom¶Ÿnû
(
m—su»m’tSecÚds
,

651 
COMPLIANT_RATE_m—su»m’tSecÚds
, "measurement_seconds")

652 && 
com¶ŸÁ
;

653 
com¶ŸÁ
 = 
	`checkCom¶Ÿnû
(
wa™TimeP”ûÁ
,

654 
COMPLIANT_RATE_wa™TimeP”ûÁ
, "wait_time_percent")

655 && 
com¶ŸÁ
;

656 
com¶ŸÁ
 = 
	`checkCom¶Ÿnû
(
¡—dyS‹FÏg
,

657 
COMPLIANT_RATE_¡—dyS‹FÏg
, "steady_state")

658 && 
com¶ŸÁ
;

659 
com¶ŸÁ
 = 
	`checkCom¶Ÿnû
(
sü“nWr™eFÏg
,

660 
COMPLIANT_RATE_sü“nWr™eFÏg
, "screen_write")

661 && 
com¶ŸÁ
;

662 
com¶ŸÁ
 = 
	`checkCom¶Ÿnû
(
unifÜmRªdomI‹ms
,

663 
COMPLIANT_RATE_unifÜmRªdomI‹ms
, "uniform_random_items")

664 && 
com¶ŸÁ
;

665 
com¶ŸÁ
 = 
	`checkCom¶Ÿnû
(
­¶iÿtiÚLoggšgLev–
,

666 
COMPLIANT_RATE_­¶iÿtiÚLoggšgLev–
, "log_level")

667 && 
com¶ŸÁ
;

668 ià(
ov”rideI‹mTabËSize
 > 0) {

669 
com¶ŸÁ
 = 
	`checkCom¶Ÿnû
(
ov”rideI‹mTabËSize
,

670 
COMPLIANT_RATE_ov”rideI‹mTabËSize
,

672 && 
com¶ŸÁ
;

675 ià(
com¶ŸÁ
) {

676 
Sy¡em
.
out
.
	`´šn
();

677 
Sy¡em
.
out
.
	`´šn
("Run will be COMPLIANT");

678 
Sy¡em
.
out
.
	`´šn
();

681 
Sy¡em
.
out
.
	`´šn
();

682 
Sy¡em
.
out
.
	`´šn
("INVALID: Run will NOT be compliant");

683 
Sy¡em
.
out
.
	`´šn
();

685 
	}
}

687 
public
 
Lev–
 
	$g‘AµliÿtiÚLoggšgLev–
() {

688  
­¶iÿtiÚLoggšgLev–
;

689 
	}
}

	@spec/jbb/JBBSortedStorage.java

7 
·ckage
 
	g¥ec
.
	gjbb
;

9 
public
 
š‹rçû
 
JBBSÜ‹dStÜage
 
ex‹nds
 
	gJBBD©aStÜage
 {

11 
fš®
 
SŒšg
 
	gCOPYRIGHT
 = "SPECjbb2005,"

21 
Objeù
 
»moveFœ¡EËm
();

27 
boŞ—n
 
d–‘eFœ¡EÁ™›s
(
quªt
);

33 
boŞ—n
 
d–‘eFœ¡EÁ™›s
();

38 
public
 
Objeù
 
g‘MedŸnV®ue
(Objeù 
fœ¡Key
, Objeù 
Ï¡Key
);

	@spec/jbb/JBBmain.java

9 
·ckage
 
	g¥ec
.
	gjbb
;

11 
impÜt
 
	g¥ec
.
	gjbb
.
	gv®id™y
.
	gCheck
;

12 
impÜt
 
	g¥ec
.
	gjbb
.
	gv®id™y
.
	gdige¡
;

13 
impÜt
 
	gjava
.
	gio
.*;

14 
impÜt
 
	gjava
.
	gut
.*;

15 
impÜt
 
	gjava
.
	gut
.
	gloggšg
.
	gCÚsŞeHªdËr
;

16 
impÜt
 
	gjava
.
	gut
.
	gloggšg
.
	gHªdËr
;

17 
impÜt
 
	gjava
.
	gut
.
	gloggšg
.
	gLev–
;

18 
impÜt
 
	gjava
.
	gut
.
	gloggšg
.
	gLogg”
;

19 
impÜt
 
	gjava
.
	gut
.
	gloggšg
.
	gSŒ—mHªdËr
;

20 
impÜt
 
	gjava
.
	g‹xt
.
	gD©eFÜm©
;

21 
impÜt
 
	g¥ec
.
	g»pÜ‹r
.*;

22 
impÜt
 
	gjava
.
	gÃt
.
	gSock‘
;

24 
public
 cÏs 
	cJBBmaš
 
im¶em’ts
 
	mRuÂabË
 {

26 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

33 
public
 
fš®
 
SŒšg
 
	mV”siÚ
 = "SPECjbb2005 1.07";

35 
public
 
fš®
 
SŒšg
 
	mV”siÚD©e
 = "March 15, 2006";

37 
public
 
fš®
 
	mSŒšg
[] 
	mH—d”
 = {

45 
public
 
fš®
 
	gSŒšg
[] 
	gTPC_FAIR_USE
 = {

64 
´iv©e
 
	gd‘”mši¡ic_£ed
 = 2108417082252868L;

66 
public
 
fš®
 
	gNON_NUMERIC_ENTRY
 = -99;

68 
public
 
Com·ny
 
	gmyCom·ny
 = 
nuÎ
;

70 
public
 
	gVeùÜ
<
	gTh»ad
> 
	gth»adLi¡
;

72 
public
 
	gVeùÜ
<
	gShÜt
> 
	gwhIdSck
;

74 
´iv©e
 
	g‹¡num
 = 0;

76 
´iv©e
 
	gw¬ehou£PİuÏtiÚBa£
;

78 
´iv©e
 
	gÜd”lšesP”Ord”
;

80 
´iv©e
 
	gwa™TimeP”ûÁ
;

82 
´iv©e
 
boŞ—n
 
	gfÜûGC
;

84 
´iv©e
 
boŞ—n
 
	gsü“nWr™eFÏg
;

86 
´iv©e
 
boŞ—n
 
	g¡—dyS‹FÏg
;

88 
public
 
boŞ—n
 
	gunifÜmRªdomI‹ms
;

90 
public
 
	gov”rideI‹mTabËSize
 = 0;

92 
public
 
	gmaxWh
 = 2;

94 
´iv©e
 
PrštSŒ—m
 
	goutResuÉsFe
 = 
nuÎ
;

96 
´iv©e
 
PrštSŒ—m
 
	goutRawFe
 = 
nuÎ
;

98 
´iv©e
 
PrštSŒ—m
 
	goutD–iv”›sFe
 = 
nuÎ
;

101 
public
 
boŞ—n
 
	gmuÉiJVMMode
 = 
çl£
;

103 
public
 
	gš¡ªûId
 = -1;

105 
public
 
	gpÜt
 = 1500;

107 
public
 
Bufã»dR—d”
 
	gsocIn
;

109 
public
 
PrštWr™”
 
	gsocOut
;

111 
public
 
SŒšg
 
	gdeçuÉOuutDœ
 = "results";

113 
public
 
SŒšg
 
	gdeçuÉPrİsFeName
 = "SPECjbb.props";

115 
JBBPrİ”t›s
 
	g´İ
;

117 
public
 
	$run
() {

118 
T¿n§ùiÚMªag”
 
ŒªsMgr
 = 
nuÎ
;

120 
wId
 = ((
ShÜt
è
whIdSck
.
	`»move
(0)).
	`shÜtV®ue
();

121 
maxwh
 = 
myCom·ny
.
	`g‘MaxW¬ehou£s
();

122 ià((
wId
 > 0è&& (wId <ğ
myCom·ny
.
	`g‘MaxW¬ehou£s
())) {

123 
ŒªsMgr
 = 
Ãw
 
	`T¿n§ùiÚMªag”
();

124 
ŒªsMgr
.
	`š™T¿n§ùiÚMªag”
(
myCom·ny
, 
wId
);

126 
myCom·ny
.
	`addW¬ehou£Th»ad
(
ŒªsMgr
);

127 
ŒªsMgr
.
	`go
();

130 
JBBut
.
	`g‘Log
().
	`w¬nšg
(

132 + 
wId
 + "‡nd should be between 1‡nd "

133 + 
myCom·ny
.
	`g‘MaxW¬ehou£s
());

134 
JBBut
.
	`SecÚdsToSË•
(15);

136 
	}
}

138 
public
 
synchrÚized
 
	$¡¬tJBBth»ad
(
whID
) {

139 ià(
th»adLi¡
 =ğ
nuÎ
) {

140 
th»adLi¡
 = 
Ãw
 
VeùÜ
<
Th»ad
>();

143 ià(
whIdSck
 =ğ
nuÎ
) {

144 
whIdSck
 = 
Ãw
 
VeùÜ
<
ShÜt
>();

146 
Th»ad
 
whTh»ad
 = 
Ãw
 
	`Th»ad
(
this
);

147 
th»adLi¡
.
	`add
(
whTh»ad
);

148 
whIdSck
.
	`add
(
whID
);

149 
whTh»ad
.
	`¡¬t
();

150 
	}
};

152 
public
 
synchrÚized
 
	$¡İJBBth»ad
() {

153 !
th»adLi¡
.
	`isEm±y
()) {

154 
Œy
 {

155 ((
Th»ad
è
th»adLi¡
.
	`fœ¡EËm’t
()).
	`isAlive
()) {

156 
JBBut
.
	`SecÚdsToSË•
(1);

158 
th»adLi¡
.
	`»move
(0);

160 
	`ÿtch
 (
NoSuchEËm’tExû±iÚ
 
e
) {

161 
Sy¡em
.
out
.
	`´šn
("No firstƒlement inhehread†ist: ");

162 
e
.
	`´štSckT¿û
();

165 
	}
}

167 
public
 
	$DoARun
(
Com·ny
 
myCom·ny
, 
numb”_of_w¬ehou£s
,

168 
¿mpup_time
, 
m—su»m’t_time
) {

169 
JBBut
.
	`g‘Log
().
	`’‹ršg
("spec.jbb.JBBmain", "DoARun");

170 
whID
;

171 
‹¡num
++;

172 
myCom·ny
.
	`£tPrİOuutP»fix
("»suÉ.‹¡" + 
‹¡num
 + ".");

173 
Sy¡em
.
out
.
	`´šn
("Start User Threads");

174 
JBBut
.
	`g‘Log
().
	`šfo
("Start User Threads");

175 
myCom·ny
.
	`´•¬eFÜS¹
();

176 
Œy
 {

177 
whID
 = 1; whID <ğ
numb”_of_w¬ehou£s
; whID++) {

178 
myCom·ny
.
	`¡¬tAutom©ed
(
whID
, 
¿mpup_time
, 
m—su»m’t_time
);

179 
	`¡¬tJBBth»ad
(
whID
);

180 
SŒšg
 
msg
 = " s¹ed u£¸th»ad fÜ W¬ehou£ " + 
whID
;

181 
Sy¡em
.
out
.
	`´šn
(
msg
);

182 
JBBut
.
	`g‘Log
().
	`šfo
(
msg
);

186 
	`ÿtch
 (
java
.
Ïng
.
Th»adD—th
 
e
) {

187 
Œy
 {

190 
JBBut
.
	`g‘Log
().
	`log
(

191 
Lev–
.
WARNING
,

193 + " Inü—£hh—°sizªd„uÀagaš", 
e
);

195 
	`ÿtch
 (
OutOfMemÜyE¼Ü
 
oome
) {

198 
Sy¡em
.
out


199 .
	`´šn
("ERROR: Ahread died,…robably out of memory."

201 
e
.
	`´štSckT¿û
();

204 
	`ÿtch
 (
java
.
Ïng
.
OutOfMemÜyE¼Ü
 
e
) {

205 
Œy
 {

208 
JBBut
.
	`g‘Log
().
	`log
(

209 
Lev–
.
WARNING
,

211 + " Inü—£hh—°sizªd„uÀagaš.", 
e
);

213 
	`ÿtch
 (
OutOfMemÜyE¼Ü
 
oome
) {

216 
Sy¡em
.
out
.
	`´šn
("ERROR: Out of memoryƒrror caught! "

218 
e
.
	`´štSckT¿û
();

221 
myCom·ny
.
	`di¥ÏyResuÉTÙ®s
(
´İ
.
showW¬ehou£D‘a
);

222 
	`¡İJBBth»ad
();

223 
JBBut
.
	`g‘Log
().
	`ex™šg
("spec.jbb.JBBmain", "DoARun");

225 
	`æushLog
();

226 
	}
}

228 
public
 
boŞ—n
 
	$DoAV®id©iÚRun
(
Com·ny
 
myCom·ny
) {

229 
whID
;

230 
myCom·ny
.
	`´•¬eFÜS¹
();

231 
myCom·ny
.
	`¡¬tV®id©iÚ
(() 1);

232 
T¿n§ùiÚMªag”
 
ŒªsMgr
 = 
Ãw
 
	`T¿n§ùiÚMªag”
();

233 
ŒªsMgr
.
	`š™T¿n§ùiÚMªag”
(
myCom·ny
, () 1);

234  
ŒªsMgr
.
	`goV®id©e
();

235 
	}
}

237 
public
 
	$doIt
() {

238 
JBBut
.
	`g‘Log
().
	`’‹ršg
("spec.jbb.JBBmain", "DOIT");

242 
mš_bs
 = (è((
´İ
.
mšBTPSR©io
 * 100.0 /…rİ.
wa™TimeP”ûÁ
) * 2.3 / 60.0);

243 
T¿n§ùiÚ
.
	`£tOrd”LšeCouÁ
(
´İ
.
Üd”lšesP”Ord”
);

244 
myCom·ny
 = 
Ãw
 
	`Com·ny
();

246 ià(
´İ
.
d‘”mši¡icRªdomS“d
 =ğ
Œue
) {

247 
JBBut
.
	`£t_¿ndom_£ed
(
d‘”mši¡ic_£ed
);

249 
myCom·ny
.
	`£tJVMIn¡ªûV®ues
(
´İ
.
jvm_š¡ªûs
);

250 
myCom·ny
.
	`£tMuÉiJVMRampšgV®ues
(
´İ
.
³r_jvm_w¬ehou£_¿mpup
,´İ.
³r_jvm_w¬ehou£_¿mpdown
);

251 
myCom·ny
.
	`£tPİuÏtiÚV®ues
(
´İ
.
w¬ehou£PİuÏtiÚBa£
,

252 
JBBPrİ”t›s
.
ov”rideI‹mTabËSize
);

253 
T¿n§ùiÚ
.
	`£tLogWr™e
(
´İ
.
sü“nWr™eFÏg
);

254 
T¿n§ùiÚ
.
	`£tS‹adyS‹
(
´İ
.
¡—dyS‹FÏg
);

255 
cur_w¬ehou£s
 = 0;

256 
num_wh
;

257 ià(
´İ
.
£qu’ûOfW¬ehou£s
 =ğ
nuÎ
) {

258 
num_wh
 = 
´İ
.
¡¬tšgNumb”W¬ehou£s
;‚um_wh <ğ´İ.
’dšgNumb”W¬ehou£s
;‚um_wh +ğ´İ.
šüem’tNumb”W¬ehou£s
) {

259 ià(!
	`runW¬ehou£
(
cur_w¬ehou£s
, 
num_wh
, 
mš_bs
))

261 
cur_w¬ehou£s
 = 
num_wh
;

265 
£qndx
 = 0; seqndx < 
´İ
.
£qu’ûOfW¬ehou£s
.
Ëngth
; seqndx++) {

266 
num_wh
 = 
´İ
.
£qu’ûOfW¬ehou£s
[
£qndx
];

267 ià(!
	`runW¬ehou£
(
cur_w¬ehou£s
, 
num_wh
, 
mš_bs
))

269 
cur_w¬ehou£s
 = 
num_wh
;

272 
JBBut
.
	`g‘Log
().
	`ex™šg
("spec.jbb.JBBmain", "DOIT");

273 
	}
}

275 
public
 
boŞ—n
 
	$doItFÜV®id©iÚ
() {

276 
T¿n§ùiÚ
.
	`£tOrd”LšeCouÁ
(
Üd”lšesP”Ord”
);

277 
myCom·ny
 = 
Ãw
 
	`Com·ny
();

278 
v®id©iÚS“d
 = 528562479389981L;

279 
JBBut
.
	`£t_¿ndom_£ed
(
v®id©iÚS“d
);

280 
myCom·ny
.
	`£tPİuÏtiÚV®ues
(
w¬ehou£PİuÏtiÚBa£
);

281 
T¿n§ùiÚ
.
	`£tLogWr™e
(
sü“nWr™eFÏg
);

282 
T¿n§ùiÚ
.
	`£tS‹adyS‹
(
¡—dyS‹FÏg
);

283 
T¿n§ùiÚ
.
	`£tV®id©iÚ
(
Œue
);

284 
	`šü—£NumW¬ehou£s
(0, 1, 
wa™TimeP”ûÁ
);

285 
boŞ—n
 
runV®id
 = 
	`DoAV®id©iÚRun
(
myCom·ny
);

286 
T¿n§ùiÚ
.
	`£tV®id©iÚ
(
çl£
);

287  
runV®id
;

288 
	}
}

290 
´iv©e
 
	$šü—£NumW¬ehou£s
(
cu¼’t
, 
Ãxt
,

291 
wa™TimeP”ûÁ
) {

292 
JBBut
.
	`g‘Log
().
	`’‹ršg
("spec.jbb.JBBmain", "increaseNumWarehouses");

293 
i
 = 
cu¼’t
 + 1; i <ğ
Ãxt
; i++) {

294 
myCom·ny
.
	`´imeW™hDummyD©a
((è
i
, 0);

295 
myCom·ny
.
	`g‘Tim”D©aPŒ
((è
i
).
	`u£Wa™TimesP”ûÁage
(

296 
wa™TimeP”ûÁ
);

298 
JBBut
.
	`g‘Log
().
	`ex™šg
("spec.jbb.JBBmain", "increaseNumWarehouses");

299 
	}
}

301 
public
 
boŞ—n
 
	$runW¬ehou£
(
cur_w¬ehou£s
, 
num_wh
, 
mš_bs
) {

302 
JBBut
.
	`g‘Log
().
	`’‹ršg
("spec.jbb.JBBmain", "runWarehouse");

303 
Sy¡em
.
out


304 .
	`´šn
("\n++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\n");

305 
	`šü—£NumW¬ehou£s
(
cur_w¬ehou£s
, 
num_wh
, 
´İ
.
wa™TimeP”ûÁ
);

306 
m—su»m’tSecÚds
 = 0;

307 ià(
num_wh
 < 
´İ
.
ex³ùedP—kW¬ehou£
) {

308 
	`DoARun
(
myCom·ny
, (èmyCom·ny.
	`g‘MaxW¬ehou£s
(), 0,

309 
´İ
.
¿mpupSecÚds
);

312 
	`DoARun
(
myCom·ny
, (èmyCom·ny.
	`g‘MaxW¬ehou£s
(), 0,

313 
´İ
.
m—su»m’tSecÚds
);

315 ià(
´İ
.
checkThroughput
) {

316 
Tim”D©a
 
com·nyTim”D©aPŒ
 = 
myCom·ny


317 .
	`g‘Tim”D©aPŒ
(() 0);

318 
»suÉ
 = 
com·nyTim”D©aPŒ
.
	`g‘BTPS
();

319 ià(
»suÉ
 < (
mš_bs
 * 
num_wh
)) {

320 
Sy¡em
.
out
.
	`´šn
("result below min for warehouse");

321 
JBBut
.
	`g‘Log
().
	`ex™šg
("spec.jbb.JBBmain", "runWarehouse");

322  
çl£
;

325 
JBBut
.
	`g‘Log
().
	`ex™šg
("spec.jbb.JBBmain", "runWarehouse");

326  
Œue
;

327 
	}
}

329 
public
 
SŒšg
 
	$commªdLšeP¬£r
(
SŒšg
 
¬gs
[]) {

330 
SŒšg
 
s
 = 
nuÎ
;

331 ià(
¬gs
.
Ëngth
 == 0) {

332 
s
 = 
deçuÉPrİsFeName
;

334 ià(
¬gs
[0].
	`equ®s
("-id")) {

335 
JBBmaš
.
š¡ªûId
 = 
IÁeg”
.
	`·r£IÁ
(
¬gs
[1]);

337 ià(
¬gs
[0].
	`equ®s
("-propfile")) {

338 ià(
¬gs
.
Ëngth
 == 2) {

339 
s
 = 
¬gs
[1];

342 ià(
¬gs
.
Ëngth
 == 1) {

343 
Sy¡em
.
out
.
	`´šn
("Missing…roperties file‚ame");

344 
Sy¡em
.
out


345 .
	`´šn
(" Parameters: -propfile <properties_file_name> [-id <instance_id>]");

347 ià(
¬gs
.
Ëngth
 =ğ4 &&‡rgs[2].
	`equ®s
("-id")) {

348 
s
 = 
¬gs
[1];

349 
JBBmaš
.
š¡ªûId
 = 
IÁeg”
.
	`·r£IÁ
(
¬gs
[3]);

352 
Sy¡em
.
out
.
	`´šn
("Too many…arameters");

353 
Sy¡em
.
out


354 .
	`´šn
(" Parameters: -propfile <properties_file_name> [-id <instance_id>]");

359 
Sy¡em
.
out
.
	`´šn
("Unrecognized command†ine…arameter: "

360 + 
¬gs
[0]);

361 
Sy¡em
.
out


362 .
	`´šn
(" Parameters: -propfile <properties_file_name>");

364  
s
;

365 
	}
}

367 
public
 
boŞ—n
 
	$š™OuutDœ
(
SŒšg
 
ouutDœ
) {

368 ià(
ouutDœ
 =ğ
nuÎ
) {

370 
ouutDœ
 = 
deçuÉOuutDœ
;

372 
Fe
 
ouut_dœeùÜy_fe
 = 
Ãw
 
	`Fe
(
ouutDœ
);

373 ià(
ouut_dœeùÜy_fe
.
	`exi¡s
()) {

375 ià(!
ouut_dœeùÜy_fe
.
	`isDœeùÜy
()) {

376 
Sy¡em
.
out


377 .
	`´šn
("ERROR: Specified input.output_directory is‚ot‡ directory: "

378 + 
ouutDœ
);

379  
çl£
;

383 ià(!
ouut_dœeùÜy_fe
.
	`mkdœs
()) {

384 
Sy¡em
.
out


385 .
	`´šn
("ERROR: Cannot create input.output_directory: "

386 + 
ouutDœ
);

387  
çl£
;

390  
Œue
;

391 
	}
}

393 
public
 
	$ÿÎR•Ü‹r
(
SŒšg
 
ouut_dœeùÜy
, SŒšg 
outRawFe_Çme
,

394 
SŒšg
 
outRawP»fix
, SŒšg 
£qu’ûNumb”
) {

396 
SŒšg
 
msg
 = "Calling Reporter";

397 
JBBut
.
	`g‘Log
().
	`šfo
(
msg
);

398 
Sy¡em
.
out
.
	`´šn
();

399 
Sy¡em
.
out
.
	`´šn
();

400 
Sy¡em
.
out
.
	`´šn
(
msg
);

401 
boŞ—n
 
İ‹
 = 
Œue
;

402 
boŞ—n
 
İth
 = 
çl£
;

403 
SŒšg
 
İŒ
 = 
outRawFe_Çme
;

404 
SŒšg
 
İ
 = 
£qu’ûNumb”
;

405 
boŞ—n
 
İts
 = 
çl£
;

406 
SŒšg
 
İŠ
 = 
nuÎ
;

407 
SŒšg
 
İto
 = 
ouut_dœeùÜy
 + 
Fe
.
£·¿tÜ
 + 
outRawP»fix


408 + 
£qu’ûNumb”
 + ".html";

409 
SŒšg
 
fe_Ascii
 = 
ouut_dœeùÜy
 + 
Fe
.
£·¿tÜ
 + 
outRawP»fix


410 + 
£qu’ûNumb”
 + ".txt";

411 
SŒšg
 
İtc
 = 
nuÎ
;

412 
SŒšg
 
İtS
 = 
nuÎ
;

413 
boŞ—n
 
İtv
 = 
çl£
;

414 
¥ec
.
»pÜ‹r
.
R•Üt
 
r
;

415 
Œy
 {

416 
TextiR•Üt
 
¬
 = 
Ãw
 
¥ec
.
»pÜ‹r
.
	`TextiR•Üt
(
İŠ
, 
İŒ
, 
İts
);

417 
¬
.
	`´št
(
fe_Ascii
);

419 
	`ÿtch
 (
Exû±iÚ
 
e
) {

421 
Œy
 {

422 
r
 = 
Ãw
 
¥ec
.
»pÜ‹r
.
	`R•Üt
(
İ‹
, 
İts
, 
İŠ
, 
İŒ
, 
İtv
, 
İtc
,

423 
İ
, 
İth
, 
ouut_dœeùÜy
);

425 
	`ÿtch
 (
Exû±iÚ
 
e
) {

426 
İth
 = 
Œue
;

427 
JBBut


428 .
	`g‘Log
()

429 .
	`w¬nšg
(

431 
r
 = 
Ãw
 
¥ec
.
»pÜ‹r
.
	`R•Üt
(
İ‹
, 
İts
, 
İŠ
, 
İŒ
, 
İtv
, 
İtc
,

432 
İ
, 
İth
, 
ouut_dœeùÜy
);

434 
	`ÿtch
 (
java
.
Ïng
.
IÁ”ÇlE¼Ü
 
e
) {

435 
İth
 = 
Œue
;

436 
JBBut


437 .
	`g‘Log
()

438 .
	`w¬nšg
(

440 
r
 = 
Ãw
 
¥ec
.
»pÜ‹r
.
	`R•Üt
(
İ‹
, 
İts
, 
İŠ
, 
İŒ
, 
İtv
, 
İtc
,

441 
İ
, 
İth
, 
ouut_dœeùÜy
);

443 
	`ÿtch
 (
java
.
Ïng
.
Un§tisf›dLškE¼Ü
 
e
) {

444 
İth
 = 
Œue
;

445 
JBBut


446 .
	`g‘Log
()

447 .
	`w¬nšg
(

449 
r
 = 
Ãw
 
¥ec
.
»pÜ‹r
.
	`R•Üt
(
İ‹
, 
İts
, 
İŠ
, 
İŒ
, 
İtv
, 
İtc
,

450 
İ
, 
İth
, 
ouut_dœeùÜy
);

452 
	`ÿtch
 (
java
.
Ïng
.
E¼Ü
 
e
) {

453 
İth
 = 
Œue
;

454 
JBBut


455 .
	`g‘Log
()

456 .
	`w¬nšg
(

458 
r
 = 
Ãw
 
¥ec
.
»pÜ‹r
.
	`R•Üt
(
İ‹
, 
İts
, 
İŠ
, 
İŒ
, 
İtv
, 
İtc
,

459 
İ
, 
İth
, 
ouut_dœeùÜy
);

461 
r
.
	`´št
(
İto
);

462 
Œy
 {

463 
Bufã»dR—d”
 
AscBr
 = 
Ãw
 
	`Bufã»dR—d”
(

464 
Ãw
 
	`FeR—d”
(
fe_Ascii
));

465 
SŒšg
 
s
;

466 (
s
 = 
AscBr
.
	`»adLše
()è!ğ
nuÎ
) {

467 
Sy¡em
.
out
.
	`´šn
(
s
);

470 
	`ÿtch
 (
IOExû±iÚ
 
e
) {

471 
JBBut
.
	`g‘Log
().
	`log
(
Lev–
.
WARNING
,

472 "E¼Ü o³nšg ASCII ouuˆfe", 
e
);

474 
Sy¡em
.
out
.
	`´šn
("Ouuˆfes: " + 
fe_Ascii
 + ", "

475 + 
outRawFe_Çme
 + ", " + 
İto
);

476 
Sy¡em
.
out
.
	`´šn
();

477 
Sy¡em
.
out
.
	`´šn
();

478 
Sy¡em
.
out
.
	`´šn
("Reporter messages:");

479 
Sy¡em
.
out
.
	`´šn
(
r
.
	`mes§ges
());

480 
	}
}

482 
public
 
	$maš
(
SŒšg
 
¬gs
[]) {

483 
JBBmaš
 
maš
;

484 
T¿n§ùiÚMªag”
 
ŒªsMgr
;

485 
whID
 = 0;

486 
by‹
 
tID
 = 0;

487 
SŒšg
 
outRawP»fix
 = "SPECjbb.";

488 
SŒšg
 
outRawSuffix
 = ".raw";

489 
boŞ—n
 
·s£d_200_check
 = !(
Check
.
	`doCheck
());

490 
maš
 = 
Ãw
 
	`JBBmaš
();

491 
maš
.
w¬ehou£PİuÏtiÚBa£
 = 30;

492 
maš
.
Üd”lšesP”Ord”
 = 10;

493 
maš
.
wa™TimeP”ûÁ
 = 0;

494 
maš
.
fÜûGC
 = 
çl£
;

495 
maš
.
sü“nWr™eFÏg
 = 
çl£
;

496 
maš
.
¡—dyS‹FÏg
 = 
Œue
;

497 
JBBmaš
.
unifÜmRªdomI‹ms
 = 
Œue
;

499 
SŒšg
 
Şd´İ
 = 
Sy¡em
.
	`£tPrİ”ty
("java.awt.headless", "true");

501 
PrštSŒ—m
 
sü©ch1
 = 
nuÎ
;

502 
PrštSŒ—m
 
sü©ch2
 = 
nuÎ
;

508 
JBBut
.
	`£tLog
(
Logg”
.
	`g‘Logg”
("global"));

509 
JBBut
.
	`g‘Log
().
	`£tLev–
(
Lev–
.
WARNING
);

514 
Œy
 {

515 
Œy
 {

516 
sü©ch1
 = 
Ãw
 
	`PrštSŒ—m
Òew 
	`FeOuutSŒ—m
(

518 
sü©ch2
 = 
Ãw
 
	`PrštSŒ—m
Òew 
	`FeOuutSŒ—m
(

521 
	`ÿtch
 (
IOExû±iÚ
 
e
) {

522 
JBBut
.
	`g‘Log
().
	`log
(
Lev–
.
WARNING
,

523 "VALIDATION ERROR: IOExû±iÚ: " + 
e
.
	`g‘Mes§ge
(),ƒ);

525 
Com·ny
.
	`£tOuuts
(
sü©ch1
, 
sü©ch2
);

526 
boŞ—n
 
·s£d_v®id©iÚ
 = 
maš
.
	`doItFÜV®id©iÚ
();

527 
maš
 = 
nuÎ
;

528 
sü©ch1
.
	`şo£
();

529 
sü©ch2
.
	`şo£
();

530 
Fe
 
tfe
 = 
Ãw
 
	`Fe
("JBB.temp.scratch1");

531 
tfe
.
	`d–‘e
();

532 
tfe
 = 
Ãw
 
	`Fe
("JBB.temp.scratch2");

533 
tfe
.
	`d–‘e
();

534 
maš
 = 
Ãw
 
	`JBBmaš
();

535 
maš
.
´İ
 = 
Ãw
 
	`JBBPrİ”t›s
(maš.
	`commªdLšeP¬£r
(
¬gs
));

536 ià(!
maš
.
´İ
.
	`g‘Prİs
()) {

537 
Sy¡em
.
out


538 .
	`´šn
("ERROR: Properties Fileƒrror;…lease start‡gain");

541 
ov”rideI‹mTabËSize
 = 
JBBmaš
.overrideItemTableSize;

548 
SŒšg
 
ouut_dœeùÜy
;

549 ià(
maš
.
´İ
.
jvm_š¡ªûs
 > 1) {

550 
JBBmaš
.
muÉiJVMMode
 = 
Œue
;

552 ià(!
muÉiJVMMode
) {

553 
ouut_dœeùÜy
 = 
maš
.
´İ


554 .
	`g‘O±iÚ®Prİ”ty
("input.output_directory")

555 + 
Fe
.
£·¿tÜ
 + "SPECjbbSingleJVM";

556 ià(!
maš
.
	`š™OuutDœ
(
ouut_dœeùÜy
)) {

561 
SŒšg
 
·»ÁDœ
 = 
maš
.
´İ


562 .
	`g‘O±iÚ®Prİ”ty
("input.output_directory");

563 
RunSequ’ûr
 
cu¼’tDœRS
 = 
Ãw
 
	`RunSequ’ûr
(
·»ÁDœ
,

565 
ouut_dœeùÜy
 = 
·»ÁDœ
 + 
Fe
.
£·¿tÜ


567 + (
cu¼’tDœRS
.
	`·dNumb”
(cu¼’tDœRS.
	`g‘Seq
() - 1));

569 
SŒšg
 
£qu’ûNumb”
;

570 ià(
maš
.
´İ
.
jvm_š¡ªûs
 > 1) {

571 
SŒšg
 
n
 = 
£qu’ûNumb”
 = SŒšg.
	`v®ueOf
(
š¡ªûId
);

572 
£qu’ûNumb”
 = "" + 
n
;

573 
»tuºSŒšgL’gth
 = 
£qu’ûNumb”
.
	`Ëngth
();

574 ià(
»tuºSŒšgL’gth
 == 1) {

575 
£qu’ûNumb”
 = "00" + sequenceNumber;

577 ià(
»tuºSŒšgL’gth
 == 2) {

578 
£qu’ûNumb”
 = "0" + sequenceNumber;

582 
RunSequ’ûr
 
rs
 = 
Ãw
 
	`RunSequ’ûr
(
ouut_dœeùÜy
,

583 
outRawP»fix
, 
outRawSuffix
);

584 
£qu’ûNumb”
 = 
rs
.
	`g‘SeqSŒšg
();

586 
SŒšg
 
outResuÉsFe_Çme
 = 
ouut_dœeùÜy
 + 
Fe
.
£·¿tÜ


587 + "SPECjbb." + 
£qu’ûNumb”
 + ".results";

588 
SŒšg
 
outRawFe_Çme
 = 
ouut_dœeùÜy
 + 
Fe
.
£·¿tÜ


589 + 
outRawP»fix
 + 
£qu’ûNumb”
 + 
outRawSuffix
;

590 
SŒšg
 
outD–iv”›sFe_Çme
 = 
ouut_dœeùÜy
 + 
Fe
.
£·¿tÜ


591 + "SPECjbb." + 
£qu’ûNumb”
 + ".deliveries";

592 
SŒšg
 
logFe_Çme
 = 
ouut_dœeùÜy
 + 
Fe
.
£·¿tÜ


593 + "SPECjbb." + 
£qu’ûNumb”
 + ".log";

594 
Sy¡em
.
out
.
	`´šn
("Th»suÉ wÈbš: " + 
outRawFe_Çme
);

595 
Œy
 {

596 
SaveOuut
.
	`¡¬t
(
outResuÉsFe_Çme
);

597 
Sy¡em
.
out
.
	`´šn
("O³Ãd " + 
outResuÉsFe_Çme
);

598 
outRawFe
 = 
Ãw
 
	`PrštSŒ—m
Òew 
	`FeOuutSŒ—m
(

599 
outRawFe_Çme
));

600 
Sy¡em
.
out
.
	`´šn
("O³Ãd " + 
outRawFe_Çme
);

601 
outD–iv”›sFe
 = 
Ãw
 
	`PrštSŒ—m
Òew 
	`FeOuutSŒ—m
(

602 
outD–iv”›sFe_Çme
));

604 
	`ÿtch
 (
IOExû±iÚ
 
e
) {

606 
JBBut
.
	`g‘Log
().
	`log
(
Lev–
.
WARNING
,

607 "ERROR: IOExû±iÚ: " + 
e
.
	`g‘Mes§ge
(),ƒ);

609 
Com·ny
.
	`£tOuuts
(
outRawFe
, 
outD–iv”›sFe
);

611 
SŒšg
 
¡r
 : 
H—d”
) {

612 
Sy¡em
.
out
.
	`´šn
(
¡r
);

614 
Sy¡em
.
out
.
	`´šn
("");

615 
Sy¡em
.
out
.
	`´šn
("B’chm¬k " + 
V”siÚ
 + "‚ow Opening");

616 
Sy¡em
.
out
.
	`´šn
("");

618 ià(
maš
.
´İ
.
£qu’ûOfW¬ehou£s
 =ğ
nuÎ
) {

619 
maxWh
 = 
maš
.
´İ
.
’dšgNumb”W¬ehou£s
 + 1;

622 
maxWh
 = 
maš
.
´İ
.
£qu’ûOfW¬ehou£s
[maš.´İ.£qu’ûOfW¬ehou£s.
Ëngth
 - 1] + 1;

625 ià(!
maš
.
	`š™AµliÿtiÚLoggšg
(
logFe_Çme
)) {

626 
Sy¡em
.
out
.
	`´šn
("ERROR: Logging initialization failed!");

630 
JBBut
.
	`g‘Log
().
	`šfo
("Logging started");

631 
maš
.
´İ
.
	`£tPrİ
("cÚfig.b’chm¬k_v”siÚ", 
V”siÚ
);

632 
maš
.
´İ
.
	`£tPrİ
("cÚfig.b’chm¬k_v”siÚD©e", 
V”siÚD©e
);

633 
maš
.
´İ
.
	`£tPrİ
("cÚfig.‹¡.d©e", 
D©eFÜm©
.
	`g‘D©eIn¡ªû
()

634 .
	`fÜm©
(
Ãw
 
	`D©e
()));

635 ià(!
maš
.
´İ
.
	`cİyPrİsToOuut
(
outRawFe
)) {

636 
Sy¡em
.
out


637 .
	`´šn
("ERROR: Properties Fileƒrror;…lease start‡gain");

640 
SŒšg
 
v®ue
 = 
maš
.
´İ
.
	`£tPrİ
("result.validity.200_check",

641 
Ãw
 
	`BoŞ—n
(
·s£d_200_check
).
	`toSŒšg
());

642 
outRawFe
.
	`´šn
("»suÉ.v®id™y.200_check" + "=" + 
v®ue
);

643 
v®ue
 = 
maš
.
´İ
.
	`£tPrİ
("result.validity.jbb_operation",

644 
Ãw
 
	`BoŞ—n
(
·s£d_v®id©iÚ
).
	`toSŒšg
());

645 
outRawFe
.
	`´šn
("»suÉ.v®id™y.jbb_İ”©iÚ" + "=" + 
v®ue
);

646 
dige¡
 
d
 = 
Ãw
 
	`dige¡
();

647 
boŞ—n
 
_999_check™
 = 
d
.
	`üunch_j¬
("jbb.jar");

648 
v®ue
 = 
maš
.
´İ
.
	`£tPrİ
("result.validity.999_checkit",

649 
Ãw
 
	`BoŞ—n
(
_999_check™
).
	`toSŒšg
());

650 
outRawFe
.
	`´šn
("»suÉ.v®id™y.999_check™" + "=" + 
v®ue
);

651 
maš
.
´İ
.
	`checkCom¶Ÿnû
();

653 
maš
.
	`æushLog
();

655 ià(
JBBmaš
.
muÉiJVMMode
) {

656 
SŒšg
 
msg
 = "Running Multi-JVM Test: socket "

657 + (
pÜt
 + 
JBBmaš
.
š¡ªûId
);

658 
JBBut
.
	`g‘Log
().
	`šfo
(
msg
);

659 
Sy¡em
.
out
.
	`´šn
(
msg
);

660 
Sock‘
 
soc
 = 
nuÎ
;

661 
boŞ—n
 
ŒySucûeded
 = 
çl£
;

662 
Œ›s
 = 0;

663 !
ŒySucûeded
 && (
Œ›s
 < 10)) {

664 
Œy
 {

665 
Œ›s
++;

666 ià(
Œ›s
 > 1) {

667 
Th»ad
.
	`¦“p
(5000);

669 
soc
 = 
Ãw
 
	`Sock‘
("loÿlho¡", 
pÜt
 + 
JBBmaš
.
š¡ªûId
);

670 
ŒySucûeded
 = 
Œue
;

672 
	`ÿtch
 (
Exû±iÚ
 
e
) {

677 
ŒySucûeded
 = 
çl£
;

680 ià(
Œ›s
 == 10) {

681 
JBBut
.
	`g‘Log
().
	`w¬nšg
(

685 
Œy
 {

686 
socIn
 = 
Ãw
 
	`Bufã»dR—d”
Òew 
	`IÅutSŒ—mR—d”
(
soc


687 .
	`g‘IÅutSŒ—m
()));

689 
	`ÿtch
 (
Exû±iÚ
 
e
) {

690 
JBBut
.
	`g‘Log
().
	`log
(
Lev–
.
WARNING
,

691 
e
 + ":ƒrror in setting socket input",ƒ);

694 
Œy
 {

695 
socOut
 = 
Ãw
 
	`PrštWr™”
Òew 
	`OuutSŒ—mWr™”
(
soc


696 .
	`g‘OuutSŒ—m
()));

698 
	`ÿtch
 (
Exû±iÚ
 
e
) {

699 
JBBut
.
	`g‘Log
().
	`log
(
Lev–
.
WARNING
,

700 
e
 + ":ƒrror in setting socket out",ƒ);

704 
maš
.
	`doIt
();

706 
maš
.
	`æushLog
();

707 ià(
JBBPrİ”t›s
.
´štPrİ”t›sAndArgs
) {

709 
Prİ”t›s
 
´İs
 = 
Sy¡em
.
	`g‘Prİ”t›s
();

710 
S‘
 
keys
 = 
´İs
.
	`keyS‘
();

711 
VeùÜ
 
keyvec
 = 
Ãw
 
	`VeùÜ
(
keys
);

712 
CŞËùiÚs
.
	`sÜt
(
keyvec
);

713 
i
 = 0; i < 
keyvec
.
	`size
(); i++) {

714 
SŒšg
 
´İsKey
 = (SŒšgè
keyvec
.
	`–em’tAt
(
i
);

715 
SŒšg
 
sv®ue
 = 
´İs
.
	`g‘Prİ”ty
(
´İsKey
);

716 
outRawFe
.
	`´šn
(
´İsKey
 + "=" + 
sv®ue
);

719 
outRawFe
.
	`´št
("input.cmdline=");

720 
i
 = 0; i < 
¬gs
.
Ëngth
; i++) {

721 
outRawFe
.
	`´št
(
¬gs
[
i
] + " ");

723 
outRawFe
.
	`´šn
();

725 
maš
.
	`ÿÎR•Ü‹r
(
ouut_dœeùÜy
, 
outRawFe_Çme
, 
outRawP»fix
,

726 
£qu’ûNumb”
);

727 
outD–iv”›sFe
.
	`şo£
();

728 
outRawFe
.
	`şo£
();

730 ià(
muÉiJVMMode
) {

731 
SŒšg
 
msg
 = 
JBBmaš
.
š¡ªûId
 + ":FINISHED";

732 
SŒšg
 
ex™Msg
 = 
JBBmaš
.
š¡ªûId
 + ":EXIT";

733 
JBBut
.
	`g‘Log
().
	`šfo
(
msg
);

734 
Sy¡em
.
out
.
	`´šn
(
msg
);

735 
JBBmaš
.
socOut
.
	`´šn
(
msg
);

736 
Sy¡em
.
out
.
	`´šn
("Sent FINISHED message");

737 
JBBmaš
.
socOut
.
	`æush
();

738 
SŒšg
 
mesg
 = "NULL";

739 
Œy
 {

740 (
mesg
 !ğ
nuÎ
è&& !mesg.
	`m©ches
(
ex™Msg
))

741 
mesg
 = 
JBBmaš
.
socIn
.
	`»adLše
();

743 
	`ÿtch
 (
NuÎPoš‹rExû±iÚ
 
e
){

746 
	`ÿtch
(
java
.
Ãt
.
Sock‘Exû±iÚ
 
£
){

749 
	`ÿtch
 (
Exû±iÚ
 
e
){

750 
JBBut
.
	`g‘Log
().
	`log
(
Lev–
.
WARNING
,

751 
e
 + ":ƒrror‡waiting finalƒxit message",ƒ);

754 
Sy¡em
.
out
.
	`´šn
("Final EXIT„eached");

756 
SaveOuut
.
	`¡İ
();

758 
fš®ly
 {

760 
JBBut
.
	`g‘Log
().
	`šfo
("Loggingƒnded");

761 
HªdËr
[] 
hªdËrs
 = 
JBBut
.
	`g‘Log
().
	`g‘HªdËrs
();

763 
HªdËr
 
logHªdËr
 : 
hªdËrs
) {

764 
logHªdËr
.
	`şo£
();

768 
Sy¡em
.
	`ex™
(0);

769 
	}
}

771 
´iv©e
 
boŞ—n
 
	$š™AµliÿtiÚLoggšg
(
SŒšg
 
logFeName
) {

772 
SŒ—mHªdËr
 
hªdËr
 = 
nuÎ
;

773 
Œy
 {

774 
hªdËr
 = 
Ãw
 
	`SŒ—mHªdËr
Òew 
	`FeOuutSŒ—m
(
logFeName
),

775 
Ãw
 
	`JBBLogFÜm©‹r
());

777 
	`ÿtch
 (
FeNÙFoundExû±iÚ
 
âã
) {

778 
JBBut
.
	`g‘Log
().
	`log
(
Lev–
.
WARNING
,

779 "ERROR: UÇbËØİ’†oggšg f" + 
logFeName
, 
âã
);

780  
çl£
;

782 
hªdËr
.
	`£tLev–
(
´İ
.
	`g‘AµliÿtiÚLoggšgLev–
());

788 
CÚsŞeHªdËr
 
”rHªdËr
 = 
Ãw
 
	`CÚsŞeHªdËr
();

789 
”rHªdËr
.
	`£tLev–
(
Lev–
.
WARNING
);

791 
Logg”
 
­pLog
 = Logg”.
	`g‘Logg”
("spec.jbb");

792 
­pLog
.
	`£tLev–
(
´İ
.
	`g‘AµliÿtiÚLoggšgLev–
());

793 
­pLog
.
	`£tU£P¬’tHªdËrs
(
çl£
);

794 
­pLog
.
	`addHªdËr
(
hªdËr
);

795 
­pLog
.
	`addHªdËr
(
”rHªdËr
);

799 
	`æushLog
();

802 
JBBut
.
	`£tLog
(
­pLog
);

803  
Œue
;

804 
	}
}

806 
´iv©e
 
	$æushLog
() {

807 
HªdËr
[] 
hªdËrs
 = 
JBBut
.
	`g‘Log
().
	`g‘HªdËrs
();

809 
HªdËr
 
logHªdËr
 : 
hªdËrs
) {

810 
logHªdËr
.
	`æush
();

812 
	}
}

	@spec/jbb/JBButil.java

12 
·ckage
 
	g¥ec
.
	gjbb
;

14 
impÜt
 
	gjava
.
	gut
.
	gRªdom
;

15 
impÜt
 
	gjava
.
	gut
.
	gloggšg
.
	gLev–
;

16 
impÜt
 
	gjava
.
	gut
.
	gloggšg
.
	gLogg”
;

18 
public
 cÏs 
	cJBBut
 {

20 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

27 
´iv©e
 
fš®
 
SŒšg
 
	mÜigš®Text
 = "ORIGINAL";

29 
´iv©e
 
Rªdom
 
	mr
;

31 
´iv©e
 
fš®
 
SŒšg
 
	mÏ¡_Çme_·¹s
[] = {

36 
´iv©e
 
fš®
 
	g®num
[] = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"

37 .
toCh¬A¼ay
();

39 
public
 
fš®
 
	gA_C_LAST
 = 255;

43 
public
 
fš®
 
	gC_C_LAST
 = 173;

46 
public
 
fš®
 
	gA_C_ID
 = 102;

54 
public
 
fš®
 
	gC_C_ID
 = 34;

61 
public
 
fš®
 
	gA_OL_I_ID
 = 8191;

65 
public
 
fš®
 
	gC_OL_I_ID
 = 5456;

68 
public
 
fš®
 
by‹
 
	gMaxOrd”Lšes
 = 15;

71 
´iv©e
 
	gRªdom
[] 
	gw¬ehou£_¿ndom_¡»am
;

73 
´iv©e
 
Logg”
 
	g­pLog
;

75 
public
 
	$cu¼’tF»eMem
() {

76 
»suÉ
 = 0;

77 
»suÉ
 = 
RuÁime
.
	`g‘RuÁime
().
	`ä“MemÜy
();

78  
»suÉ
;

79 
	}
};

81 
public
 
	$cu¼’tTÙ®Mem
() {

82 
»suÉ
 = 0;

83 
»suÉ
 = 
RuÁime
.
	`g‘RuÁime
().
	`tÙ®MemÜy
();

84  
»suÉ
;

85 
	}
};

87 
public
 
	$cu¼’tU£dMem
() {

88 
»suÉ
 = 0;

89 
»suÉ
 = 
RuÁime
.
	`g‘RuÁime
().
	`tÙ®MemÜy
();

90 
»suÉ
 =„esuÉ - 
RuÁime
.
	`g‘RuÁime
().
	`ä“MemÜy
();

91  
»suÉ
;

92 
	}
};

95 
public
 
	$¿ndom_š™
(
num_w¬ehou£_¡»ams
) {

96 
r
 = 
Ãw
 
	`Rªdom
();

97 
r
.
	`£tS“d
(
Sy¡em
.
	`cu¼’tTimeMlis
());

99 
w¬ehou£_¿ndom_¡»am
 = 
Ãw
 
Rªdom
[
num_w¬ehou£_¡»ams
];

100 
	}
}

102 
public
 
	$£t_¿ndom_£ed
(
£ed
) {

103 
r
.
	`£tS“d
(
£ed
);

104 
	}
}

107 
public
 
Rªdom
 
	$d”ived_¿ndom_š™
(
w¬ehou£Id
) {

108 
Rªdom
 
r1
;

109 
r1
 = 
Ãw
 
	`Rªdom
();

110 
r1
.
	`£tS“d
((è(
r
.
	`ÃxtIÁ
(è& 0x7fffffffè* (è
w¬ehou£Id
);

111  
r1
;

112 
	}
}

115 
public
 
	$»gi¡”_w¬ehou£_Rªdom_¡»am
(
w¬ehou£Id
,

116 
Rªdom
 
³r_wh_r
) {

117 ià(
w¬ehou£_¿ndom_¡»am
[
w¬ehou£Id
] !ğ
nuÎ
) {

118 
Sy¡em
.
out


119 .
	`´šn
("Warning:„eregistering Random stream for warehouse "

120 + 
w¬ehou£Id
);

122 
w¬ehou£_¿ndom_¡»am
[
w¬ehou£Id
] = 
³r_wh_r
;

123 
	}
}

125 
public
 
	$¿ndom
(
low
, 
high
) {

126  ((
r
.
	`ÃxtIÁ
(è& 0x7fffffffè% (
high
 - 
low
 + 1)) +†ow;

127 
	}
}

130 
public
 
	$¿ndom
(
low
, 
high
, 
Rªdom
 
r
) {

131  ((
r
.
	`ÃxtIÁ
(è& 0x7fffffffè% (
high
 - 
low
 + 1)) +†ow;

132 
	}
}

135 
public
 
	$¿ndom
(
low
, 
high
, 
w¬ehou£Id
) {

136 
Rªdom
 
r
 = 
w¬ehou£_¿ndom_¡»am
[
w¬ehou£Id
];

137  ((
r
.
	`ÃxtIÁ
(è& 0x7fffffffè% (
high
 - 
low
 + 1)) +†ow;

138 
	}
}

140 
public
 [] 
	$ü—‹_¿ndom_a_¡ršg
(
Ëngth_lo
, 
Ëngth_hi
) {

141 
i
, 
aùu®_Ëngth
, 
aRªdIÁ
;

142 
aùu®_Ëngth
 = 
	`¿ndom
(
Ëngth_lo
, 
Ëngth_hi
);

143 [] 
‹mp
 = 
Ãw
 [
aùu®_Ëngth
];

144 
i
 = 0; i < 
aùu®_Ëngth
; i++) {

145 
aRªdIÁ
 = 
	`¿ndom
(0, 61);

146 ià(
aRªdIÁ
 > 61)

147 
aRªdIÁ
 = 61;

148 
‹mp
[
i
] = 
®num
[
aRªdIÁ
];

150  
‹mp
;

151 
	}
}

154 
public
 [] 
	$ü—‹_¿ndom_a_¡ršg
(
Ëngth_lo
, 
Ëngth_hi
,

155 
Rªdom
 
r
) {

156 
i
, 
aùu®_Ëngth
, 
aRªdIÁ
;

157 
aùu®_Ëngth
 = 
	`¿ndom
(
Ëngth_lo
, 
Ëngth_hi
, 
r
);

158 [] 
‹mp
 = 
Ãw
 [
aùu®_Ëngth
];

159 
i
 = 0; i < 
aùu®_Ëngth
; i++) {

160 
aRªdIÁ
 = 
	`¿ndom
(0, 61, 
r
);

161 ià(
aRªdIÁ
 > 61)

162 
aRªdIÁ
 = 61;

163 
‹mp
[
i
] = 
®num
[
aRªdIÁ
];

165  
‹mp
;

166 
	}
}

169 
public
 [] 
	$ü—‹_¿ndom_a_¡ršg
(
Ëngth_lo
, 
Ëngth_hi
,

170 
w¬ehou£Id
) {

171 
i
, 
aùu®_Ëngth
, 
aRªdIÁ
;

172 
Rªdom
 
r
 = 
w¬ehou£_¿ndom_¡»am
[
w¬ehou£Id
];

173 
aùu®_Ëngth
 = 
	`¿ndom
(
Ëngth_lo
, 
Ëngth_hi
, 
r
);

174 [] 
‹mp
 = 
Ãw
 [
aùu®_Ëngth
];

175 
i
 = 0; i < 
aùu®_Ëngth
; i++) {

176 
aRªdIÁ
 = 
	`¿ndom
(0, 61, 
r
);

177 ià(
aRªdIÁ
 > 61)

178 
aRªdIÁ
 = 61;

179 
‹mp
[
i
] = 
®num
[
aRªdIÁ
];

181  
‹mp
;

182 
	}
}

184 
public
 [] 
	$ü—‹_¿ndom_n_¡ršg
(
Ëngth_lo
, 
Ëngth_hi
) {

185 
i
, 
aùu®_Ëngth
;

186 
aùu®_Ëngth
 = 
	`¿ndom
(
Ëngth_lo
, 
Ëngth_hi
);

187 [] 
‹mp
 = 
Ãw
 [
aùu®_Ëngth
];

188 
i
 = 0; i < 
aùu®_Ëngth
; i++) {

189 
‹mp
[
i
] = (è
	`¿ndom
(48, 57);

191  
‹mp
;

192 
	}
}

195 
public
 [] 
	$ü—‹_¿ndom_n_¡ršg
(
Ëngth_lo
, 
Ëngth_hi
,

196 
Rªdom
 
r
) {

197 
i
, 
aùu®_Ëngth
;

198 
aùu®_Ëngth
 = 
	`¿ndom
(
Ëngth_lo
, 
Ëngth_hi
, 
r
);

199 [] 
‹mp
 = 
Ãw
 [
aùu®_Ëngth
];

200 
i
 = 0; i < 
aùu®_Ëngth
; i++) {

201 
‹mp
[
i
] = (è
	`¿ndom
(48, 57, 
r
);

203  
‹mp
;

204 
	}
}

207 
public
 [] 
	$ü—‹_¿ndom_n_¡ršg
(
Ëngth_lo
, 
Ëngth_hi
,

208 
w¬ehou£Id
) {

209 
i
, 
aùu®_Ëngth
;

210 
Rªdom
 
r
 = 
w¬ehou£_¿ndom_¡»am
[
w¬ehou£Id
];

211 
aùu®_Ëngth
 = 
	`¿ndom
(
Ëngth_lo
, 
Ëngth_hi
, 
r
);

212 [] 
‹mp
 = 
Ãw
 [
aùu®_Ëngth
];

213 
i
 = 0; i < 
aùu®_Ëngth
; i++) {

214 
‹mp
[
i
] = (è
	`¿ndom
(48, 57, 
r
);

216  
‹mp
;

217 
	}
}

219 
public
 
	$ü—‹_¿ndom_æßt_v®_»tuº
(
v®_lo
,

220 
v®_hi
, 
´ecisiÚ
) {

221 
f
, 
»suÉ
;

222 
f
 = (è
r
.
	`ÃxtFlßt
(è* (
v®_hi
 - 
v®_lo
) + val_lo;

223 
»suÉ
 = 
f
 - (è
M©h
.
	`IEEE»mašd”
(f, 
´ecisiÚ
);

224  
»suÉ
;

225 
	}
}

228 
public
 
	$ü—‹_¿ndom_æßt_v®_»tuº
(
v®_lo
,

229 
v®_hi
, 
´ecisiÚ
, 
Rªdom
 
r
) {

230 
f
, 
»suÉ
;

231 
f
 = (è
r
.
	`ÃxtFlßt
(è* (
v®_hi
 - 
v®_lo
) + val_lo;

232 
»suÉ
 = 
f
 - (è
M©h
.
	`IEEE»mašd”
(f, 
´ecisiÚ
);

233  
»suÉ
;

234 
	}
}

236 
public
 
	$ü—‹_¿ndom_æßt_v®_»tuº
(
v®_lo
,

237 
v®_hi
, 
´ecisiÚ
, 
w¬ehou£Id
) {

238 
f
, 
»suÉ
;

239 
Rªdom
 
r
 = 
w¬ehou£_¿ndom_¡»am
[
w¬ehou£Id
];

240 
f
 = (è
r
.
	`ÃxtFlßt
(è* (
v®_hi
 - 
v®_lo
) + val_lo;

241 
»suÉ
 = 
f
 - (è
M©h
.
	`IEEE»mašd”
(f, 
´ecisiÚ
);

242  
»suÉ
;

243 
	}
}

245 
public
 [] 
	$ü—‹_a_¡ršg_w™h_Üigš®
(
Ëngth_lo
,

246 
Ëngth_hi
, 
³rûÁ_to_£t
, 
IÁeg”
 
h™
) {

247 
f
;

248 
aùu®_Ëngth
, 
¡¬t_pos
;

249 [] 
‹mp
;

250 
i
;

251 
aùu®_Ëngth
 = 
	`¿ndom
(
Ëngth_lo
, 
Ëngth_hi
);

252 
‹mp
 = 
Ãw
 [
aùu®_Ëngth
];

253 
i
 = 0; i < 
aùu®_Ëngth
; i++) {

254 
‹mp
[
i
] = (è
	`¿ndom
(48, 57);

256 
f
 = 
	`¿ndom
(0, 100);

257 ià(
f
 < 
³rûÁ_to_£t
) {

258 
¡¬t_pos
 = 
	`¿ndom
(0, 
‹mp
.
Ëngth
 - 8);

259 
Üigš®Text
.
	`g‘Ch¬s
(0, 8, 
‹mp
, 
¡¬t_pos
);

262  
‹mp
;

263 
	}
}

265 
public
 [] 
	$ü—‹_a_¡ršg_w™h_Üigš®
(
Ëngth_lo
,

266 
Ëngth_hi
, 
³rûÁ_to_£t
, 
IÁeg”
 
h™
, 
w¬ehou£Id
) {

267 
f
;

268 
aùu®_Ëngth
, 
¡¬t_pos
;

269 [] 
‹mp
;

270 
i
;

271 
aùu®_Ëngth
 = 
	`¿ndom
(
Ëngth_lo
, 
Ëngth_hi
, 
w¬ehou£Id
);

272 
‹mp
 = 
Ãw
 [
aùu®_Ëngth
];

273 
i
 = 0; i < 
aùu®_Ëngth
; i++) {

274 
‹mp
[
i
] = (è
	`¿ndom
(48, 57, 
w¬ehou£Id
);

276 
f
 = 
	`¿ndom
(0, 100, 
w¬ehou£Id
);

277 ià(
f
 < 
³rûÁ_to_£t
) {

278 
¡¬t_pos
 = 
	`¿ndom
(0, 
‹mp
.
Ëngth
 - 8, 
w¬ehou£Id
);

279 
Üigš®Text
.
	`g‘Ch¬s
(0, 8, 
‹mp
, 
¡¬t_pos
);

282  
‹mp
;

283 
	}
}

285 
public
 
SŒšg
 
	$choo£_¿ndom_Ï¡_Çme
(
maxCu¡om”s
,

286 
w¬ehou£Id
) {

287 
cu¡om”ID
 = 
	`ü—‹_¿ndom_cu¡om”_id
(
maxCu¡om”s
, 
w¬ehou£Id
);

288 
SŒšg
 
‹mp
 = 
	`ü—‹_¿ndom_Ï¡_Çme
(
cu¡om”ID
, 
w¬ehou£Id
);

289  
‹mp
;

290 
	}
}

292 
public
 
	$ü—‹_¿ndom_cu¡om”_id
(
maxCu¡om”s
,

293 
w¬ehou£Id
) {

294 
a_c_id
 = (
JBBut
.
A_C_ID
 * 
maxCu¡om”s
) / 3000;

295 
c_c_id
 = (
JBBut
.
C_C_ID
 * 
maxCu¡om”s
) / 3000;

296 
cu¡om”ID
 = (è
JBBut
.
	`NU¿nd_v®
(
a_c_id
, 1, 
maxCu¡om”s
,

297 
c_c_id
, 
w¬ehou£Id
);

298  
cu¡om”ID
;

299 
	}
}

301 
public
 
	$ü—‹_¿ndom_™em_id
(
maxI‹ms
, 
w¬ehou£Id
) {

302 
a_Ş_i_id
 = (
JBBut
.
A_OL_I_ID
 * 
maxI‹ms
) / 100000;

303 
c_Ş_i_id
 = (
JBBut
.
C_OL_I_ID
 * 
maxI‹ms
) / 100000;

304 
™emID
;

305 ià(
JBBmaš
.
unifÜmRªdomI‹ms
) {

306 
™emID
 = 
	`¿ndom
(1, 
maxI‹ms
, 
w¬ehou£Id
);

309 
™emID
 = (è
JBBut
.
	`NU¿nd_v®
(
a_Ş_i_id
, 1, 
maxI‹ms
,

310 
c_Ş_i_id
, 
w¬ehou£Id
);

312  
™emID
;

313 
	}
}

316 
public
 
SŒšg
 
	$ü—‹_¿ndom_Ï¡_Çme
(
cu¡_num
, 
w¬ehou£Id
) {

317 
¿ndom_num
;

318 
SŒšg
 
‹mp
;

319 ià((
cu¡_num
 == 0) || (cust_num > 1000)) {

320 
¿ndom_num
 = 
	`NU¿nd_v®
(
A_C_LAST
, 0, 999, 
C_C_LAST
,

321 
w¬ehou£_¿ndom_¡»am
[
w¬ehou£Id
]);

324 
¿ndom_num
 = 
cu¡_num
 - 1;

326 
‹mp
 = 
Ï¡_Çme_·¹s
[
¿ndom_num
 / 100];

327 
¿ndom_num
 %= 100;

328 
‹mp
 =em°+ 
Ï¡_Çme_·¹s
[
¿ndom_num
 / 10];

329 
¿ndom_num
 %= 10;

330 
‹mp
 =em°+ 
Ï¡_Çme_·¹s
[
¿ndom_num
];

331  
‹mp
;

332 
	}
}

335 
public
 
	$NU¿nd_v®
(
A
, 
x
, 
y
, 
C
, 
Rªdom
 
r
) {

336  (((((
	`¿ndom
(0, 
A
, 
r
è|„ªdom(
x
, 
y
,„)è+ 
C
) % (y - x + 1)) + x));

337 
	}
}

340 
public
 
	$NU¿nd_v®
(
A
, 
x
, 
y
, 
C
, 
w¬ehou£Id
) {

341 
Rªdom
 
r
 = 
w¬ehou£_¿ndom_¡»am
[
w¬ehou£Id
];

342  (((((
	`¿ndom
(0, 
A
, 
r
è|„ªdom(
x
, 
y
,„)è+ 
C
) % (y - x + 1)) + x));

343 
	}
}

345 
public
 
	$mliSecÚdsToSË•
(
mls
) {

346 
Œy
 {

347 
Th»ad
.
	`¦“p
(
mls
);

349 
	`ÿtch
 (
IÁ”ru±edExû±iÚ
 
e
) {

350 
JBBut
.
	`g‘Log
().
	`log
(
Lev–
.
WARNING
,

351 " --> Exû±iÚ: SLEEP INTERRUPTED!", 
e
);

353 
	}
}

355 
public
 
	$SecÚdsToSË•
(
£cÚds
) {

357 
mls
 = 
£cÚds
 * 1000;

358 
Œy
 {

359 
Th»ad
.
	`¦“p
(
mls
);

361 
	`ÿtch
 (
IÁ”ru±edExû±iÚ
 
e
) {

362 
JBBut
.
	`g‘Log
().
	`log
(
Lev–
.
WARNING
,

363 " --> Exû±iÚ: SLEEP INTERRUPTED!", 
e
);

365 
	}
}

367 
public
 
	$SecÚdsToSË•
(
£cÚds
) {

369 
mls
 = (è(
£cÚds
 * 1000.0d);

370 
Œy
 {

371 
Th»ad
.
	`¦“p
(
mls
);

373 
	`ÿtch
 (
IÁ”ru±edExû±iÚ
 
e
) {

374 
JBBut
.
	`g‘Log
().
	`log
(
Lev–
.
WARNING
,

375 " --> Exû±iÚ: SLEEP INTERRUPTED!", 
e
);

377 
	}
}

380 
public
 
	$Ãg©iveExpDi¡ributiÚ
(
m—n
, 
w¬ehou£Id
) {

381 
Rªdom
 
r
 = 
w¬ehou£_¿ndom_¡»am
[
w¬ehou£Id
];

382 
t
;

383 
rf
 = 
r
.
	`ÃxtFlßt
();

384 
m—nX10
 = 
m—n
 * 10;

386 
t
 = (-
M©h
.
	`log
(
rf
)è* 
m—n
;

387 ià(
t
 > 
m—nX10
)

388 
t
 = 
m—nX10
;

389  
t
;

390 
	}
};

392 
public
 
Logg”
 
	$g‘Log
() {

393  
­pLog
;

394 
	}
}

396 
public
 
synchrÚized
 
	$£tLog
(
Logg”
 
­pLog
) {

397 
JBBut
.
­pLog
 =‡ppLog;

398 
	}
}

	@spec/jbb/MapDataStorage.java

7 
·ckage
 
	g¥ec
.
	gjbb
;

9 
impÜt
 
	gjava
.
	gut
.
	gHashM­
;

10 
impÜt
 
	gjava
.
	gut
.
	gI‹¿tÜ
;

11 
impÜt
 
	gjava
.
	gut
.
	gM­
;

13 
public
 cÏs 
	cM­D©aStÜage
 
im¶em’ts
 
	mJBBD©aStÜage
 {

17 
´iv©e
 
fš®
 
	m£rŸlV”siÚUID
 = 1L;

20 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

27 
´Ùeùed
 
M­
 
	md©a
;

29 
´Ùeùed
 
	$M­D©aStÜage
() {

30 
	`this
(
Ãw
 
	`HashM­
());

33 
´Ùeùed
 
	$M­D©aStÜage
(
M­
 
d©a
) {

34 
this
.
d©a
 = data;

35 
	}
}

37 
public
 
I‹¿tÜ
 
	$–em’ts
() {

38  
d©a
.
	`v®ues
().
	`™”©Ü
();

39 
	}
}

41 
public
 
boŞ—n
 
	$cÚšsKey
(
Objeù
 
key
) {

42  
d©a
.
	`cÚšsKey
(
key
);

43 
	}
}

45 
public
 
Objeù
 
	$g‘
(
Objeù
 
key
) {

46  
d©a
.
	`g‘
(
key
);

47 
	}
}

49 
public
 
Objeù
 
	$put
(
Objeù
 
key
, Objeù 
v®ue
) {

50  
d©a
.
	`put
(
key
, 
v®ue
);

51 
	}
}

53 
public
 
Objeù
 
	$»move
(
Objeù
 
key
) {

54  
d©a
.
	`»move
(
key
);

55 
	}
}

57 
public
 
	$size
() {

58  
d©a
.
	`size
();

59 
	}
}

	@spec/jbb/NewOrder.java

7 
·ckage
 
	g¥ec
.
	gjbb
;

9 
impÜt
 
	gjava
.
	gut
.
	gloggšg
.
	gLev–
;

11 
public
 cÏs 
	cNewOrd”
 {

13 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

20 
´iv©e
 
Ord”
 
	mÜd”PŒ
;

22 
´iv©e
 
	mÜd”Id
;

24 
´iv©e
 
by‹
 
	mdi¡riùId
;

26 
´iv©e
 
	mw¬ehou£Id
;

28 
public
 
	$de¡roy
() {

31 
public
 
	$NewOrd”
(
Ord”
 
šOrd”PŒ
, 
šOrd”Id
, 
by‹
 
šDi¡riùId
,

32 
šW¬ehou£Id
) {

33 
Üd”PŒ
 = 
šOrd”PŒ
;

34 
Üd”Id
 = 
šOrd”Id
;

35 
di¡riùId
 = 
šDi¡riùId
;

36 
w¬ehou£Id
 = 
šW¬ehou£Id
;

37 
	}
}

39 
public
 
	$š™NewOrd”
(
Ord”
 
šOrd”PŒ
, 
šOrd”Id
,

40 
by‹
 
šDi¡riùId
, 
šW¬ehou£Id
) {

41 
Üd”PŒ
 = 
šOrd”PŒ
;

42 
Üd”Id
 = 
šOrd”Id
;

43 
di¡riùId
 = 
šDi¡riùId
;

44 
w¬ehou£Id
 = 
šW¬ehou£Id
;

45 ià(
JBBut
.
	`g‘Log
().
	`isLoggabË
(
Lev–
.
FINEST
)) {

46 
JBBut
.
	`g‘Log
().
	`fše¡
(

47 "NewOrd”::š™NewOrd”, ord”Id=" + 
Üd”Id


48 + ", di¡riùId=" + 
di¡riùId
 + ", warehouseId="

49 + 
w¬ehou£Id
);

51 
	}
}

53 
public
 
synchrÚized
 
	$g‘Id
() {

54 
‹mp
 = 
Üd”Id
;

55  
‹mp
;

56 
	}
}

58 
public
 
synchrÚized
 
Ord”
 
	$g‘Ord”PŒ
() {

59 
Ord”
 
‹mp
 = 
Üd”PŒ
;

60  
‹mp
;

61 
	}
}

	@spec/jbb/NewOrderTransaction.java

7 
·ckage
 
	g¥ec
.
	gjbb
;

9 
impÜt
 
	g¥ec
.
	gjbb
.
	gšäa
.
	gUt
.
	gT¿n§ùiÚLogBufãr
;

10 
impÜt
 
	g¥ec
.
	gjbb
.
	gšäa
.
	gUt
.
	gXMLT¿n§ùiÚLog
;

11 
impÜt
 
	gjava
.
	gut
.*;

12 
impÜt
 
	gjava
.
	gm©h
.
	gBigDecim®
;

14 şas 
	cNewOrd”T¿n§ùiÚ
 
ex‹nds
 
	mT¿n§ùiÚ
 {

16 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

23 
´iv©e
 
Com·ny
 
	mcom·ny
;

25 
´iv©e
 
	mw¬ehou£Id
;

27 
´iv©e
 
by‹
 
	mdi¡riùId
;

29 
´iv©e
 
	mcu¡om”Id
;

31 
´iv©e
 
W¬ehou£
 
	mw¬ehou£PŒ
;

33 
´iv©e
 
Di¡riù
 
	mdi¡riùPŒ
;

35 
´iv©e
 
	mnumb”_of_Üd”lšes
;

37 
´iv©e
 
boŞ—n
 
	mrŞlback
;

39 
´iv©e
 
BigDecim®
 
	mw¬ehou£TaxR©e
;

41 
´iv©e
 
BigDecim®
 
	mdi¡riùTaxR©e
;

43 
´iv©e
 
	mÜd”Id
;

45 
´iv©e
 
BigDecim®
 
	mcu¡om”DiscouÁR©e
;

47 
´iv©e
 
SŒšg
 
	mcu¡om”La¡Name
;

49 
´iv©e
 
SŒšg
 
	mcu¡om”C»d™Stus
;

51 
´iv©e
 
	mÜd”lše_couÁ
;

53 
´iv©e
 
Ord”
 
	mthisOrd”
;

55 
´iv©e
 
T¿n§ùiÚLogBufãr
 
	mbackLog
;

57 
´iv©e
 
T¿n§ùiÚLogBufãr
 
	mš™Log
;

59 
´iv©e
 
T¿n§ùiÚLogBufãr
 
	mÜd”Log
;

61 
´iv©e
 
XMLT¿n§ùiÚLog
 
	mxmlOrd”Log
;

63 
	mSŒšg
[] 
	mv®id©iÚLog
 = {

89 
	gboŞ—n
[] 
	gcheckLše
 = {

90 
Œue
, 
çl£
,rue,rue,rue,rue,rue,rue,rue,rue, false,

91 
Œue
,rue,rue,rue,rue,rue, 
çl£
,rue,rue,rue,rue,

92 
Œue
,rue

95 
public
 
	$NewOrd”T¿n§ùiÚ
(
Com·ny
 
šCom·ny
, 
šW¬ehou£Id
) {

96 
com·ny
 = 
šCom·ny
;

98 
w¬ehou£Id
 = 
šW¬ehou£Id
;

99 
w¬ehou£PŒ
 = 
com·ny
.
	`g‘W¬ehou£PŒ
(
w¬ehou£Id
, 
çl£
);

100 
Üd”Log
 = 
Ãw
 
	`T¿n§ùiÚLogBufãr
();

101 
	`£tupOrd”Log
();

102 
xmlOrd”Log
 = 
Ãw
 
	`XMLT¿n§ùiÚLog
();

103 
š™Log
 = 
Ãw
 
	`T¿n§ùiÚLogBufãr
(
Üd”Log
);

104 
	`£tupIn™Log
();

105 
	}
}

107 
´iv©e
 
	$£tupOrd”Log
() {

108 
Üd”Log
.
	`putText
("New Order", 35, 0, 9);

109 
Üd”Log
.
	`putText
("Warehouse:", 0, 1, 10);

110 
Üd”Log
.
	`putIÁ
(
w¬ehou£Id
, 11, 1, 4);

111 
Üd”Log
.
	`putText
("District:", 18, 1, 9);

112 
Üd”Log
.
	`putText
("Date:", 54, 1, 5);

113 
Üd”Log
.
	`putText
("Customer:", 0, 2, 10);

114 
Üd”Log
.
	`putText
("Name:", 18, 2, 5);

115 
Üd”Log
.
	`putText
("Credit:", 43, 2, 7);

116 
Üd”Log
.
	`putText
("%Disc:", 56, 2, 6);

117 
Üd”Log
.
	`putText
("Order Number:", 0, 3, 14);

118 
Üd”Log
.
	`putText
("Number of Lines:", 24, 3, 26);

119 
Üd”Log
.
	`putText
("W_tax:", 51, 3, 6);

120 
Üd”Log
.
	`putText
("D_tax:", 66, 3, 6);

121 
Üd”Log


122 .
	`putText
(

125 
Üd”Log
.
	`putText
("Execution Status:", 0, 21, 17);

126 
Üd”Log
.
	`putText
("Total:", 61, 21, 6);

127 
	}
}

129 
´iv©e
 
	$£tupIn™Log
() {

131 
š™Log
.
	`putCh¬Fl
('9', 28, 1, 2);

132 
š™Log
.
	`putText
("DD-MM-YYYY hh:mm:ss", 60, 1, 19);

133 
š™Log
.
	`putCh¬Fl
('9', 11, 2, 4);

134 
š™Log
.
	`putCh¬Fl
('X', 24, 2, 16);

135 
š™Log
.
	`putCh¬Fl
('X', 51, 2, 2);

136 
š™Log
.
	`putText
("99.99", 63, 2, 5);

137 
š™Log
.
	`putCh¬Fl
('9', 14, 3, 8);

138 
š™Log
.
	`putCh¬Fl
('9', 41, 3, 2);

139 
š™Log
.
	`putText
("99.99", 58, 3, 5);

140 
š™Log
.
	`putText
("99.99", 73, 3, 5);

141 
i
 = 6; i < 21; i++) {

142 
š™Log
.
	`putCh¬Fl
('9', 2, 
i
, 4);

143 
š™Log
.
	`putCh¬Fl
('9', 9, 
i
, 6);

144 
š™Log
.
	`putCh¬Fl
('X', 18, 
i
, 24);

145 
š™Log
.
	`putCh¬Fl
('9', 44, 
i
, 2);

146 
š™Log
.
	`putCh¬Fl
('9', 50, 
i
, 3);

147 
š™Log
.
	`putCh¬
('X', 57, 
i
);

148 
š™Log
.
	`putText
("$999.99", 61, 
i
, 7);

149 
š™Log
.
	`putText
("$9999.99", 70, 
i
, 8);

152 
š™Log
.
	`putCh¬Fl
('X', 18, 21, 24);

153 
š™Log
.
	`putText
("$99999.99", 69, 21, 9);

154 
	}
}

156 
public
 
SŒšg
 
	$g‘M’uName
() {

158 
	}
}

160 
public
 
	$d–‘e
() {

161 
	}
}

163 
public
 
	$š™
() {

164 
JBBut
.
	`g‘Log
().
	`’‹ršg
("spec.jbb.NewOrderTransaction", "init");

165 
di¡riùId
 = (
by‹
è(
JBBut
.
	`¿ndom
(1, 
com·ny


166 .
	`g‘MaxDi¡riùsP”W¬ehou£
(), 
w¬ehou£Id
));

167 
cu¡om”Id
 = 
JBBut
.
	`ü—‹_¿ndom_cu¡om”_id
(
com·ny


168 .
	`g‘MaxCu¡om”sP”Di¡riù
(), 
w¬ehou£Id
);

169 
numb”_of_Üd”lšes
 = (è
JBBut
.
	`¿ndom
(

170 
T¿n§ùiÚ
.
mšOrd”lšes
, T¿n§ùiÚ.
maxOrd”lšes
,

171 
w¬ehou£Id
);

172 
rŞlback
 = (
boŞ—n
è(
JBBut
.
	`¿ndom
(1, 100, 
w¬ehou£Id
) == 1);

173 
rŞlback
 = 
çl£
;

174 
di¡riùPŒ
 = 
w¬ehou£PŒ
.
	`g‘Di¡riùPŒ
(
di¡riùId
, 
çl£
);

175 
JBBut
.
	`g‘Log
().
	`ex™šg
("spec.jbb.NewOrderTransaction", "init");

176 
	}
}

178 
public
 
boŞ—n
 
	$´oûss
() {

179 
JBBut
.
	`g‘Log
().
	`’‹ršg
("spec.jbb.NewOrderTransaction", "process");

180 
NewOrd”
 
theNewOrd”
;

181 
w¬ehou£TaxR©e
 = 
w¬ehou£PŒ
.
	`g‘TaxR©e
();

182 
di¡riùTaxR©e
 = 
di¡riùPŒ
.
	`g‘TaxR©e
();

183 
Üd”Id
 = 
di¡riùPŒ
.
	`ÃxtOrd”Id
();

184 
uniqueCu¡om”Id
 = 
com·ny
.
	`budUniqueCu¡om”Key
(
w¬ehou£Id
,

185 
di¡riùId
, 
cu¡om”Id
);

186 
Cu¡om”
 
cu¡om”PŒ
 = 
com·ny
.
	`g‘Cu¡om”
(
uniqueCu¡om”Id
, 
çl£
);

187 
cu¡om”DiscouÁR©e
 = 
cu¡om”PŒ
.
	`g‘DiscouÁR©e
();

188 
cu¡om”La¡Name
 = 
cu¡om”PŒ
.
	`g‘La¡Name
();

189 
cu¡om”C»d™Stus
 = 
cu¡om”PŒ
.
	`g‘C»d™Stus
();

190 
thisOrd”
 = 
Ãw
 
	`Ord”
(
com·ny
, 
Üd”Id
, 
di¡riùId
, 
w¬ehou£Id
,

191 
cu¡om”Id
, 
cu¡om”PŒ
, 
di¡riùTaxR©e
, 
w¬ehou£TaxR©e
,

192 
cu¡om”DiscouÁR©e
);

193 
theNewOrd”
 = 
Ãw
 
	`NewOrd”
(
thisOrd”
, 
Üd”Id
, 
di¡riùId
, 
w¬ehou£Id
);

194 ià(
thisOrd”


195 .
	`´oûssLšes
(
w¬ehou£PŒ
, 
numb”_of_Üd”lšes
, 
rŞlback
)) {

196 
Üd”lše_couÁ
 = 
thisOrd”
.
	`g‘Ord”lšeCouÁ
();

197 
di¡riùPŒ
.
	`addOrd”
(
thisOrd”
);

198 
di¡riùPŒ
.
	`addNewOrd”
(
theNewOrd”
);

199 
cu¡om”PŒ
.
	`addOrd”
(
thisOrd”
);

202 
Üd”lše_couÁ
 = 0;

204 
JBBut
.
	`g‘Log
().
	`ex™šg
("spec.jbb.NewOrderTransaction", "process");

205  
Œue
;

206 
	}
}

208 
public
 
synchrÚized
 
	$di¥Ïy
() {

209 
Sy¡em
.
out


210 .
	`´šn
("**** NewOrderTransaction Display **********************");

211 
Sy¡em
.
out
.
	`´šn
("* W¬ehou£ ID i " + 
w¬ehou£Id


213 
Sy¡em
.
out
.
	`´šn
("* Di¡riù ID i " + 
di¡riùId


215 
Sy¡em
.
out
.
	`´šn
("* Cu¡om” ID i " + 
cu¡om”Id


217 
Sy¡em
.
out


218 .
	`´šn
("*******************************************************");

219 
	}
}

221 
public
 
	$š™ŸlizeT¿n§ùiÚLog
() {

222 
JBBut
.
	`g‘Log
().
	`’‹ršg
("spec.jbb.NewOrderTransaction",

248 ià(
T¿n§ùiÚ
.
’abËLogWr™e
)

249 
š™Log
.
	`di¥Ïy
();

250 
JBBut
.
	`g‘Log
().
	`ex™šg
("spec.jbb.NewOrderTransaction",

252 
	}
}

254 
public
 
synchrÚized
 
	$´oûssT¿n§ùiÚLog
() {

255 
JBBut
.
	`g‘Log
().
	`’‹ršg
("spec.jbb.NewOrderTransaction",

257 
Üd”Log
.
	`ş—rBufãr
();

258 
xmlOrd”Log
.
	`ş—r
();

259 
	`£tupOrd”Log
();

260 
D©e
 
sü“nD©e
 = 
thisOrd”
.
	`g‘EÁryTime
();

261 
Üd”Log
.
	`putIÁ
(
di¡riùId
, 28, 1, 2);

262 
Üd”Log
.
	`putD©e
(
sü“nD©e
, 60, 1, 10);

263 
Üd”Log
.
	`putTime
(
sü“nD©e
, 71, 1, 8);

265 
Üd”Log
.
	`putIÁ
(
cu¡om”Id
, 11, 2, 4);

266 
Üd”Log
.
	`putText
(
cu¡om”La¡Name
, 24, 2, 16);

267 
Üd”Log
.
	`putText
(
cu¡om”C»d™Stus
, 51, 2, 2);

268 
Üd”Log
.
	`putDoubË
(
cu¡om”DiscouÁR©e
.
	`movePoštRight
(2).
	`toSŒšg
(),

270 
Üd”Log
.
	`putIÁ
(
Üd”Id
, 14, 3, 8);

271 
Üd”Log
.
	`putIÁ
(
Üd”lše_couÁ
, 41, 3, 2);

272 
Üd”Log
.
	`putDoubË
(
w¬ehou£TaxR©e
.
	`movePoštRight
(2).
	`toSŒšg
(), 58,

274 
Üd”Log
.
	`putDoubË
(
di¡riùTaxR©e
.
	`movePoštRight
(2).
	`toSŒšg
(), 73, 3,

276 ià(
Üd”lše_couÁ
 > 0) {

277 
Ord”lše
[] 
Üd”lšeLi¡
;

278 
lšeCouÁ
, 
i
;

279 
Üd”lšeLi¡
 = 
thisOrd”
.
	`g‘Ord”lšeLi¡
();

280 
lšeCouÁ
 = 
thisOrd”
.
	`g‘Ord”lšeCouÁ
();

281 
Ord”lše
 
cu¼’tOrd”Lše
;

282 
i
 = 0; i < 
lšeCouÁ
; i++) {

283 
di¥ÏyLše
 = 
i
 + 6;

284 ià(
i
 >= 15)

285 
di¥ÏyLše
 = 14 + 6;

286 
cu¼’tOrd”Lše
 = (
Ord”lše
è
Üd”lšeLi¡
[
i
];

287 
Üd”Log
.
	`putIÁ
(
cu¼’tOrd”Lše
.
	`g‘SuµlyW¬ehou£
(), 2,

288 
di¥ÏyLše
, 4);

289 
Üd”Log


290 .
	`putIÁ
(
cu¼’tOrd”Lše
.
	`g‘I‹mId
(), 9, 
di¥ÏyLše
, 6);

291 
Üd”Log
.
	`putText
(
cu¼’tOrd”Lše
.
	`g‘I‹mName
(), 18,

292 
di¥ÏyLše
, 24);

293 
Üd”Log
.
	`putIÁ
(
cu¼’tOrd”Lše
.
	`g‘Quªt™y
(), 44,

294 
di¥ÏyLše
, 2);

295 
Üd”Log
.
	`putIÁ
(
cu¼’tOrd”Lše
.
	`g‘StockQuªt™y
(), 50,

296 
di¥ÏyLše
, 3);

297 
Üd”Log
.
	`putCh¬
(
cu¼’tOrd”Lše
.
	`g‘B¿ndG’”ic
(), 57,

298 
di¥ÏyLše
);

299 
Üd”Log
.
	`putDŞÏrs
(
cu¼’tOrd”Lše
.
	`g‘I‹mPriû
(), 62,

300 
di¥ÏyLše
, 7);

301 
Üd”Log
.
	`putDŞÏrs
(
cu¼’tOrd”Lše
.
	`g‘AmouÁ
(), 71,

302 
di¥ÏyLše
, 8);

305 ià(
Üd”lše_couÁ
 > 0) {

307 
Üd”Log
.
	`putText
("---- Order is valid ----", 18, 21, 24);

308 
Üd”Log
.
	`putDŞÏrs
(
thisOrd”
.
	`g‘TÙ®AmouÁ
(), 70, 21, 9);

312 
Üd”Log
.
	`putText
("ITEM NUMBER IS NOT VALID", 18, 21, 24);

313 
Üd”Log
.
	`putDŞÏrs
(0.0, 69, 21, 9);

316 
xmlOrd”Log
.
	`pİuÏ‹XML
(
Üd”Log
);

317 ià(
T¿n§ùiÚ
.
’abËLogWr™e
)

318 
Üd”Log
.
	`di¥Ïy
();

319 ià(
T¿n§ùiÚ
.
v®id©iÚFÏg
) {

320 
SŒšg
[] 
s
 = 
Üd”Log
.
	`v®id©e
();

321 ià(
s
.
Ëngth
 !ğ
v®id©iÚLog
.length) {

322 
SŒšgBufãr
 
sb
 = 
Ãw
 
	`SŒšgBufãr
(200);

323 
sb


324 .
	`­³nd
("VALIDATION ERROR: mismatch in screen†engths for NewOrderTransaction");

325 
sb
.
	`­³nd
(
Sy¡em
.
	`g‘Prİ”ty
("line.separator"));

326 
sb
.
	`­³nd
(" Screen†ength should be: "

327 + 
v®id©iÚLog
.
Ëngth
);

328 
sb
.
	`­³nd
(
Sy¡em
.
	`g‘Prİ”ty
("line.separator"));

329 
sb
.
	`­³nd
(" Sü“ÀËngth is: " + 
s
.
Ëngth
);

330 
JBBut
.
	`g‘Log
().
	`w¬nšg
(
sb
.
	`toSŒšg
());

331 
T¿n§ùiÚ
.
	`šv®id©eRun
();

333 
i
 = 0; i < 
v®id©iÚLog
.
Ëngth
; i++) {

334 ià(
checkLše
[
i
]) {

335 ià(!
s
[
i
].
	`equ®s
(
v®id©iÚLog
[i])) {

336 
SŒšgBufãr
 
sb
 = 
Ãw
 
	`SŒšgBufãr
(200);

337 
sb


338 .
	`­³nd
("VALIDATION ERROR: incorrect output for NewOrderTransaction");

339 
sb
.
	`­³nd
(
Sy¡em
.
	`g‘Prİ”ty
("line.separator"));

340 
sb
.
	`­³nd
(" Lš" + (
i
 + 1) + " should be: |"

341 + 
v®id©iÚLog
[
i
] + "|");

342 
sb
.
	`­³nd
(
Sy¡em
.
	`g‘Prİ”ty
("line.separator"));

343 
sb
.
	`­³nd
(" Lš" + (
i
 + 1è+ " is: |" + 
s
[i]

345 
JBBut
.
	`g‘Log
().
	`w¬nšg
(
sb
.
	`toSŒšg
());

346 
T¿n§ùiÚ
.
	`šv®id©eRun
();

351 
JBBut
.
	`g‘Log
().
	`ex™šg
("spec.jbb.NewOrderTransaction",

353 
	}
}

355 
public
 
synchrÚized
 
	$´oûssP»lßdedOrd”s
() {

356 
Üd”Id
 = 
di¡riùPŒ
.
	`ÃxtOrd”Id
();

357 
uniqueCu¡om”Id
 = 
com·ny
.
	`budUniqueCu¡om”Key
(
w¬ehou£Id
,

358 
di¡riùId
, 
cu¡om”Id
);

359 
Cu¡om”
 
cu¡om”PŒ
 = 
com·ny
.
	`g‘Cu¡om”
(
uniqueCu¡om”Id
, 
çl£
);

360 
BigDecim®
 
‹mp
 = BigDecim®.
	`v®ueOf
(0, 2);

361 
thisOrd”
 = 
Ãw
 
	`Ord”
(
com·ny
, 
Üd”Id
, 
di¡riùId
, 
w¬ehou£Id
,

362 
cu¡om”Id
, 
cu¡om”PŒ
, 
‹mp
,emp,emp);

363 
di¡riùPŒ
.
	`addOrd”
(
thisOrd”
);

366 
cu¡om”PŒ
.
	`addOrd”
(
thisOrd”
);

367 
D©e
 
Üd”d©e
 = 
Ãw
 
	`D©e
();

368 
thisOrd”
.
	`£tEÁryD©eTime
(
Üd”d©e
);

369 ià(
Üd”Id
 <ğ(
com·ny
.
	`g‘In™ŸlOrd”s
() - company

370 .
	`g‘In™ŸlNewOrd”s
()))

372 
by‹
 
ÿ¼›rId
 = (by‹è
JBBut
.
	`¿ndom
(1, 10, 
w¬ehou£Id
);

373 
thisOrd”
.
	`£tC¬r›rId
(
ÿ¼›rId
);

375 
thisOrd”
.
	`£tAÎLoÿl
(
Œue
);

376 
thisOrd”
.
	`´oûssLšes
(
w¬ehou£PŒ
, 
numb”_of_Üd”lšes
, 
çl£
);

377 
Üd”lše_couÁ
 = 
thisOrd”
.
	`g‘Ord”lšeCouÁ
();

378 ià(
Üd”Id
 > (
com·ny
.
	`g‘In™ŸlOrd”s
() - company

379 .
	`g‘In™ŸlNewOrd”s
()))

381 
NewOrd”
 
theNewOrd”
 = 
Ãw
 
	`NewOrd”
(
thisOrd”
, 
Üd”Id
, 
di¡riùId
,

382 
w¬ehou£Id
);

383 
di¡riùPŒ
.
	`addNewOrd”
(
theNewOrd”
);

386 
	}
}

388 
public
 
synchrÚized
 
	$£tDi¡riùªdCu¡om”
(
by‹
 
šDi¡riùId
,

389 
šCu¡om”Id
) {

390 
di¡riùId
 = 
šDi¡riùId
;

391 
cu¡om”Id
 = 
šCu¡om”Id
;

392 
di¡riùPŒ
 = 
w¬ehou£PŒ
.
	`g‘Di¡riùPŒ
(
di¡riùId
, 
çl£
);

393 
	}
}

	@spec/jbb/Order.java

10 
·ckage
 
	g¥ec
.
	gjbb
;

12 
impÜt
 
	gjava
.
	gut
.*;

13 
impÜt
 
	gjava
.
	gut
.
	gloggšg
.
	gLev–
;

14 
impÜt
 
	gjava
.
	gm©h
.
	gBigDecim®
;

16 
public
 cÏs 
	cOrd”
 {

18 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

25 
´iv©e
 
Com·ny
 
	mcom·ny
;

27 
´iv©e
 
Cu¡om”
 
	mcu¡om”PŒ
;

29 
´iv©e
 
	mOrd”lše
[] 
	mÜd”lšeLi¡
;

31 
´iv©e
 
BigDecim®
 
	mtÙ®AmouÁ
;

33 
´iv©e
 
BigDecim®
 
	mcu¡om”DiscouÁR©e
;

35 
´iv©e
 
BigDecim®
 
	mdi¡riùTax
;

37 
´iv©e
 
BigDecim®
 
	mw¬ehou£Tax
;

39 
´iv©e
 
D©e
 
	m’ŒyD©eTime
;

41 
´iv©e
 
	mÜd”Id
;

43 
´iv©e
 
	mcu¡om”Id
;

45 
´iv©e
 
	mÿ¼›rId
;

47 
´iv©e
 
	mÜd”LšeCouÁ
;

49 
´iv©e
 
by‹
 
	mdi¡riùId
;

51 
´iv©e
 
	mw¬ehou£Id
;

53 
´iv©e
 
boŞ—n
 
	m®lLoÿl
;

55 
public
 
	$Ord”
(
Com·ny
 
šCom·ny
, 
šOrd”Id
, 
by‹
 
šDi¡riùId
,

56 
šW¬ehou£Id
, 
šCu¡om”Id
, 
Cu¡om”
 
šCu¡om”PŒ
,

57 
BigDecim®
 
šDi¡riùTaxR©e
, BigDecim® 
šW¬ehou£TaxR©e
,

58 
BigDecim®
 
šCu¡om”DiscouÁR©e
) {

59 
this
.
	`š™Ord”
(
šCom·ny
, 
šOrd”Id
, 
šDi¡riùId
, 
šW¬ehou£Id
,

60 
šCu¡om”Id
, 
šCu¡om”PŒ
, 
šDi¡riùTaxR©e
,

61 
šW¬ehou£TaxR©e
, 
šCu¡om”DiscouÁR©e
);

64 
public
 
	$š™Ord”
(
Com·ny
 
šCom·ny
, 
šOrd”Id
, 
by‹
 
šDi¡riùId
,

65 
šW¬ehou£Id
, 
šCu¡om”Id
, 
Cu¡om”
 
šCu¡om”PŒ
,

66 
BigDecim®
 
šDi¡riùTaxR©e
, BigDecim® 
šW¬ehou£TaxR©e
,

67 
BigDecim®
 
šCu¡om”DiscouÁR©e
) {

68 
com·ny
 = 
šCom·ny
;

69 
Üd”Id
 = 
šOrd”Id
;

70 
di¡riùId
 = 
šDi¡riùId
;

71 
w¬ehou£Id
 = 
šW¬ehou£Id
;

72 
cu¡om”Id
 = 
šCu¡om”Id
;

73 
cu¡om”PŒ
 = 
šCu¡om”PŒ
;

74 
Üd”LšeCouÁ
 = 0;

75 
Üd”lšeLi¡
 = 
Ãw
 
Ord”lše
[(
T¿n§ùiÚ
.
aveOrd”lšes
 + 10)];

76 ià(
JBBut
.
	`g‘Log
().
	`isLoggabË
(
Lev–
.
FINEST
)) {

77 
JBBut
.
	`g‘Log
().
	`fše¡
(

78 "Ord”::š™Ord” ord”lšeLi¡=" + 
Üd”lšeLi¡
);

80 
’ŒyD©eTime
 = 
Ãw
 
	`D©e
();

81 
ÿ¼›rId
 = 0;

82 
®lLoÿl
 = 
Œue
;

83 
di¡riùTax
 = 
šDi¡riùTaxR©e
;

84 
w¬ehou£Tax
 = 
šW¬ehou£TaxR©e
;

85 
cu¡om”DiscouÁR©e
 = 
šCu¡om”DiscouÁR©e
;

86 
	}
}

88 
public
 
synchrÚized
 
boŞ—n
 
	$´oûssLšes
(
W¬ehou£
 
šW¬ehou£PŒ
,

89 
numb”_of_Üd”lšes
, 
boŞ—n
 
rŞlback
) {

90 
suµlyW¬ehou£Id
;

91 
boŞ—n
 
´oûssLšesResuÉ
 = 
Œue
;

92 
BigDecim®
 
amouÁ
 = BigDecim®.
	`v®ueOf
(0, 2);

93 
LšeNumb”
 = 1; LšeNumb” <ğ
numb”_of_Üd”lšes
; ++LineNumber) {

94 
Ord”lše
 
ÃwOrd”lše
 = 
Ãw
 
	`Ord”lše
(
com·ny
, 
Üd”Id
,

95 
di¡riùId
, 
w¬ehou£Id
, 
LšeNumb”
, 
numb”_of_Üd”lšes
,

96 
rŞlback
);

97 
suµlyW¬ehou£Id
 = 
w¬ehou£Id
;

98 ià((
JBBut
.
	`¿ndom
(1, 100, 
w¬ehou£Id
) == 1)

99 && (
com·ny
.
	`g‘MaxW¬ehou£s
() > 1))

101 
suµlyW¬ehou£Id
 =ğ
w¬ehou£Id
) {

102 
suµlyW¬ehou£Id
 = (è
JBBut
.
	`¿ndom
(1, 
com·ny


103 .
	`g‘MaxW¬ehou£s
(), 
w¬ehou£Id
);

105 
®lLoÿl
 = 
çl£
;

107 
ÃwOrd”lše
.
	`£tSuµlyW¬ehou£
(
suµlyW¬ehou£Id
);

108 ià(
ÃwOrd”lše
.
	`v®id©eAndProûss
(
šW¬ehou£PŒ
)) {

109 
amouÁ
 =‡mouÁ.
	`add
(
ÃwOrd”lše
.
	`g‘AmouÁ
());

110 
Üd”lšeLi¡
[
Üd”LšeCouÁ
] = 
ÃwOrd”lše
;

111 
Üd”LšeCouÁ
++;

114 
´oûssLšesResuÉ
 = 
çl£
;

117 
BigDecim®
 
subtÙ®
 = 
amouÁ
.
	`muÉly
(

118 (
BigDecim®
.
	`v®ueOf
(1, 0)).
	`subŒaù
(
cu¡om”DiscouÁR©e
))

119 .
	`£tSÿË
(2, 
BigDecim®
.
ROUND_HALF_UP
);

120 
tÙ®AmouÁ
 = 
subtÙ®
.
	`muÉly
(

121 (
BigDecim®
.
	`v®ueOf
(1, 0)).
	`add
(
w¬ehou£Tax
).add(
di¡riùTax
))

122 .
	`£tSÿË
(2, 
BigDecim®
.
ROUND_HALF_UP
);

123  
´oûssLšesResuÉ
;

124 
	}
}

126 
public
 
synchrÚized
 
	$d©eOrd”lšes
(
D©e
 
Üd”d©e
) {

127 
i
;

128 
Ord”lše
 
Üd”lše
;

129 ià(
JBBut
.
	`g‘Log
().
	`isLoggabË
(
Lev–
.
FINEST
)) {

130 
JBBut
.
	`g‘Log
().
	`fše¡
(

131 "Ord”::d©eOrd”lše  ord”lšeLi¡=" + 
Üd”lšeLi¡


132 + " ord”lšeCouÁ=" + 
Üd”LšeCouÁ
);

134 
i
 = 0; i < 
Üd”LšeCouÁ
; i++) {

135 
Üd”lše
 = 
Üd”lšeLi¡
[
i
];

136 ià(
JBBut
.
	`g‘Log
().
	`isLoggabË
(
Lev–
.
FINEST
)) {

137 
JBBut
.
	`g‘Log
().
	`fše¡
(

138 " ord”lše=" + 
Üd”lše
 + " ord”lše#=" + 
i
);

141 
Üd”lše
.
	`£tD–iv”yTime
(
Üd”d©e
);

143 
	}
}

145 
public
 
synchrÚized
 
	$g‘Id
() {

146 
‹mp
 = 
Üd”Id
;

147  
‹mp
;

148 
	}
}

150 
public
 
synchrÚized
 
Cu¡om”
 
	$g‘Cu¡om”PŒ
() {

151 
Cu¡om”
 
‹mp
 = 
cu¡om”PŒ
;

152  
‹mp
;

153 
	}
}

155 
public
 
synchrÚized
 
BigDecim®
 
	$g‘TÙ®AmouÁ
() {

156 
BigDecim®
 
‹mp
 = 
tÙ®AmouÁ
;

157  
‹mp
;

158 
	}
}

160 
public
 
synchrÚized
 
D©e
 
	$g‘EÁryTime
() {

161 
D©e
 
‹mp
 = 
’ŒyD©eTime
;

162  
‹mp
;

163 
	}
}

165 
public
 
synchrÚized
 
	$£tC¬r›rId
(
šC¬r›rId
) {

166 
ÿ¼›rId
 = 
šC¬r›rId
;

167 
	}
}

169 
public
 
synchrÚized
 
	$g‘C¬r›rId
() {

170 
‹mp
 = 
ÿ¼›rId
;

171  
‹mp
;

172 
	}
}

174 
public
 
synchrÚized
 
	gOrd”lše
[] 
	$g‘Ord”lšeLi¡
() {

175 ià(
JBBut
.
	`g‘Log
().
	`isLoggabË
(
Lev–
.
FINEST
)) {

176 
JBBut
.
	`g‘Log
().
	`fše¡
(

177 "Ord”::g‘Ord”lšeLi¡ ord”lšeLi¡=" + 
Üd”lšeLi¡
);

179  
Üd”lšeLi¡
;

180 
	}
}

182 
public
 
synchrÚized
 
	$g‘Ord”lšeCouÁ
() {

183 
‹mp
 = 
Üd”LšeCouÁ
;

184  
‹mp
;

185 
	}
}

187 
public
 
synchrÚized
 
	$£tAÎLoÿl
(
boŞ—n
 
šAÎLoÿl
) {

188 
®lLoÿl
 = 
šAÎLoÿl
;

189 
	}
}

191 
public
 
synchrÚized
 
	$£tEÁryD©eTime
(
D©e
 
šEÁryD©eTime
) {

192 
’ŒyD©eTime
 = 
šEÁryD©eTime
;

193 
	}
}

	@spec/jbb/OrderStatusTransaction.java

7 
·ckage
 
	g¥ec
.
	gjbb
;

9 
impÜt
 
	gjava
.
	gut
.*;

10 
impÜt
 
	gjava
.
	gut
.
	gloggšg
.
	gLev–
;

11 
impÜt
 
	g¥ec
.
	gjbb
.
	gšäa
.
	gUt
.
	gT¿n§ùiÚLogBufãr
;

12 
impÜt
 
	g¥ec
.
	gjbb
.
	gšäa
.
	gUt
.
	gXMLT¿n§ùiÚLog
;

13 
impÜt
 
	gjava
.
	gm©h
.
	gBigDecim®
;

15 şas 
	cOrd”StusT¿n§ùiÚ
 
ex‹nds
 
	mT¿n§ùiÚ
 {

17 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

24 
´iv©e
 
Com·ny
 
	mcom·ny
;

26 
´iv©e
 
	mw¬ehou£Id
;

28 
´iv©e
 
by‹
 
	mdi¡riùId
;

30 
´iv©e
 
SŒšg
 
	mcu¡_Ï¡_Çme
;

32 
´iv©e
 
boŞ—n
 
	mu£_cu¡om”Id
;

34 
´iv©e
 
	mcu¡om”Id
;

36 
´iv©e
 
Cu¡om”
 
	mcu¡om”PŒ
;

38 
´iv©e
 
BigDecim®
 
	mcu¡om”B®ªû
;

40 
´iv©e
 
SŒšg
 
	mcu¡om”Fœ¡Name
;

42 
´iv©e
 
SŒšg
 
	mcu¡om”MiddËName
;

44 
´iv©e
 
SŒšg
 
	mcu¡om”La¡Name
;

46 
´iv©e
 
W¬ehou£
 
	mw¬ehou£PŒ
;

48 
´iv©e
 
Di¡riù
 
	mdi¡riùPŒ
;

50 
´iv©e
 
Ord”
 
	mcu¼’tOrd”PŒ
;

52 
´iv©e
 
	mÜd”Id
;

54 
´iv©e
 
D©e
 
	mÜd”EÁryD©e
;

56 
´iv©e
 
	mÜd”C¬r›rId
;

58 
´iv©e
 
	mÜd”LšeCouÁ
;

60 
´iv©e
 
	mŞ_suµlyšg_w¬ehou£
[];

62 
´iv©e
 
	mŞ_™em_id
[];

64 
´iv©e
 
SŒšg
 
	mŞ_™em_Çme
[];

66 
´iv©e
 
	mŞ_quªt™y
[];

68 
´iv©e
 
	mŞ_¡ock
[];

70 
´iv©e
 
	mŞ_b_g
[];

72 
´iv©e
 
BigDecim®
 
	mŞ_™em_´iû
[];

74 
´iv©e
 
BigDecim®
 
	mŞ_amouÁ
[];

76 
´iv©e
 
D©e
 
	mŞ_d–iv”y_d©e
[];

78 
´iv©e
 
T¿n§ùiÚLogBufãr
 
	mÜd”Log
;

80 
´iv©e
 
T¿n§ùiÚLogBufãr
 
	mš™Log
;

82 
´iv©e
 
XMLT¿n§ùiÚLog
 
	mxmlOrd”Log
;

84 
	mSŒšg
[] 
	mv®id©iÚLog
 = {

109 
	gboŞ—n
[] 
	gcheckLše
 = {

110 
Œue
,rue,rue, 
çl£
,rue, false,rue,rue,rue,rue,

111 
çl£
, 
Œue
,rue,rue,rue,rue,rue, false,rue, false,

112 
Œue
,rue,rue,rue

115 
public
 
	$Ord”StusT¿n§ùiÚ
(
Com·ny
 
šCom·ny
, 
šW¬ehou£Id
)

117 
i
;

118 
com·ny
 = 
šCom·ny
;

119 
w¬ehou£Id
 = 
šW¬ehou£Id
;

120 
Ş_suµlyšg_w¬ehou£
 = 
Ãw
 [30];

121 
Ş_™em_id
 = 
Ãw
 [30];

122 
Ş_™em_Çme
 = 
Ãw
 
SŒšg
[30];

123 
Ş_quªt™y
 = 
Ãw
 [30];

124 
Ş_¡ock
 = 
Ãw
 [30];

125 
Ş_b_g
 = 
Ãw
 [30];

126 
Ş_™em_´iû
 = 
Ãw
 
BigDecim®
[30];

127 
Ş_amouÁ
 = 
Ãw
 
BigDecim®
[30];

128 
Ş_d–iv”y_d©e
 = 
Ãw
 
D©e
[30];

129 
Üd”Log
 = 
Ãw
 
	`T¿n§ùiÚLogBufãr
();

130 
	`£tupOrd”Log
();

131 
xmlOrd”Log
 = 
Ãw
 
	`XMLT¿n§ùiÚLog
();

132 
š™Log
 = 
Ãw
 
	`T¿n§ùiÚLogBufãr
(
Üd”Log
);

133 
	`£tupIn™Log
();

134 
	}
}

136 
´iv©e
 
	$£tupOrd”Log
() {

137 
Üd”Log
.
	`putText
("Order-Status", 34, 0, 12);

138 
Üd”Log
.
	`putText
("Warehouse:", 0, 1, 10);

139 
Üd”Log
.
	`putIÁ
(
w¬ehou£Id
, 11, 1, 4);

140 
Üd”Log
.
	`putText
("District:", 18, 1, 9);

141 
Üd”Log
.
	`putText
("Customer:", 0, 2, 10);

142 
Üd”Log
.
	`putText
("Name:", 18, 2, 5);

143 
Üd”Log
.
	`putText
("Cust-Balance:", 0, 3, 14);

144 
Üd”Log
.
	`putText
("Order-Number:", 0, 5, 14);

145 
Üd”Log
.
	`putText
("Entry-Date:", 25, 5, 12);

146 
Üd”Log
.
	`putText
("Carrier-Number:", 59, 5, 16);

147 
Üd”Log
.
	`putText
(

150 
	}
}

152 
´iv©e
 
	$£tupIn™Log
() {

154 
š™Log
.
	`putCh¬Fl
('9', 28, 1, 2);

155 
š™Log
.
	`putCh¬Fl
('9', 10, 2, 4);

156 
š™Log
.
	`putCh¬Fl
('X', 23, 2, 16);

157 
š™Log
.
	`putCh¬Fl
('X', 40, 2, 2);

158 
š™Log
.
	`putCh¬Fl
('X', 43, 2, 16);

159 
š™Log
.
	`putText
("$-99999.99", 14, 3, 10);

160 
š™Log
.
	`putCh¬Fl
('9', 14, 5, 8);

161 
š™Log
.
	`putText
("DD-MM-YYYY", 37, 5, 10);

162 
š™Log
.
	`putText
("hh:mm:ss", 48, 5, 8);

163 
š™Log
.
	`putCh¬Fl
('9', 75, 5, 2);

164 
i
 = 7; i < 22; i++) {

165 
š™Log
.
	`putCh¬Fl
('9', 2, 
i
, 4);

166 
š™Log
.
	`putCh¬Fl
('9', 13, 
i
, 6);

167 
š™Log
.
	`putCh¬Fl
('9', 24, 
i
, 2);

168 
š™Log
.
	`putText
("$99999.99", 32, 
i
, 9);

169 
š™Log
.
	`putText
("DD-MM-YYYY", 46, 
i
, 10);

172 
	}
}

174 
public
 
SŒšg
 
	$g‘M’uName
() {

176 
	}
}

178 
public
 
synchrÚized
 
	$d–‘e
() {

179 
	}
}

181 
public
 
synchrÚized
 
	$š™
() {

182 
JBBut
.
	`g‘Log
().
	`’‹ršg
("spec.jbb.OrderStatusTransaction", "init");

183 
di¡riùId
 = (
by‹
è
JBBut
.
	`¿ndom
(1, 
com·ny


184 .
	`g‘MaxDi¡riùsP”W¬ehou£
(), 
w¬ehou£Id
);

185 
y
 = (è
JBBut
.
	`¿ndom
(1, 100, 
w¬ehou£Id
);

186 ià(
y
 <= 60) {

187 
cu¡_Ï¡_Çme
 = 
JBBut
.
	`choo£_¿ndom_Ï¡_Çme
(
com·ny


188 .
	`g‘MaxCu¡om”sP”Di¡riù
(), 
w¬ehou£Id
);

189 
u£_cu¡om”Id
 = 
çl£
;

192 
cu¡om”Id
 = 
JBBut
.
	`ü—‹_¿ndom_cu¡om”_id
(
com·ny


193 .
	`g‘MaxCu¡om”sP”Di¡riù
(), 
w¬ehou£Id
);

194 
u£_cu¡om”Id
 = 
Œue
;

196 
JBBut
.
	`g‘Log
().
	`ex™šg
("spec.jbb.OrderStatusTransaction", "init");

197 
	}
}

199 
public
 
boŞ—n
 
	$´oûss
() {

200 
JBBut
.
	`g‘Log
().
	`’‹ršg
("spec.jbb.OrderStatusTransaction", "process");

201 
lše_numb”
 = 0;

202 ià(
u£_cu¡om”Id
) {

203 
uniqueCu¡om”Id
 = 
com·ny
.
	`budUniqueCu¡om”Key
(
w¬ehou£Id
,

204 
di¡riùId
, 
cu¡om”Id
);

205 
cu¡om”PŒ
 = 
com·ny
.
	`g‘Cu¡om”
(
uniqueCu¡om”Id
, 
çl£
);

208 
cu¡om”PŒ
 = 
com·ny
.
	`g‘Cu¡om”ByLa¡Name
(
w¬ehou£Id
,

209 
di¡riùId
, 
cu¡_Ï¡_Çme
);

211 ià(
cu¡om”PŒ
 !ğ
nuÎ
) {

212 
cu¡om”Id
 = 
cu¡om”PŒ
.
	`g‘Id
();

213 
cu¡om”B®ªû
 = 
cu¡om”PŒ
.
	`g‘B®ªû
();

214 
cu¡om”Fœ¡Name
 = 
cu¡om”PŒ
.
	`g‘Fœ¡Name
();

215 
cu¡om”MiddËName
 = 
cu¡om”PŒ
.
	`g‘MiddËName
();

216 
cu¡om”La¡Name
 = 
cu¡om”PŒ
.
	`g‘La¡Name
();

217 
cu¼’tOrd”PŒ
 = 
cu¡om”PŒ
.
	`g‘L©e¡Ord”
();

218 ià(
cu¼’tOrd”PŒ
 !ğ
nuÎ
) {

219 
Üd”Id
 = 
cu¼’tOrd”PŒ
.
	`g‘Id
();

220 
Üd”EÁryD©e
 = 
cu¼’tOrd”PŒ
.
	`g‘EÁryTime
();

221 
Üd”C¬r›rId
 = 
cu¼’tOrd”PŒ
.
	`g‘C¬r›rId
();

222 
Üd”LšeCouÁ
 = 
cu¼’tOrd”PŒ
.
	`g‘Ord”lšeCouÁ
();

223 
Ord”lše
 
Üd”lše
;

224 
Ord”lše
[] 
Üd”lšeLi¡
;

225 
i
;

226 
Üd”lšeLi¡
 = 
cu¼’tOrd”PŒ
.
	`g‘Ord”lšeLi¡
();

227 ià(
JBBut
.
	`g‘Log
().
	`isLoggabË
(
Lev–
.
FINEST
)) {

228 
JBBut
.
	`g‘Log
().
	`fše¡
(

230 + " ord”lšeLi¡=" + 
Üd”lšeLi¡


231 + " ord”LšeCouÁ=" + 
Üd”LšeCouÁ
);

233 
i
 = 0; i < 
Üd”LšeCouÁ
; i++) {

234 
Üd”lše
 = (
Ord”lše
è
Üd”lšeLi¡
[
i
];

235 ià(
JBBut
.
	`g‘Log
().
	`isLoggabË
(
Lev–
.
FINEST
)) {

236 
JBBut
.
	`g‘Log
().
	`fše¡
(

237 " i=" + 
i
 + "†še_numb”=" + 
lše_numb”


238 + " ord”lše=" + 
Üd”lše
);

240 
Ş_suµlyšg_w¬ehou£
[
lše_numb”
] = 
Üd”lše


241 .
	`g‘SuµlyW¬ehou£
();

242 
Ş_™em_id
[
lše_numb”
] = 
Üd”lše
.
	`g‘I‹mId
();

243 
w¬ehou£PŒ
 = 
com·ny
.
	`g‘W¬ehou£PŒ
(
w¬ehou£Id
, 
çl£
);

244 
Ş_™em_Çme
[
lše_numb”
] = (
w¬ehou£PŒ


245 .
	`»Œ›veI‹m
(
Üd”lše
.
	`g‘I‹mId
())).
	`g‘Name
();

246 
Ş_quªt™y
[
lše_numb”
] = 
Üd”lše
.
	`g‘Quªt™y
();

247 
Ş_¡ock
[
lše_numb”
] = 
Üd”lše
.
	`g‘StockQuªt™y
();

248 
Ş_b_g
[
lše_numb”
] = 
Üd”lše
.
	`g‘B¿ndG’”ic
();

249 
Ş_™em_´iû
[
lše_numb”
] = 
Üd”lše
.
	`g‘I‹mPriû
();

250 
Ş_amouÁ
[
lše_numb”
] = 
Üd”lše
.
	`g‘AmouÁ
();

251 
Ş_d–iv”y_d©e
[
lše_numb”
] = 
Üd”lše


252 .
	`g‘D–iv”yD©eTime
();

253 
lše_numb”
++;

255 
JBBut
.
	`g‘Log
().
	`ex™šg
("spec.jbb.OrderStatusTransaction",

257  
Œue
;

260 
JBBut
.
	`g‘Log
().
	`ex™šg
("spec.jbb.OrderStatusTransaction",

262  
çl£
;

266 
cu¡om”Id
 = 0;

267 
cu¡om”Fœ¡Name
 = "";

268 
cu¡om”MiddËName
 = "";

269 
cu¡om”La¡Name
 = 
cu¡_Ï¡_Çme
;

270 
cu¡om”B®ªû
 = 
BigDecim®
.
	`v®ueOf
(0, 2);

271 
cu¼’tOrd”PŒ
 = 
nuÎ
;

272 
JBBut
.
	`g‘Log
().
	`ex™šg
("spec.jbb.OrderStatusTransaction",

274  
çl£
;

276 
	}
}

278 
public
 
synchrÚized
 
	$di¥Ïy
() {

279 
Sy¡em
.
out
.
	`´šn
("OrderStatus Display **********************");

280 
Sy¡em
.
out
.
	`´šn
("W¬ehou£ ID i " + 
w¬ehou£Id
);

281 
Sy¡em
.
out
.
	`´šn
("Di¡riù ID i " + 
di¡riùId
);

282 
Sy¡em
.
out
.
	`´šn
("Cu¡om” ID i " + 
cu¡om”Id
);

283 
Sy¡em
.
out


284 .
	`´šn
("**************************************************");

285 
	}
}

287 
public
 
synchrÚized
 
	$š™ŸlizeT¿n§ùiÚLog
() {

288 
JBBut
.
	`g‘Log
().
	`’‹ršg
("spec.jbb.OrderStatusTransaction",

290 
D©e
 
sü“nD©e
 = 
Ãw
 
	`D©e
();

318 
Üd”Log
.
	`putD©e
(
sü“nD©e
, 37, 5, 10);

319 ià(
T¿n§ùiÚ
.
’abËLogWr™e
)

320 
š™Log
.
	`di¥Ïy
();

321 
JBBut
.
	`g‘Log
().
	`ex™šg
("spec.jbb.OrderStatusTransaction",

323 
	}
}

325 
public
 
synchrÚized
 
	$´oûssT¿n§ùiÚLog
() {

326 
JBBut
.
	`g‘Log
().
	`’‹ršg
("spec.jbb.OrderStatusTransaction",

328 
D©e
 
sü“nD©e
 = 
Ãw
 
	`D©e
();

329 
Üd”Log
.
	`ş—rBufãr
();

330 
xmlOrd”Log
.
	`ş—r
();

331 
	`£tupOrd”Log
();

337 
Üd”Log
.
	`putIÁ
(
di¡riùId
, 28, 1, 2);

339 
Üd”Log
.
	`putIÁ
(
cu¡om”Id
, 10, 2, 4);

340 
Üd”Log
.
	`putText
(
cu¡om”Fœ¡Name
, 23, 2, 16);

341 
Üd”Log
.
	`putText
(
cu¡om”MiddËName
, 40, 2, 2);

342 
Üd”Log
.
	`putText
(
cu¡om”La¡Name
, 43, 2, 16);

345 
Üd”Log
.
	`putDŞÏrs
(
cu¡om”B®ªû
, 14, 3, 10);

347 ià(
cu¼’tOrd”PŒ
 !ğ
nuÎ
) {

348 
D©e
 
d–iv”yD©e
;

351 
Üd”Log
.
	`putIÁ
(
Üd”Id
, 14, 5, 8);

352 ià(
Üd”EÁryD©e
 !ğ
nuÎ
) {

353 
Üd”Log
.
	`putD©e
(
Üd”EÁryD©e
, 37, 5, 10);

354 
Üd”Log
.
	`putTime
(
Üd”EÁryD©e
, 48, 5, 8);

357 
Üd”Log
.
	`putIÁ
(
Üd”C¬r›rId
, 75, 5, 2);

359 
lše_numb”
 = 0;†še_numb” < 
Üd”LšeCouÁ
;†ine_number++) {

361 
di¥ÏyLše
 = 
lše_numb”
 + 7;

362 ià(
lše_numb”
 >= 15)

363 
di¥ÏyLše
 = 15 + 7;

364 
Üd”Log
.
	`putIÁ
(
Ş_suµlyšg_w¬ehou£
[
lše_numb”
], 2,

365 
di¥ÏyLše
, 4);

366 
Üd”Log
.
	`putIÁ
(
Ş_™em_id
[
lše_numb”
], 13, 
di¥ÏyLše
, 6);

367 
Üd”Log
.
	`putIÁ
(
Ş_quªt™y
[
lše_numb”
], 24, 
di¥ÏyLše
, 2);

370 
Üd”Log
.
	`putDŞÏrs
(
Ş_amouÁ
[
lše_numb”
], 34, 
di¥ÏyLše
, 9);

371 
d–iv”yD©e
 = 
Ş_d–iv”y_d©e
[
lše_numb”
];

372 ià(
d–iv”yD©e
 !ğ
nuÎ
)

373 
Üd”Log
.
	`putD©e
(
d–iv”yD©e
, 46, 
di¥ÏyLše
, 10);

379 ià(
cu¡om”PŒ
 =ğ
nuÎ
) {

380 
Üd”Log
.
	`putText
("No customer found for†ast‚ame.", 2, 4, 32);

383 
Üd”Log
.
	`putText
("No orders…ending.", 2, 7, 20);

387 
xmlOrd”Log
.
	`pİuÏ‹XML
(
Üd”Log
);

388 ià(
T¿n§ùiÚ
.
’abËLogWr™e
)

389 
Üd”Log
.
	`di¥Ïy
();

390 ià(
T¿n§ùiÚ
.
v®id©iÚFÏg
) {

391 
SŒšg
[] 
s
 = 
Üd”Log
.
	`v®id©e
();

392 ià(
s
.
Ëngth
 !ğ
v®id©iÚLog
.length) {

393 
SŒšgBufãr
 
sb
 = 
Ãw
 
	`SŒšgBufãr
(200);

394 
sb


395 .
	`­³nd
("VALIDATION ERROR: mismatch in screen†engths for OrderStatusTransaction");

396 
sb
.
	`­³nd
(
Sy¡em
.
	`g‘Prİ”ty
("line.separator"));

397 
sb
.
	`­³nd
(" Screen†ength should be: "

398 + 
v®id©iÚLog
.
Ëngth
);

399 
sb
.
	`­³nd
(
Sy¡em
.
	`g‘Prİ”ty
("line.separator"));

400 
sb
.
	`­³nd
(" Sü“ÀËngth is: " + 
s
.
Ëngth
);

401 
JBBut
.
	`g‘Log
().
	`w¬nšg
(
sb
.
	`toSŒšg
());

402 
T¿n§ùiÚ
.
	`šv®id©eRun
();

404 
i
 = 0; i < 
v®id©iÚLog
.
Ëngth
; i++) {

405 ià(
checkLše
[
i
]) {

406 ià(!
s
[
i
].
	`equ®s
(
v®id©iÚLog
[i])) {

407 
SŒšgBufãr
 
sb
 = 
Ãw
 
	`SŒšgBufãr
(200);

408 
sb


409 .
	`­³nd
("VALIDATION ERROR: incorrect output for OrderStatusTransaction");

410 
sb
.
	`­³nd
(
Sy¡em
.
	`g‘Prİ”ty
("line.separator"));

411 
sb
.
	`­³nd
(" Lš" + (
i
 + 1) + " should be: |"

412 + 
v®id©iÚLog
[
i
] + "|");

413 
sb
.
	`­³nd
(
Sy¡em
.
	`g‘Prİ”ty
("line.separator"));

414 
sb
.
	`­³nd
(" Lš" + (
i
 + 1è+ " is: |" + 
s
[i]

416 
JBBut
.
	`g‘Log
().
	`w¬nšg
(
sb
.
	`toSŒšg
());

417 
T¿n§ùiÚ
.
	`šv®id©eRun
();

422 
JBBut
.
	`g‘Log
().
	`ex™šg
("spec.jbb.OrderStatusTransaction",

424 
	}
}

	@spec/jbb/Orderline.java

7 
·ckage
 
	g¥ec
.
	gjbb
;

9 
impÜt
 
	gjava
.
	gut
.*;

10 
impÜt
 
	gjava
.
	gm©h
.
	gBigDecim®
;

12 
public
 cÏs 
	cOrd”lše
 {

14 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

22 
´iv©e
 
D©e
 
	md–iv”yD©eTime
;

24 
´iv©e
 
SŒšg
 
	mdi¡riùInfo
;

26 
´iv©e
 
BigDecim®
 
	mamouÁ
;

28 
´iv©e
 
	mÜd”Id
;

30 
´iv©e
 
	m™emId
;

32 
´iv©e
 
	mÜd”LšeNumb”
;

34 
´iv©e
 
	mquªt™y
;

36 
´iv©e
 
by‹
 
	mdi¡riùId
;

38 
´iv©e
 
	mw¬ehou£Id
;

40 
´iv©e
 
	msuµlyW¬ehou£Id
;

42 
´iv©e
 
Com·ny
 
	mcom·ny
;

44 
´iv©e
 
W¬ehou£
 
	mw¬ehou£PŒ
;

46 
´iv©e
 
Stock
 
	m¡ockPŒ
;

48 
´iv©e
 
SŒšg
 
	m™emName
;

50 
´iv©e
 
BigDecim®
 
	m™emPriû
;

52 
´iv©e
 
	m¡ockQuªt™y
;

54 
´iv©e
 
	mB¿ndG’”ic
;

56 
public
 
	$Ord”lše
(
Com·ny
 
šCom·ny
, 
šOrd”Id
, 
by‹
 
šDi¡riùId
,

57 
šW¬ehou£Id
, 
šLšeNumb”
,

58 
numb”_of_Üd”lšes
, 
boŞ—n
 
rŞlback
) {

59 
com·ny
 = 
šCom·ny
;

60 
Üd”Id
 = 
šOrd”Id
;

61 
di¡riùId
 = 
šDi¡riùId
;

62 
w¬ehou£Id
 = 
šW¬ehou£Id
;

63 
Üd”LšeNumb”
 = 
šLšeNumb”
;

64 
™emId
 = 
JBBut
.
	`ü—‹_¿ndom_™em_id
(
com·ny
.
	`g‘MaxI‹ms
(),

65 
w¬ehou£Id
);

66 ià((
šLšeNumb”
 =ğ
numb”_of_Üd”lšes
è&& 
rŞlback
) {

67 
™emId
 = 0;

69 
d–iv”yD©eTime
 = 
nuÎ
;

70 
quªt™y
 = 5;

71 
amouÁ
 = 
BigDecim®
.
	`v®ueOf
(0, 2);

72 
di¡riùInfo
 = 
nuÎ
;

75 
public
 
synchrÚized
 
boŞ—n
 
	$v®id©eAndProûss
(
W¬ehou£
 
šW¬ehou£PŒ
) {

76 
boŞ—n
 
‹mp
;

77 
I‹m
 
™emRef
 = 
nuÎ
;

78 
Stock
 
¡ockRef
 = 
nuÎ
;

79 ià(
šW¬ehou£PŒ
 !ğ
nuÎ
) {

80 
™emRef
 = 
šW¬ehou£PŒ
.
	`»Œ›veI‹m
(
™emId
);

81 
¡ockRef
 = 
šW¬ehou£PŒ
.
	`»Œ›veStock
(
™emId
);

83 ià((
šW¬ehou£PŒ
 !ğ
nuÎ
è&& (
™emRef
 !ğnuÎè&& (
¡ockRef
 !=‚ull)) {

84 
¡ockPŒ
 = 
¡ockRef
;

85 
	`´oûss
(
™emRef
, 
¡ockRef
);

86 
‹mp
 = 
Œue
;

89 
‹mp
 = 
çl£
;

90  
‹mp
;

91 
	}
}

93 
´iv©e
 
	$´oûss
(
I‹m
 
™emRef
, 
Stock
 
¡ockRef
) {

94 
™emName
 = 
™emRef
.
	`g‘Name
();

95 
™emPriû
 = 
™emRef
.
	`g‘Priû
();

96 
SŒšg
 
™emD©a
 = 
™emRef
.
	`g‘B¿ndInfo
();

97 
¡ockQuªt™y
 = 
¡ockRef
.
	`g‘Quªt™y
();

98 
SŒšg
 
¡ock_di¡riùInfo
 = 
¡ockRef
.
	`g‘Di¡riùInfo
(
di¡riùId
);

99 
SŒšg
 
¡ockD©a
 = 
¡ockRef
.
	`g‘D©a
();

100 ià(
¡ockQuªt™y
 >ğ(
quªt™y
 + 10))

101 
¡ockRef
.
	`chªgeQuªt™y
(-
quªt™y
);

103 
¡ockRef
.
	`chªgeQuªt™y
(91 - 
quªt™y
);

104 
¡ockRef
.
	`šüem’tYTD
(
quªt™y
);

105 
¡ockRef
.
	`šüem’tOrd”CouÁ
();

106 ià(
w¬ehou£Id
 =ğ
suµlyW¬ehou£Id
)

107 
¡ockRef
.
	`šüem’tRemÙeCouÁ
();

108 
amouÁ
 = 
BigDecim®
.
	`v®ueOf
(
quªt™y
).
	`muÉly
(
™emPriû
).
	`£tSÿË
(2,

109 
BigDecim®
.
ROUND_HALF_UP
);

110 ià((
™emD©a
.
	`šdexOf
("ORIGINAL") > 0)

111 && (
¡ockD©a
.
	`šdexOf
("ORIGINAL") > 0))

112 
B¿ndG’”ic
 = 'B';

114 
B¿ndG’”ic
 = 'G';

115 
di¡riùInfo
 = 
Ãw
 
	`SŒšg
(
¡ock_di¡riùInfo
);

116 
	}
}

118 
public
 
Stock
 
	$g‘StockPŒ
() {

119  
¡ockPŒ
;

120 
	}
}

122 
public
 
synchrÚized
 
BigDecim®
 
	$g‘AmouÁ
() {

123 
BigDecim®
 
‹mp
 = 
amouÁ
;

124  
‹mp
;

125 
	}
}

127 
public
 
synchrÚized
 
	$g‘B¿ndG’”ic
() {

128 
‹mp
 = 
B¿ndG’”ic
;

129  
‹mp
;

130 
	}
}

132 
public
 
synchrÚized
 
	$g‘I‹mId
() {

133 
‹mp
 = 
™emId
;

134  
‹mp
;

135 
	}
}

137 
public
 
synchrÚized
 
SŒšg
 
	$g‘I‹mName
() {

138 
SŒšg
 
‹mp
 = 
™emName
;

139  
‹mp
;

140 
	}
}

142 
public
 
synchrÚized
 
BigDecim®
 
	$g‘I‹mPriû
() {

143 
BigDecim®
 
‹mp
 = 
™emPriû
;

144  
‹mp
;

145 
	}
}

147 
public
 
synchrÚized
 
	$g‘SuµlyW¬ehou£
() {

148 
‹mp
 = 
suµlyW¬ehou£Id
;

149  
‹mp
;

150 
	}
}

152 
public
 
synchrÚized
 
	$g‘StockQuªt™y
() {

153 
‹mp
 = 
¡ockQuªt™y
;

154  
‹mp
;

155 
	}
}

157 
public
 
synchrÚized
 
	$£tSuµlyW¬ehou£
(
šSuµlyW¬ehou£Id
) {

158 
suµlyW¬ehou£Id
 = 
šSuµlyW¬ehou£Id
;

159 
	}
}

161 
public
 
synchrÚized
 
D©e
 
	$g‘D–iv”yD©eTime
() {

162 
D©e
 
‹mp
 = 
d–iv”yD©eTime
;

163  
‹mp
;

164 
	}
}

166 
public
 
synchrÚized
 
	$£tD–iv”yTime
(
D©e
 
d–iv”yTime
) {

167 
d–iv”yD©eTime
 = 
d–iv”yTime
;

168 
	}
}

170 
public
 
synchrÚized
 
	$g‘Quªt™y
() {

171 
‹mp
 = 
quªt™y
;

172  
‹mp
;

173 
	}
}

175 
public
 
synchrÚized
 
	$£tQuªt™y
(
šQuªt™y
) {

176 
quªt™y
 = 
šQuªt™y
;

177 
	}
}

179 
public
 
synchrÚized
 
	$£tAmouÁ
(
BigDecim®
 
šAmouÁ
) {

180 
amouÁ
 = 
šAmouÁ
;

181 
	}
}

183 
public
 
synchrÚized
 
	$£tDi¡riùInfo
(
SŒšg
 
šDi¡riùInfo
) {

184 
di¡riùInfo
 = 
šDi¡riùInfo
;

185 
	}
}

	@spec/jbb/PaymentTransaction.java

8 
·ckage
 
	g¥ec
.
	gjbb
;

10 
impÜt
 
	g¥ec
.
	gjbb
.
	gšäa
.
	gUt
.
	gT¿n§ùiÚLogBufãr
;

11 
impÜt
 
	g¥ec
.
	gjbb
.
	gšäa
.
	gUt
.
	gXMLT¿n§ùiÚLog
;

12 
impÜt
 
	gjava
.
	gm©h
.
	gBigDecim®
;

13 
impÜt
 
	gjava
.
	gut
.
	gD©e
;

15 şas 
	cPaym’tT¿n§ùiÚ
 
ex‹nds
 
	mT¿n§ùiÚ
 {

17 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

24 
´iv©e
 
Com·ny
 
	mcom·ny
;

26 
´iv©e
 
	mw¬ehou£Id
;

28 
´iv©e
 
by‹
 
	mdi¡riùId
;

30 
´iv©e
 
boŞ—n
 
	mhome
;

32 
´iv©e
 
	mu£_cu¡om”Id
;

34 
´iv©e
 
SŒšg
 
	mcu¡_Ï¡_Çme
;

36 
´iv©e
 
	mcu¡om”Id
;

38 
´iv©e
 
	mcu¡om”W¬ehou£Id
;

40 
´iv©e
 
by‹
 
	mcu¡om”Di¡riùId
;

42 
´iv©e
 
BigDecim®
 
	m·ym’tAmouÁ
;

44 
´iv©e
 
D©e
 
	m·ym’tTime
;

46 
´iv©e
 
W¬ehou£
 
	mw¬ehou£PŒ
;

48 
´iv©e
 
Di¡riù
 
	mdi¡riùPŒ
;

50 
´iv©e
 
Cu¡om”
 
	mcu¡om”PŒ
;

52 
´iv©e
 
T¿n§ùiÚLogBufãr
 
	mš™Log
;

54 
´iv©e
 
T¿n§ùiÚLogBufãr
 
	m·ym’tLog
;

56 
´iv©e
 
XMLT¿n§ùiÚLog
 
	mxmlPaym’tLog
;

58 
	mSŒšg
[] 
	mv®id©iÚLog
 = {

78 
	gboŞ—n
[] 
	gcheckLše
 = {

79 
Œue
, 
çl£
,rue,rue,rue,rue,rue,rue,rue, false,rue,

80 
Œue
,rue,rue, 
çl£
,rue,rue,rue,rue,rue,rue,rue,

81 
Œue
,rue

84 
public
 
	$Paym’tT¿n§ùiÚ
(
Com·ny
 
šCom·ny
, 
šW¬ehou£Id
)

86 
com·ny
 = 
šCom·ny
;

87 
w¬ehou£Id
 = 
šW¬ehou£Id
;

88 
w¬ehou£PŒ
 = 
com·ny
.
	`g‘W¬ehou£PŒ
(
w¬ehou£Id
, 
çl£
);

90 
·ym’tLog
 = 
Ãw
 
	`T¿n§ùiÚLogBufãr
();

91 
	`£tupPaym’tLog
();

92 
xmlPaym’tLog
 = 
Ãw
 
	`XMLT¿n§ùiÚLog
();

93 
š™Log
 = 
Ãw
 
	`T¿n§ùiÚLogBufãr
(
·ym’tLog
);

94 
	`£tupIn™Log
();

95 
	}
}

97 
´iv©e
 
	$£tupPaym’tLog
() {

98 
·ym’tLog
.
	`putText
("Payment", 37, 0, 7);

99 
·ym’tLog
.
	`putText
("Date:", 0, 1, 5);

100 
·ym’tLog
.
	`putText
("Warehouse:", 0, 3, 10);

101 
·ym’tLog
.
	`putText
("District:", 41, 3, 9);

102 
·ym’tLog
.
	`putText
("Customer:", 0, 8, 9);

103 
·ym’tLog
.
	`putText
("Cust-Warehouse:", 16, 8, 15);

104 
·ym’tLog
.
	`putText
("Cust-District:", 38, 8, 14);

105 
·ym’tLog
.
	`putText
("Name:", 0, 9, 5);

106 
·ym’tLog
.
	`putText
("Since:", 49, 9, 6);

107 
·ym’tLog
.
	`putText
("Credit:", 49, 10, 7);

108 
·ym’tLog
.
	`putText
("%Disc:", 49, 11, 6);

109 
·ym’tLog
.
	`putText
("Phone:", 49, 12, 6);

110 
·ym’tLog
.
	`putText
("Amount Paid:", 0, 14, 11);

111 
·ym’tLog
.
	`putText
("New Cust-Balance:", 36, 14, 17);

112 
·ym’tLog
.
	`putText
("Credit Limit:", 0, 15, 12);

113 
·ym’tLog
.
	`putText
("Cust-Data:", 0, 17, 10);

114 
	}
}

116 
´iv©e
 
	$£tupIn™Log
() {

117 
š™Log
.
	`putText
("DD-MM-YYYY", 6, 1, 10);

118 
š™Log
.
	`putText
("hh:mm:ss", 17, 1, 8);

119 
š™Log
.
	`putCh¬Fl
('9', 11, 3, 4);

120 
š™Log
.
	`putCh¬Fl
('9', 51, 3, 2);

121 
š™Log
.
	`putCh¬Fl
('X', 0, 4, 20);

122 
š™Log
.
	`putCh¬Fl
('X', 41, 4, 20);

123 
š™Log
.
	`putCh¬Fl
('X', 0, 5, 20);

124 
š™Log
.
	`putCh¬Fl
('X', 41, 5, 20);

125 
š™Log
.
	`putCh¬Fl
('X', 0, 6, 20);

126 
š™Log
.
	`putCh¬Fl
('X', 21, 6, 2);

127 
š™Log
.
	`putText
("XXXXX-XXXX", 24, 6, 10);

128 
š™Log
.
	`putCh¬Fl
('X', 41, 6, 20);

129 
š™Log
.
	`putCh¬Fl
('X', 62, 6, 2);

130 
š™Log
.
	`putText
("XXXXX-XXXX", 65, 6, 10);

131 
š™Log
.
	`putCh¬Fl
('9', 10, 8, 4);

132 
š™Log
.
	`putCh¬Fl
('9', 32, 8, 4);

133 
š™Log
.
	`putCh¬Fl
('9', 53, 8, 2);

134 
š™Log
.
	`putCh¬Fl
('X', 8, 9, 16);

135 
š™Log
.
	`putCh¬Fl
('X', 25, 9, 2);

136 
š™Log
.
	`putCh¬Fl
('X', 28, 9, 16);

137 
š™Log
.
	`putText
("DD-MM-YYYY", 57, 9, 10);

138 
š™Log
.
	`putCh¬Fl
('X', 8, 10, 20);

139 
š™Log
.
	`putCh¬Fl
('X', 57, 10, 2);

140 
š™Log
.
	`putCh¬Fl
('X', 8, 11, 20);

141 
š™Log
.
	`putText
("99.99", 57, 11, 5);

142 
š™Log
.
	`putCh¬Fl
('X', 8, 12, 20);

143 
š™Log
.
	`putCh¬Fl
('X', 29, 12, 2);

144 
š™Log
.
	`putText
("XXXXX-XXXX", 32, 12, 10);

145 
š™Log
.
	`putText
("XXXXXX-XXX-XXX-XXXX", 57, 12, 19);

146 
š™Log
.
	`putText
("$9999.99", 17, 14, 8);

147 
š™Log
.
	`putText
("$-99999.99", 54, 14, 10);

148 
š™Log
.
	`putText
("$99999.99", 16, 15, 9);

149 
š™Log
.
	`putCh¬Fl
('X', 11, 17, 50);

150 
š™Log
.
	`putCh¬Fl
('X', 11, 18, 50);

151 
š™Log
.
	`putCh¬Fl
('X', 11, 19, 50);

152 
š™Log
.
	`putCh¬Fl
('X', 11, 20, 50);

153 
	}
}

155 
public
 
SŒšg
 
	$g‘M’uName
() {

157 
	}
}

159 
public
 
synchrÚized
 
	$d–‘e
() {

160 
	}
}

163 
public
 
synchrÚized
 
	$š™
() {

164 
JBBut
.
	`g‘Log
().
	`’‹ršg
("spec.jbb.PaymentTransaction", "init");

165 
di¡riùId
 = (
by‹
è
JBBut
.
	`¿ndom
(1, 
com·ny


166 .
	`g‘MaxDi¡riùsP”W¬ehou£
(), 
w¬ehou£Id
);

167 
di¡riùPŒ
 = 
w¬ehou£PŒ
.
	`g‘Di¡riùPŒ
(
di¡riùId
, 
çl£
);

170 
x
 = (è
JBBut
.
	`¿ndom
(1, 100, 
w¬ehou£Id
);

171 
y
 = (è
JBBut
.
	`¿ndom
(1, 100, 
w¬ehou£Id
);

172 ià(
y
 <= 60) {

173 
cu¡_Ï¡_Çme
 = 
JBBut
.
	`choo£_¿ndom_Ï¡_Çme
(
com·ny


174 .
	`g‘MaxCu¡om”sP”Di¡riù
(), 
w¬ehou£Id
);

175 
u£_cu¡om”Id
 = 'F';

178 
cu¡om”Id
 = 
JBBut
.
	`ü—‹_¿ndom_cu¡om”_id
(
com·ny


179 .
	`g‘MaxCu¡om”sP”Di¡riù
(), 
w¬ehou£Id
);

180 
u£_cu¡om”Id
 = 'T';

182 ià(
x
 <= 85) {

183 
cu¡om”Di¡riùId
 = 
di¡riùId
;

184 
cu¡om”W¬ehou£Id
 = 
w¬ehou£Id
;

187 
cu¡om”Di¡riùId
 = (
by‹
è
JBBut
.
	`¿ndom
(1, 
com·ny


188 .
	`g‘MaxDi¡riùsP”W¬ehou£
(), 
w¬ehou£Id
);

189 
maxW¬ehou£s
 = 
com·ny
.
	`g‘MaxW¬ehou£s
();

190 
cu¡om”W¬ehou£Id
 = (è
JBBut
.
	`¿ndom
(1, 
maxW¬ehou£s
,

191 
w¬ehou£Id
); (
cu¡om”W¬ehou£Id
 == warehouseId)

192 && (
maxW¬ehou£s
 > 1); 
cu¡om”W¬ehou£Id
 = (è
JBBut


193 .
	`¿ndom
(1, 
maxW¬ehou£s
, 
w¬ehou£Id
))

196 
·ym’tAmouÁ
 = 
BigDecim®
.
	`v®ueOf
(20000, 2);

197 
home
 = (
cu¡om”W¬ehou£Id
 =ğ
w¬ehou£Id
);

198 
JBBut
.
	`g‘Log
().
	`ex™šg
("spec.jbb.PaymentTransaction", "init");

199 
	}
}

201 
public
 
boŞ—n
 
	$´oûss
() {

202 
JBBut
.
	`g‘Log
().
	`’‹ršg
("spec.jbb.PaymentTransaction", "process");

203 
w¬ehou£PŒ
.
	`»ûivePaym’t
(
·ym’tAmouÁ
);

204 
SŒšg
 
w¬ehou£Çme
 = 
w¬ehou£PŒ
.
	`g‘Name
();

205 
di¡riùPŒ
.
	`»ûivePaym’t
(
·ym’tAmouÁ
);

206 
u£_cu¡om”Id
) {

208 
uniqueCu¡om”Id
 = 
com·ny
.
	`budUniqueCu¡om”Key
(

209 
cu¡om”W¬ehou£Id
, 
cu¡om”Di¡riùId
, 
cu¡om”Id
);

210 
cu¡om”PŒ
 = 
com·ny
.
	`g‘Cu¡om”
(
uniqueCu¡om”Id
, 
Œue
);

214 
cu¡om”PŒ
 = 
com·ny


215 .
	`g‘Cu¡om”ByLa¡Name
(
cu¡om”W¬ehou£Id
,

216 
cu¡om”Di¡riùId
, 
cu¡_Ï¡_Çme
);

218 ià(
cu¡om”PŒ
 =ğ
nuÎ
) {

221 
cu¡om”PŒ
.
	`adju¡B®ªû
(
·ym’tAmouÁ
.
	`Ãg©e
());

222 
cu¡om”PŒ
.
	`šü—£YTD
(
·ym’tAmouÁ
);

223 
cu¡om”PŒ
.
	`šüem’tPaym’tCouÁ
();

224 ià(
cu¡om”PŒ
.
	`g‘C»d™Stus
() == "BC") {

225 
SŒšg
 
ÃwD©a
 = " " + 
cu¡om”PŒ
.
	`g‘Id
() + " "

226 + 
cu¡om”PŒ
.
	`g‘Di¡riùId
() + " "

227 + 
cu¡om”PŒ
.
	`g‘W¬ehou£Id
(è+ " " + 
di¡riùId
 + " "

228 + 
w¬ehou£Id
 + " " + 
·ym’tAmouÁ
 + " ";

229 
cu¡om”PŒ
.
	`upd©eCu¡om”D©a
(
ÃwD©a
);

231 
·ym’tTime
 = 
Ãw
 
	`D©e
();

232 
Hi¡Üy
 
hi¡
 = 
Ãw
 
	`Hi¡Üy
(
cu¡om”PŒ
.
	`g‘Id
(), customerPtr

233 .
	`g‘Di¡riùId
(), 
cu¡om”PŒ
.
	`g‘W¬ehou£Id
(), 
di¡riùId
,

234 
w¬ehou£Id
, 
·ym’tTime
, 
BigDecim®
.
	`v®ueOf
(0, 2), 
nuÎ
);

235 
hi¡
.
	`budD©a
(
w¬ehou£Çme
, 
di¡riùPŒ
.
	`g‘Name
());

236 
w¬ehou£PŒ
.
	`upd©eHi¡Üy
(
hi¡
);

237 ià(
T¿n§ùiÚ
.
¡—dyS‹Mem
) {

238 
w¬ehou£PŒ
.
	`»moveOlde¡Hi¡Üy
();

242 
JBBut
.
	`g‘Log
().
	`ex™šg
("spec.jbb.PaymentTransaction", "process");

243  
Œue
;

244 
	}
}

246 
public
 
synchrÚized
 
	$di¥Ïy
() {

247 
Sy¡em
.
out
.
	`´šn
("PaymentTransaction Display **********************");

248 
Sy¡em
.
out
.
	`´šn
("W¬ehou£ ID i " + 
w¬ehou£Id


250 
Sy¡em
.
out
.
	`´šn
("Di¡riù ID i " + 
di¡riùId


252 
Sy¡em
.
out
.
	`´šn
("Cu¡om” ID i " + 
cu¡om”Id


254 
Sy¡em
.
out


255 .
	`´šn
("**************************************************");

256 
	}
}

258 
public
 
synchrÚized
 
	$š™ŸlizeT¿n§ùiÚLog
() {

259 
JBBut
.
	`g‘Log
().
	`’‹ršg
("spec.jbb.PaymentTransaction",

284 ià(
T¿n§ùiÚ
.
’abËLogWr™e
)

285 
š™Log
.
	`di¥Ïy
();

286 
JBBut
.
	`g‘Log
().
	`ex™šg
("spec.jbb.PaymentTransaction",

288 
	}
}

290 
public
 
synchrÚized
 
	$´oûssT¿n§ùiÚLog
() {

291 
JBBut
.
	`g‘Log
().
	`’‹ršg
("spec.jbb.PaymentTransaction",

293 
·ym’tLog
.
	`ş—rBufãr
();

294 
xmlPaym’tLog
.
	`ş—r
();

295 
	`£tupPaym’tLog
();

296 
Add»ss
 
w¬e_addr
 = 
w¬ehou£PŒ
.
	`g‘Add»ss
();

297 
Add»ss
 
di¡_addr
 = 
di¡riùPŒ
.
	`g‘Add»ss
();

298 
SŒšg
 
phÚe
;

299 
SŒšg
 
z
;

304 
·ym’tLog
.
	`putD©e
(
·ym’tTime
, 6, 1, 10);

305 
·ym’tLog
.
	`putTime
(
·ym’tTime
, 17, 1, 8);

307 
·ym’tLog
.
	`putIÁ
(
w¬ehou£Id
, 11, 3, 4);

308 
·ym’tLog
.
	`putIÁ
(
di¡riùId
, 51, 3, 2);

310 
·ym’tLog
.
	`putText
(
w¬e_addr
.
	`g‘SŒ“t1
(), 0, 4, 20);

311 
·ym’tLog
.
	`putText
(
di¡_addr
.
	`g‘SŒ“t1
(), 41, 4, 20);

313 
·ym’tLog
.
	`putText
(
w¬e_addr
.
	`g‘SŒ“t2
(), 0, 5, 20);

314 
·ym’tLog
.
	`putText
(
di¡_addr
.
	`g‘SŒ“t2
(), 41, 5, 20);

317 
·ym’tLog
.
	`putText
(
w¬e_addr
.
	`g‘C™y
(), 0, 6, 20);

318 
·ym’tLog
.
	`putText
(
w¬e_addr
.
	`g‘S‹
(), 21, 6, 2);

319 
z
 = 
w¬e_addr
.
	`g‘Z
();

322 
·ym’tLog
.
	`putSub¡ršg
(
z
, 24, 6, 0, 5);

323 
·ym’tLog
.
	`putCh¬
('-', 29, 6);

324 
·ym’tLog
.
	`putSub¡ršg
(
z
, 30, 6, 5, 4);

325 
·ym’tLog
.
	`putText
(
di¡_addr
.
	`g‘C™y
(), 41, 6, 20);

326 
·ym’tLog
.
	`putText
(
di¡_addr
.
	`g‘S‹
(), 62, 6, 2);

327 
z
 = 
di¡_addr
.
	`g‘Z
();

330 
·ym’tLog
.
	`putSub¡ršg
(
z
, 65, 6, 0, 5);

331 
·ym’tLog
.
	`putCh¬
('-', 70, 6);

332 
·ym’tLog
.
	`putSub¡ršg
(
z
, 71, 6, 5, 4);

335 ià(
cu¡om”PŒ
 !ğ
nuÎ
) {

336 
Add»ss
 
cu¡_addr
 = 
cu¡om”PŒ
.
	`g‘Add»ss
();

337 
D©e
 
cu¡D©e
 = 
cu¡om”PŒ
.
	`g‘Sšû
();

338 
·ym’tLog
.
	`putIÁ
(
cu¡om”PŒ
.
	`g‘Id
(), 10, 8, 4);

339 
·ym’tLog
.
	`putIÁ
(
cu¡om”PŒ
.
	`g‘W¬ehou£Id
(), 32, 8, 4);

340 
·ym’tLog
.
	`putIÁ
(
cu¡om”PŒ
.
	`g‘Di¡riùId
(), 53, 8, 2);

342 
·ym’tLog
.
	`putText
(
cu¡om”PŒ
.
	`g‘Fœ¡Name
(), 8, 9, 16);

343 
·ym’tLog
.
	`putText
(
cu¡om”PŒ
.
	`g‘MiddËName
(), 25, 9, 2);

344 
·ym’tLog
.
	`putText
(
cu¡om”PŒ
.
	`g‘La¡Name
(), 28, 9, 16);

345 
·ym’tLog
.
	`putD©e
(
cu¡D©e
, 57, 9, 10);

347 
·ym’tLog
.
	`putText
(
cu¡_addr
.
	`g‘SŒ“t1
(), 8, 10, 20);

348 
·ym’tLog
.
	`putText
(
cu¡om”PŒ
.
	`g‘C»d™Stus
(), 57, 10, 2);

350 
·ym’tLog
.
	`putText
(
cu¡_addr
.
	`g‘SŒ“t2
(), 8, 11, 20);

353 
·ym’tLog
.
	`putDoubË
(
cu¡om”PŒ
.
	`g‘DiscouÁR©e
()

354 .
	`movePoštRight
(2).
	`toSŒšg
(), 57, 11, 5);

357 
·ym’tLog
.
	`putText
(
cu¡_addr
.
	`g‘C™y
(), 8, 12, 20);

358 
·ym’tLog
.
	`putText
(
cu¡_addr
.
	`g‘S‹
(), 29, 12, 2);

359 
z
 = 
cu¡_addr
.
	`g‘Z
();

360 
phÚe
 = 
cu¡om”PŒ
.
	`g‘PhÚe
();

363 
·ym’tLog
.
	`putSub¡ršg
(
z
, 32, 12, 0, 5);

364 
·ym’tLog
.
	`putCh¬
('-', 37, 12);

365 
·ym’tLog
.
	`putSub¡ršg
(
z
, 38, 12, 5, 4);

369 
·ym’tLog
.
	`putSub¡ršg
(
phÚe
, 57, 12, 0, 6);

370 
·ym’tLog
.
	`putCh¬
('-', 63, 12);

371 
·ym’tLog
.
	`putSub¡ršg
(
phÚe
, 64, 12, 6, 3);

372 
·ym’tLog
.
	`putCh¬
('-', 67, 12);

373 
·ym’tLog
.
	`putSub¡ršg
(
phÚe
, 68, 12, 9, 3);

374 
·ym’tLog
.
	`putCh¬
('-', 71, 12);

375 
·ym’tLog
.
	`putSub¡ršg
(
phÚe
, 72, 12, 12, 4);

384 
·ym’tLog
.
	`putDŞÏrs
(
·ym’tAmouÁ
, 17, 14, 8);

385 
·ym’tLog
.
	`putDŞÏrs
(
cu¡om”PŒ
.
	`g‘B®ªû
(), 54, 14, 10);

387 
·ym’tLog
.
	`putDŞÏrs
(
cu¡om”PŒ
.
	`g‘C»d™Lim™
(), 16, 15, 9);

394 ià(
cu¡om”PŒ
.
	`g‘C»d™Stus
().
	`equ®s
("BC")) {

395 
SŒšg
 
cu¡D©a
 = 
cu¡om”PŒ
.
	`g‘Cu¡om”D©aP¬ts
();

396 
·ym’tLog
.
	`putSub¡ršg
(
cu¡D©a
, 11, 17, 0, 50);

397 
·ym’tLog
.
	`putSub¡ršg
(
cu¡D©a
, 11, 18, 50, 50);

398 
·ym’tLog
.
	`putSub¡ršg
(
cu¡D©a
, 11, 19, 100, 50);

399 
·ym’tLog
.
	`putSub¡ršg
(
cu¡D©a
, 11, 20, 150, 50);

404 
·ym’tLog
.
	`putText
("No customer found for†ast‚ame =", 11, 17, 35);

405 
·ym’tLog
.
	`putText
(
cu¡_Ï¡_Çme
, 46, 17, 16);

406 
·ym’tLog
.
	`putText
("District :", 11, 18, 10);

407 
·ym’tLog
.
	`putIÁ
(
di¡riùId
, 22, 18, 2);

408 
·ym’tLog
.
	`putText
("Warehouse:", 11, 19, 10);

409 
·ym’tLog
.
	`putIÁ
(
w¬ehou£Id
, 22, 19, 4);

410 
·ym’tLog
.
	`putText
("No…ayment…rocessed.", 11, 20, 25);

413 
xmlPaym’tLog
.
	`pİuÏ‹XML
(
·ym’tLog
);

414 ià(
T¿n§ùiÚ
.
’abËLogWr™e
)

415 
·ym’tLog
.
	`di¥Ïy
();

416 ià(
T¿n§ùiÚ
.
v®id©iÚFÏg
) {

417 
SŒšg
[] 
s
 = 
·ym’tLog
.
	`v®id©e
();

418 ià(
s
.
Ëngth
 !ğ
v®id©iÚLog
.length) {

419 
SŒšgBufãr
 
sb
 = 
Ãw
 
	`SŒšgBufãr
(200);

420 
sb


421 .
	`­³nd
("VALIDATION ERROR: mismatch in screen†engths for PaymentTransaction");

422 
sb
.
	`­³nd
(
Sy¡em
.
	`g‘Prİ”ty
("line.separator"));

423 
sb
.
	`­³nd
(" Screen†ength should be: "

424 + 
v®id©iÚLog
.
Ëngth
);

425 
sb
.
	`­³nd
(
Sy¡em
.
	`g‘Prİ”ty
("line.separator"));

426 
sb
.
	`­³nd
(" Sü“ÀËngth is: " + 
s
.
Ëngth
);

427 
sb
.
	`­³nd
(
Sy¡em
.
	`g‘Prİ”ty
("line.separator"));

428 
JBBut
.
	`g‘Log
().
	`w¬nšg
(
sb
.
	`toSŒšg
());

429 
T¿n§ùiÚ
.
	`šv®id©eRun
();

431 
i
 = 0; i < 
v®id©iÚLog
.
Ëngth
; i++) {

432 ià(
checkLše
[
i
]) {

433 ià(!
s
[
i
].
	`equ®s
(
v®id©iÚLog
[i])) {

434 
SŒšgBufãr
 
sb
 = 
Ãw
 
	`SŒšgBufãr
(200);

435 
sb


436 .
	`­³nd
("VALIDATION ERROR: incorrect output for PaymentTransaction");

437 
sb
.
	`­³nd
(
Sy¡em
.
	`g‘Prİ”ty
("line.separator"));

438 
sb
.
	`­³nd
(" Lš" + (
i
 + 1) + " should be: |"

439 + 
v®id©iÚLog
[
i
] + "|");

440 
sb
.
	`­³nd
(
Sy¡em
.
	`g‘Prİ”ty
("line.separator"));

441 
sb
.
	`­³nd
(" Lš" + (
i
 + 1è+ " is: |" + 
s
[i]

443 
sb
.
	`­³nd
(
Sy¡em
.
	`g‘Prİ”ty
("line.separator"));

444 
JBBut
.
	`g‘Log
().
	`w¬nšg
(
sb
.
	`toSŒšg
());

445 
T¿n§ùiÚ
.
	`šv®id©eRun
();

450 
JBBut
.
	`g‘Log
().
	`ex™šg
("spec.jbb.PaymentTransaction",

452 
	}
}

	@spec/jbb/RunSequencer.java

10 
·ckage
 
	g¥ec
.
	gjbb
;

12 
impÜt
 
	gjava
.
	gio
.*;

14 şas 
	cResF‹r
 
im¶em’ts
 
	mF’ameF‹r
 {

16 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

23 
SŒšg
 
	m»suÉP»fix
;

26 
SŒšg
 
	m»suÉSuffix
 = ".results";

28 
	m»suÉP»fixL’
;

31 
	m»suÉSuffixS¹
;

33 
public
 
	$ResF‹r
(
SŒšg
 
´efix
, SŒšg 
suffix
) {

34 
»suÉP»fix
 = 
´efix
;

35 
»suÉP»fixL’
 = 
»suÉP»fix
.
	`Ëngth
();

36 
SŒšg
 
»suÉSuffix
 = 
suffix
;

37 
»suÉSuffixS¹
 = 
»suÉP»fixL’
 + 3;

40 
public
 
boŞ—n
 
	$acû±
(
Fe
 
dœ
, 
SŒšg
 
Çme
) {

41  ((
Çme
.
	`¡¬tsW™h
(
»suÉP»fix
)) && ((name

42 .
	`sub¡ršg
(
»suÉSuffixS¹
).
	`equ®s
(
»suÉSuffix
)è|| (»suÉSuffixS¹ =ğ
Çme


43 .
	`Ëngth
())));

44 
	}
}

47 şas 
	cPrštLa¡Seq
 {

49 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

56 
public
 
	$maš
(
SŒšg
[] 
¬gs
) {

57 
SŒšg
 
dœ
 = ".";

58 ià(
¬gs
.
Ëngth
 == 1)

59 
dœ
 = 
¬gs
[0];

60 
SŒšg
 
»suÉP»fix
 = "SPECjbb.";

61 
SŒšg
 
»suÉSuffix
 = ".raw";

63 
RunSequ’ûr
 
rs
 = 
Ãw
 
	`RunSequ’ûr
(
dœ
, 
»suÉP»fix
, 
»suÉSuffix
);

64 
Sy¡em
.
out
.
	`´šn
(
rs
.
	`·dNumb”
Ôs.
	`g‘Seq
() - 1));

66 
	}
}

68 
public
 cÏs 
	cRunSequ’ûr
 {

70 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

77 
SŒšg
 
	m»suÉP»fix
;

79 
SŒšg
 
	m»suÉSuffix
;

81 
	m»suÉP»fixL’
;

83 
Fe
 
	mf1
;

85 
public
 
	$RunSequ’ûr
(
SŒšg
 
dœ
, SŒšg 
´efix
, SŒšg 
suffix
) {

86 
f1
 = 
Ãw
 
	`Fe
(
dœ
);

87 
»suÉP»fix
 = 
´efix
;

88 
»suÉP»fixL’
 = 
»suÉP»fix
.
	`Ëngth
();

89 
»suÉSuffix
 = 
suffix
;

92 
public
 
	$g‘Seq
() {

93 
i
;

94 
SŒšg
[] 
ls
;

95 
F’ameF‹r
 
f‹r
 = 
Ãw
 
	`ResF‹r
(
»suÉP»fix
, 
»suÉSuffix
);

96 
foo
 = 0;

97 
max
 = 0;

98 
SŒšg
 
fooSŒšg
;

99 
fooL’
;

100 
j
;

101 
boŞ—n
 
sk
 = 
çl£
;

102 
ls
 = 
f1
.
	`li¡
(
f‹r
), 
i
 = 0;† !ğ
nuÎ
 && i <†s.
Ëngth
; i++) {

103 
fooSŒšg
 = 
ls
[
i
].
	`sub¡ršg
(
»suÉP»fixL’
,„esultPrefixLen + 3);

104 
fooL’
 = 
fooSŒšg
.
	`Ëngth
();

105 
sk
 = 
çl£
;

106 
j
 = 0; j < 
fooL’
; j++) {

107 ià(!
Ch¬aù”
.
	`isDig™
(
fooSŒšg
.
	`ch¬At
(
j
))) {

108 
sk
 = 
Œue
;

111 ià(!
sk
) {

112 
foo
 = 
IÁeg”
.
	`·r£IÁ
(
fooSŒšg
);

113 ià(
foo
 > 
max
)

114 
max
 = 
foo
;

117  (
max
 + 1);

118 
	}
}

120 
public
 
SŒšg
 
	$g‘SeqSŒšg
() {

121  
	`·dNumb”
(
	`g‘Seq
());

122 
	}
}

124 
public
 
SŒšg
 
	$·dNumb”
(
n
) {

125 
SŒšg
 
»tuºSŒšg
 = "" + 
n
;

126 
»tuºSŒšgL’gth
 = 
»tuºSŒšg
.
	`Ëngth
();

127 ià(
»tuºSŒšgL’gth
 == 1) {

128 
»tuºSŒšg
 = "00" +„eturnString;

130 ià(
»tuºSŒšgL’gth
 == 2) {

131 
»tuºSŒšg
 = "0" +„eturnString;

133  
»tuºSŒšg
;

134 
	}
}

	@spec/jbb/SaveOutput.java

11 
·ckage
 
	g¥ec
.
	gjbb
;

13 
impÜt
 
	gjava
.
	gio
.*;

14 
impÜt
 
	gjava
.
	gut
.
	gloggšg
.
	gLev–
;

16 şas 
	cSaveOuut
 
ex‹nds
 
	mPrštSŒ—m
 {

18 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

25 
OuutSŒ—m
 
	mlogfe
;

27 
PrštSŒ—m
 
	mŞdStdout
;

29 
PrštSŒ—m
 
	mŞdStd”r
;

31 
	$SaveOuut
(
PrštSŒ—m
 
ps
) {

32 
	`su³r
(
ps
);

36 
public
 
	$¡¬t
(
SŒšg
 
f
è
throws
 
IOExû±iÚ
 {

38 
ŞdStdout
 = 
Sy¡em
.
out
;

39 
ŞdStd”r
 = 
Sy¡em
.
”r
;

41 
logfe
 = 
Ãw
 
	`PrštSŒ—m
Òew 
	`Bufã»dOuutSŒ—m
(

42 
Ãw
 
	`FeOuutSŒ—m
(
f
)));

44 
Sy¡em
.
	`£tOut
(
Ãw
 
	`SaveOuut
(Sy¡em.
out
));

45 
Sy¡em
.
	`£tE¼
(
Ãw
 
	`SaveOuut
(Sy¡em.
”r
));

46 
	}
}

49 
public
 
	$¡İ
() {

50 
Sy¡em
.
	`£tOut
(
ŞdStdout
);

51 
Sy¡em
.
	`£tE¼
(
ŞdStd”r
);

52 
Œy
 {

53 
logfe
.
	`şo£
();

55 
	`ÿtch
 (
Exû±iÚ
 
e
) {

56 
JBBut
.
	`g‘Log
().
	`log
(
Lev–
.
WARNING
, "Exû±iÚ: " + 
e
.
	`g‘Mes§ge
(),

57 
e
);

59 
	}
}

61 
public
 
	$wr™e
(
b
) {

62 
Œy
 {

63 
logfe
.
	`wr™e
(
b
);

65 
	`ÿtch
 (
Exû±iÚ
 
e
) {

66 
JBBut
.
	`g‘Log
().
	`log
(
Lev–
.
WARNING
, "Exû±iÚ: " + 
e
.
	`g‘Mes§ge
(),

67 
e
);

68 
	`£tE¼Ü
();

70 
su³r
.
	`wr™e
(
b
);

71 
	}
}

73 
public
 
	$wr™e
(
by‹
 
buf
[], 
off
, 
Ën
) {

74 
Œy
 {

75 
logfe
.
	`wr™e
(
buf
, 
off
, 
Ën
);

77 
	`ÿtch
 (
Exû±iÚ
 
e
) {

78 
JBBut
.
	`g‘Log
().
	`log
(
Lev–
.
WARNING
, "Exû±iÚ: " + 
e
.
	`g‘Mes§ge
(),

79 
e
);

80 
	`£tE¼Ü
();

82 
su³r
.
	`wr™e
(
buf
, 
off
, 
Ën
);

83 
	}
}

	@spec/jbb/Stock.java

1  
·ckage
 
	g¥ec
.
	gjbb
; 
impÜt
 
	gjava
.
	gm©h
.
	gBigIÁeg”
; 
public
 cÏs 
	cStock
 {

	@spec/jbb/StockLevelTransaction.java

7 
·ckage
 
	g¥ec
.
	gjbb
;

9 
impÜt
 
	gjava
.
	gut
.*;

10 
impÜt
 
	gjava
.
	gut
.
	gloggšg
.
	gLev–
;

11 
impÜt
 
	g¥ec
.
	gjbb
.
	gšäa
.
	gUt
.
	gT¿n§ùiÚLogBufãr
;

12 
impÜt
 
	g¥ec
.
	gjbb
.
	gšäa
.
	gUt
.
	gXMLT¿n§ùiÚLog
;

14 şas 
	cStockLev–T¿n§ùiÚ
 
ex‹nds
 
	mT¿n§ùiÚ
 {

16 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

23 
´iv©e
 
Com·ny
 
	mcom·ny
;

25 
´iv©e
 
	mw¬ehou£Id
;

27 
´iv©e
 
by‹
 
	mdi¡riùId
;

29 
´iv©e
 
Di¡riù
 
	mdi¡riùPŒ
;

31 
´iv©e
 
JBBD©aStÜage
 
	mÜd”TabË
;

33 
´iv©e
 
	mth»shŞd
;

35 
´iv©e
 
	mlowStock
;

37 
´iv©e
 
T¿n§ùiÚLogBufãr
 
	m¡ockLog
;

39 
´iv©e
 
T¿n§ùiÚLogBufãr
 
	mš™Log
;

41 
´iv©e
 
XMLT¿n§ùiÚLog
 
	mxmlStockLog
;

43 
	mSŒšg
[] 
	mv®id©iÚLog
 = {

50 
	gboŞ—n
[] 
	gcheckLše
 = {

51 
Œue
,rue,rue,rue,rue,rue,rue,rue,rue,rue,rue,

52 
Œue
,rue,rue,rue,rue,rue,rue,rue,rue,rue,rue,

53 
Œue
,rue

56 
public
 
	$StockLev–T¿n§ùiÚ
(
Com·ny
 
šCom·ny
, 
šW¬ehou£Id
) {

57 
com·ny
 = 
šCom·ny
;

58 
w¬ehou£Id
 = 
šW¬ehou£Id
;

59 
di¡riùId
 = (
by‹
è
JBBut
.
	`¿ndom
(1, 
com·ny


60 .
	`g‘MaxDi¡riùsP”W¬ehou£
(), 
w¬ehou£Id
);

61 
di¡riùPŒ
 = 
com·ny
.
	`g‘W¬ehou£PŒ
(
w¬ehou£Id
, 
çl£
)

62 .
	`g‘Di¡riùPŒ
(
di¡riùId
, 
çl£
);

63 
Üd”TabË
 = 
di¡riùPŒ
.
	`g‘Ord”TabË
();

65 
¡ockLog
 = 
Ãw
 
	`T¿n§ùiÚLogBufãr
();

66 
	`£tupStockLog
();

67 
xmlStockLog
 = 
Ãw
 
	`XMLT¿n§ùiÚLog
();

68 
š™Log
 = 
Ãw
 
	`T¿n§ùiÚLogBufãr
(
¡ockLog
);

69 
	`£tupIn™Log
();

70 
	}
}

72 
´iv©e
 
	$£tupStockLog
() {

73 
¡ockLog
.
	`putText
("Stock-Level", 36, 0, 11);

74 
¡ockLog
.
	`putText
("Warehouse:", 0, 1, 10);

75 
¡ockLog
.
	`putIÁ
(
w¬ehou£Id
, 11, 1, 4);

76 
¡ockLog
.
	`putText
("District:", 17, 1, 10);

77 
¡ockLog
.
	`putIÁ
(
di¡riùId
, 28, 1, 2);

78 
¡ockLog
.
	`putText
("Stock Level Threshold:", 0, 3, 22);

79 
¡ockLog
.
	`putText
("low stock:", 0, 5, 10);

80 
	}
}

82 
´iv©e
 
	$£tupIn™Log
() {

85 
š™Log
.
	`putCh¬Fl
('9', 23, 3, 2);

86 
š™Log
.
	`putCh¬Fl
('9', 11, 5, 3);

87 
	}
}

89 
public
 
	$š™
() {

90 
JBBut
.
	`g‘Log
().
	`’‹ršg
("spec.jbb.StockLevelTransaction", "init");

91 
th»shŞd
 = (è
JBBut
.
	`¿ndom
(10, 20, 
w¬ehou£Id
);

92 
lowStock
 = 0;

93 
JBBut
.
	`g‘Log
().
	`ex™šg
("spec.jbb.StockLevelTransaction", "init");

94 
	}
}

96 
public
 
SŒšg
 
	$g‘M’uName
() {

98 
	}
}

100 
public
 
synchrÚized
 
	$d–‘e
() {

101 
	}
}

103 
public
 
boŞ—n
 
	$´oûss
() {

104 
JBBut
.
	`g‘Log
().
	`’‹ršg
("spec.jbb.StockLevelTransaction", "process");

105 
Ï¡Mšus20
;

106 
A¼ayLi¡
<
Stock
> 
¡ockLi¡
 = 
Ãw
 ArrayList<Stock>(200);

107 
Ï¡Ord”Id
 = 
di¡riùPŒ
.
	`Ï¡Ord”Id
();

108 ià(
Ï¡Ord”Id
 <= 20)

109 
Ï¡Mšus20
 = 1;

111 
Ï¡Mšus20
 = 
Ï¡Ord”Id
 - 20;

112 
id
 = 
Ï¡Mšus20
; id <ğ
Ï¡Ord”Id
; id++) {

113 
Ord”
 
cu¼’tOrd”
 = (Ord”è
Üd”TabË
.
	`g‘
(
id
);

114 ià(
cu¼’tOrd”
 !ğ
nuÎ
) {

115 
Ord”lše
[] 
Üd”lšeLi¡
 = 
cu¼’tOrd”
.
	`g‘Ord”lšeLi¡
();

116 
Üd”LšeCouÁ
 = 
cu¼’tOrd”
.
	`g‘Ord”lšeCouÁ
();

117 ià(
JBBut
.
	`g‘Log
().
	`isLoggabË
(
Lev–
.
FINEST
)) {

118 
JBBut
.
	`g‘Log
().
	`fše¡
(

120 + " ord”lšeLi¡=" + 
Üd”lšeLi¡


121 + " ord”LšeCouÁ=" + 
Üd”LšeCouÁ
);

123 
Ord”lše
 
cu¼’tOrd”Lše
;

124 
i
;

125 
i
 = 0; i < 
Üd”LšeCouÁ
; i++) {

126 
¡ockId
;

127 
cu¼’tOrd”Lše
 = (
Ord”lše
è
Üd”lšeLi¡
[
i
];

128 
Stock
 
¡ockPŒ
 = 
cu¼’tOrd”Lše
.
	`g‘StockPŒ
();

129 
¡ockLi¡
.
	`add
(
¡ockPŒ
);

130 ià(
JBBut
.
	`g‘Log
().
	`isLoggabË
(
Lev–
.
FINEST
)) {

131 
JBBut
.
	`g‘Log
().
	`fše¡
(

132 " ord”lše#=" + 
i
 + " orderline="

133 + 
cu¼’tOrd”Lše
);

138 
Stock
 
¡ockPŒ
 : 
¡ockLi¡
) {

143 ià(
JBBut
.
	`g‘Log
().
	`isLoggabË
(
Lev–
.
FINEST
)) {

144 
JBBut
.
	`g‘Log
().
	`fše¡
(" stock#=" + 
¡ockPŒ
.
	`g‘Id
());

146 ià(
¡ockPŒ
.
	`g‘Quªt™y
(è< 
th»shŞd
)

147 ++
lowStock
;

149 
JBBut
.
	`g‘Log
().
	`ex™šg
("spec.jbb.StockLevelTransaction", "process");

150  
Œue
;

151 
	}
}

153 
public
 
	$š™ŸlizeT¿n§ùiÚLog
() {

154 
JBBut
.
	`g‘Log
().
	`’‹ršg
("spec.jbb.StockLevelTransaction",

167 ià(
T¿n§ùiÚ
.
’abËLogWr™e
)

168 
š™Log
.
	`di¥Ïy
();

169 
JBBut
.
	`g‘Log
().
	`ex™šg
("spec.jbb.StockLevelTransaction",

171 
	}
}

173 
public
 
synchrÚized
 
	$´oûssT¿n§ùiÚLog
() {

174 
JBBut
.
	`g‘Log
().
	`’‹ršg
("spec.jbb.StockLevelTransaction",

176 
¡ockLog
.
	`ş—rBufãr
();

177 
xmlStockLog
.
	`ş—r
();

178 
	`£tupStockLog
();

188 
¡ockLog
.
	`putIÁ
(
th»shŞd
, 23, 3, 2);

191 
¡ockLog
.
	`putIÁ
(
lowStock
, 11, 5, 3);

195 
xmlStockLog
.
	`pİuÏ‹XML
(
¡ockLog
);

196 ià(
T¿n§ùiÚ
.
’abËLogWr™e
)

197 
¡ockLog
.
	`di¥Ïy
();

198 ià(
T¿n§ùiÚ
.
v®id©iÚFÏg
) {

199 
SŒšg
[] 
s
 = 
¡ockLog
.
	`v®id©e
();

200 ià(
s
.
Ëngth
 !ğ
v®id©iÚLog
.length) {

201 
SŒšgBufãr
 
sb
 = 
Ãw
 
	`SŒšgBufãr
(200);

202 
sb


203 .
	`­³nd
("VALIDATION ERROR: mismatch in screen†engths for StockLevelTransaction");

204 
sb
.
	`­³nd
(
Sy¡em
.
	`g‘Prİ”ty
("line.separator"));

205 
sb
.
	`­³nd
(" Screen†ength should be: "

206 + 
v®id©iÚLog
.
Ëngth
);

207 
sb
.
	`­³nd
(
Sy¡em
.
	`g‘Prİ”ty
("line.separator"));

208 
sb
.
	`­³nd
(" Sü“ÀËngth is: " + 
s
.
Ëngth
);

209 
JBBut
.
	`g‘Log
().
	`w¬nšg
(
sb
.
	`toSŒšg
());

210 
T¿n§ùiÚ
.
	`šv®id©eRun
();

212 
i
 = 0; i < 
v®id©iÚLog
.
Ëngth
; i++) {

213 ià(
checkLše
[
i
]) {

214 ià(!
s
[
i
].
	`equ®s
(
v®id©iÚLog
[i])) {

215 
SŒšgBufãr
 
sb
 = 
Ãw
 
	`SŒšgBufãr
(200);

216 
sb


217 .
	`­³nd
("VALIDATION ERROR: incorrect output for StockLevelTransaction");

218 
sb
.
	`­³nd
(
Sy¡em
.
	`g‘Prİ”ty
("line.separator"));

219 
sb
.
	`­³nd
(" Lš" + (
i
 + 1) + " should be: |"

220 + 
v®id©iÚLog
[
i
] + "|");

221 
sb
.
	`­³nd
(
Sy¡em
.
	`g‘Prİ”ty
("line.separator"));

222 
sb
.
	`­³nd
(" Lš" + (
i
 + 1è+ " is: |" + 
s
[i]

224 
JBBut
.
	`g‘Log
().
	`w¬nšg
(
sb
.
	`toSŒšg
());

225 
T¿n§ùiÚ
.
	`šv®id©eRun
();

230 
JBBut
.
	`g‘Log
().
	`ex™šg
("spec.jbb.StockLevelTransaction",

232 
	}
}

	@spec/jbb/TimerData.java

12 
·ckage
 
	g¥ec
.
	gjbb
;

14 
impÜt
 
	g¥ec
.
	gjbb
.
	gšäa
.
	gUt
.
	gT¿n§ùiÚLogBufãr
;

15 
impÜt
 
	gjava
.
	gio
.
	gPrštSŒ—m
;

17 
public
 cÏs 
	cTim”D©a
 {

19 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

26 
´iv©e
 
by‹
 
	mm’u
 = 0;

28 
´iv©e
 
by‹
 
	mtypšg
 = 1;

30 
´iv©e
 
by‹
 
	mthškšg
 = 2;

32 
´iv©e
 
by‹
 
	mmaxWa™Ty³s
 = 3;

34 
´iv©e
 
T¿n§ùiÚLogBufãr
 
	mtim”Log
;

38 
´iv©e
 
	mwa™_times_m’u
[];

41 
´iv©e
 
	mwa™_times_typšg
[];

44 
´iv©e
 
	mwa™_times_thškšg
[];

47 
´iv©e
 
	mŒª§ùiÚCouÁ
[];

50 
´iv©e
 
	mtÙ®Time
[];

53 
´iv©e
 
	mmšimumTime
[];

56 
´iv©e
 
	mmaximumTime
[];

59 
´iv©e
 
	mav”ageTime
[];

62 
´iv©e
 
	mtÙ®TimeSqu¬e
[];

65 
´iv©e
 
	m¡ªd¬dDevŸtiÚTime
[];

67 
´iv©e
 
	mcÛffic›ÁOfV¬ŸtiÚTime
[];

69 
´iv©e
 
	mmš_Œª§ùiÚ_couÁ
 = 
LÚg
.
MAX_VALUE
;

71 
´iv©e
 
	mmax_Œª§ùiÚ_couÁ
 = 
LÚg
.
MIN_VALUE
;

73 
´iv©e
 
	m¿mpup_time
;

76 
´iv©e
 
	mm—su»m’t_time
;

79 
´iv©e
 
	mmc
;

82 
´iv©e
 
	mbs
;

85 
´iv©e
 
	mtim”_æag
;

89 
´iv©e
 
boŞ—n
 
	mu£Wa™s
;

91 
public
 
	$Tim”D©a
() {

92 
i
;

93 
wa™_times_m’u
 = 
Ãw
 [
T¿n§ùiÚ
.
maxTxnTy³s
];

94 
wa™_times_typšg
 = 
Ãw
 [
T¿n§ùiÚ
.
maxTxnTy³s
];

95 
wa™_times_thškšg
 = 
Ãw
 [
T¿n§ùiÚ
.
maxTxnTy³s
];

96 
Œª§ùiÚCouÁ
 = 
Ãw
 [
T¿n§ùiÚ
.
maxTxnTy³s
];

97 
tÙ®Time
 = 
Ãw
 [
T¿n§ùiÚ
.
maxTxnTy³s
];

98 
mšimumTime
 = 
Ãw
 [
T¿n§ùiÚ
.
maxTxnTy³s
];

99 
maximumTime
 = 
Ãw
 [
T¿n§ùiÚ
.
maxTxnTy³s
];

100 
av”ageTime
 = 
Ãw
 [
T¿n§ùiÚ
.
maxTxnTy³s
];

101 
tÙ®TimeSqu¬e
 = 
Ãw
 [
T¿n§ùiÚ
.
maxTxnTy³s
];

102 
¡ªd¬dDevŸtiÚTime
 = 
Ãw
 [
T¿n§ùiÚ
.
maxTxnTy³s
];

103 
cÛffic›ÁOfV¬ŸtiÚTime
 = 
Ãw
 [
T¿n§ùiÚ
.
maxTxnTy³s
];

104 
¿mpup_time
 = 0;

105 
m—su»m’t_time
 = 0;

106 
u£Wa™s
 = 
çl£
;

107 
mc
 = 0;

108 
bs
 = 0;

109 
i
 = 0; i < 
T¿n§ùiÚ
.
maxTxnTy³s
; i++) {

110 
wa™_times_m’u
[
i
] = 0;

111 
wa™_times_typšg
[
i
] = 0;

112 
wa™_times_thškšg
[
i
] = 0;

113 
Œª§ùiÚCouÁ
[
i
] = 0;

114 
tÙ®Time
[
i
] = 0;

115 
mšimumTime
[
i
] = 
LÚg
.
MAX_VALUE
;

116 
maximumTime
[
i
] = 0;

117 
av”ageTime
[
i
] = 0;

118 
tÙ®TimeSqu¬e
[
i
] = 0;

119 
¡ªd¬dDevŸtiÚTime
[
i
] = 0.0;

120 
cÛffic›ÁOfV¬ŸtiÚTime
[
i
] = 0.0;

122 
mš_Œª§ùiÚ_couÁ
 = 
LÚg
.
MAX_VALUE
;

123 
max_Œª§ùiÚ_couÁ
 = 
LÚg
.
MIN_VALUE
;

124 
	`budDi¥Ïy
();

127 
public
 
	$š™Ÿlize
() {

128 
i
;

129 
wa™_times_m’u
 = 
Ãw
 [
T¿n§ùiÚ
.
maxTxnTy³s
];

130 
wa™_times_typšg
 = 
Ãw
 [
T¿n§ùiÚ
.
maxTxnTy³s
];

131 
wa™_times_thškšg
 = 
Ãw
 [
T¿n§ùiÚ
.
maxTxnTy³s
];

132 
Œª§ùiÚCouÁ
 = 
Ãw
 [
T¿n§ùiÚ
.
maxTxnTy³s
];

133 
tÙ®Time
 = 
Ãw
 [
T¿n§ùiÚ
.
maxTxnTy³s
];

134 
mšimumTime
 = 
Ãw
 [
T¿n§ùiÚ
.
maxTxnTy³s
];

135 
maximumTime
 = 
Ãw
 [
T¿n§ùiÚ
.
maxTxnTy³s
];

136 
av”ageTime
 = 
Ãw
 [
T¿n§ùiÚ
.
maxTxnTy³s
];

137 
tÙ®TimeSqu¬e
 = 
Ãw
 [
T¿n§ùiÚ
.
maxTxnTy³s
];

138 
¡ªd¬dDevŸtiÚTime
 = 
Ãw
 [
T¿n§ùiÚ
.
maxTxnTy³s
];

139 
cÛffic›ÁOfV¬ŸtiÚTime
 = 
Ãw
 [
T¿n§ùiÚ
.
maxTxnTy³s
];

140 
¿mpup_time
 = 0;

141 
m—su»m’t_time
 = 0;

142 
u£Wa™s
 = 
çl£
;

143 
mc
 = 0;

144 
bs
 = 0;

145 
i
 = 0; i < 
T¿n§ùiÚ
.
maxTxnTy³s
; i++) {

146 
wa™_times_m’u
[
i
] = 0;

147 
wa™_times_typšg
[
i
] = 0;

148 
wa™_times_thškšg
[
i
] = 0;

149 
Œª§ùiÚCouÁ
[
i
] = 0;

150 
tÙ®Time
[
i
] = 0;

151 
mšimumTime
[
i
] = 
LÚg
.
MAX_VALUE
;

152 
maximumTime
[
i
] = 0;

153 
av”ageTime
[
i
] = 0;

154 
tÙ®TimeSqu¬e
[
i
] = 0;

155 
¡ªd¬dDevŸtiÚTime
[
i
] = 0.0;

156 
cÛffic›ÁOfV¬ŸtiÚTime
[
i
] = 0.0;

158 
mš_Œª§ùiÚ_couÁ
 = 
LÚg
.
MAX_VALUE
;

159 
max_Œª§ùiÚ_couÁ
 = 
LÚg
.
MIN_VALUE
;

160 
	`budDi¥Ïy
();

161 
	}
}

163 
public
 
synchrÚized
 
	$z”oTim”D©a
() {

164 
mc
 = 0;

165 
bs
 = 0;

166 
i
 = 0; i < 
T¿n§ùiÚ
.
maxTxnTy³s
; i++) {

167 
Œª§ùiÚCouÁ
[
i
] = 0;

168 
tÙ®Time
[
i
] = 0;

169 
mšimumTime
[
i
] = 
LÚg
.
MAX_VALUE
;

170 
maximumTime
[
i
] = 0;

171 
av”ageTime
[
i
] = 0;

172 
tÙ®TimeSqu¬e
[
i
] = 0;

173 
¡ªd¬dDevŸtiÚTime
[
i
] = 0.0;

174 
cÛffic›ÁOfV¬ŸtiÚTime
[
i
] = 0.0;

176 
mš_Œª§ùiÚ_couÁ
 = 
LÚg
.
MAX_VALUE
;

177 
max_Œª§ùiÚ_couÁ
 = 
LÚg
.
MIN_VALUE
;

178 
	`budDi¥Ïy
();

179 
	}
}

181 
public
 
synchrÚized
 
	$u£Wa™TimesP”ûÁage
(
³rûÁ
) {

182 
u£Wa™s
 = 
Œue
;

184 
wa™_times_typšg
[
T¿n§ùiÚ
.
Ãw_Üd”
] = (18000 * 
³rûÁ
) / 100;

185 
wa™_times_typšg
[
T¿n§ùiÚ
.
·ym’t
] = (3000 * 
³rûÁ
) / 100;

186 
wa™_times_typšg
[
T¿n§ùiÚ
.
Üd”_¡©us
] = (2000 * 
³rûÁ
) / 100;

187 
wa™_times_typšg
[
T¿n§ùiÚ
.
d–iv”y
] = (2000 * 
³rûÁ
) / 100;

188 
wa™_times_typšg
[
T¿n§ùiÚ
.
¡ock_Ëv–
] = (2000 * 
³rûÁ
) / 100;

189 
wa™_times_typšg
[
T¿n§ùiÚ
.
cu¡_»pÜt
] = (2000 * 
³rûÁ
) / 100;

190 
wa™_times_thškšg
[
T¿n§ùiÚ
.
Ãw_Üd”
] = (12000 * 
³rûÁ
) / 100;

191 
wa™_times_thškšg
[
T¿n§ùiÚ
.
·ym’t
] = (12000 * 
³rûÁ
) / 100;

192 
wa™_times_thškšg
[
T¿n§ùiÚ
.
Üd”_¡©us
] = (10000 * 
³rûÁ
) / 100;

193 
wa™_times_thškšg
[
T¿n§ùiÚ
.
d–iv”y
] = (5000 * 
³rûÁ
) / 100;

194 
wa™_times_thškšg
[
T¿n§ùiÚ
.
¡ock_Ëv–
] = (5000 * 
³rûÁ
) / 100;

195 
wa™_times_thškšg
[
T¿n§ùiÚ
.
cu¡_»pÜt
] = (5000 * 
³rûÁ
) / 100;

196 
	}
}

198 
public
 
synchrÚized
 
	$£tRampUpTime
(
š_¿mpup_time
) {

200 
¿mpup_time
 = 
š_¿mpup_time
;

201 
	}
}

203 
public
 
synchrÚized
 
	$£tM—su»m’tTime
(
š_m—su»m’t_time
) {

205 
m—su»m’t_time
 = 
š_m—su»m’t_time
;

206 
	}
}

208 
public
 
synchrÚized
 
	$g‘RampUpTime
() {

209 
‹mp
 = 
¿mpup_time
;

210  
‹mp
;

211 
	}
}

213 
public
 
synchrÚized
 
	$g‘M—su»m’tTime
() {

214 
‹mp
 = 
m—su»m’t_time
;

215  
‹mp
;

216 
	}
}

218 
public
 
synchrÚized
 [][] 
	$g‘Wa™Times
() {

219 [][] 
‹mp
 = 
Ãw
 [
maxWa™Ty³s
][];

220 
‹mp
[
m’u
] = 
wa™_times_m’u
;

221 
‹mp
[
typšg
] = 
wa™_times_typšg
;

222 
‹mp
[
thškšg
] = 
wa™_times_thškšg
;

223  
‹mp
;

224 
	}
}

226 
public
 
synchrÚized
 
	$£tWa™Times
([][] 
š_wa™_times
) {

227 
i
;

228 
i
 = 0; i < 
T¿n§ùiÚ
.
maxTxnTy³s
; i++) {

229 
wa™_times_m’u
[
i
] = 
š_wa™_times
[
m’u
][i];

230 
wa™_times_typšg
[
i
] = 
š_wa™_times
[
typšg
][i];

231 
wa™_times_thškšg
[
i
] = 
š_wa™_times
[
thškšg
][i];

234 
	}
}

236 
public
 
synchrÚized
 
	$g‘M’uWa™Time
(
Œª§ùiÚ_ty³
) {

237 
‹mp
 = 
wa™_times_m’u
[
Œª§ùiÚ_ty³
];

238  
‹mp
;

239 
	}
}

241 
public
 
synchrÚized
 
	$g‘TypšgWa™Time
(
Œª§ùiÚ_ty³
) {

242 
‹mp
 = 
wa™_times_typšg
[
Œª§ùiÚ_ty³
];

243  
‹mp
;

244 
	}
}

246 
public
 
synchrÚized
 
	$g‘ThškšgWa™Time
(
Œª§ùiÚ_ty³
) {

247 
‹mp
 = 
wa™_times_thškšg
[
Œª§ùiÚ_ty³
];

248  
‹mp
;

249 
	}
}

251 
public
 
synchrÚized
 
	$upd©eTim”D©a
(
Œª§ùiÚ_ty³
,

252 
Œª§ùiÚ_time
) {

253 ++
Œª§ùiÚCouÁ
[
Œª§ùiÚ_ty³
];

254 
tÙ®Time
[
Œª§ùiÚ_ty³
] +ğ
Œª§ùiÚ_time
;

255 
tÙ®TimeSqu¬e
[
Œª§ùiÚ_ty³
] +ğ
Œª§ùiÚ_time


256 * 
Œª§ùiÚ_time
;

257 ià(
Œª§ùiÚ_time
 < 
mšimumTime
[
Œª§ùiÚ_ty³
]) {

258 
mšimumTime
[
Œª§ùiÚ_ty³
] = 
Œª§ùiÚ_time
;

260 ià(
Œª§ùiÚ_time
 > 
maximumTime
[
Œª§ùiÚ_ty³
]) {

261 
maximumTime
[
Œª§ùiÚ_ty³
] = 
Œª§ùiÚ_time
;

263 
	}
}

265 
public
 
synchrÚized
 
	$ÿlcuÏ‹Re¥Ú£TimeSts
() {

266 
i
 = 0; i < 
T¿n§ùiÚ
.
maxTxnTy³s
; i++) {

267 ià(
Œª§ùiÚCouÁ
[
i
] != 0) {

268 
av”ageTime
[
i
] = (è
tÙ®Time
[i]

269 / (è
Œª§ùiÚCouÁ
[
i
] / 1000.f;

270 
¡ªd¬dDevŸtiÚTime
[
i
] = 
M©h


271 .
	`sq¹
(((è
Œª§ùiÚCouÁ
[
i
]

272 * (è
tÙ®TimeSqu¬e
[
i
] - (è
tÙ®Time
[i]

273 * (è
tÙ®Time
[
i
])

274 / ((è
Œª§ùiÚCouÁ
[
i
] * (()ransactionCount[i] - 1.0)));

275 
cÛffic›ÁOfV¬ŸtiÚTime
[
i
] = 100.0

276 * 
¡ªd¬dDevŸtiÚTime
[
i
]

277 / ((è
tÙ®Time
[
i
] / (è
Œª§ùiÚCouÁ
[i]);

280 
av”ageTime
[
i
] = 0.f;

281 
¡ªd¬dDevŸtiÚTime
[
i
] = 0.0;

282 
cÛffic›ÁOfV¬ŸtiÚTime
[
i
] = 0.0;

285 
	}
}

287 
public
 
synchrÚized
 
	$g‘T¿n§ùiÚCouÁ
(
Œª§ùiÚ_ty³
) {

288 
‹mp
 = 
Œª§ùiÚCouÁ
[
Œª§ùiÚ_ty³
];

289  
‹mp
;

290 
	}
}

292 
public
 
synchrÚized
 
	$g‘TÙ®Time
(
Œª§ùiÚ_ty³
) {

293 
‹mp
 = 
tÙ®Time
[
Œª§ùiÚ_ty³
];

294  
‹mp
;

295 
	}
}

297 
public
 
synchrÚized
 
	$g‘TÙ®TimeSqu¬e
(
Œª§ùiÚ_ty³
) {

298 
‹mp
 = 
tÙ®TimeSqu¬e
[
Œª§ùiÚ_ty³
];

299  
‹mp
;

300 
	}
}

302 
public
 
synchrÚized
 
	$g‘MšimumTime
(
Œª§ùiÚ_ty³
) {

303 
‹mp
 = 
mšimumTime
[
Œª§ùiÚ_ty³
];

304  
‹mp
;

305 
	}
}

307 
public
 
synchrÚized
 
	$g‘MaximumTime
(
Œª§ùiÚ_ty³
) {

308 
‹mp
 = 
maximumTime
[
Œª§ùiÚ_ty³
];

309  
‹mp
;

310 
	}
}

312 
public
 
synchrÚized
 
	$rŞlupTim”D©a
(
Œª§ùiÚ_ty³
,

313 
Œª§ùiÚ_couÁ
, 
Œª§ùiÚ_time
,

314 
Œª§ùiÚ_time_squ¬e
, 
mšimum_Œª§ùiÚ_time
,

315 
maximum_Œª§ùiÚ_time
) {

316 
Œª§ùiÚCouÁ
[
Œª§ùiÚ_ty³
] +ğ
Œª§ùiÚ_couÁ
;

317 
tÙ®Time
[
Œª§ùiÚ_ty³
] +ğ
Œª§ùiÚ_time
;

318 
tÙ®TimeSqu¬e
[
Œª§ùiÚ_ty³
] +ğ
Œª§ùiÚ_time_squ¬e
;

319 ià(
mšimum_Œª§ùiÚ_time
 < 
mšimumTime
[
Œª§ùiÚ_ty³
]

320 || 
mšimumTime
[
Œª§ùiÚ_ty³
] == 0) {

321 
mšimumTime
[
Œª§ùiÚ_ty³
] = 
mšimum_Œª§ùiÚ_time
;

323 ià(
maximum_Œª§ùiÚ_time
 > 
maximumTime
[
Œª§ùiÚ_ty³
]) {

324 
maximumTime
[
Œª§ùiÚ_ty³
] = 
maximum_Œª§ùiÚ_time
;

326 
	}
}

328 
public
 
synchrÚized
 
	$accumuÏ‹T¿n§ùiÚSts
(
Œª§ùiÚ_couÁ
) {

330 ià(
Œª§ùiÚ_couÁ
 < 
mš_Œª§ùiÚ_couÁ
) {

331 
mš_Œª§ùiÚ_couÁ
 = 
Œª§ùiÚ_couÁ
;

333 ià(
Œª§ùiÚ_couÁ
 > 
max_Œª§ùiÚ_couÁ
) {

334 
max_Œª§ùiÚ_couÁ
 = 
Œª§ùiÚ_couÁ
;

336 
	}
}

338 
public
 
synchrÚized
 
	$g‘TPMC
() {

339 
‹mp
 = 
mc
;

340  
‹mp
;

341 
	}
}

343 
public
 
synchrÚized
 
	$upd©eTPMC
(
š_mc
) {

344 
mc
 +ğ
š_mc
;

345  
mc
;

346 
	}
}

348 
public
 
synchrÚized
 
	$upd©eTPMC
(
–­£d_time
) {

349 
‹mp
;

350 
‹mp
 = (è
	`g‘T¿n§ùiÚCouÁ
(
T¿n§ùiÚ
.
Ãw_Üd”
)

351 / ((è
–­£d_time
 / 1000.d) * 60.d;

352 
mc
 +ğ
‹mp
;

353  
mc
;

354 
	}
}

356 
public
 
synchrÚized
 
	$g‘BTPS
() {

357 
‹mp
 = 
bs
;

358  
‹mp
;

359 
	}
}

361 
public
 
synchrÚized
 
	$upd©eBTPS
(
š_bs
) {

362 
bs
 +ğ
š_bs
;

363  
bs
;

364 
	}
}

366 
public
 
synchrÚized
 
	$upd©eBTPS
(
–­£d_time
) {

367 
‹mp
;

368 
ŒªsCouÁ
 = 0;

369 
i
 = 0; i < 
T¿n§ùiÚ
.
maxTxnTy³s
; i++) {

370 
ŒªsCouÁ
 +ğ
Œª§ùiÚCouÁ
[
i
];

372 
‹mp
 = (è
ŒªsCouÁ
 / ((è
–­£d_time
 / 1000.f);

373 
bs
 +ğ
‹mp
;

374  
bs
;

375 
	}
}

377 
´iv©e
 
	$budDi¥Ïy
() {

399 
tim”Log
 = 
Ãw
 
	`T¿n§ùiÚLogBufãr
(12, 80);

400 
tim”Log
.
	`putCh¬Fl
('=', 0, 0, 79);

401 
tim”Log
.
	`putText
("TOTALS FOR:", 0, 1, 12);

402 
v”siÚ_Ëngth
 = 
JBBmaš
.
V”siÚ
.
	`Ëngth
();

403 
‹xt_Ëngth
 = 1 + 
v”siÚ_Ëngth
 + 1 + 25 + 1;

404 
fl_Ëngth
 = (79 - 
‹xt_Ëngth
) / 2;

405 
tim”Log
.
	`putCh¬Fl
('.', 0, 2, 
fl_Ëngth
);

406 
tim”Log
.
	`putText
(
JBBmaš
.
V”siÚ
, 
fl_Ëngth
 + 1, 2, 
v”siÚ_Ëngth
);

407 
tim”Log
.
	`putText
("ResuÉ Ñimš secÚds)", 
fl_Ëngth
 + 1

408 + 
v”siÚ_Ëngth
 + 1, 2, 25);

409 
tim”Log
.
	`putCh¬Fl
('.',

410 
fl_Ëngth
 + 1 + 
v”siÚ_Ëngth
 + 1 + 25 + 1, 2, fill_length);

411 
tim”Log
.
	`putText
("Count", 19, 3, 5);

412 
tim”Log
.
	`putText
("Total", 29, 3, 5);

413 
tim”Log
.
	`putText
("Min", 38, 3, 3);

414 
tim”Log
.
	`putText
("Max", 46, 3, 3);

415 
tim”Log
.
	`putText
("Avg", 54, 3, 3);

416 
tim”Log
.
	`putText
("New Order:", 0, 4, 14,

417 
T¿n§ùiÚLogBufãr
.
®ignRight
);

418 
tim”Log
.
	`putText
("Paym’t:", 0, 5, 14, 
T¿n§ùiÚLogBufãr
.
®ignRight
);

419 
tim”Log
.
	`putText
("OrderStatus:", 0, 6, 14,

420 
T¿n§ùiÚLogBufãr
.
®ignRight
);

421 
tim”Log


422 .
	`putText
("D–iv”y:", 0, 7, 14, 
T¿n§ùiÚLogBufãr
.
®ignRight
);

423 
tim”Log
.
	`putText
("Stock Level:", 0, 8, 14,

424 
T¿n§ùiÚLogBufãr
.
®ignRight
);

425 
tim”Log
.
	`putText
("Cust Report:", 0, 9, 14,

426 
T¿n§ùiÚLogBufãr
.
®ignRight
);

427 
tim”Log
.
	`putText
("throughput =", 11, 11, 12);

428 
tim”Log
.
	`putText
("SPECjbb2005 bops", 38, 11, 17);

430 
	}
}

432 
public
 
	$fÜm©ResuÉs
(
T¿n§ùiÚLogBufãr
 
tim”Log
) {

452 
tim”Log
.
	`putLÚg
(
Œª§ùiÚCouÁ
[
T¿n§ùiÚ
.
Ãw_Üd”
], 16, 4, 8);

453 
tim”Log
.
	`putDoubË
(
tÙ®Time
[
T¿n§ùiÚ
.
Ãw_Üd”
] / 1000.0d, 26, 4,

455 
tim”Log
.
	`putDoubË
(
mšimumTime
[
T¿n§ùiÚ
.
Ãw_Üd”
] / 1000.0d, 36, 4,

457 
tim”Log
.
	`putDoubË
(
maximumTime
[
T¿n§ùiÚ
.
Ãw_Üd”
] / 1000.0d, 44, 4,

459 
tim”Log
.
	`putDoubË
(
av”ageTime
[
T¿n§ùiÚ
.
Ãw_Üd”
], 52, 4, 6, 3);

460 
tim”Log
.
	`putLÚg
(
Œª§ùiÚCouÁ
[
T¿n§ùiÚ
.
·ym’t
], 16, 5, 8);

461 
tim”Log
.
	`putDoubË
(
tÙ®Time
[
T¿n§ùiÚ
.
·ym’t
] / 1000.0d, 26, 5, 8,

463 
tim”Log
.
	`putDoubË
(
mšimumTime
[
T¿n§ùiÚ
.
·ym’t
] / 1000.0d, 36, 5,

465 
tim”Log
.
	`putDoubË
(
maximumTime
[
T¿n§ùiÚ
.
·ym’t
] / 1000.0d, 44, 5,

467 
tim”Log
.
	`putDoubË
(
av”ageTime
[
T¿n§ùiÚ
.
·ym’t
], 52, 5, 6, 3);

468 
tim”Log
.
	`putLÚg
(
Œª§ùiÚCouÁ
[
T¿n§ùiÚ
.
Üd”_¡©us
], 16, 6, 8);

469 
tim”Log
.
	`putDoubË
(
tÙ®Time
[
T¿n§ùiÚ
.
Üd”_¡©us
] / 1000.0d, 26,

471 
tim”Log
.
	`putDoubË
(
mšimumTime
[
T¿n§ùiÚ
.
Üd”_¡©us
] / 1000.0d, 36,

473 
tim”Log
.
	`putDoubË
(
maximumTime
[
T¿n§ùiÚ
.
Üd”_¡©us
] / 1000.0d, 44,

475 
tim”Log
.
	`putDoubË
(
av”ageTime
[
T¿n§ùiÚ
.
Üd”_¡©us
], 52, 6, 6, 3);

476 
tim”Log
.
	`putLÚg
(
Œª§ùiÚCouÁ
[
T¿n§ùiÚ
.
d–iv”y
], 16, 7, 8);

477 
tim”Log
.
	`putDoubË
(
tÙ®Time
[
T¿n§ùiÚ
.
d–iv”y
] / 1000.0d, 26, 7, 8,

479 
tim”Log
.
	`putDoubË
(
mšimumTime
[
T¿n§ùiÚ
.
d–iv”y
] / 1000.0d, 36, 7,

481 
tim”Log
.
	`putDoubË
(
maximumTime
[
T¿n§ùiÚ
.
d–iv”y
] / 1000.0d, 44, 7,

483 
tim”Log
.
	`putDoubË
(
av”ageTime
[
T¿n§ùiÚ
.
d–iv”y
], 52, 7, 6, 3);

484 
tim”Log
.
	`putLÚg
(
Œª§ùiÚCouÁ
[
T¿n§ùiÚ
.
¡ock_Ëv–
], 16, 8, 8);

485 
tim”Log
.
	`putDoubË
(
tÙ®Time
[
T¿n§ùiÚ
.
¡ock_Ëv–
] / 1000.0d, 26, 8,

487 
tim”Log
.
	`putDoubË
(
mšimumTime
[
T¿n§ùiÚ
.
¡ock_Ëv–
] / 1000.0d, 36,

489 
tim”Log
.
	`putDoubË
(
maximumTime
[
T¿n§ùiÚ
.
¡ock_Ëv–
] / 1000.0d, 44,

491 
tim”Log
.
	`putDoubË
(
av”ageTime
[
T¿n§ùiÚ
.
¡ock_Ëv–
], 52, 8, 6, 3);

492 
tim”Log
.
	`putLÚg
(
Œª§ùiÚCouÁ
[
T¿n§ùiÚ
.
cu¡_»pÜt
], 16, 9, 8);

493 
tim”Log
.
	`putDoubË
(
tÙ®Time
[
T¿n§ùiÚ
.
cu¡_»pÜt
] / 1000.0d, 26, 9,

495 
tim”Log
.
	`putDoubË
(
mšimumTime
[
T¿n§ùiÚ
.
cu¡_»pÜt
] / 1000.0d, 36,

497 
tim”Log
.
	`putDoubË
(
maximumTime
[
T¿n§ùiÚ
.
cu¡_»pÜt
] / 1000.0d, 44,

499 
tim”Log
.
	`putDoubË
(
av”ageTime
[
T¿n§ùiÚ
.
cu¡_»pÜt
], 52, 9, 6, 3);

503 
tim”Log
.
	`putDoubË
(
bs
, 25, 11, 12, 2);

504 
	}
}

506 
public
 
synchrÚized
 
	$di¥ÏyResuÉs
(
SŒšg
 
t™Ë
, 
tÙ®Mem
,

507 
ä“Mem
) {

526 
u£dMem
 = 
tÙ®Mem
 - 
ä“Mem
;

527 
tÙ®MB
 = ((è
tÙ®Mem
) / 1048576.0D;

528 
u£dMB
 = ((è
u£dMem
) / 1048576.0D;

529 
tim”Log
.
	`putText
(
t™Ë
, 12, 1, 60);

530 
	`fÜm©ResuÉs
(
tim”Log
);

531 
tim”Log
.
	`putText
("Heap Space", 61, 3, 10);

532 
tim”Log
.
	`putDoubË
(
tÙ®MB
, 66, 4, 11, 1);

533 
tim”Log
.
	`putText
("total", 61, 4, 5);

534 
tim”Log
.
	`putText
("MB", 77, 4, 2);

535 
tim”Log
.
	`putDoubË
(
u£dMB
, 66, 5, 11, 1);

536 
tim”Log
.
	`putText
(" used", 61, 5, 5);

537 
tim”Log
.
	`putText
("MB", 77, 5, 2);

539 
tim”Log
.
	`di¥Ïy
(
Sy¡em
.
out
);

541 
	}
}

543 
public
 
synchrÚized
 
	$´İResuÉs
(
SŒšg
 
´efix
, 
PrštSŒ—m
 
out
) {

547 
out
.
	`´šn
(
´efix
 + "new_order.count="

548 + 
Œª§ùiÚCouÁ
[
T¿n§ùiÚ
.
Ãw_Üd”
]);

549 
out
.
	`´šn
(
´efix
 + "new_order.totaltime="

550 + 
tÙ®Time
[
T¿n§ùiÚ
.
Ãw_Üd”
] / 1000.0d);

551 
out
.
	`´šn
(
´efix
 + "new_order.minimumtime="

552 + 
mšimumTime
[
T¿n§ùiÚ
.
Ãw_Üd”
] / 1000.0d);

553 
out
.
	`´šn
(
´efix
 + "new_order.maximumtime="

554 + 
maximumTime
[
T¿n§ùiÚ
.
Ãw_Üd”
] / 1000.0d);

555 
out
.
	`´šn
(
´efix
 + "new_order.averagetime="

556 + 
av”ageTime
[
T¿n§ùiÚ
.
Ãw_Üd”
]);

557 
out
.
	`´šn
(
´efix
 + "new_order.stddevtime="

558 + 
¡ªd¬dDevŸtiÚTime
[
T¿n§ùiÚ
.
Ãw_Üd”
] / 1000.0d);

559 
out
.
	`´šn
(
´efix
 + "new_order.coeffvartime="

560 + 
cÛffic›ÁOfV¬ŸtiÚTime
[
T¿n§ùiÚ
.
Ãw_Üd”
]);

561 
out
.
	`´šn
(
´efix
 + "payment.count="

562 + 
Œª§ùiÚCouÁ
[
T¿n§ùiÚ
.
·ym’t
]);

563 
out
.
	`´šn
(
´efix
 + "payment.totaltime="

564 + 
tÙ®Time
[
T¿n§ùiÚ
.
·ym’t
] / 1000.0d);

565 
out
.
	`´šn
(
´efix
 + "payment.minimumtime="

566 + 
mšimumTime
[
T¿n§ùiÚ
.
·ym’t
] / 1000.0d);

567 
out
.
	`´šn
(
´efix
 + "payment.maximumtime="

568 + 
maximumTime
[
T¿n§ùiÚ
.
·ym’t
] / 1000.0d);

569 
out
.
	`´šn
(
´efix
 + "payment.averagetime="

570 + 
av”ageTime
[
T¿n§ùiÚ
.
·ym’t
]);

571 
out
.
	`´šn
(
´efix
 + "payment.stddevtime="

572 + 
¡ªd¬dDevŸtiÚTime
[
T¿n§ùiÚ
.
·ym’t
] / 1000.0d);

573 
out
.
	`´šn
(
´efix
 + "payment.coeffvartime="

574 + 
cÛffic›ÁOfV¬ŸtiÚTime
[
T¿n§ùiÚ
.
·ym’t
]);

575 
out
.
	`´šn
(
´efix
 + "order_status.count="

576 + 
Œª§ùiÚCouÁ
[
T¿n§ùiÚ
.
Üd”_¡©us
]);

577 
out
.
	`´šn
(
´efix
 + "order_status.totaltime="

578 + 
tÙ®Time
[
T¿n§ùiÚ
.
Üd”_¡©us
] / 1000.0d);

579 
out
.
	`´šn
(
´efix
 + "order_status.minimumtime="

580 + 
mšimumTime
[
T¿n§ùiÚ
.
Üd”_¡©us
] / 1000.0d);

581 
out
.
	`´šn
(
´efix
 + "order_status.maximumtime="

582 + 
maximumTime
[
T¿n§ùiÚ
.
Üd”_¡©us
] / 1000.0d);

583 
out
.
	`´šn
(
´efix
 + "order_status.averagetime="

584 + 
av”ageTime
[
T¿n§ùiÚ
.
Üd”_¡©us
]);

585 
out
.
	`´šn
(
´efix
 + "order_status.stddevtime="

586 + 
¡ªd¬dDevŸtiÚTime
[
T¿n§ùiÚ
.
Üd”_¡©us
] / 1000.0d);

587 
out
.
	`´šn
(
´efix
 + "order_status.coeffvartime="

588 + 
cÛffic›ÁOfV¬ŸtiÚTime
[
T¿n§ùiÚ
.
Üd”_¡©us
]);

589 
out
.
	`´šn
(
´efix
 + "delivery.count="

590 + 
Œª§ùiÚCouÁ
[
T¿n§ùiÚ
.
d–iv”y
]);

591 
out
.
	`´šn
(
´efix
 + "delivery.totaltime="

592 + 
tÙ®Time
[
T¿n§ùiÚ
.
d–iv”y
] / 1000.0d);

593 
out
.
	`´šn
(
´efix
 + "delivery.minimumtime="

594 + 
mšimumTime
[
T¿n§ùiÚ
.
d–iv”y
] / 1000.0d);

595 
out
.
	`´šn
(
´efix
 + "delivery.maximumtime="

596 + 
maximumTime
[
T¿n§ùiÚ
.
d–iv”y
] / 1000.0d);

597 
out
.
	`´šn
(
´efix
 + "delivery.averagetime="

598 + 
av”ageTime
[
T¿n§ùiÚ
.
d–iv”y
]);

599 
out
.
	`´šn
(
´efix
 + "delivery.stddevtime="

600 + 
¡ªd¬dDevŸtiÚTime
[
T¿n§ùiÚ
.
d–iv”y
] / 1000.0d);

601 
out
.
	`´šn
(
´efix
 + "delivery.coeffvartime="

602 + 
cÛffic›ÁOfV¬ŸtiÚTime
[
T¿n§ùiÚ
.
d–iv”y
]);

603 
out
.
	`´šn
(
´efix
 + "stock_level.count="

604 + 
Œª§ùiÚCouÁ
[
T¿n§ùiÚ
.
¡ock_Ëv–
]);

605 
out
.
	`´šn
(
´efix
 + "stock_level.totaltime="

606 + 
tÙ®Time
[
T¿n§ùiÚ
.
¡ock_Ëv–
] / 1000.0d);

607 
out
.
	`´šn
(
´efix
 + "stock_level.minimumtime="

608 + 
mšimumTime
[
T¿n§ùiÚ
.
¡ock_Ëv–
] / 1000.0d);

609 
out
.
	`´šn
(
´efix
 + "stock_level.maximumtime="

610 + 
maximumTime
[
T¿n§ùiÚ
.
¡ock_Ëv–
] / 1000.0d);

611 
out
.
	`´šn
(
´efix
 + "stock_level.averagetime="

612 + 
av”ageTime
[
T¿n§ùiÚ
.
¡ock_Ëv–
]);

613 
out
.
	`´šn
(
´efix
 + "stock_level.stddevtime="

614 + 
¡ªd¬dDevŸtiÚTime
[
T¿n§ùiÚ
.
¡ock_Ëv–
] / 1000.0d);

615 
out
.
	`´šn
(
´efix
 + "stock_level.coeffvartime="

616 + 
cÛffic›ÁOfV¬ŸtiÚTime
[
T¿n§ùiÚ
.
¡ock_Ëv–
]);

617 
out
.
	`´šn
(
´efix
 + "cust_report.count="

618 + 
Œª§ùiÚCouÁ
[
T¿n§ùiÚ
.
cu¡_»pÜt
]);

619 
out
.
	`´šn
(
´efix
 + "cust_report.totaltime="

620 + 
tÙ®Time
[
T¿n§ùiÚ
.
cu¡_»pÜt
] / 1000.0d);

621 
out
.
	`´šn
(
´efix
 + "cust_report.minimumtime="

622 + 
mšimumTime
[
T¿n§ùiÚ
.
cu¡_»pÜt
] / 1000.0d);

623 
out
.
	`´šn
(
´efix
 + "cust_report.maximumtime="

624 + 
maximumTime
[
T¿n§ùiÚ
.
cu¡_»pÜt
] / 1000.0d);

625 
out
.
	`´šn
(
´efix
 + "cust_report.averagetime="

626 + 
av”ageTime
[
T¿n§ùiÚ
.
cu¡_»pÜt
]);

627 
out
.
	`´šn
(
´efix
 + "cust_report.stddevtime="

628 + 
¡ªd¬dDevŸtiÚTime
[
T¿n§ùiÚ
.
cu¡_»pÜt
] / 1000.0d);

629 
out
.
	`´šn
(
´efix
 + "cust_report.coeffvartime="

630 + 
cÛffic›ÁOfV¬ŸtiÚTime
[
T¿n§ùiÚ
.
cu¡_»pÜt
]);

631 
out
.
	`´šn
(
´efix
 + "scÜe=" + 
bs
);

632 
	}
}

634 
public
 
synchrÚized
 
	$´İResuÉs
(
SŒšg
 
´efix
, 
PrštSŒ—m
 
out
,

635 
tÙ®Mem
, 
ä“Mem
) {

636 
	`´İResuÉs
(
´efix
, 
out
);

637 
u£dMem
 = 
tÙ®Mem
 - 
ä“Mem
;

638 
tÙ®MB
 = ((è
tÙ®Mem
) / 1048576.0D;

639 
u£dMB
 = ((è
u£dMem
) / 1048576.0D;

640 
out
.
	`´šn
(
´efix
 + "h—psize=" + 
tÙ®MB
);

641 
out
.
	`´šn
(
´efix
 + "h—pu£d=" + 
u£dMB
);

642 
	}
}

644 
public
 
synchrÚized
 
	$di¥ÏyTh»adResuÉs
() {

645 
diff
 = 
max_Œª§ùiÚ_couÁ
 - 
mš_Œª§ùiÚ_couÁ
;

646 
diff_pù
 = 100 * (è
diff
 / (è
mš_Œª§ùiÚ_couÁ
;

654 
	}
}

656 
public
 
synchrÚized
 
	$´İTh»adResuÉs
(
SŒšg
 
´efix
, 
PrštSŒ—m
 
out
) {

657 
out


658 .
	`´šn
(
´efix
 + "min_thread_transactions="

659 + 
mš_Œª§ùiÚ_couÁ
);

660 
out


661 .
	`´šn
(
´efix
 + "max_thread_transactions="

662 + 
max_Œª§ùiÚ_couÁ
);

663 
	}
}

	@spec/jbb/Transaction.java

7 
·ckage
 
	g¥ec
.
	gjbb
;

9 
impÜt
 
	gjava
.
	gÏng
.
	g»æeù
.
	gCÚ¡ruùÜ
;

10 
impÜt
 
	gjava
.
	gut
.
	gloggšg
.
	gLev–
;

12 
ab¡¿ù
 cÏs 
	cT¿n§ùiÚ
 {

14 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

21 
´Ùeùed
 
fš®
 
by‹
 
	mÃw_Üd”
 = 0;

23 
´Ùeùed
 
fš®
 
by‹
 
	m·ym’t
 = 1;

25 
´Ùeùed
 
fš®
 
by‹
 
	mÜd”_¡©us
 = 2;

27 
´Ùeùed
 
fš®
 
by‹
 
	md–iv”y
 = 3;

29 
´Ùeùed
 
fš®
 
by‹
 
	m¡ock_Ëv–
 = 4;

31 
´Ùeùed
 
fš®
 
by‹
 
	mcu¡_»pÜt
 = 5;

34 
public
 
	maveOrd”lšes
 = 10;

36 
public
 
	mmšOrd”lšes
 = 
aveOrd”lšes
 - 5;

38 
public
 
	mmaxOrd”lšes
 = 
aveOrd”lšes
 + 5;

40 
boŞ—n
 
	m’abËLogWr™e
 = 
çl£
;

42 
boŞ—n
 
	m¡—dyS‹Mem
 = 
Œue
;

44 
boŞ—n
 
	mv®id©iÚFÏg
 = 
çl£
;

46 
´iv©e
 
boŞ—n
 
	mv®idRun
 = 
Œue
;

48 
SŒšg
 
	mŒª§ùiÚNames
[] = {

53 
´Ùeùed
 
fš®
 
by‹
 
	gmaxTxnTy³s
 = (by‹è
Œª§ùiÚNames
.
Ëngth
;

55 
CÏss
 
	gŒª§ùiÚCÏs£s
[];

57 
	gŒª§ùiÚCÏs£s
 = 
Ãw
 
CÏss
[
maxTxnTy³s
];

58 
	gi
 = 0; i < 
	gmaxTxnTy³s
; i++) {

59 
	gŒy
 {

60 
	gŒª§ùiÚCÏs£s
[
i
] = 
CÏss
.
fÜName
("spec.jbb."

61 + 
Œª§ùiÚNames
[
i
] + "Transaction");

63 
ÿtch
 (
CÏssNÙFoundExû±iÚ
 
e
) {

64 
	gSy¡em
.
	gout
.
´šn
("Transaction.transactionClasses - "

70 
public
 
ab¡¿ù
 
SŒšg
 
g‘M’uName
();

72 
public
 
ab¡¿ù
 
š™
();

74 
public
 
ab¡¿ù
 
boŞ—n
 
´oûss
();

76 
public
 
ab¡¿ù
 
š™ŸlizeT¿n§ùiÚLog
();

78 
public
 
ab¡¿ù
 
´oûssT¿n§ùiÚLog
();

81 
public
 
	$šv®id©eRun
() {

82 
v®idRun
 = 
çl£
;

83 
	}
}

85 
public
 
	$v®id©eRun
() {

86 
v®idRun
 = 
Œue
;

87 
	}
}

89 
public
 
boŞ—n
 
	$isRunV®id
() {

90  
v®idRun
;

91 
	}
}

93 
public
 
	$£tOrd”LšeCouÁ
(
couÁ
) {

94 
aveOrd”lšes
 = 
couÁ
;

95 
mšOrd”lšes
 = 
aveOrd”lšes
 - 5;

96 
maxOrd”lšes
 = 
aveOrd”lšes
 + 5;

97 
	}
}

99 
public
 
	$£tS‹adyS‹
(
boŞ—n
 
Úoff
) {

100 
¡—dyS‹Mem
 = 
Úoff
;

101 
	}
}

103 
public
 
	$£tLogWr™e
(
boŞ—n
 
Úoff
) {

104 
’abËLogWr™e
 = 
Úoff
;

105 
	}
}

107 
public
 
	$£tV®id©iÚ
(
boŞ—n
 
Úoff
) {

108 
v®id©iÚFÏg
 = 
Úoff
;

109 
	}
}

111 
	gCÏss
[] 
	gŒª§ùiÚCÚ¡ruùÜSigÇtu»
 = {

112 
Com·ny
.
şass
, .class,

115 
T¿n§ùiÚ
 
	$g‘In¡ªû
(
CÏss
 
Œª§ùiÚCÏss
, 
Com·ny
 
com·ny
,

116 
w¬ehou£ID
) {

117 
T¿n§ùiÚ
 
t
 = 
nuÎ
;

118 
Œy
 {

119 
CÚ¡ruùÜ
 
ùÜ
 = 
Œª§ùiÚCÏss


120 .
	`g‘CÚ¡ruùÜ
(
Œª§ùiÚCÚ¡ruùÜSigÇtu»
);

121 
Objeù
[] 
¬gs
 = 
Ãw
 Object[2];

122 
¬gs
[0] = 
com·ny
;

123 
¬gs
[1] = 
Ãw
 
	`ShÜt
(
w¬ehou£ID
);

124 
t
 = (
T¿n§ùiÚ
è
ùÜ
.
	`ÃwIn¡ªû
(
¬gs
);

126 
	`ÿtch
 (
Exû±iÚ
 
e
) {

127 
JBBut
.
	`g‘Log
().
	`log
(
Lev–
.
WARNING
, "Exû±iÚ: " + 
e
.
	`g‘Mes§ge
(),

128 
e
);

130  
t
;

131 
	}
}

	@spec/jbb/TransactionManager.java

7 
·ckage
 
	g¥ec
.
	gjbb
;

9 
impÜt
 
	gjava
.
	gio
.*;

10 
impÜt
 
	gjava
.
	gut
.
	gloggšg
.
	gLev–
;

12 şas 
	cT¿n§ùiÚMªag”
 {

14 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

21 
´iv©e
 
Com·ny
 
	mcom·ny
;

23 
´iv©e
 
	mw¬ehou£Id
;

25 
public
 
	mCom·ny
.
runModes
 
	mmode
 = 
Com·ny
.runModes.
DEFAULT_MODE
;

27 
´iv©e
 
fš®
 
by‹
 
	mÃw_Üd”
 = 
T¿n§ùiÚ
.
Ãw_Üd”
;

29 
´iv©e
 
fš®
 
by‹
 
	m·ym’t
 = 
T¿n§ùiÚ
.
·ym’t
;

31 
´iv©e
 
fš®
 
by‹
 
	mÜd”_¡©us
 = 
T¿n§ùiÚ
.
Üd”_¡©us
;

33 
´iv©e
 
fš®
 
by‹
 
	md–iv”y
 = 
T¿n§ùiÚ
.
d–iv”y
;

35 
´iv©e
 
fš®
 
by‹
 
	m¡ock_Ëv–
 = 
T¿n§ùiÚ
.
¡ock_Ëv–
;

37 
´iv©e
 
fš®
 
by‹
 
	mcu¡_»pÜt
 = 
T¿n§ùiÚ
.
cu¡_»pÜt
;

39 
´iv©e
 
fš®
 
by‹
 
	mmaxTxnTy³s
 = 
T¿n§ùiÚ
.
maxTxnTy³s
;

41 
´iv©e
 
fš®
 
by‹
 
	mmuÉË_Üd”s
 = 
maxTxnTy³s
;

43 
´iv©e
 
fš®
 
by‹
 
	mpgm_ex™
 = (by‹è(
muÉË_Üd”s
 + 2);

45 
´iv©e
 
T¿n§ùiÚ
 
	mŒª§ùiÚIn¡ªû
[];

47 
public
 
	$š™T¿n§ùiÚMªag”
(
Com·ny
 
šCom·ny
, 
w¬ehou£Id
) {

48 
com·ny
 = 
šCom·ny
;

49 
this
.
w¬ehou£Id
 = warehouseId;

51 
JBBut
.
	`¿ndom
(1, 
com·ny
.
	`g‘MaxDi¡riùsP”W¬ehou£
(), 
w¬ehou£Id
);

55 
´iv©e
 
	$ü—‹TxnIn¡ªûs
() {

56 
Œª§ùiÚIn¡ªû
 = 
Ãw
 
T¿n§ùiÚ
[
maxTxnTy³s
];

57 
i
 = 0; i < 
maxTxnTy³s
; ++i) {

58 
Œª§ùiÚIn¡ªû
[
i
] = 
T¿n§ùiÚ
.
	`g‘In¡ªû
(

59 
T¿n§ùiÚ
.
Œª§ùiÚCÏs£s
[
i
], 
com·ny
, 
w¬ehou£Id
);

61 
	}
}

63 
´iv©e
 
	$mªu®S–eùiÚ
() {

64 
i
;

65 
Sy¡em
.
out
.
	`´šn
("Selectransactionype");

66 
Sy¡em
.
out
.
	`´šn
();

67 
i
 = 0; i < 
maxTxnTy³s
; ++i) {

68 
Œy
 {

69 
Sy¡em
.
out
.
	`´šn
((
i
 + 1)

71 + 
T¿n§ùiÚ
.
Œª§ùiÚCÏs£s
[
i
].
	`g‘M‘hod
(

72 "g‘M’uName", (
CÏss
[]è
nuÎ
).
	`švoke
(null,

73 (
Objeù
[]è
nuÎ
));

75 
	`ÿtch
 (
Exû±iÚ
 
e
) {

76 
JBBut


77 .
	`g‘Log
()

78 .
	`log
(

79 
Lev–
.
WARNING
,

82 
e
);

85 
Sy¡em
.
out
.
	`´šn
(
muÉË_Üd”s
 + 1 + ". Create NewOrders");

86 
Sy¡em
.
out
.
	`´šn
(
pgm_ex™
 + 1 + ". Exit");

87 
Sy¡em
.
out
.
	`´šn
();

88 
Sy¡em
.
out
.
	`´šn
("Enter selection here: ");

89 
	}
}

91 
´iv©e
 
SŒšg
 
	$»adU£rV®ue
() {

92 
Bufã»dR—d”
 
keybßrd_šput
;

93 
SŒšg
 
s
 = "";

94 
Œy
 {

95 
keybßrd_šput
 = 
Ãw
 
	`Bufã»dR—d”
(

96 
Ãw
 
	`IÅutSŒ—mR—d”
(
Sy¡em
.
š
));

97 
s
 = 
keybßrd_šput
.
	`»adLše
();

99 
	`ÿtch
 (
IOExû±iÚ
 
exû±iÚ
) {

101  
s
;

102 
	}
}

106 
´iv©e
 
	$runTxn
(
T¿n§ùiÚ
 
txn
, 
m’uWa™Time
,

107 
typšgWa™Time
, 
thškšgWa™Time
) {

108 
¡¬t
;

109 
’d
;

110 
txn
.
	`š™
();

111 ià(
m’uWa™Time
 > 0) {

112 
JBBut
.
	`mliSecÚdsToSË•
(
m’uWa™Time
);

114 
txn
.
	`š™ŸlizeT¿n§ùiÚLog
();

115 ià(
typšgWa™Time
 > 0) {

116 
JBBut
.
	`mliSecÚdsToSË•
(
typšgWa™Time
);

118 
¡¬t
 = 
Sy¡em
.
	`cu¼’tTimeMlis
();

119 
txn
.
	`´oûss
();

120 
txn
.
	`´oûssT¿n§ùiÚLog
();

121 
’d
 = 
Sy¡em
.
	`cu¼’tTimeMlis
();

122 ià(
thškšgWa™Time
 > 0.0) {

123 
JBBut
.
	`SecÚdsToSË•
(
thškšgWa™Time
);

125  (
’d
 - 
¡¬t
);

126 
	}
}

129 
´iv©e
 
	$goMªu®
(
£ËùiÚ
, 
Tim”D©a
 
myTim”D©a
) {

130 
m’uWa™Time
 = 0;

131 
typšgWa™Time
 = 0;

132 
thškšgWa™Time
 = 0.0;

133 ià(
	`isMuÉË
(
£ËùiÚ
)) {

135 
numOrd”s
 = 0;

136 
i
;

137 
Sy¡em
.
out
.
	`´šn
("How many orderso be created? ");

138 
numOrd”s
 = 
Ãw
 
	`IÁeg”
(
	`»adU£rV®ue
()).
	`štV®ue
();

139 
Sy¡em
.
out
.
	`´šn
("Creating New Orders...");

140 
i
 = 0; i < 
numOrd”s
; ++i) {

142 
Œª§ùiÚIn¡ªû
[0].
	`š™
();

143 
Œª§ùiÚIn¡ªû
[0].
	`´oûss
();

148 ià(
£ËùiÚ
 < 
maxTxnTy³s
) {

149 
m’uWa™Time
 = 
myTim”D©a
.
	`g‘M’uWa™Time
(
£ËùiÚ
);

150 
typšgWa™Time
 = 
myTim”D©a
.
	`g‘TypšgWa™Time
(
£ËùiÚ
);

151 
thškšgWa™Time
 = 
JBBut


152 .
	`Ãg©iveExpDi¡ributiÚ
(((è
myTim”D©a


153 .
	`g‘ThškšgWa™Time
(
£ËùiÚ
)) / 1000.0D,

154 
w¬ehou£Id
);

156  
	`runTxn
(
Œª§ùiÚIn¡ªû
[
£ËùiÚ
], 
m’uWa™Time
,

157 
typšgWa™Time
, 
thškšgWa™Time
);

159 
	}
}

161 
boŞ—n
 
	$isMuÉË
(
£ËùiÚ
) {

162 ià(
£ËùiÚ
 =ğ
muÉË_Üd”s
) {

163  
Œue
;

166  
çl£
;

168 
	}
}

170 
public
 
synchrÚized
 
	gCom·ny
.
runModes
 
	$g‘runMode
() {

171  
mode
;

172 
	}
}

174 
public
 
synchrÚized
 
	$£ŒunMode
(
Com·ny
.
runModes
 
šmode
) {

175 
mode
 = 
šmode
;

176 
	}
}

178 
public
 
	$go
() {

179 
by‹
 
co
 = 0;

180 
deck
[] = 
Ãw
 [33];

181 
–­£d_time
;

182 
txÁime
;

183 
txÁy³
;

184 
boŞ—n
 
timed
 = 
çl£
;

185 
boŞ—n
 
sigÇËd_dÚe
 = 
çl£
;

186 
i
 = 0;

187 
Tim”D©a
 
w¬ehou£Tim”D©aPŒ
 = 
com·ny
.
	`g‘Tim”D©aPŒ
(
w¬ehou£Id
);

188 
¿mpup_time
 = 
w¬ehou£Tim”D©aPŒ
.
	`g‘RampUpTime
();

189 
m—su»m’t_time
 = 
w¬ehou£Tim”D©aPŒ
.
	`g‘M—su»m’tTime
();

191 
Tim”D©a
 
myTim”D©a
 = 
Ãw
 
	`Tim”D©a
();

193 
myTim”D©a
.
	`£tWa™Times
(
w¬ehou£Tim”D©aPŒ
.
	`g‘Wa™Times
());

194 
deck
 = 
	`budDeck
();

195 
W¬ehou£
 
w¬ehou£PŒ
 = 
com·ny
.
	`g‘W¬ehou£PŒ
(
w¬ehou£Id
, 
çl£
);

197 
	`ü—‹TxnIn¡ªûs
();

198 
	`synchrÚized
 (
com·ny
.
š™Th»adsCouÁMÚ™Ü
) {

199 
	`synchrÚized
 (
com·ny
.
š™Th»adsS‹Chªge
) {

200 
com·ny
.
š™Th»adsCouÁ
++;

201 
com·ny
.
š™Th»adsS‹Chªge
.
	`nÙify
();

203 
Œy
 {

204 
com·ny
.
š™Th»adsCouÁMÚ™Ü
.
	`wa™
();

206 
	`ÿtch
 (
IÁ”ru±edExû±iÚ
 
e
) {

209 ià((
¿mpup_time
 > 0è|| (
m—su»m’t_time
 > 0)) {

210 
timed
 = 
Œue
;

212 ià(
JBBut
.
	`g‘Log
().
	`isLoggabË
(
Lev–
.
FINEST
)) {

213 
JBBut
.
	`g‘Log
().
	`fše¡
(

214 "B’chm¬k " + 
JBBmaš
.
V”siÚ
 + ": warehouse "

215 + 
w¬ehou£Id
);

217 
this
.
	`g‘runMode
(è!ğ
Com·ny
.
runModes
.
STOP
) {

218 ià((!
timed
)

219 && (
this
.
	`g‘runMode
(è=ğ
Com·ny
.
runModes
.
DEFAULT_MODE
)) {

220 
	`mªu®S–eùiÚ
();

221 
txÁy³
 = (
Ãw
 
	`IÁeg”
(
	`»adU£rV®ue
()).
	`štV®ue
()) - 1;

224 
txÁy³
 = 
deck
[
i
];

225 
i
++;

226 ià(
i
 == 33) {

227 
deck
 = 
	`budDeck
();

228 
i
 = 0;

231 
txÁime
 = 
	`goMªu®
(
txÁy³
, 
myTim”D©a
);

232 ià(
this
.
	`g‘runMode
(è=ğ
Com·ny
.
runModes
.
RECORDING
)

233 
myTim”D©a
.
	`upd©eTim”D©a
(
txÁy³
, 
txÁime
);

234 ià(
timed
) {

235 ià((
this
.
	`g‘runMode
(è=ğ
Com·ny
.
runModes
.
RAMP_DOWN
)

236 && (!
sigÇËd_dÚe
)) {

237 
	`synchrÚized
 (
com·ny
.
th»adsDÚeCouÁMÚ™Ü
) {

238 
com·ny
.
th»adsDÚeCouÁ
++;

239 
com·ny
.
th»adsDÚeCouÁMÚ™Ü
.
	`nÙify
();

240 
sigÇËd_dÚe
 = 
Œue
;

245 ià(
txÁy³
 =ğ
pgm_ex™
) {

250 ià(
timed
 && (
this
.
	`g‘runMode
(è=ğ
Com·ny
.
runModes
.
STOP
)) {

251 
–­£d_time
 = 
com·ny
.
	`g‘EÏp£dTime
();

252 
myTim”D©a
.
	`ÿlcuÏ‹Re¥Ú£TimeSts
();

253 
mc
 = 
myTim”D©a
.
	`upd©eTPMC
(
–­£d_time
);

254 
bs
 = 
myTim”D©a
.
	`upd©eBTPS
(
–­£d_time
);

256 
tÙ®T¿n§ùiÚs
 = 0;

257 
txÁy³
 = 0;xÁy³ < 
maxTxnTy³s
;xntype++) {

258 
w¬ehou£Tim”D©aPŒ
.
	`rŞlupTim”D©a
(
txÁy³
, 
myTim”D©a


259 .
	`g‘T¿n§ùiÚCouÁ
(
txÁy³
), 
myTim”D©a


260 .
	`g‘TÙ®Time
(
txÁy³
), 
myTim”D©a


261 .
	`g‘TÙ®TimeSqu¬e
(
txÁy³
), 
myTim”D©a


262 .
	`g‘MšimumTime
(
txÁy³
), 
myTim”D©a


263 .
	`g‘MaximumTime
(
txÁy³
));

264 
com·ny
.
	`g‘Tim”D©aPŒ
(
co
).
	`rŞlupTim”D©a
(
txÁy³
,

265 
myTim”D©a
.
	`g‘T¿n§ùiÚCouÁ
(
txÁy³
),

266 
myTim”D©a
.
	`g‘TÙ®Time
(
txÁy³
),

267 
myTim”D©a
.
	`g‘TÙ®TimeSqu¬e
(
txÁy³
),

268 
myTim”D©a
.
	`g‘MšimumTime
(
txÁy³
),

269 
myTim”D©a
.
	`g‘MaximumTime
(
txÁy³
));

270 
tÙ®T¿n§ùiÚs
 +ğ
myTim”D©a
.
	`g‘T¿n§ùiÚCouÁ
(
txÁy³
);

272 
com·ny
.
	`g‘Tim”D©aPŒ
(
co
).
	`accumuÏ‹T¿n§ùiÚSts
(

273 
tÙ®T¿n§ùiÚs
);

274 
w¬ehou£Tim”D©aPŒ
.
	`upd©eTPMC
(
mc
);

275 
w¬ehou£Tim”D©aPŒ
.
	`upd©eBTPS
(
bs
);

276 
com·ny
.
	`g‘Tim”D©aPŒ
(
co
).
	`upd©eTPMC
(
mc
);

277 
com·ny
.
	`g‘Tim”D©aPŒ
(
co
).
	`upd©eBTPS
(
bs
);

278 
	`synchrÚized
 (
com·ny
.
¡İTh»adsCouÁMÚ™Ü
) {

279 
com·ny
.
¡İTh»adsCouÁ
++;

280 
com·ny
.
¡İTh»adsCouÁMÚ™Ü
.
	`nÙify
();

283 
	}
}

285 
public
 
boŞ—n
 
	$goV®id©e
() {

286 
T¿n§ùiÚ
 
t
[];

287 
t
 = 
Ãw
 
T¿n§ùiÚ
[
maxTxnTy³s
];

288 
i
;

289 
T¿n§ùiÚ
.
	`v®id©eRun
();

290 
i
 = 0; i < 
maxTxnTy³s
; ++i) {

291 
t
[
i
] = 
T¿n§ùiÚ
.
	`g‘In¡ªû
(T¿n§ùiÚ.
Œª§ùiÚCÏs£s
[i],

292 
com·ny
, 
w¬ehou£Id
);

294 
i
 = 0; i < 
maxTxnTy³s
; ++i) {

295 
t
[
i
].
	`š™
();

296 
t
[
i
].
	`š™ŸlizeT¿n§ùiÚLog
();

297 
t
[
i
].
	`´oûss
();

298 
t
[
i
].
	`´oûssT¿n§ùiÚLog
();

300  
T¿n§ùiÚ
.
	`isRunV®id
();

301 
	}
}

303 
public
 [] 
	$budDeck
() {

304 
»®_deck
[] = 
Ãw
 [33];

305 
üoss_deck
[] = 
Ãw
 [33];

306 
¿nd_v®
;

307 
i
;

309 
i
 = 0; i < 33; i++)

310 
üoss_deck
[
i
] = i;

312 
i
 = 0; i < 10; i++) {

313 
¿nd_v®
 = (è
JBBut
.
	`¿ndom
(0, 33 - 1 - 
i
, 
w¬ehou£Id
);

314 
»®_deck
[
üoss_deck
[
¿nd_v®
]] = 
Ãw_Üd”
;

315 
üoss_deck
[
¿nd_v®
] = cross_deck[33 - 1 - 
i
];

318 
i
 = 0; i < 10; i++) {

319 
¿nd_v®
 = (è
JBBut
.
	`¿ndom
(0, 23 - 1 - 
i
, 
w¬ehou£Id
);

320 
»®_deck
[
üoss_deck
[
¿nd_v®
]] = 
·ym’t
;

321 
üoss_deck
[
¿nd_v®
] = cross_deck[23 - 1 - 
i
];

324 
¿nd_v®
 = (è
JBBut
.
	`¿ndom
(0, 13 - 1, 
w¬ehou£Id
);

325 
»®_deck
[
üoss_deck
[
¿nd_v®
]] = 
Üd”_¡©us
;

326 
üoss_deck
[
¿nd_v®
] = cross_deck[13 - 1];

328 
¿nd_v®
 = (è
JBBut
.
	`¿ndom
(0, 12 - 1, 
w¬ehou£Id
);

329 
»®_deck
[
üoss_deck
[
¿nd_v®
]] = 
d–iv”y
;

330 
üoss_deck
[
¿nd_v®
] = cross_deck[12 - 1];

332 
¿nd_v®
 = (è
JBBut
.
	`¿ndom
(0, 11 - 1, 
w¬ehou£Id
);

333 
»®_deck
[
üoss_deck
[
¿nd_v®
]] = 
¡ock_Ëv–
;

334 
üoss_deck
[
¿nd_v®
] = cross_deck[11 - 1];

336 
i
 = 0; i < 10; i++) {

337 
¿nd_v®
 = (è
JBBut
.
	`¿ndom
(0, 10 - 1 - 
i
, 
w¬ehou£Id
);

338 
»®_deck
[
üoss_deck
[
¿nd_v®
]] = 
cu¡_»pÜt
;

340  
»®_deck
;

341 
	}
}

	@spec/jbb/TreeMapDataStorage.java

7 
·ckage
 
	g¥ec
.
	gjbb
;

9 
impÜt
 
	gjava
.
	gut
.
	gSÜ‹dM­
;

10 
impÜt
 
	gjava
.
	gut
.
	gT»eM­
;

11 
impÜt
 
	gjava
.
	gut
.
	gI‹¿tÜ
;

13 
public
 cÏs 
	cT»eM­D©aStÜage
 
ex‹nds
 
M­D©aStÜage
 
im¶em’ts


14 
	mJBBSÜ‹dStÜage
 {

18 
´iv©e
 
fš®
 
	m£rŸlV”siÚUID
 = 1L;

21 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

28 
	$T»eM­D©aStÜage
() {

29 
	`su³r
(
Ãw
 
	`T»eM­
());

32 
public
 
boŞ—n
 
	$d–‘eFœ¡EÁ™›s
(
quªt
) {

33 
I‹¿tÜ
 
™”
 = 
d©a
.
	`v®ues
().
	`™”©Ü
();

34 
i
 = 1; i <ğ
quªt
; i++) {

35 ià(
™”
.
	`hasNext
()) {

36 
™”
.
	`Ãxt
();

37 
™”
.
	`»move
();

40  
çl£
;

43  
Œue
;

44 
	}
}

46 
public
 
boŞ—n
 
	$d–‘eFœ¡EÁ™›s
() {

47  
	`d–‘eFœ¡EÁ™›s
(1);

48 
	}
}

50 
public
 
Objeù
 
	$»moveFœ¡EËm
() {

51 
size
 = 
this
.
	`size
();

52 ià(
size
 > 0) {

53  
	`»move
(((
SÜ‹dM­
è
d©a
).
	`fœ¡Key
());

56  
nuÎ
;

57 
	}
}

59 
public
 
Objeù
 
	$g‘MedŸnV®ue
(
Objeù
 
fœ¡Key
, Objeù 
Ï¡Key
) {

60 
Objeù
 
avgV®ue
 = 
nuÎ
;

61 
SÜ‹dM­
 
subM­
 = ((SÜ‹dM­è
d©a
).
	`subM­
(
fœ¡Key
, 
Ï¡Key
);

62 
size
 = 
subM­
.
	`size
();

63 
I‹¿tÜ
 
™”
 = 
subM­
.
	`v®ues
().
	`™”©Ü
();

64 
i
 = 1; i <ğ(
size
 + 1) / 2; i++) {

65 
avgV®ue
 = 
™”
.
	`Ãxt
();

67  
avgV®ue
;

68 
	}
}

	@spec/jbb/Warehouse.java

7 
·ckage
 
	g¥ec
.
	gjbb
;

9 
impÜt
 
	gjava
.
	gut
.
	gI‹¿tÜ
;

10 
impÜt
 
	gjava
.
	gut
.*;

11 
impÜt
 
	gjava
.
	gm©h
.
	gBigDecim®
;

12 
impÜt
 
	g¥ec
.
	gjbb
.
	gCom·ny
;

14 
public
 cÏs 
	cW¬ehou£
 {

16 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

24 
´iv©e
 
SŒšg
 
	mÇme
;

26 
´iv©e
 
Add»ss
 
	madd»ss
;

28 
´iv©e
 
BigDecim®
 
	mxR©e
;

30 
´iv©e
 
BigDecim®
 
	mytd
;

32 
´iv©e
 
	mw¬ehou£Id
;

34 
´iv©e
 
Com·ny
 
	mcom·ny
;

36 
´iv©e
 
JBBD©aStÜage
 
	m¡ockTabË
;

38 
´iv©e
 
JBBD©aStÜage
 
	m™emTabË
;

40 
´iv©e
 
	mObjeù
[] 
	mdi¡riùs
;

42 
´iv©e
 
	mdi¡CouÁ
;

44 
´iv©e
 
Rªdom
 
	m³r_wh_r
;

46 
´iv©e
 
JBBD©aStÜage
 
	mhi¡ÜyTabË
;

48 
´iv©e
 
	mhi¡ÜyCouÁ
;

50 
´iv©e
 
	mŞde¡Hi¡Üy
;

52 
public
 
	$W¬ehou£
(
Com·ny
 
šCom·ny
, 
JBBD©aStÜage
 
šI‹mTabË
) {

53 
com·ny
 = 
šCom·ny
;

54 
di¡riùs
 = 
Ãw
 
Objeù
[20];

55 
¡ockTabË
 = 
Inäa¡ruùu»
.
	`ü—‹StÜage
();

56 
™emTabË
 = 
šI‹mTabË
;

57 
add»ss
 = 
Ãw
 
	`Add»ss
();

58 
hi¡ÜyTabË
 = 
Inäa¡ruùu»
.
	`ü—‹SÜ‹dStÜage
();

59 
hi¡ÜyCouÁ
 = 0;

60 
Şde¡Hi¡Üy
 = 0;

61 
ytd
 = 
BigDecim®
.
	`v®ueOf
(0, 2);

62 
	`lßdStockTabË
();

65 
public
 
	$W¬ehou£
() {

66 
	}
}

68 
public
 
	$š™W¬ehou£
(
Com·ny
 
šCom·ny
, 
JBBD©aStÜage
 
šI‹mTabË
,

69 
w¬ehou£Id
) {

70 
³r_wh_r
 = 
JBBut
.
	`d”ived_¿ndom_š™
(
w¬ehou£Id
);

71 
JBBut
.
	`»gi¡”_w¬ehou£_Rªdom_¡»am
(
w¬ehou£Id
, 
³r_wh_r
);

72 
this
.
w¬ehou£Id
 = warehouseId;

73 
ytd
 = 
BigDecim®
.
	`v®ueOf
(0, 2);

74 
com·ny
 = 
šCom·ny
;

75 
di¡riùs
 = 
Ãw
 
Objeù
[20];

76 
¡ockTabË
 = 
Inäa¡ruùu»
.
	`ü—‹StÜage
();

77 
™emTabË
 = 
šI‹mTabË
;

78 
add»ss
 = 
Ãw
 
	`Add»ss
();

79 
hi¡ÜyTabË
 = 
Inäa¡ruùu»
.
	`ü—‹SÜ‹dStÜage
();

80 
hi¡ÜyCouÁ
 = 0;

81 
Şde¡Hi¡Üy
 = 0;

82 
ytd
 = 
BigDecim®
.
	`v®ueOf
(0, 2);

83 
	`lßdStockTabË
();

84 
	}
}

86 
public
 
boŞ—n
 
	$v®idDi¡riù
(
by‹
 
šDi¡riùId
) {

87 
Di¡riù
 
cu¼’tDi¡riù
;

88 
i
;

89 
i
 = 0; i < 
di¡CouÁ
; i++) {

90 
cu¼’tDi¡riù
 = (
Di¡riù
è
di¡riùs
[
i
];

91 ià(
cu¼’tDi¡riù
.
	`g‘Id
(è=ğ
šDi¡riùId
)

92  
Œue
;

94  
çl£
;

95 
	}
}

97 
public
 
	$g‘Id
() {

98  
w¬ehou£Id
;

99 
	}
}

101 
public
 
BigDecim®
 
	$g‘TaxR©e
() {

102  
xR©e
;

103 
	}
}

105 
public
 
Add»ss
 
	$g‘Add»ss
() {

106  
add»ss
;

107 
	}
}

109 
public
 
Di¡riù
 
	$g‘Di¡riùPŒ
(
by‹
 
šDi¡riùId
, 
boŞ—n
 
lockFÏg
) {

110 
Di¡riù
 
»suÉ
 = 
nuÎ
;

111 ià(
šDi¡riùId
 > 0) {

112 
šDi¡riùId
--;

113 ià(
šDi¡riùId
 < 
di¡CouÁ
)

114 
»suÉ
 = (
Di¡riù
è
di¡riùs
[
šDi¡riùId
];

117  
»suÉ
;

118 
	}
}

120 
public
 
Stock
 
	$»Œ›veStock
(
šI‹mId
) {

121  (
Stock
è
¡ockTabË
.
	`g‘
(
šI‹mId
);

122 
	}
}

124 
public
 
I‹m
 
	$»Œ›veI‹m
(
šI‹mId
) {

125  (
I‹m
è
™emTabË
.
	`g‘
(
šI‹mId
);

126 
	}
}

128 
public
 
synchrÚized
 
	$»ûivePaym’t
(
BigDecim®
 
·ym’tAmouÁ
) {

129 
ytd
 = ytd.
	`add
(
·ym’tAmouÁ
);

130 
	}
}

132 
public
 
Di¡riù
 
	$g‘Di¡riù
(
di¡Id
) {

133 
Di¡riù
 
»suÉ
 = 
nuÎ
;

134 ià(
di¡Id
 > 0) {

135 
di¡Id
--;

136 ià(
di¡Id
 < 
di¡CouÁ
)

137 
»suÉ
 = (
Di¡riù
è
di¡riùs
[
di¡Id
];

140  
»suÉ
;

141 
	}
}

143 
public
 
	$g‘Di¡riùCouÁ
() {

144  
di¡CouÁ
;

145 
	}
}

147 
public
 
synchrÚized
 
	$ŒimOrd”sFÜS‹adyS‹
() {

148 
š™ŸlOrd”s
 = 
com·ny
.
	`g‘In™ŸlOrd”s
();

149 
š™ŸlNewOrd”s
 = 
com·ny
.
	`g‘In™ŸlNewOrd”s
();

150 
	`ŒimOrd”sFÜS‹adyS‹
(
š™ŸlOrd”s
, 
š™ŸlNewOrd”s
);

151 
	}
}

153 
public
 
synchrÚized
 
	$ŒimOrd”sFÜS‹adyS‹
(
š™ŸlOrd”s
,

154 
š™ŸlNewOrd”s
) {

155 
di¡CouÁ
 = 
this
.
	`g‘Di¡riùCouÁ
();

156 
di¡Id
;

158 
Di¡riù
 
cu¼’tDi¡riù
;

159 
di¡Id
 = 1; di¡Id <ğ
di¡CouÁ
; distId++) {

160 
cu¼’tDi¡riù
 = 
this
.
	`g‘Di¡riù
(
di¡Id
);

161 ià(
T¿n§ùiÚ
.
¡—dyS‹Mem
) {

162 
cu¼’tDi¡riù


163 .
	`»moveOldNewOrd”s
((
š™ŸlOrd”s
 - 
š™ŸlNewOrd”s
));

164 
cu¼’tDi¡riù
.
	`»moveOldOrd”s
(
š™ŸlOrd”s
);

167 
	}
}

169 
public
 
synchrÚized
 
	$£tUsšgRªdom
(
šW¬ehou£Id
) {

170 
i
;

171 
w¬ehou£Id
 = 
šW¬ehou£Id
;

173 
Çme
 = 
Ãw
 
	`SŒšg
(
JBBut
.
	`ü—‹_¿ndom_a_¡ršg
(6, 10, 
³r_wh_r
));

174 
add»ss
.
	`£tUsšgRªdom
(
³r_wh_r
);

175 
‹mp
 = 
JBBut
.
	`ü—‹_¿ndom_æßt_v®_»tuº
(0.0f, 0.2000f,

176 0.0001f, 
³r_wh_r
);

177 
xR©e
 = 
Ãw
 
	`BigDecim®
(
‹mp
).
	`£tSÿË
(4, 
BigDecim®
.
ROUND_HALF_UP
);

178 
ytd
 = 
BigDecim®
.
	`v®ueOf
(30000000, 2);

179 
di¡CouÁ
 = 
com·ny
.
	`g‘MaxDi¡riùsP”W¬ehou£
();

180 
i
 = 0; i < 
di¡CouÁ
; ++i) {

181 
by‹
 
ÃwDi¡riùId
 = (by‹è(
i
 + 1);

182 
Di¡riù
 
ÃwDi¡riù
 = 
Ãw
 
	`Di¡riù
(
w¬ehou£Id
, 
ÃwDi¡riùId
);

183 
ÃwDi¡riù
.
	`£tUsšgRªdom
();

184 
di¡riùs
[
i
] = 
ÃwDi¡riù
;

186 
	}
}

188 
public
 
SŒšg
 
	$g‘Name
() {

189  
Ãw
 
	`SŒšg
(
Çme
);

190 
	}
}

192 
public
 
	$lßdStockTabË
() {

193 
numI‹ms
 = 
™emTabË
.
	`size
();

194 
I‹m
 
cu¼I‹m
;

195 
Stock
 
ÃwStock
;

198 
i
 = 1; i <ğ
numI‹ms
; ++i) {

199 
cu¼I‹m
 = (
I‹m
è
™emTabË
.
	`g‘
(
i
);

200 
ÃwStock
 = 
Ãw
 
	`Stock
(
com·ny
, 
cu¼I‹m
.
	`g‘Id
(), 
w¬ehou£Id
);

201 
¡ockTabË
.
	`put
(
ÃwStock
.
	`g‘Id
(),‚ewStock);

203 
	}
}

205 
´iv©e
 
Objeù
 
	gupd©eHi¡ÜySynch
 = 
Ãw
 Object();

207 
public
 
	$upd©eHi¡Üy
(
Hi¡Üy
 
šHi¡Üy
) {

208 
	`synchrÚized
 (
upd©eHi¡ÜySynch
) {

209 
hi¡ÜyCouÁ
++;

210 
hi¡ÜyTabË
.
	`put
(
hi¡ÜyCouÁ
, 
šHi¡Üy
);

212 
	}
}

214 
´iv©e
 
Objeù
 
	g»moveOlde¡Hi¡ÜySynch
 = 
Ãw
 Object();

216 
public
 
	$»moveOlde¡Hi¡Üy
() {

217 
	`synchrÚized
 (
»moveOlde¡Hi¡ÜySynch
) {

218 
Şde¡Hi¡Üy
++;

219 
hi¡ÜyTabË
.
	`»move
(
Şde¡Hi¡Üy
);

221 
	}
}

223 
public
 
synchrÚized
 
	$lßdHi¡ÜyTabË
() {

224 
SŒšg
 
hi¡ÜyD©a
;

226 
by‹
 
di¡riùId
 = 1; di¡riùId <ğ
com·ny


227 .
	`g‘MaxDi¡riùsP”W¬ehou£
(); ++
di¡riùId
) {

229 
cu¡om”Id
 = 1; cu¡om”Id <ğ
com·ny


230 .
	`g‘MaxCu¡om”sP”Di¡riù
(); ++
cu¡om”Id
) {

231 
uniqueCu¡om”Numb”
 = 
com·ny
.
	`budUniqueCu¡om”Key
(

232 
w¬ehou£Id
, 
di¡riùId
, 
cu¡om”Id
);

234 
Cu¡om”
 
cu¡om”PŒ
 = 
com·ny
.
	`g‘Cu¡om”
(

235 
uniqueCu¡om”Numb”
, 
çl£
);

236 
BigDecim®
 
amouÁ
 = BigDecim®.
	`v®ueOf
(1000, 2);

237 
hi¡ÜyD©a
 = 
Ãw
 
	`SŒšg
(
JBBut
.
	`ü—‹_¿ndom_a_¡ršg
(12, 25,

238 
w¬ehou£Id
));

239 
D©e
 
ü—tiÚ_time
 = 
Ãw
 
	`D©e
();

240 
Hi¡Üy
 
ÃwHi¡Üy
 = 
Ãw
 
	`Hi¡Üy
(
cu¡om”Id
, 
cu¡om”PŒ


241 .
	`g‘Di¡riùId
(), 
cu¡om”PŒ
.
	`g‘W¬ehou£Id
(),

242 
di¡riùId
, 
w¬ehou£Id
, 
ü—tiÚ_time
, 
amouÁ
,

243 
hi¡ÜyD©a
);

244 
	`upd©eHi¡Üy
(
ÃwHi¡Üy
);

247 
	}
}

249 
public
 
synchrÚized
 
JBBD©aStÜage
 
	$g‘Hi¡ÜyTabË
() {

250  
hi¡ÜyTabË
;

251 
	}
}

	@spec/jbb/infra/Util/TransactionLogBuffer.java

15 
·ckage
 
	g¥ec
.
	gjbb
.
	gšäa
.
	gUt
;

17 
impÜt
 
	gjava
.
	gut
.
	gD©e
;

18 
impÜt
 
	gjava
.
	gut
.
	gC®’d¬
;

19 
impÜt
 
	gjava
.
	gut
.
	gG»gÜŸnC®’d¬
;

20 
impÜt
 
	gjava
.
	gio
.
	gPrštSŒ—m
;

21 
impÜt
 
	gjava
.
	gio
.
	gFeOuutSŒ—m
;

22 
impÜt
 
	gjava
.
	gio
.
	gFeDesütÜ
;

23 
impÜt
 
	gjava
.
	gio
.
	gIOExû±iÚ
;

24 
impÜt
 
	gjava
.
	gm©h
.
	gBigDecim®
;

26 şas 
	cSü“nExû±iÚ
 
ex‹nds
 
	mRuÁimeExû±iÚ
 {

30 
´iv©e
 
fš®
 
	m£rŸlV”siÚUID
 = 1L;

33 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

40 
	$Sü“nExû±iÚ
() {

41 
	`su³r
();

44 
	$Sü“nExû±iÚ
(
SŒšg
 
s
) {

45 
	`su³r
(
s
);

46 
	}
};

49 
public
 cÏs 
	cT¿n§ùiÚLogBufãr
 {

51 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

61 
public
 
fš®
 
	m®ignLeá
 = 0;

63 
public
 
fš®
 
	m®ignC’‹r
 = 1;

65 
public
 
fš®
 
	m®ignRight
 = 2;

67 
FeOuutSŒ—m
 
	mfout
 = 
Ãw
 FileOutputStream(

68 
FeDesütÜ
.
out
);

70 
fš®
 
	mäound
[] = {

75 
fš®
 
	gdround
[] = {

82 
fš®
 
	gf10_Áh
[] = {

87 
fš®
 
	gd10_Áh
[] = {

96 
fš®
 
SŒšg
 
	gäaùiÚPad
 = ".00000000000000000000";

98 
	gsü“nBuf
[][];

100 
by‹
 
	gbuf
[];

102 
	glšeEnd
[];

104 
G»gÜŸnC®’d¬
 
	gÿËnd¬
;

106 
	grows
, 
	gcŞs
;

108 
public
 
	$T¿n§ùiÚLogBufãr
() {

109 
x
, 
y
;

110 
rows
 = 24;

111 
cŞs
 = 80;

112 
ÿËnd¬
 = 
Ãw
 
	`G»gÜŸnC®’d¬
();

113 
buf
 = 
Ãw
 
by‹
[(
cŞs
 + 1è* 
rows
];

114 
sü“nBuf
 = 
Ãw
 [
rows
][];

115 
lšeEnd
 = 
Ãw
 [
rows
];

116 
y
 = 0; y < 
rows
; y++) {

117 
sü“nBuf
[
y
] = 
Ãw
 [
cŞs
];

118 
x
 = 0; x < 
cŞs
; x++) {

119 
sü“nBuf
[
y
][
x
] = ' ';

122 
lšeEnd
[
y
] = -1;

125 
	}
};

127 
public
 
	$T¿n§ùiÚLogBufãr
(
row
, 
cŞ
) {

128 
x
, 
y
;

129 
rows
 = 
row
;

130 
cŞs
 = 
cŞ
;

131 
ÿËnd¬
 = 
Ãw
 
	`G»gÜŸnC®’d¬
();

132 
buf
 = 
Ãw
 
by‹
[(
cŞs
 + 1è* 
rows
];

133 
sü“nBuf
 = 
Ãw
 [
rows
][];

134 
lšeEnd
 = 
Ãw
 [
rows
];

135 
y
 = 0; y < 
rows
; y++) {

136 
sü“nBuf
[
y
] = 
Ãw
 [
cŞs
];

137 
x
 = 0; x < 
cŞs
; x++) {

138 
sü“nBuf
[
y
][
x
] = ' ';

141 
lšeEnd
[
y
] = -1;

144 
	}
};

146 
public
 
	$T¿n§ùiÚLogBufãr
(
T¿n§ùiÚLogBufãr
 
ma¡”
) {

147 
x
, 
y
;

148 
rows
 = 
ma¡”
.rows;

149 
cŞs
 = 
ma¡”
.cols;

150 
ÿËnd¬
 = 
Ãw
 
	`G»gÜŸnC®’d¬
();

151 
buf
 = 
Ãw
 
by‹
[(
cŞs
 + 1è* 
rows
];

152 
sü“nBuf
 = 
Ãw
 [
rows
][];

153 
lšeEnd
 = 
Ãw
 [
rows
];

154 
y
 = 0; y < 
rows
; y++) {

155 
sü“nBuf
[
y
] = 
Ãw
 [
cŞs
];

156 
Sy¡em
.
	`¬¿ycİy
(
ma¡”
.
sü“nBuf
[
y
], 0, sü“nBuf[y], 0, 
cŞs
);

157 
lšeEnd
[
y
] = 
ma¡”
.lineEnd[y];

160 
	}
};

162 
public
 
	$ş—rBufãr
() {

163 
x
, 
y
;

164 
y
 = 0; y < 
rows
; y++) {

165 
x
 = 0; x < 
cŞs
; x++) {

166 
sü“nBuf
[
y
][
x
] = ' ';

169 
lšeEnd
[
y
] = -1;

172 
	}
};

174 
´iv©e
 
fš®
 
	$´ivSub¡ršg
(
SŒšg
 
s
, 
x
, 
y
, 
off
, 
Ën
) {

175 
i
;

176 
¦’
;

177 ià(
Ën
 > (
s
.
	`Ëngth
(è- 
off
)) {

178 
¦’
 = 
s
.
	`Ëngth
(è- 
off
;

181 
¦’
 = 
Ën
;

184 
s
.
	`g‘Ch¬s
(
off
, (ofà+ 
¦’
), 
sü“nBuf
[
y
], 
x
);

185 ià(
¦’
 < 
Ën
) {

186 
i
 = (
x
 + 
¦’
); i < (x + 
Ën
); i++) {

187 
sü“nBuf
[
y
][
i
] = ' ';

192 
	}
};

194 
public
 
	$putSub¡ršg
(
SŒšg
 
s
, 
x
, 
y
, 
off
, 
Ën
) {

195 ià((
y
 < 0è| (y >ğ
rows
)) {

196 
Sü“nExû±iÚ
 
e
 = 
Ãw
 
	`Sü“nExû±iÚ
("Screen:„ow "

197 + 
IÁeg”
.
	`toSŒšg
(
y
) + " out of„ange");

198 
throw
 
e
;

201 ià((
x
 < 0è| (x >ğ
cŞs
)) {

202 
Sü“nExû±iÚ
 
e
 = 
Ãw
 
	`Sü“nExû±iÚ
("Screen: column "

203 + 
IÁeg”
.
	`toSŒšg
(
x
) + " out of„ange");

204 
throw
 
e
;

207 ià((
x
 + 
Ën
è> 
cŞs
) {

208 
Sü“nExû±iÚ
 
e
 = 
Ãw
 
	`Sü“nExû±iÚ
("Screen:†ength "

209 + 
IÁeg”
.
	`toSŒšg
(
Ën
) + "ƒxceeds†eft margin");

210 
throw
 
e
;

213 
	`´ivSub¡ršg
(
s
, 
x
, 
y
, 
off
, 
Ën
);

214 ià((
x
 + 
Ën
è> 
lšeEnd
[
y
])

215 
lšeEnd
[
y
] = (
x
 + 
Ën
);

222 
	}
};

224 
´iv©e
 
fš®
 
	$´ivText
(
SŒšg
 
s
, 
x
, 
y
, 
Ën
) {

225 
i
;

226 
¦’
;

227 ià(
Ën
 > 
s
.
	`Ëngth
()) {

228 
¦’
 = 
s
.
	`Ëngth
();

231 
¦’
 = 
Ën
;

234 
s
.
	`g‘Ch¬s
(0, 
¦’
, 
sü“nBuf
[
y
], 
x
);

235 ià(
¦’
 < 
Ën
) {

236 
i
 = (
x
 + 
¦’
); i < (x + 
Ën
); i++) {

237 
sü“nBuf
[
y
][
i
] = ' ';

242 
	}
};

244 
public
 
	$putText
(
SŒšg
 
s
, 
x
, 
y
, 
Ën
) {

245 ià((
y
 < 0è| (y >ğ
rows
)) {

246 
Sü“nExû±iÚ
 
e
 = 
Ãw
 
	`Sü“nExû±iÚ
("Screen:„ow "

247 + 
IÁeg”
.
	`toSŒšg
(
y
) + " out of„ange");

248 
throw
 
e
;

251 ià((
x
 < 0è| (x >ğ
cŞs
)) {

252 
Sü“nExû±iÚ
 
e
 = 
Ãw
 
	`Sü“nExû±iÚ
("Screen: column "

253 + 
IÁeg”
.
	`toSŒšg
(
x
) + " out of„ange");

254 
throw
 
e
;

257 ià((
x
 + 
Ën
è> 
cŞs
) {

258 
Sü“nExû±iÚ
 
e
 = 
Ãw
 
	`Sü“nExû±iÚ
("Screen:†ength "

259 + 
IÁeg”
.
	`toSŒšg
(
Ën
) + "ƒxceeds†eft margin");

260 
throw
 
e
;

263 
	`´ivText
(
s
, 
x
, 
y
, 
Ën
);

264 ià((
x
 + 
Ën
è> 
lšeEnd
[
y
])

265 
lšeEnd
[
y
] = (
x
 + 
Ën
);

272 
	}
};

274 
´iv©e
 
fš®
 
	$´ivText
(
SŒšg
 
s
, 
x
, 
y
, 
Ën
, 
®ign
) {

275 
i
, 
fœ¡
;

276 
¦’
;

277 ià(
Ën
 > 
s
.
	`Ëngth
()) {

278 
¦’
 = 
s
.
	`Ëngth
();

279 ià(
®ign
 =ğ
®ignRight
) {

280 
fœ¡
 = 
x
 + (
Ën
 - 
¦’
);

283 ià(
®ign
 =ğ
®ignC’‹r
) {

284 
fœ¡
 = 
x
 + ((
Ën
 - 
¦’
) / 2);

287 
fœ¡
 = 
x
;

294 
¦’
 = 
Ën
;

295 
fœ¡
 = 
x
;

298 ià(
fœ¡
 > 
x
) {

299 
i
 = 
x
; i < 
fœ¡
; i++) {

300 
sü“nBuf
[
y
][
i
] = ' ';

305 
s
.
	`g‘Ch¬s
(0, 
¦’
, 
sü“nBuf
[
y
], 
fœ¡
);

306 ià(
¦’
 < 
Ën
) {

307 
i
 = (
fœ¡
 + 
¦’
); i < (
x
 + 
Ën
); i++) {

308 
sü“nBuf
[
y
][
i
] = ' ';

313 
	}
};

315 
public
 
	$putText
(
SŒšg
 
s
, 
x
, 
y
, 
Ën
, 
®ign
) {

316 ià((
y
 < 0è| (y >ğ
rows
)) {

317 
Sü“nExû±iÚ
 
e
 = 
Ãw
 
	`Sü“nExû±iÚ
("Screen:„ow "

318 + 
IÁeg”
.
	`toSŒšg
(
y
) + " out of„ange");

319 
throw
 
e
;

322 ià((
x
 < 0è| (x >ğ
cŞs
)) {

323 
Sü“nExû±iÚ
 
e
 = 
Ãw
 
	`Sü“nExû±iÚ
("Screen: column "

324 + 
IÁeg”
.
	`toSŒšg
(
x
) + " out of„ange");

325 
throw
 
e
;

328 ià((
x
 + 
Ën
è> 
cŞs
) {

329 
Sü“nExû±iÚ
 
e
 = 
Ãw
 
	`Sü“nExû±iÚ
("Screen:†ength "

330 + 
IÁeg”
.
	`toSŒšg
(
Ën
) + "ƒxceeds†eft margin");

331 
throw
 
e
;

334 
	`´ivText
(
s
, 
x
, 
y
, 
Ën
, 
®ign
);

335 ià((
x
 + 
Ën
è> 
lšeEnd
[
y
])

336 
lšeEnd
[
y
] = (
x
 + 
Ën
);

343 
	}
};

345 
´iv©e
 
fš®
 
	$´ivCh¬Fl
(
c
, 
x
, 
y
, 
Ën
) {

346 
i
;

347 
i
 = 
x
; i < (x + 
Ën
); i++) {

348 
sü“nBuf
[
y
][
i
] = 
c
;

351 
	}
};

353 
public
 
	$putCh¬Fl
(
c
, 
x
, 
y
, 
Ën
) {

354 
i
;

355 ià((
y
 < 0è| (y >ğ
rows
)) {

356 
Sü“nExû±iÚ
 
e
 = 
Ãw
 
	`Sü“nExû±iÚ
("Screen:„ow "

357 + 
IÁeg”
.
	`toSŒšg
(
y
) + " out of„ange");

358 
throw
 
e
;

361 ià((
x
 < 0è| (x >ğ
cŞs
)) {

362 
Sü“nExû±iÚ
 
e
 = 
Ãw
 
	`Sü“nExû±iÚ
("Screen: column "

363 + 
IÁeg”
.
	`toSŒšg
(
x
) + " out of„ange");

364 
throw
 
e
;

367 ià((
x
 + 
Ën
è> 
cŞs
) {

368 
Sü“nExû±iÚ
 
e
 = 
Ãw
 
	`Sü“nExû±iÚ
("Screen:†ength "

369 + 
IÁeg”
.
	`toSŒšg
(
Ën
) + "ƒxceeds†eft margin");

370 
throw
 
e
;

373 
	`´ivCh¬Fl
(
c
, 
x
, 
y
, 
Ën
);

374 ià((
x
 + 
Ën
è> 
lšeEnd
[
y
])

375 
lšeEnd
[
y
] = (
x
 + 
Ën
);

382 
	}
};

384 
´iv©e
 
fš®
 
	$´ivCh¬
(
c
, 
x
, 
y
) {

385 
sü“nBuf
[
y
][
x
] = 
c
;

386 
	}
};

388 
public
 
	$putCh¬
(
c
, 
x
, 
y
) {

389 ià((
y
 < 0è| (y >ğ
rows
)) {

390 
Sü“nExû±iÚ
 
e
 = 
Ãw
 
	`Sü“nExû±iÚ
("Screen:„ow "

391 + 
IÁeg”
.
	`toSŒšg
(
y
) + " out of„ange");

392 
throw
 
e
;

395 ià((
x
 < 0è| (x >ğ
cŞs
)) {

396 
Sü“nExû±iÚ
 
e
 = 
Ãw
 
	`Sü“nExû±iÚ
("Screen: column "

397 + 
IÁeg”
.
	`toSŒšg
(
x
) + " out of„ange");

398 
throw
 
e
;

401 
sü“nBuf
[
y
][
x
] = 
c
;

402 ià((
x
 + 1è> 
lšeEnd
[
y
])

403 
lšeEnd
[
y
] = (
x
 + 1);

408 
	}
};

410 
´iv©e
 
fš®
 
	$´ivIÁL—dšgZ”os
(
iz
, 
x
, 
y
, 
Ën
) {

411 
i
, 
divid’d
, 
»mašd”
;

412 
sü“nLše
[];

413 
sü“nLše
 = 
sü“nBuf
[
y
];

414 
i
 = (
x
 + 
Ën
 - 1); i >= x; i--) {

415 
divid’d
 = 
iz
 / 10;

416 
»mašd”
 = 
iz
 - 
divid’d
 * 10;

417 
iz
 = 
divid’d
;

418 
sü“nLše
[
i
] = (è('0' + 
»mašd”
);

421  
iz
;

422 
	}
};

424 
´iv©e
 
fš®
 
	$´ivIÁ
(
iz
, 
x
, 
y
, 
Ën
) {

425 
i
, 
divid’d
, 
»mašd”
;

426 
sü“nLše
[];

427 
sign
 = ' ';

428 ià(
iz
 < 0) {

429 
iz
 = -iz;

430 
sign
 = '-';

433 
sü“nLše
 = 
sü“nBuf
[
y
];

434 
i
 = (
x
 + 
Ën
 - 1);

436 
divid’d
 = 
iz
 / 10;

437 
»mašd”
 = 
iz
 - 
divid’d
 * 10;

438 
iz
 = 
divid’d
;

439 
sü“nLše
[
i
] = (è('0' + 
»mašd”
);

440 
i
--;

442 (
i
 >ğ
x
è&& (
iz
 != 0));

443 ià(
i
 >ğ
x
) {

444 
sü“nLše
[
i
] = 
sign
;

445 
i
--;

448 ià(
sign
 == '-')

449 
iz
 = -1;

452 ; 
i
 >ğ
x
; i--) {

453 
sü“nLše
[
i
] = ' ';

456  
iz
;

457 
	}
};

459 
´iv©e
 
fš®
 
	$´ivLÚg
(
iz
, 
x
, 
y
, 
Ën
) {

460 
i
;

461 
divid’d
, 
»mašd”
;

462 
sü“nLše
[];

463 
sign
 = ' ';

464 ià(
iz
 < 0) {

465 
iz
 = -iz;

466 
sign
 = '-';

469 
sü“nLše
 = 
sü“nBuf
[
y
];

470 
i
 = (
x
 + 
Ën
 - 1);

472 
divid’d
 = 
iz
 / 10;

473 
»mašd”
 = 
iz
 - 
divid’d
 * 10;

474 
iz
 = 
divid’d
;

475 
sü“nLše
[
i
] = (è('0' + 
»mašd”
);

476 
i
--;

478 (
i
 >ğ
x
è&& (
iz
 != 0));

479 ià(
i
 >ğ
x
) {

480 
sü“nLše
[
i
] = 
sign
;

481 
i
--;

484 ià(
sign
 == '-')

485 
iz
 = -1;

488 ; 
i
 >ğ
x
; i--) {

489 
sü“nLše
[
i
] = ' ';

492  
iz
;

493 
	}
};

495 
´iv©e
 
fš®
 
	$´ivIÁ
(
iz
, 
sign
, 
x
, 
y
, 
Ën
) {

496 
i
, 
divid’d
, 
»mašd”
;

497 
sü“nLše
[];

498 
sü“nLše
 = 
sü“nBuf
[
y
];

499 
i
 = (
x
 + 
Ën
 - 1);

501 
divid’d
 = 
iz
 / 10;

502 
»mašd”
 = 
iz
 - 
divid’d
 * 10;

503 
iz
 = 
divid’d
;

504 
sü“nLše
[
i
] = (è('0' + 
»mašd”
);

505 
i
--;

507 (
i
 >ğ
x
è&& (
iz
 != 0));

508 ià(
i
 >ğ
x
) {

509 
sü“nLše
[
i
] = 
sign
;

510 
i
--;

513 ià(
sign
 != ' ')

514 
iz
 = -1;

517 ; 
i
 >ğ
x
; i--) {

518 
sü“nLše
[
i
] = ' ';

521  
iz
;

522 
	}
};

524 
public
 
	$putIÁ
(
i
, 
x
, 
y
, 
Ën
) {

525 ià((
y
 < 0è| (y >ğ
rows
)) {

526 
Sü“nExû±iÚ
 
e
 = 
Ãw
 
	`Sü“nExû±iÚ
("Screen:„ow "

527 + 
IÁeg”
.
	`toSŒšg
(
y
) + " out of„ange");

528 
throw
 
e
;

531 ià((
x
 < 0è| (x >ğ
cŞs
)) {

532 
Sü“nExû±iÚ
 
e
 = 
Ãw
 
	`Sü“nExû±iÚ
("Screen: column "

533 + 
IÁeg”
.
	`toSŒšg
(
x
) + " out of„ange");

534 
throw
 
e
;

537 ià((
x
 + 
Ën
è> 
cŞs
) {

538 
Sü“nExû±iÚ
 
e
 = 
Ãw
 
	`Sü“nExû±iÚ
("Screen:†ength "

539 + 
IÁeg”
.
	`toSŒšg
(
Ën
) + "ƒxceeds†eft margin");

540 
throw
 
e
;

543 ià(
Ën
 <= 0) {

544 
Sü“nExû±iÚ
 
e
 = 
Ãw
 
	`Sü“nExû±iÚ
(

546 + 
IÁeg”
.
	`toSŒšg
(
Ën
));

547 
throw
 
e
;

550 
i
 = 
	`´ivIÁ
(i, 
x
, 
y
, 
Ën
);

551 ià(
i
 != 0) {

552 
this
.
	`´ivCh¬Fl
('*', 
x
, 
y
, 
Ën
);

555 ià((
x
 + 
Ën
è> 
lšeEnd
[
y
])

556 
lšeEnd
[
y
] = (
x
 + 
Ën
);

565 
	}
};

567 
public
 
	$putLÚg
(
l
, 
x
, 
y
, 
Ën
) {

568 ià((
y
 < 0è| (y >ğ
rows
)) {

569 
Sü“nExû±iÚ
 
e
 = 
Ãw
 
	`Sü“nExû±iÚ
("Screen:„ow "

570 + 
IÁeg”
.
	`toSŒšg
(
y
) + " out of„ange");

571 
throw
 
e
;

574 ià((
x
 < 0è| (x >ğ
cŞs
)) {

575 
Sü“nExû±iÚ
 
e
 = 
Ãw
 
	`Sü“nExû±iÚ
("Screen: column "

576 + 
IÁeg”
.
	`toSŒšg
(
x
) + " out of„ange");

577 
throw
 
e
;

580 ià((
x
 + 
Ën
è> 
cŞs
) {

581 
Sü“nExû±iÚ
 
e
 = 
Ãw
 
	`Sü“nExû±iÚ
("Screen:†ength "

582 + 
IÁeg”
.
	`toSŒšg
(
Ën
) + "ƒxceeds†eft margin");

583 
throw
 
e
;

586 ià(
Ën
 <= 0) {

587 
Sü“nExû±iÚ
 
e
 = 
Ãw
 
	`Sü“nExû±iÚ
(

589 + 
IÁeg”
.
	`toSŒšg
(
Ën
));

590 
throw
 
e
;

593 
l
 = 
	`´ivLÚg
Ö, 
x
, 
y
, 
Ën
);

594 ià(
l
 != 0) {

595 
this
.
	`´ivCh¬Fl
('*', 
x
, 
y
, 
Ën
);

598 ià((
x
 + 
Ën
è> 
lšeEnd
[
y
])

599 
lšeEnd
[
y
] = (
x
 + 
Ën
);

608 
	}
};

610 
public
 
	$putDoubË
(
SŒšg
 
d
, 
x
, 
y
, 
Ën
) {

611 
	`putText
(
d
, 
x
, 
y
, 
Ën
, 
®ignRight
);

612 
	}
};

614 
public
 
	$putDoubË
(
d
, 
x
, 
y
, 
Ën
, 
äac
) {

615 
i
, 
j
, 
l
;

616 
‹mp
, 
št_·¹
, 
äaù_·¹
;

617 
absŞu‹
;

618 
d‹mp
;

619 
boŞ—n
 
Ãg©ive
 = 
çl£
;

620 ià((
y
 < 0è| (y >ğ
rows
)) {

621 
Sü“nExû±iÚ
 
e
 = 
Ãw
 
	`Sü“nExû±iÚ
("Screen:„ow "

622 + 
IÁeg”
.
	`toSŒšg
(
y
) + " out of„ange");

623 
throw
 
e
;

626 ià((
x
 < 0è| (x >ğ
cŞs
)) {

627 
Sü“nExû±iÚ
 
e
 = 
Ãw
 
	`Sü“nExû±iÚ
("Screen: column "

628 + 
IÁeg”
.
	`toSŒšg
(
x
) + " out of„ange");

629 
throw
 
e
;

632 ià((
x
 + 
Ën
è> 
cŞs
) {

633 
Sü“nExû±iÚ
 
e
 = 
Ãw
 
	`Sü“nExû±iÚ
("Screen:†ength "

634 + 
IÁeg”
.
	`toSŒšg
(
Ën
) + "ƒxceeds†eft margin");

635 
throw
 
e
;

638 ià(
äac
 < 0) {

639 
äac
 = 0;

642 ià(
äac
 > 19) {

643 
äac
 = 19;

648 ià(
äac
 >ğ(
Ën
 - 1)) {

649 
Sü“nExû±iÚ
 
e
 = 
Ãw
 
	`Sü“nExû±iÚ
(

651 + 
IÁeg”
.
	`toSŒšg
(
äac
)

653 + 
IÁeg”
.
	`toSŒšg
(
Ën
));

654 
throw
 
e
;

664 ià(
d
 < 0.0d) {

665 
absŞu‹
 = -
d
;

668 
absŞu‹
 = 
d
;

671 
št_·¹
 = (è
absŞu‹
;

672 
äaù_·¹
 = (è((
absŞu‹
 - 
št_·¹
è* 
d10_Áh
[
äac
] + 0.5d);

674 ià(
d
 < 0.0d) {

675 
št_·¹
 = -int_part;

676 
Ãg©ive
 = 
Œue
;

678 
i
 = 
Ën
 - 
äac
 - 1;

680 
‹mp
 = 
	`´ivIÁL—dšgZ”os
(
äaù_·¹
, 
x
 + 
i
 + 1, 
y
, 
äac
);

682 
sü“nBuf
[
y
][
x
 + 
i
] = '.';

684 ià(
i
 > 0) {

685 
‹mp
 = 
	`´ivIÁ
(
št_·¹
, 
x
, 
y
, 
i
);

686 ià(
‹mp
 != 0L) {

687 
	`´ivCh¬Fl
('*', 
x
, 
y
, 
Ën
);

692 ià(
Ãg©ive
) {

693 
	`´ivCh¬Fl
('*', 
x
, 
y
, 
Ën
);

698 ià((
x
 + 
Ën
è> 
lšeEnd
[
y
])

699 
lšeEnd
[
y
] = (
x
 + 
Ën
);

700 
	}
};

702 
public
 
	$putD©e
(
D©e
 
d
, 
x
, 
y
, 
Ën
) {

703 ià((
y
 < 0è| (y >ğ
rows
)) {

704 
Sü“nExû±iÚ
 
e
 = 
Ãw
 
	`Sü“nExû±iÚ
("Screen:„ow "

705 + 
IÁeg”
.
	`toSŒšg
(
y
) + " out of„ange");

706 
throw
 
e
;

709 ià((
x
 < 0è| (x >ğ
cŞs
)) {

710 
Sü“nExû±iÚ
 
e
 = 
Ãw
 
	`Sü“nExû±iÚ
("Screen: column "

711 + 
IÁeg”
.
	`toSŒšg
(
x
) + " out of„ange");

712 
throw
 
e
;

715 ià((
x
 + 
Ën
è> 
cŞs
) {

716 
Sü“nExû±iÚ
 
e
 = 
Ãw
 
	`Sü“nExû±iÚ
("Screen:†ength "

717 + 
IÁeg”
.
	`toSŒšg
(
Ën
) + "ƒxceeds†eft margin");

718 
throw
 
e
;

721 ià(
Ën
 < 10) {

722 
Sü“nExû±iÚ
 
e
 = 
Ãw
 
	`Sü“nExû±iÚ
(

723 "Sü“n:†’gth " + 
IÁeg”
.
	`toSŒšg
(
Ën
)

725 
throw
 
e
;

735 
ÿËnd¬
.
	`£tTime
(
d
);

736 
this
.
	`´ivIÁL—dšgZ”os
(
ÿËnd¬
.
	`g‘
(
C®’d¬
.
DATE
), 
x
, 
y
, 2);

737 
this
.
	`´ivCh¬
('-', 
x
 + 2, 
y
);

738 
this
.
	`´ivIÁL—dšgZ”os
(
ÿËnd¬
.
	`g‘
(
C®’d¬
.
MONTH
è+ 1, 
x
 + 3, 
y
, 2);

739 
this
.
	`´ivCh¬
('-', 
x
 + 5, 
y
);

740 
this
.
	`´ivIÁL—dšgZ”os
(
ÿËnd¬
.
	`g‘
(
C®’d¬
.
YEAR
), 
x
 + 6, 
y
, 4);

741 ià((
x
 + 
Ën
è> 
lšeEnd
[
y
])

742 
lšeEnd
[
y
] = (
x
 + 
Ën
);

743 
	}
};

745 
public
 
	$putTime
(
D©e
 
d
, 
x
, 
y
, 
Ën
) {

746 ià((
y
 < 0è| (y >ğ
rows
)) {

747 
Sü“nExû±iÚ
 
e
 = 
Ãw
 
	`Sü“nExû±iÚ
("Screen:„ow "

748 + 
IÁeg”
.
	`toSŒšg
(
y
) + " out of„ange");

749 
throw
 
e
;

752 ià((
x
 < 0è| (x >ğ
cŞs
)) {

753 
Sü“nExû±iÚ
 
e
 = 
Ãw
 
	`Sü“nExû±iÚ
("Screen: column "

754 + 
IÁeg”
.
	`toSŒšg
(
x
) + " out of„ange");

755 
throw
 
e
;

758 ià((
x
 + 
Ën
è> 
cŞs
) {

759 
Sü“nExû±iÚ
 
e
 = 
Ãw
 
	`Sü“nExû±iÚ
("Screen:†ength "

760 + 
IÁeg”
.
	`toSŒšg
(
Ën
) + "ƒxceeds†eft margin");

761 
throw
 
e
;

764 ià(
Ën
 < 8) {

765 
Sü“nExû±iÚ
 
e
 = 
Ãw
 
	`Sü“nExû±iÚ
(

766 "Sü“n:†’gth " + 
IÁeg”
.
	`toSŒšg
(
Ën
)

768 
throw
 
e
;

778 
ÿËnd¬
.
	`£tTime
(
d
);

779 
this
.
	`´ivIÁL—dšgZ”os
(
ÿËnd¬
.
	`g‘
(
C®’d¬
.
HOUR
), 
x
, 
y
, 2);

780 
this
.
	`´ivCh¬
(':', 
x
 + 2, 
y
);

781 
this
.
	`´ivIÁL—dšgZ”os
(
ÿËnd¬
.
	`g‘
(
C®’d¬
.
MINUTE
), 
x
 + 3, 
y
, 2);

782 
this
.
	`´ivCh¬
(':', 
x
 + 5, 
y
);

783 
this
.
	`´ivIÁL—dšgZ”os
(
ÿËnd¬
.
	`g‘
(
C®’d¬
.
SECOND
), 
x
 + 6, 
y
, 2);

784 ià((
x
 + 
Ën
è> 
lšeEnd
[
y
])

785 
lšeEnd
[
y
] = (
x
 + 
Ën
);

786 
	}
};

788 
public
 
	$putDŞÏrs
(
BigDecim®
 
d
, 
x
, 
y
, 
Ën
) {

789 
SŒšg
 
dŞÏrV®ue
 = 
d
.
	`toSŒšg
();

790 
size
 = 
dŞÏrV®ue
.
	`Ëngth
();

792 ià(
d
.
	`signum
() > 0) {

793 
sü“nBuf
[
y
][
x
] = '$';

794 
	`putText
(
dŞÏrV®ue
, 
x
 + 1, 
y
, 
size
, 
®ignRight
);

797 
	`putText
(
dŞÏrV®ue
, 
x
, 
y
, 
size
, 
®ignRight
);

799 ià((
x
 + 
Ën
è> 
lšeEnd
[
y
])

800 
lšeEnd
[
y
] = (
x
 + 
Ën
);

801 
	}
}

803 
public
 
	$putDŞÏrs
(
d
, 
x
, 
y
, 
Ën
) {

804 
äac
 = 2;

805 
i
, 
j
, 
l
, 
št_·¹
, 
äaù_·¹
;

806 
‹mp
;

807 
absŞu‹
;

808 
d‹mp
;

809 
boŞ—n
 
Ãg©ive
 = 
çl£
;

810 ià((
y
 < 0è| (y >ğ
rows
)) {

811 
Sü“nExû±iÚ
 
e
 = 
Ãw
 
	`Sü“nExû±iÚ
("Screen:„ow "

812 + 
IÁeg”
.
	`toSŒšg
(
y
) + " out of„ange");

813 
throw
 
e
;

816 ià((
x
 < 0è| (x >ğ
cŞs
)) {

817 
Sü“nExû±iÚ
 
e
 = 
Ãw
 
	`Sü“nExû±iÚ
("Screen: column "

818 + 
IÁeg”
.
	`toSŒšg
(
x
) + " out of„ange");

819 
throw
 
e
;

822 ià((
x
 + 
Ën
è> 
cŞs
) {

823 
Sü“nExû±iÚ
 
e
 = 
Ãw
 
	`Sü“nExû±iÚ
("Screen:†ength "

824 + 
IÁeg”
.
	`toSŒšg
(
Ën
) + "ƒxceeds†eft margin");

825 
throw
 
e
;

828 ià(
äac
 >ğ(
Ën
 - 1)) {

829 
Sü“nExû±iÚ
 
e
 = 
Ãw
 
	`Sü“nExû±iÚ
(

831 + 
IÁeg”
.
	`toSŒšg
(
äac
)

833 + 
IÁeg”
.
	`toSŒšg
(
Ën
));

834 
throw
 
e
;

844 ià(
d
 < 0.0d) {

845 
absŞu‹
 = -
d
;

848 
absŞu‹
 = 
d
;

851 
št_·¹
 = (è
absŞu‹
;

852 
äaù_·¹
 = (è((
absŞu‹
 - 
št_·¹
è* 
d10_Áh
[
äac
] + 0.5d);

857 ià(
äaù_·¹
 > 99) {

858 
št_·¹
++;

859 
äaù_·¹
 = fract_part - 100;

862 ià(
d
 < 0.0d) {

863 
št_·¹
 = -int_part;

864 
Ãg©ive
 = 
Œue
;

866 
i
 = 
Ën
 - 
äac
 - 1;

868 
‹mp
 = 
	`´ivIÁL—dšgZ”os
(
äaù_·¹
, 
x
 + 
i
 + 1, 
y
, 
äac
);

870 
sü“nBuf
[
y
][
x
 + 
i
] = '.';

872 ià(
i
 > 0) {

873 
sign
 = '$';

874 ià(
Ãg©ive
)

875 
sign
 = '-';

876 
‹mp
 = 
	`´ivIÁ
(
št_·¹
, 
sign
, 
x
, 
y
, 
i
);

877 ià(
‹mp
 != 0L) {

878 
	`´ivCh¬Fl
('*', 
x
, 
y
, 
Ën
);

883 ià(
Ãg©ive
) {

884 
	`´ivCh¬Fl
('*', 
x
, 
y
, 
Ën
);

889 ià((
x
 + 
Ën
è> 
lšeEnd
[
y
])

890 
lšeEnd
[
y
] = (
x
 + 
Ën
);

891 
	}
};

893 
public
 
SŒšg
 
	$g‘Lše
(
lše
) {

894  
Ãw
 
	`SŒšg
(
sü“nBuf
[
lše
]);

895 
	}
}

897 
public
 
	$g‘LšeCouÁ
() {

898  
rows
;

899 
	}
}

901 
public
 
	$di¥Ïy
(
PrštSŒ—m
 
out
) {

902 
x
, 
y
;

903 
Ën
;

904 
lše
[];

905 
Œy
 {

906 
y
 = 0; y < 
rows
; y++) {

907 
Ën
 = 
lšeEnd
[
y
];

908 ià(
Ën
 > 0) {

909 
lše
 = 
sü“nBuf
[
y
];

910 
SŒšg
 
¦še
 = 
Ãw
 
	`SŒšg
(
lše
, 0, 
Ën
);

911 
out
.
	`´šn
(
¦še
);

914 
out
.
	`´šn
();

918 
out
.
	`æush
();

920 
	`ÿtch
 (
Exû±iÚ
 
e
) {

921 
Sy¡em
.
out
.
	`´šn
("IOExû±iÚ:" + 
e
.
	`g‘Mes§ge
());

922 
e
.
	`´štSckT¿û
();

923 
Sü“nExû±iÚ
 
exû±
 = 
Ãw
 
	`Sü“nExû±iÚ
("file writeƒrror");

924 
throw
 
exû±
;

927 
	}
};

929 
public
 
	gSŒšg
[] 
	$v®id©e
() {

930 
x
, 
y
;

931 
Ën
;

932 
lše
[];

933 
SŒšg
 
¦še
[] = 
Ãw
 SŒšg[
rows
];

934 
y
 = 0; y < 
rows
; y++) {

935 
Ën
 = 
lšeEnd
[
y
];

936 ià(
Ën
 > 0) {

937 
lše
 = 
sü“nBuf
[
y
];

938 
¦še
[
y
] = 
Ãw
 
	`SŒšg
(
lše
, 0, 
Ën
);

941 
¦še
[
y
] = 
Ãw
 
	`SŒšg
("");

944  
¦še
;

945 
	}
}

947 
public
 
synchrÚized
 
	$di¥Ïy
() {

948 
x
, 
y
;

949 
Ën
;

950 
bIndex
;

951 
lše
[];

952 
Œy
 {

953 
bIndex
 = 0;

954 
y
 = 0; y < 
rows
; y++) {

955 
Ën
 = 
lšeEnd
[
y
];

956 ià(
Ën
 > 0) {

957 
lše
 = 
sü“nBuf
[
y
];

958 
x
 = 0; x < 
Ën
; x++) {

959 
buf
[
bIndex
++] = (
by‹
è
lše
[
x
];

964 
buf
[
bIndex
++] = 10;

967 
fout
.
	`wr™e
(
buf
, 0, 
bIndex
);

969 
	`ÿtch
 (
IOExû±iÚ
 
e
) {

970 
Sy¡em
.
out
.
	`´šn
("IOExû±iÚ:" + 
e
.
	`g‘Mes§ge
());

971 
e
.
	`´štSckT¿û
();

972 
Sü“nExû±iÚ
 
exû±
 = 
Ãw
 
	`Sü“nExû±iÚ
("screen writeƒrror");

973 
throw
 
exû±
;

976 
	}
};

	@spec/jbb/infra/Util/XMLTransactionLog.java

9 
·ckage
 
	g¥ec
.
	gjbb
.
	gšäa
.
	gUt
;

11 
impÜt
 
	gjava
.
	gio
.
	gFeOuutSŒ—m
;

12 
impÜt
 
	gjava
.
	gio
.
	gFeDesütÜ
;

13 
impÜt
 
	gjava
.
	gut
.
	gA¼ayLi¡
;

14 
impÜt
 
	gjavax
.
	gxml
.
	g·r£rs
.
	gDocum’tBud”
;

15 
impÜt
 
	gjavax
.
	gxml
.
	g·r£rs
.
	gDocum’tBud”FaùÜy
;

16 
impÜt
 
	gjavax
.
	gxml
.
	g·r£rs
.
	gP¬£rCÚfigu¿tiÚExû±iÚ
;

17 
impÜt
 
	gÜg
.
	gxml
.
	g§x
.
	gSAXExû±iÚ
;

18 
impÜt
 
	gjava
.
	gio
.
	gIOExû±iÚ
;

19 
impÜt
 
	gÜg
.
	gw3c
.
	gdom
.*;

21 şas 
	cXMLLšeDocum’tExû±iÚ
 
ex‹nds
 
	mRuÁimeExû±iÚ
 {

25 
´iv©e
 
fš®
 
	m£rŸlV”siÚUID
 = 1L;

28 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

35 
	$XMLLšeDocum’tExû±iÚ
() {

36 
	`su³r
();

39 
	$XMLLšeDocum’tExû±iÚ
(
SŒšg
 
s
) {

40 
	`su³r
(
s
);

41 
	}
};

44 
public
 cÏs 
	cXMLT¿n§ùiÚLog
 {

46 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

53 
FeOuutSŒ—m
 
	mfout
 = 
Ãw
 FeOuutSŒ—m(
FeDesütÜ
.
out
);

55 
Docum’t
 
	m‹m¶©eDocum’t
;

57 
Docum’tBud”
 
	mbud”
;

60 
Docum’tBud”FaùÜy
 
	mçùÜy
 = Docum’tBud”FaùÜy.
ÃwIn¡ªû
();

61 
	mŒy
 {

62 
	mbud”
 = 
çùÜy
.
ÃwDocum’tBud”
();

63 
	m‹m¶©eDocum’t
 = 
bud”
.
·r£
("xml/template-document.xml");

65 
ÿtch
 (
SAXExû±iÚ
 
sxe
) {

67 
	mSy¡em
.
	m”r


68 .
´šn
("SAX Error inemplate-document initialization.");

69 
Exû±iÚ
 
	mex
 = 
sxe
;

70 ià(
	msxe
.
g‘Exû±iÚ
(è!ğ
nuÎ
)

71 
ex
 = 
sxe
.
g‘Exû±iÚ
();

72 
	mex
.
´štSckT¿û
();

73 
	mSy¡em
.
ex™
(1);

75 
ÿtch
 (
P¬£rCÚfigu¿tiÚExû±iÚ
 
pû
) {

77 
	mSy¡em
.
	m”r


78 .
´šn
("Parser configurationƒrror inemplate-document initialization.");

79 
	mpû
.
´štSckT¿û
();

80 
	mSy¡em
.
ex™
(1);

82 
ÿtch
 (
IOExû±iÚ
 
iÛ
) {

84 
	mSy¡em
.
	m”r


85 .
´šn
("I/Oƒrror inemplate-document initialization.");

86 
	miÛ
.
´štSckT¿û
();

87 
	mSy¡em
.
ex™
(1);

91 
´iv©e
 
	gA¼ayLi¡
<
	gNode
> 
	glšeCache
 = 
nuÎ
;

93 
Docum’t
 
	gdocum’t
;

95 
public
 
	$XMLT¿n§ùiÚLog
() {

97 
lšeCache
 = 
Ãw
 
A¼ayLi¡
<
Node
>(0);

99 
	`cİy
(
‹m¶©eDocum’t
);

100 
	}
}

102 
public
 
	$pİuÏ‹XML
(
T¿n§ùiÚLogBufãr
 
log_bufãr
) {

103 
i
 = 0; i < 
log_bufãr
.
	`g‘LšeCouÁ
(); i++) {

104 
	`putLše
(
log_bufãr
.
	`g‘Lše
(
i
), i);

106 
	}
}

108 
public
 
	$ş—r
() {

109 
EËm’t
 
ba£EËm’t
 = 
docum’t
.
	`g‘Docum’tEËm’t
();

110 
Node
 
cu¼’t_node
 = 
ba£EËm’t
.
	`g‘La¡Chd
();

111 
Node
 
Ãxt_node
 = 
nuÎ
;

112 (
Ãxt_node
 = 
cu¼’t_node
.
	`g‘P»viousSiblšg
()è!ğ
nuÎ
) {

113 
Node
 
lšeNode
 = 
ba£EËm’t
.
	`»moveChd
(
cu¼’t_node
);

114 ià(
lšeNode
.
	`g‘NodeName
().
	`equ®s
("Line")) {

116 
lšeNode
.
	`g‘La¡Chd
().g‘La¡Chd().
	`£tNodeV®ue
("");

118 
lšeCache
.
	`add
(
lšeNode
);

120 
cu¼’t_node
 = 
Ãxt_node
;

122 
	}
};

124 
public
 
	$cİy
(
Docum’t
 
ma¡”
) {

126 
docum’t
 = (
Docum’t
è
ma¡”
.
	`şÚeNode
(
Œue
);

127 
	}
}

129 
´iv©e
 
fš®
 
	$putLše
(
SŒšg
 
s
, 
n
) {

130 
lše_numb”
 = 
n
;

131 
Node
 
jbbDocum’t
 = 
docum’t
.
	`g‘La¡Chd
();

134 
ÿcheL’gth
 = 
lšeCache
.
	`size
();

135 ià(
ÿcheL’gth
 > 0) {

137 
Node
 
lšeNode
 = 
lšeCache
.
	`»move
(
ÿcheL’gth
 - 1);

138 
jbbDocum’t
.
	`­³ndChd
(
lšeNode
);

140 
lšeNode
.
	`g‘La¡Chd
().g‘La¡Chd().
	`£tNodeV®ue
(
s
);

144 
EËm’t
 
lšeNode
 = (EËm’tè
docum’t
.
	`ü—‹EËm’t
("Line");

145 
jbbDocum’t
.
	`­³ndChd
(
lšeNode
);

146 
EËm’t
 
ÃwD©a
 = (EËm’tè
docum’t
.
	`ü—‹EËm’t
("LineData");

147 
lšeNode
.
	`­³ndChd
(
ÃwD©a
);

148 
Node
 
Ãw_node
 = 
docum’t
.
	`ü—‹TextNode
(
s
);

149 
ÃwD©a
.
	`­³ndChd
(
Ãw_node
);

151 
	}
}

	@spec/jbb/validity/Check.java

16 
·ckage
 
	g¥ec
.
	gjbb
.
	gv®id™y
;

18 
impÜt
 
	gjavax
.
	gxml
.
	g·r£rs
.
	gDocum’tBud”
;

19 
impÜt
 
	gjavax
.
	gxml
.
	g·r£rs
.
	gDocum’tBud”FaùÜy
;

20 
impÜt
 
	gjavax
.
	gxml
.
	g·r£rs
.
	gP¬£rCÚfigu¿tiÚExû±iÚ
;

21 
impÜt
 
	gÜg
.
	gw3c
.
	gdom
.*;

23 
public
 cÏs 
	cCheck
 {

25 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

32 
public
 
boŞ—n
 
	$doCheck
() {

33 
Sy¡em
.
out
.
	`´šn
("\nChecking JVM\n");

34 
boŞ—n
 
ÿughtIndex
 = 
çl£
;

35 
boŞ—n
 
gÙToFš®ly
 = 
çl£
;

36 
boŞ—n
 
”rÜ
 = 
çl£
;

37 
Œy
 {

38 [] 
a
 = 
Ãw
 [10];

39 
i
 = 0; i <= 10; i++)

40 
a
[
i
] = i;

41 
Sy¡em
.
out
.
	`´šn
("Error:‡rray bounds‚ot checked");

42 
”rÜ
 = 
Œue
;

44 
	`ÿtch
 (
A¼ayIndexOutOfBoundsExû±iÚ
 
e
) {

45 
ÿughtIndex
 = 
Œue
;

47 
fš®ly
 {

48 
gÙToFš®ly
 = 
Œue
;

50 ià(!
ÿughtIndex
) {

51 
Sy¡em
.
out


52 .
	`´šn
("1st boundsestƒrror:\tindexƒxception‚ot„eceived");

53 
”rÜ
 = 
Œue
;

55 ià(!
gÙToFš®ly
) {

56 
Sy¡em
.
out


57 .
	`´šn
("1st boundsestƒrror:\tfinally clause‚otƒxecuted");

58 
”rÜ
 = 
Œue
;

60 ià(
ÿughtIndex
 && 
gÙToFš®ly
)

61 
Sy¡em
.
out
.
	`´šn
("1st boundsest:\tOK");

62 ià(
	`checkSubşassšg
())

63 
”rÜ
 = 
Œue
;

64 ià(
	`checkXMLE¼ÜCheckšg
())

65 
”rÜ
 = 
Œue
;

66 
LoİBounds
 
muË
 = 
Ãw
 
	`LoİBounds
();

67 
LoİBounds
.
	`run
();

68 ià(
LoİBounds
.
gÙE¼Ü
) {

69 
Sy¡em
.
out
.
	`´šn
("2nd boundsest:\tfailed");

70 
”rÜ
 = 
Œue
;

73 
Sy¡em
.
out
.
	`´šn
("2nd boundsest:\tOK");

75 
P•Te¡
 
hÜ£
 = 
Ãw
 
	`P•Te¡
();

76 
hÜ£
.
	`š¡ªûMaš
();

77 ià(
hÜ£
.
gÙE¼Ü
)

78 
”rÜ
 = 
Œue
;

79 ià(
”rÜ
)

80 
Sy¡em
.
out
.
	`´šn
("\nINVALID: JVM Check detectedƒrror(s)");

82 
Sy¡em
.
out
.
	`´šn
("\nJVM Check OK");

83  
”rÜ
;

86 
´iv©e
 
boŞ—n
 
	$checkSubşassšg
() {

87 
boŞ—n
 
”rÜ
 = 
çl£
;

88 
Su³r
 
sup
 = 
Ãw
 
	`Su³r
(3);

89 
Sub
 
sub
 = 
Ãw
 
	`Sub
(3);

90 
Sy¡em
.
out
.
	`´šn
(
sup
.
	`g‘Name
(è+ ": " + sup.
	`toSŒšg
());

91 
Sy¡em
.
out
.
	`´šn
(
sub
.
	`g‘Name
(è+ ": " + sub.
	`toSŒšg
());

92 ià(!
sup
.
	`toSŒšg
().
	`equ®s
(

94 
”rÜ
 = 
Œue
;

95 ià(!
sub
.
	`toSŒšg
().
	`equ®s
(

97 
”rÜ
 = 
Œue
;

98 
Sy¡em
.
out
.
	`´šn
("Su³r:…rÙ=" + 
sup
.
	`g‘PrÙeùed
() + ",…riv="

99 + 
sup
.
	`g‘Priv©e
());

100 
Sy¡em
.
out
.
	`´šn
("Sub:…rÙ=" + 
sub
.
	`g‘PrÙeùed
() + ",…riv="

101 + 
sub
.
	`g‘Priv©e
());

102 ià(
sup
.
	`g‘PrÙeùed
(è!ğ33 || sup.
	`g‘Priv©e
() != 32)

103 
”rÜ
 = 
Œue
;

104 ià(
sub
.
	`g‘PrÙeùed
(è!ğ111 || sub.
	`g‘Priv©e
() != 105)

105 
”rÜ
 = 
Œue
;

106 
Sy¡em
.
out
.
	`´šn
("Subşas ‹¡ " + (
”rÜ
 ? "error" : "OK"));

107  
”rÜ
;

108 
	}
}

110 
´iv©e
 
boŞ—n
 
	$checkXMLE¼ÜCheckšg
() {

112 
boŞ—n
 
”rÜ
 = 
çl£
;

113 
Docum’t
 
docum’t
;

114 
Docum’tBud”
 
bud”
;

115 
Docum’tBud”FaùÜy
 
çùÜy
 = Docum’tBud”FaùÜy.
	`ÃwIn¡ªû
();

116 
Œy
 {

117 
bud”
 = 
çùÜy
.
	`ÃwDocum’tBud”
();

118 
docum’t
 = 
bud”
.
	`ÃwDocum’t
();

119 
boŞ—n
 
»suÉ
 = 
çl£
;

120 
»suÉ
 = 
docum’t
.
	`g‘SŒiùE¼ÜCheckšg
();

124 ià(
»suÉ
)

125 
”rÜ
 = 
çl£
;

127 
”rÜ
 = 
Œue
;

128 
Sy¡em
.
out
.
	`´šn
("XML StrictErrorCheckingest: "

129 + (
”rÜ
 ? "error" : "OK"));

131 
	`ÿtch
 (
P¬£rCÚfigu¿tiÚExû±iÚ
 
pû
) {

133 
pû
.
	`´štSckT¿û
();

135  
”rÜ
;

136 
	}
}

	@spec/jbb/validity/LoopBounds.java

18 
·ckage
 
	g¥ec
.
	gjbb
.
	gv®id™y
;

20 
impÜt
 
	gjava
.
	gut
.
	gVeùÜ
;

22 şas 
	cLoİBounds
 {

24 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

31 
´Ùeùed
 
VeùÜ
 
	mv
;

33 
public
 
boŞ—n
 
	mgÙE¼Ü
 = 
çl£
;

35 
public
 
	$LoİBounds
() {

36 
v
 = 
Ãw
 
	`VeùÜ
();

37 
f0
 = 0;

38 
f1
 = 1;

39 
i
 = 0; i < 20; i++) {

40 
v
.
	`addEËm’t
(
f1
);

41 
f
 = 
f0
 + 
f1
;

42 
f0
 = 
f1
;

43 
f1
 = 
f
;

47 
public
 
	$size
() {

48  
v
.
	`size
();

49 
	}
}

51 
public
 
	$cÚ¡¿štAt
(
šdex
) {

52 
Objeù
 
o
 = 
v
.
	`–em’tAt
(
šdex
);

53 ià(
o
 
š¡ªûof
 
IÁeg”
)

54  ((
IÁeg”
è
o
).
	`štV®ue
();

57 
	}
}

59 
public
 
	$execu‹
() {

60 
i
 = 0; i < 
	`size
(); ++i) {

63 
Sy¡em
.
out
.
	`´št
(
	`cÚ¡¿štAt
(
i
) + " ");

65 
Sy¡em
.
out
.
	`´šn
();

66 
	}
}

68 
public
 
	$maš
(
SŒšg
[] 
¬gs
) {

69 
	`run
();

70 
	}
}

72 
public
 
	$run
() {

73 (
Ãw
 
	`LoİBounds
()).
	`execu‹
();

74 
SŒšg
 
Çme
 = "spec.jbb.validity.LoopBounds2";

75 
Œy
 {

76 
CÏss
 
c
 = CÏss.
	`fÜName
(
Çme
);

77 
Objeù
 
o
 = 
c
.
	`ÃwIn¡ªû
();

78 ià(!(
o
 
š¡ªûof
 
LoİBounds
)) {

79 
Sy¡em
.
out
.
	`´šn
(
Çme
 + " is‚ot‡ LoopBounds\n");

80 
gÙE¼Ü
 = 
Œue
;

83 ((
LoİBounds
è
o
).
	`execu‹
();

85 
	`ÿtch
 (
Exû±iÚ
 
e
) {

86 
Sy¡em
.
out
.
	`´šn
("E¼Ü " + 
e
);

87 
gÙE¼Ü
 = 
Œue
;

89 
	}
}

92 şas 
	cLoİBounds2
 
ex‹nds
 
	mLoİBounds
 {

94 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

101 
´iv©e
 
	mn
 = 0;

103 
public
 
	$size
() {

104 ià(
n
 > 4 &&‚ % 2 == 1)

105 
v
.
	`š£¹EËm’tAt
(
Ãw
 
	`DoubË
(1.0 / 
n
), 6);

106  
v
.
	`size
(è- 
n
++;

108 
	}
}

	@spec/jbb/validity/PepTest.java

27 
·ckage
 
	g¥ec
.
	gjbb
.
	gv®id™y
;

31 
impÜt
 
	gjava
.
	gio
.
	gPrštSŒ—m
;

32 
impÜt
 
	gjava
.
	gut
.
	gRªdom
;

35 şas 
	csyncTe¡
 {

41 
fš®
 
SŒšg
 
	mCOPYRIGHT
 =

59 
	mx
 = 5;

63 
synchrÚized
 
	$syncM‘hod
(
y
) {

65 
x
 = x + 
y
;

67  
x
;

73 
synchrÚized
 
	$syncM‘hod2
(
y
è
throws
 
java
.
Ïng
.
Ar™hm‘icExû±iÚ
 {

75 
x
 = x + 
y
;

77 ià(
x
 == 99)

79 
	`throw
(
Ãw
 
java
.
Ïng
.
	`Ar™hm‘icExû±iÚ
("fisk"));

81  
x
;

83 
	}
}

87 
public
 
	$maš
(
SŒšg
[] 
¬gs
) {

89 
syncTe¡
 
sy
 = 
Ãw
 
	`syncTe¡
();

91 
xx
 = 
sy
.
	`syncM‘hod
(4);

93 
xx
 = 
sy
.
	`syncM‘hod2
(4);

95 
	}
}

101 şas 
	cSŒšgAndIÁ
 
im¶em’ts
 
	mClÚ—bË
 {

103 
SŒšg
 
	ms
;

105 
	mi
;

107 
public
 
	mjava
.
	mÏng
.
Objeù
 
	$şÚe
() {

109 
Œy
 {

111  
su³r
.
	`şÚe
();

113 } 
	`ÿtch
 (
java
.
Ïng
.
ClÚeNÙSuµÜ‹dExû±iÚ
 
exc
) {

115  
nuÎ
;

121 
	}
}

125 şas 
	csu³rCÏss
 
im¶em’ts
 
	mClÚ—bË
 {

127 
public
 
	mv®
 = 1;

129 
public
 
	$g‘V®
(è{  
v®
; }

131 
public
 
SŒšg
 
	$şassName
(è{  "su³rCÏss"; 
	}
}

135 
public
 
	gbÙhV¬AndM‘hod
 = 7;

137 
public
 
	$bÙhV¬AndM‘hod
(è{  8; 
	}
}

139 
public
 
	$bÙhV¬AndM‘hod
(
x
è{ 
bÙhV¬AndM‘hod
 = x; 
	}
}

145 şas 
	csubCÏss
 
ex‹nds
 
	msu³rCÏss
 {

147 
public
 
	mv®
 = 2;

149 
public
 
	msubv®
 = 4;

151 
public
 
	$g‘V®
(è{  
v®
; }

153 
public
 
SŒšg
 
	$şassName
(è{  "subCÏss"; 
	}
}

159 
š‹rçû
 
	gSideIÁf
 {}

161 
š‹rçû
 
	gC2štf
 {}

163 
š‹rçû
 
C3štf
 
ex‹nds
 
	gC2štf
, 
	gSideIÁf
 {}

167 şas 
	cC1
 {

169 
	mx1
;

175 şas 
	cC2
 
ex‹nds
 
C1
 
im¶em’ts
 
	mC2štf
 {

177 
	mx2
;

183 şas 
	cC3
 
ex‹nds
 
C2
 
im¶em’ts
 
	mC3štf
 {

185 
	mx3
;

193 şas 
	cP•Te¡
 {

195 
public
 
	mfisk
;

197 
public
 
boŞ—n
 
	mgÙE¼Ü
 = 
çl£
;

199 
´iv©e
 
PrštSŒ—m
 
	mout
 = 
Sy¡em
.
out
;

201 
´iv©e
 
fš®
 
boŞ—n
 
	md–ib”©eE¼ÜFÜTe¡
 = 
çl£
;

205 
SŒšg
 
	$‹¡Div
() {

207 
out
.
	`´št
("testDiv: ");

209 
a
, 
b
;

211 
c
, 
d
;

213 
e
, 
f
;

215 
a
 = 
b
 = 7; if ( 1 !=‡ / b)  "failed 1";

217 
a
 = -a; ià(-1 !ğ¨/ 
b
)  "failed 2";

219 
a
 = 
b
 = 600000000; if ( 1 !=‡ / b)  "failed 1.1";

221 
a
 = -a; ià(-1 !ğ¨/ 
b
)  "failed 2.1";

223 
c
 = 
d
 = 8L; if ( 1 != c / d)  "failed 3";

225 
c
 = -c; ià(-1 !ğø/ 
d
)  "failed 4";

227 
c
 = 
d
 = 600000000L; if ( 1 != c / d)  "failed 3.1";

229 
c
 = -c; ià(-1 !ğø/ 
d
)  "failed 4.1";

231 
b
 = 0;

233 
Œy
 {

235 
a
 =‡ / 
b
;

239 } 
	`ÿtch
 (
java
.
Ïng
.
Exû±iÚ
 
x
) {

245 
d
 = 0;

247 
Œy
 {

249 
c
 = c / 
d
;

253 } 
	`ÿtch
 (
java
.
Ïng
.
Exû±iÚ
 
x
) {

259 
Œy
 {

261 
c
 = c % 
d
;

265 } 
	`ÿtch
 (
java
.
Ïng
.
Exû±iÚ
 
x
) {

271 
e
 = 
f
 = 7.0;

273 ià(1.0 !ğ
e
 / 
f
)  "failed 7";

275 
e
 = -e;

277 ià(-1.0 !ğ
e
 / 
f
)  "failed 8";

279 
f
 = 0.0;

281 
Œy
 {

283 
e
 =ƒ / 
f
;

285 } 
	`ÿtch
 (
java
.
Ïng
.
Exû±iÚ
 
x
) {

291 
Œy
 {

293 
e
 =ƒ % 
f
;

295 
e
 = 5.6 % 
f
;

297 } 
	`ÿtch
 (
java
.
Ïng
.
Exû±iÚ
 
x
) {

303  
nuÎ
;

309 
SŒšg
 
	$‹¡If
() {

311 
out
.
	`´št
("testIf: ");

313 
a
 = 3, 
b
, 
c
;

315 
b
 = 
a
;

317 if(
b
 * b == 9)

319 
b
 = 1;

325 ià(
b
 != 1)

329 
a
 = 0;

331 
b
 = 0;

333 
c
 = 0;

335 ià(
a
 == 0)

337 ià(
b
 == 0)

339 
c
 = 1;

343 
c
 = 2;

347 ià(
b
 == 0)

349 
c
 = 3;

353 
c
 = 4;

355 ià(
c
 != 1)

359 
a
 = 0;

361 
b
 = 1;

363 
c
 = 0;

365 ià(
a
 == 0)

367 ià(
b
 == 0)

369 
c
 = 1;

373 
c
 = 2;

377 ià(
b
 == 0)

379 
c
 = 3;

383 
c
 = 4;

385 ià(
c
 != 2)

389 
a
 = 1;

391 
b
 = 0;

393 
c
 = 0;

395 ià(
a
 == 0)

397 ià(
b
 == 0)

399 
c
 = 1;

403 
c
 = 2;

407 ià(
b
 == 0)

409 
c
 = 3;

413 
c
 = 4;

415 ià(
c
 != 3)

419 
a
 = 1;

421 
b
 = 1;

423 
c
 = 0;

425 ià(
a
 == 0)

427 ià(
b
 == 0)

429 
c
 = 1;

433 
c
 = 2;

437 ià(
b
 == 0)

439 
c
 = 3;

443 
c
 = 4;

445 ià(
c
 != 4)

449  
nuÎ
;

451 
	}
}

455 
	$shiáAnd
(
v
, 
s
è{  (v >>> sè& 0xFF; 
	}
}

459 
SŒšg
 
	$‹¡B™Ops
() {

463 
out
.
	`´št
("testBitOps: ");

465 
v
 = 0xcafebabe;

467 ià(
	`shiáAnd
(
v
, 24) != 0xca)  "bad shift-and 1";

469 ià(
	`shiáAnd
(
v
, 16) != 0xfe)  "bad shift-and 2";

471 ià(
	`shiáAnd
(
v
, 8) != 0xba)  "bad shift-and 3";

473 ià(
	`shiáAnd
(
v
, 0) != 0xbe)  "bad shift-and 4";

475  
nuÎ
;

477 
	}
}

481 
SŒšg
 
	$‹¡FÜ
() {

483 
s
 = 0;

485 
out
.
	`´št
("testFor: ");

487 
a
 = 0;‡ < 100;‡++)

489 
b
 = 
a
; b >=0; b = b - 2)

491 
s
 = 
a
 + s + 
b
;

493 ià(
s
 != 252450)

497  
nuÎ
;

499 
	}
}

503 
SŒšg
 
	$‹¡TabËSw™ch
() {

505 
out
.
	`´št
("testTableSwitch: ");

507 
s
 = 2, 
r
;

509 
s
 = s * 3;

511 
s
) {

515 4: 
r
 = 0; ;

519 2: 
r
 = 1; ;

525 6: 
r
 = 3; ;

527 : 
r
 = -1;

531 iàĞ
r
 != 3)

535 
s
 = s + 100;

537 
s
) {

541 4: 
r
 = 0; ;

545 2: 
r
 = 1; ;

551 6: 
r
 = 3; ;

553 : 
r
 = -1;

557 iàĞ
r
 != -1)

561  
nuÎ
;

563 
	}
}

567 
SŒšg
 
	$‹¡LookupSw™ch
() {

569 
out
.
	`´št
("testLookupSwitch: ");

571 
s
 = 2, 
r
;

573 
s
 = s * 3000;

575 
s
) {

579 4000: 
r
 = 0; ;

583 2000: 
r
 = 1; ;

589 6000: 
r
 = 3; ;

591 : 
r
 = -1;

595 iàĞ
r
 != 3)

599 
s
 = s + 999999999;

601 
s
) {

605 4000: 
r
 = 0; ;

609 2000: 
r
 = 1; ;

615 6000: 
r
 = 3; ;

617 : 
r
 = -1;

621 iàĞ
r
 != -1)

625  
nuÎ
;

627 
	}
}

631 
SŒšg
 
	$‹¡Hidd’F›ld
() {

633 
out
.
	`´št
("testHiddenField: ");

635 
subCÏss
 
f2
 = 
Ãw
 
	`subCÏss
();

637 
su³rCÏss
 
f1
 = 
f2
;

639 ià(
f1
.
v®
 != 1)

643 ià(
f2
.
v®
 != 2)

647 ià(
f1
.
	`g‘V®
() != 2)

651 ià(
f2
.
	`g‘V®
() != 2)

655  
nuÎ
;

657 
	}
}

661 
	$´štTime
() {

663 
java
.
ut
.
D©e
 
now
 = 
Ãw
 java.ut.
	`D©e
();

665 
out
.
	`´št
("Time‚ow is ");

667 
out
.
	`´št
(
now
.
	`toSŒšg
());

669 
out
.
	`´št
(", ms: ");

671 
out
.
	`´šn
(
Sy¡em
.
	`cu¼’tTimeMlis
());

673 
	}
}

677 
SŒšg
 
	$checkIn¡
(
su³rCÏss
 
x
, 
boŞ—n
 
r1
, boŞ—À
r2
, boŞ—À
r3
, 
c
) {

679  
	`checkIn¡2
(
x
, 
r1
, x 
š¡ªûof
 
su³rCÏss
, "superClass") +

681 
	`checkIn¡2
(
x
, 
r2
, x 
š¡ªûof
 
subCÏss
, "subClass") +

683 
	`checkIn¡2
(
x
, 
r3
, x 
š¡ªûof
 
ClÚ—bË
, "Cloneable");

685 
	}
}

689 
SŒšg
 
	$checkIn¡2
(
su³rCÏss
 
x
, 
boŞ—n
 
ex³ùed
, boŞ—À
gÙ
, 
SŒšg
 
ú
) {

691 ià(
ex³ùed
 =ğ
gÙ
)  "";

693  "Faed: '¨" + 
x
.
	`g‘CÏss
().
	`g‘Name
() + "' instanceof " +

695 
ú
 + " (»tuºed: " + 
gÙ
 + ", should be: " + 
ex³ùed
 + ")\n";

697 
	}
}

701 
SŒšg
 
	$checkIn¡ªûOf
() {

703 
out
.
	`´št
("checkInstanceOf: ");

713 ià(!((
Ãw
 
su³rCÏss
[2]è
š¡ªûof
 superClass[]))

719 ià(!((
Ãw
 
subCÏss
[2]è
š¡ªûof
 
su³rCÏss
[]))

725 ià((
Ãw
 
su³rCÏss
[2]è
š¡ªûof
 
subCÏss
[])

731 ià((
Ãw
 
Objeù
[2]è
š¡ªûof
 
subCÏss
[])

737 ià(!((
Ãw
 
subCÏss
[2]è
š¡ªûof
 
ClÚ—bË
[]))

743  
	`checkIn¡
(
nuÎ
, 
çl£
, false, false, 1) +

745 
	`checkIn¡
(
Ãw
 
	`su³rCÏss
(), 
Œue
, 
çl£
,rue, 2) +

747 
	`checkIn¡
(
Ãw
 
	`subCÏss
(), 
Œue
,rue,rue, 3);

749 
	}
}

753 
SŒšg
 
	$checkIÁ”çûIn¡ªûOf
() {

755 
out
.
	`´št
("checkInterfaceInstanceOf: ");

757 
java
.
Ïng
.
Objeù
 
c1
 = 
Ãw
 
	`C1
();

759 
java
.
Ïng
.
Objeù
 
c2
 = 
Ãw
 
	`C2
();

761 
java
.
Ïng
.
Objeù
 
c3
 = 
Ãw
 
	`C3
();

763 ià(!(
c1
 
š¡ªûof
 
C1
))  "checkInterfaceInstanceOf:ƒrror-1";

765 iàĞ(
c1
 
š¡ªûof
 
C2
))  "checkInterfaceInstanceOf:ƒrror-2";

767 iàĞ(
c1
 
š¡ªûof
 
C3
))  "checkInterfaceInstanceOf:ƒrror-3";

769 ià(!(
c2
 
š¡ªûof
 
C1
))  "checkInterfaceInstanceOf:ƒrror-4";

771 ià(!(
c2
 
š¡ªûof
 
C2
))  "checkInterfaceInstanceOf:ƒrror-5";

773 iàĞ(
c2
 
š¡ªûof
 
C3
))  "checkInterfaceInstanceOf:ƒrror-6";

775 ià(!(
c3
 
š¡ªûof
 
C1
))  "checkInterfaceInstanceOf:ƒrror-7";

777 ià(!(
c3
 
š¡ªûof
 
C2
))  "checkInterfaceInstanceOf:ƒrror-8";

779 ià(!(
c3
 
š¡ªûof
 
C3
))  "checkInterfaceInstanceOf:ƒrror-9";

783 iàĞ(
c1
 
š¡ªûof
 
C2štf
))  "checkInterfaceInstanceOf:ƒrror-10";

785 iàĞ(
c1
 
š¡ªûof
 
C3štf
))  "checkInterfaceInstanceOf:ƒrror-11";

787 iàĞ(
c1
 
š¡ªûof
 
SideIÁf
))  "checkInterfaceInstanceOf:ƒrror-12";

789 ià(!(
c2
 
š¡ªûof
 
C2štf
))  "checkInterfaceInstanceOf:ƒrror-13";

791 iàĞ(
c2
 
š¡ªûof
 
C3štf
))  "checkInterfaceInstanceOf:ƒrror-14";

793 iàĞ(
c2
 
š¡ªûof
 
SideIÁf
))  "checkInterfaceInstanceOf:ƒrror-15";

795 ià(!(
c3
 
š¡ªûof
 
C2štf
))  "checkInterfaceInstanceOf:ƒrror-16";

797 ià(!(
c3
 
š¡ªûof
 
C3štf
))  "checkInterfaceInstanceOf:ƒrror-17";

799 ià(!(
c3
 
š¡ªûof
 
SideIÁf
))  "checkInterfaceInstanceOf:ƒrror-18";

801  
nuÎ
;

803 
	}
}

807 
SŒšg
 
	$‹¡Exc1
() {

809 
out
.
	`´št
("testExc1(simplehrow/catch): ");

811 
x
 = 0;

813 
Œy
 {

815 ià(
x
 == 0) x = 1; x = -1;

817 ià(
x
 !ğ47è
	`throw
(
Ãw
 
java
.
Ïng
.
	`Ar™hm‘icExû±iÚ
("fisk"));

819 
x
 = -1;

821 } 
	`ÿtch
 (
java
.
Ïng
.
Ar™hm‘icExû±iÚ
 
exc
) {

823 ià(
x
 == 1) x = 2; x = -1;

827 ià(
x
 != 2)  "failed-1";

829 
¬r
[] = 
Ãw
 [10];

831 
Œy
 {

833 
¬r
[11] = 11;

835 } 
	`ÿtch
 (
java
.
Ïng
.
A¼ayIndexOutOfBoundsExû±iÚ
 
e
) {

837 ià(!
e
.
	`g‘CÏss
().
	`g‘Name
().

839 
	`equ®s
("java.lang.ArrayIndexOutOfBoundsException")) {

841  "çed-2: " + 
e
.
	`g‘CÏss
().
	`g‘Name
();

847  
nuÎ
;

849 
	}
}

853 
SŒšg
 
	$‹¡Exc2
() {

855 
out
.
	`´št
("testExc2(skip catch clauses): ");

857 
x
 = 0;

859 
Œy
 {

861 ià(
x
 == 0) x = 1; x = -1;

863 ià(
x
 !ğ47è
	`throw
(
Ãw
 
java
.
Ïng
.
	`RuÁimeExû±iÚ
("fisk"));

865 
x
 = -1;

867 } 
	`ÿtch
 (
java
.
Ïng
.
Ar™hm‘icExû±iÚ
 
exc
) {

869 
x
 = -1;

871 } 
	`ÿtch
 (
java
.
Ïng
.
Ab¡¿ùM‘hodE¼Ü
 
exc
) {

873 
x
 = -1;

875 } 
	`ÿtch
 (
java
.
Ïng
.
RuÁimeExû±iÚ
 
exc
) {

877 ià(
x
 == 1) x = 2; x = -1;

881 ià(
x
 == 2)

883  
nuÎ
;

889 
	}
}

893 
SŒšg
 
	$‹¡Exc3
() {

895 
out
.
	`´št
("testExc3(catch in inner): ");

897 
x
 = 0;

899 
Œy
 {

901 ià(
x
 == 0) x = 1; x = -1;

903 
Œy
 {

905 ià(
x
 != 1) x = -1; x = 2;

907 ià(
x
 != 47)

909 
	`throw
(
Ãw
 
java
.
Ïng
.
	`Ar™hm‘icExû±iÚ
("fisk"));

917 } 
	`ÿtch
 (
java
.
Ïng
.
Ar™hm‘icExû±iÚ
 
exc
) {

919 ià(
x
 != 2) x = -1; x = 3;

923 } 
	`ÿtch
 (
java
.
Ïng
.
Ar™hm‘icExû±iÚ
 
exc
) {

925 
x
 = -1;

929 ià(
x
 == 3)

931  
nuÎ
;

937 
	}
}

941 
SŒšg
 
	$‹¡Exc4
() {

943 
out
.
	`´št
("testExc4(catch in outer): ");

945 
x
 = 0;

947 
Œy
 {

949 ià(
x
 == 0) x = 1; x = -1;

951 
Œy
 {

953 ià(
x
 != 1) x = -1; x = 2;

955 ià(
x
 !ğ47è
	`throw
(
Ãw
 
java
.
Ïng
.
	`RuÁimeExû±iÚ
("fisk"));

957 } 
	`ÿtch
 (
java
.
Ïng
.
Ar™hm‘icExû±iÚ
 
exc
) {

959 
x
 = -1;

963 } 
	`ÿtch
 (
java
.
Ïng
.
RuÁimeExû±iÚ
 
exc
) {

965 ià(
x
 != 2) x = -1; x = 3;

969 ià(
x
 == 3)

971  
nuÎ
;

977 
	}
}

981 
SŒšg
 
	$‹¡Exc5
() {

983 
out
.
	`´št
("testExc5(rethrow): ");

985 
x
 = 0;

987 
Œy
 {

989 ià(
x
 == 0) x = 1; x = -1;

991 
Œy
 {

993 ià(
x
 != 1) x = -1; x = 2;

995 ià(
x
 !ğ47è
	`throw
(
Ãw
 
java
.
Ïng
.
	`Ar™hm‘icExû±iÚ
("fisk"));

997 } 
	`ÿtch
 (
java
.
Ïng
.
Ar™hm‘icExû±iÚ
 
exc
) {

999 ià(
x
 != 2) x = -1; x = 3;

1001 
throw
 
exc
;

1005 } 
	`ÿtch
 (
java
.
Ïng
.
Ar™hm‘icExû±iÚ
 
exc
) {

1007 ià(
x
 != 3) x = -1; x = 4;

1011 ià(
x
 == 4)

1013  
nuÎ
;

1019 
	}
}

1023 
SŒšg
 
	$‹¡Exc6
() {

1025 
out
.
	`´št
("testExc6(throw‡ccross call): ");

1027 
x
 = 0;

1029 
Œy
 {

1031 
x
 = 1;

1033 
	`throwAr™hm‘icExû±iÚ
(1);

1035 
x
 = 2;

1037 } 
	`ÿtch
 (
java
.
Ïng
.
Ar™hm‘icExû±iÚ
 
exc
) {

1039 ià(
x
 != 1) x = -1; x = 4;

1043 ià(
x
 == 4)

1045  
nuÎ
;

1051 
	}
}

1055 
SŒšg
 
	$‹¡Exc7
() {

1057 
out
.
	`´št
("testExc7(throw‡ccr. 2 calls): ");

1059 
x
 = 0;

1061 
Œy
 {

1063 
x
 = 1;

1065 
x
 = 
	`dÚtDoubË
(x);

1067 
x
 = 2;

1069 } 
	`ÿtch
 (
java
.
Ïng
.
Ar™hm‘icExû±iÚ
 
exc
) {

1071 ià(
x
 != 1) x = -1; x = 4;

1075 ià(
x
 == 4)

1077  
nuÎ
;

1083 
	}
}

1118 
SŒšg
 
	$¡ršgHash
(
SŒšg
 
¡r
, 
ex³ùed11
, 
ex³ùed12
) {

1122 ià(
¡r
.
	`hashCode
(è!ğ
ex³ùed11
 && sŒ.hashCode(è!ğ
ex³ùed12
)

1124  "uÃx³ùed sŒšg hash v®ufÜ '" + 
¡r
 + "': " +

1126 
¡r
.
	`hashCode
(è+ " (ex³ùed: " + 
ex³ùed11
 +

1128 " o¸" + 
ex³ùed12
 + ")";

1130  
nuÎ
;

1132 
	}
}

1138 
SŒšg
 
	$‹¡SŒšgHash
() {

1140 
out
.
	`´št
("testStringHash: ");

1142 
SŒšg
 
»s
;

1146 ià(
nuÎ
 !ğ(
»s
 = 
	`¡ršgHash
("monkey", -817689237, -1068495917)))

1148  
»s
;

1150 ià(
nuÎ
 !ğ(
»s
 = 
	`¡ršgHash
("donkey", -1441784850, -1326158276)))

1152  
»s
;

1154 ià(
nuÎ
 !ğ(
»s
 = 
	`¡ršgHash
("Lavazza", 84343969, 1619816993)))

1156  
»s
;

1158 ià(
nuÎ
 !ğ(
»s
 =

1160 
	`¡ršgHash
("and‡†onger string with many words 123454876*=+-_%$$@",

1164  
»s
;

1166  
nuÎ
;

1168 
	}
}

1174 
SŒšg
 
	$‹¡ObjeùHash
() {

1176 
out
.
	`´št
("testObjectHash: ");

1178 
java
.
ut
.
HashbË
<
IÁeg”
,IÁeg”> 
ht
 = 
Ãw
 java.util.Hashtable<Integer,Integer>();

1180 
IÁeg”
 
ii
;

1182 
i
 = 0; i < 1000; i++) {

1184 
ii
 = 
Ãw
 
	`IÁeg”
Òew 
	`syncTe¡
().
	`hashCode
());

1186 
ht
.
	`put
(
ii
, ii);

1190 ià(
ht
.
	`size
() < 700) {

1194 
ht
.
	`size
() + " unique";

1198  
nuÎ
;

1200 
	}
}

1204 
SŒšg
 
	$loİEx™CÚtšueInExû±iÚHªdËr
() {

1206 
out
.
	`´št
("loopExitContinueInExceptionHandler: ");

1208 
i
 = 0;

1210 
i
 < 10000) {

1212 
i
++;

1214 
Œy
 {

1216 ià(
i
 % 100 == 0)

1218 
	`throw
(
Ãw
 
java
.
Ïng
.
	`Ar™hm‘icExû±iÚ
("fisk"));

1220 ià(
i
 == 9990)

1224 ià(
i
 % 2 == 0)

1228 } 
	`ÿtch
 (
java
.
Ïng
.
Ar™hm‘icExû±iÚ
 
e
) {

1230 ià(
i
 %2 != 0)

1238 ià(
i
 != 9990)

1242  
nuÎ
;

1244 
	}
}

1248 
SŒšg
 
	$‹¡ClÚe
() {

1250 
out
.
	`´št
("testClone: ");

1252 [] 
w
, 
v
 = 
Ãw
 [100];

1254 
i
 = 0; i < 
v
.
Ëngth
; i++) v[i] = i * i;

1256 
w
 = ([])
v
.
	`şÚe
();

1258 ià(
v
.
Ëngth
 !ğ
w
.length)  "Clone of int‡rray failed (length)";

1260 
i
 = 0; i < 
w
.
Ëngth
; i++)

1262 ià(
w
[
i
] != i * i)  "Clone of int‡rray failed-" + i;

1264 
java
.
ut
.
HashbË
 
ht
 = 
Ãw
 java.ut.
	`HashbË
(31);

1266 ià(
ht
.
	`şÚe
() == ht)  "Clone failed on hashables";

1270 
boŞ—n
 
ÿught
 = 
çl£
;

1272 
Œy
 {

1274 
ht
 = 
nuÎ
;

1276 
ht
.
	`şÚe
();

1278 } 
	`ÿtch
 (
java
.
Ïng
.
NuÎPoš‹rExû±iÚ
 
gÙIt
) {

1280 
ÿught
 = 
Œue
;

1284 ià(!
ÿught
)  "failedo catchƒxception from‚ull.clone()";

1288 
SŒšgAndIÁ
 
s1
 = 
Ãw
 
	`SŒšgAndIÁ
();

1290 
s1
.
s
 = "goat";

1292 
s1
.
i
 = 5;

1294 
SŒšgAndIÁ
 
s2
 = (SŒšgAndIÁ)
s1
.
	`şÚe
();

1296 ià(
s1
 =ğ
s2
)  "clone„eturned same object";

1298 ià(!
s2
.
s
.
	`equ®s
("goat"))  "clone didn't gethe goathere";

1300 ià(
s2
.
i
 != 5)  "clone didn't gethe 5here";

1302 ià(!
s1
.
s
.
	`equ®s
("goat"))  "clone messed up„eceiver: goat";

1304 ià(
s1
.
i
 != 5)  "clone messed up„eceiver: 5";

1306  
nuÎ
;

1308 
	}
}

1312 
SŒšg
 
	$checkCÏssNameOf
(
SŒšg
 
exp
, 
Objeù
 
obj
, SŒšg 
ex³ùed
) {

1314 ià(
ex³ùed
.
	`equ®s
(
obj
.
	`g‘CÏss
().
	`g‘Name
())è 
nuÎ
;

1316  "E¼Ü: cÏssName(" + 
exp
 + "èğ" + 
obj
.
	`g‘CÏss
().
	`g‘Name
() +

1318 ", should bğ" + 
ex³ùed
;

1320 
	}
}

1324 
	$´štIÁ”çûs
(
java
.
Ïng
.
CÏss
 
ş
) {

1326 
out
.
	`´št
(
ş
.
	`g‘Name
() + ": ");

1328 
java
.
Ïng
.
CÏss
 
štf
[] = 
ş
.
	`g‘IÁ”çûs
();

1330 
i
 = 0; i < 
štf
.
Ëngth
; i++) {

1332 
out
.
	`´št
(
štf
[
i
].
	`g‘Name
() + " ");

1334 ià(!
štf
[
i
].
	`isIÁ”çû
())

1336 
out
.
	`´šn
("Error: should have been‡n interface!");

1340 ià(0 =ğ
štf
.
Ëngth
)

1342 
out
.
	`´št
("no interfaces");

1344 
out
.
	`´šn
();

1346 
	}
}

1350 
SŒšg
 
	$‹¡CÏss
() {

1352 
SŒšg
 
r
;

1354 
r
 = 
	`checkCÏssNameOf
("doubË[][]", 
Ãw
 [2][3], "[[D");

1356 ià(
r
 !ğ
nuÎ
) „;

1358 
r
 = 
	`checkCÏssNameOf
("7", 
Ãw
 
	`IÁeg”
(7), "java.lang.Integer");

1360 ià(
r
 !ğ
nuÎ
) „;

1362 
r
 = 
	`checkCÏssNameOf
("hÜ£", 
this
, "PepTest");

1364 ià(
r
 !ğ
nuÎ
) „;

1366 
r
 = 
	`checkCÏssNameOf
("Ãw P•Te¡[2]", 
Ãw
 
P•Te¡
[2], "[LPepTest;");

1368 ià(
r
 !ğ
nuÎ
) „;

1370 
r
 = 
	`checkCÏssNameOf
("Ãw P•Te¡[2][2]", 
Ãw
 
P•Te¡
[2][2], "[[LPepTest;");

1372 ià(
r
 !ğ
nuÎ
) „;

1374 
r
 = 
	`checkCÏssNameOf
("java.ut.HashbË", 
Ãw
 
java
.
ut
.
	`HashbË
(),

1378 ià(
r
 !ğ
nuÎ
) „;

1382 
P•Te¡
 
fisk
[] = 
Ãw
 PepTest[2];

1384 ià(
fisk
.
	`g‘CÏss
().
	`g‘IÁ”çûs
().
Ëngth
 != 0)

1388 
	`´štIÁ”çûs
(
fisk
.
	`g‘CÏss
());

1390 
ÿught
 = 0;

1392 
Œy
 {

1394 
	`´štIÁ”çûs
(
nuÎ
);

1396 } 
	`ÿtch
 (
NuÎPoš‹rExû±iÚ
 
fff
) {

1398 
ÿught
 = 1;

1402 ià(
ÿught
 != 1)

1406 
CÏss
 
ş
 = (
Ãw
 
java
.
ut
.
	`HashbË
()).
	`g‘CÏss
();

1408 
ş
 !ğ
nuÎ
) {

1410 
	`´štIÁ”çûs
(
ş
);

1412 
ş
 = cl.
	`g‘Su³rşass
();

1416  
nuÎ
;

1418 
	}
}

1422 
SŒšg
 
	$‹¡Wa™NuÎ
() {

1424 
out
.
	`´št
("testWaitNull: ");

1426 
Œy
 {

1428 ((
java
.
Ïng
.
Objeù
)
nuÎ
).
	`wa™
(43);

1430 } 
	`ÿtch
 (
java
.
Ïng
.
Exû±iÚ
 
e
) {

1432 if(
e
.
	`g‘CÏss
().
	`g‘Name
().
	`equ®s
("java.lang.NullPointerException"))

1434  
nuÎ
;

1436  "”rÜ: " + 
e
;

1442 
	}
}

1446 
SŒšg
 
	$‹¡V¬AndM‘hodNameCÏsh
() {

1448 
out
.
	`´št
("testVarAndMethodNameClash: ");

1450 
su³rCÏss
 
s
 = 
Ãw
 
	`su³rCÏss
();

1452 
x
;

1456 
x
 = 
s
.
bÙhV¬AndM‘hod
;

1458 ià(
x
 != 7)

1460  "1: V¬ ha wrÚg v®ue: " + 
x
;

1464 
x
 = 
s
.
	`bÙhV¬AndM‘hod
();

1466 ià(
x
 != 8)

1468  "1: M‘hod„‘uºed wrÚg v®ue: " + 
x
;

1472 
s
.
bÙhV¬AndM‘hod
 = 9;

1474 
x
 = 
s
.
bÙhV¬AndM‘hod
;

1476 ià(
x
 != 9)

1478  "2: V¬ ha wrÚg v®ue: " + 
x
;

1482 
x
 = 
s
.
	`bÙhV¬AndM‘hod
();

1484 ià(
d–ib”©eE¼ÜFÜTe¡
)

1486 
x
 = 666;

1488 ià(
x
 != 8)

1490  "2: M‘hod„‘uºed wrÚg v®ue: " + 
x
;

1494 
s
.
	`bÙhV¬AndM‘hod
(5);

1496 
x
 = 
s
.
bÙhV¬AndM‘hod
;

1498 ià(
x
 != 5)

1500  "3: V¬ ha wrÚg v®ue: " + 
x
;

1504 
x
 = 
s
.
	`bÙhV¬AndM‘hod
();

1506 ià(
x
 != 8)

1508  "3: M‘hod„‘uºed wrÚg v®ue: " + 
x
;

1512  
nuÎ
;

1514 
	}
}

1518 
	$checkAÎNuÎ
(
java
.
Ïng
.
Objeù
 
a
[]) {

1520 
i
 = 0; i < 
a
.
Ëngth
; i++) {

1522 ià(
a
[
i
] !ğ
nuÎ
è
out
.
	`´šn
("error: should have been‚ull");

1526 
	}
}

1530 
SŒšg
 
	$‹¡ObjeùA¼ay
() {

1532 
out
.
	`´št
("testObjectArray: ");

1534 
subCÏss
 
a
[] = 
Ãw
 subClass[10];

1536 
su³rCÏss
 
b
[] = 
Ãw
 superClass[10];

1540 ià(!(
a
 
š¡ªûof
 
subCÏss
[]))  "array instanceof-1 failed";

1542 ià(!(
a
 
š¡ªûof
 
su³rCÏss
[]))  "array instanceof-2 failed";

1544 ià(!(
a
 
š¡ªûof
 
java
.
Ïng
.
Objeù
[]))  "array instanceof-3 failed";

1548 iàĞ(
b
 
š¡ªûof
 
subCÏss
[]))  "array instanceof-4 failed";

1550 ià(!(
b
 
š¡ªûof
 
su³rCÏss
[]))  "array instanceof-5 failed";

1552 ià(!(
b
 
š¡ªûof
 
java
.
Ïng
.
Objeù
[]))  "array instanceof-6 failed";

1556 
i
 = 0; i < 10; i++) {

1558 
a
[
i
] = 
Ãw
 
	`subCÏss
();

1560 
b
[
i
] = 
Ãw
 
	`su³rCÏss
();

1564 
b
[4] = 
a
[1];

1566 
b
[5] = 
nuÎ
;

1568 
a
[2] = (
subCÏss
)
b
[4];

1570 
a
[2] = (
subCÏss
)
b
[5];

1572 
boŞ—n
 
gÙ™
 = 
çl£
;

1574 
Œy
 {

1576 
a
[2] = (
subCÏss
)
b
[7];

1578 } 
	`ÿtch
 (
java
.
Ïng
.
CÏssCa¡Exû±iÚ
 
e
) {

1580 
gÙ™
 = 
Œue
;

1584 ià(!
gÙ™
)  "missing ClassCastException";

1586 
java
.
Ïng
.
Sy¡em
.
	`¬¿ycİy
(
a
,0,
b
,0,10);

1588 
i
 = 0; i < 10; i++)

1590 
a
[
i
] = 
nuÎ
;

1592 
java
.
Ïng
.
Sy¡em
.
	`¬¿ycİy
(
a
,0,
b
,0,10);

1594 
	`checkAÎNuÎ
(
b
);

1596 
java
.
Ïng
.
Sy¡em
.
	`¬¿ycİy
(
b
,0,
a
,0,10);

1598 
	`checkAÎNuÎ
(
a
);

1600 
	`checkAÎNuÎ
(
b
);

1604 
a
[4] = 
Ãw
 
	`subCÏss
();

1606 
java
.
Ïng
.
Sy¡em
.
	`¬¿ycİy
(
b
,0,
a
,0,10);

1608 
	`checkAÎNuÎ
(
a
);

1610 
	`checkAÎNuÎ
(
b
);

1614 
boŞ—n
 
ÿught
;

1618 
ÿught
 = 
çl£
;

1620 
Œy
 {

1622 
java
.
Ïng
.
Sy¡em
.
	`¬¿ycİy
(
nuÎ
,0,
a
,0,10);

1624 } 
	`ÿtch
(
java
.
Ïng
.
NuÎPoš‹rExû±iÚ
 
e
) {

1626 
ÿught
 = 
Œue
;

1630 ià(!
ÿught
)  "error: should have caughtƒxception-1";

1634 
ÿught
 = 
çl£
;

1636 
Œy
 {

1638 
java
.
Ïng
.
Sy¡em
.
	`¬¿ycİy
(
b
,0,
nuÎ
,0,10);

1640 } 
	`ÿtch
(
java
.
Ïng
.
NuÎPoš‹rExû±iÚ
 
e
) {

1642 
ÿught
 = 
Œue
;

1646 ià(!
ÿught
)  "error: should have caughtƒxception-2";

1650 
ÿught
 = 
çl£
;

1652 
Œy
 {

1654 
java
.
Ïng
.
Sy¡em
.
	`¬¿ycİy
(
b
,0,
a
,0,11);

1656 } 
	`ÿtch
(
java
.
Ïng
.
A¼ayIndexOutOfBoundsExû±iÚ
 
e
) {

1658 
ÿught
 = 
Œue
;

1660 } 
	`ÿtch
(
java
.
Ïng
.
IndexOutOfBoundsExû±iÚ
 
e
) {

1662 
ÿught
 = 
Œue
;

1666 ià(!
ÿught
)  "error: should have caughtƒxception-3";

1670 
ÿught
 = 
çl£
;

1672 
Œy
 {

1674 
java
.
Ïng
.
Sy¡em
.
	`¬¿ycİy
(
b
,1,
a
,0,10);

1676 } 
	`ÿtch
(
java
.
Ïng
.
A¼ayIndexOutOfBoundsExû±iÚ
 
e
) {

1678 
ÿught
 = 
Œue
;

1680 } 
	`ÿtch
(
java
.
Ïng
.
IndexOutOfBoundsExû±iÚ
 
e
) {

1682 
ÿught
 = 
Œue
;

1686 ià(!
ÿught
)  "error: should have caughtƒxception-4";

1690 
ÿught
 = 
çl£
;

1692 
Œy
 {

1694 
java
.
Ïng
.
Sy¡em
.
	`¬¿ycİy
(
b
,-1,
nuÎ
,100,100);

1696 } 
	`ÿtch
(
java
.
Ïng
.
NuÎPoš‹rExû±iÚ
 
e
) {

1698 
ÿught
 = 
Œue
;

1702 ià(!
ÿught
)  "error: should have caughtƒxception-5";

1706 
b
[5] = 
Ãw
 
	`su³rCÏss
();

1708 
ÿught
 = 
çl£
;

1710 
Œy
 {

1712 
java
.
Ïng
.
Sy¡em
.
	`¬¿ycİy
(
b
,0,
a
,0,10);

1714 } 
	`ÿtch
(
java
.
Ïng
.
A¼ayStÜeExû±iÚ
 
e
) {

1716 
ÿught
 = 
Œue
;

1720 ià(!
ÿught
)  "error: should have caughtƒxception-6";

1724  
nuÎ
;

1726 
	}
}

1730 
	$dÚtDoubË
(
a
) {

1732 
	`throwAr™hm‘icExû±iÚ
(
a
);

1734  2 * 
a
;

1736 
	}
}

1740 
	$throwAr™hm‘icExû±iÚ
(
a
) {

1742 ià(
a
 == 1)

1744 
	`throw
(
Ãw
 
java
.
Ïng
.
	`Ar™hm‘icExû±iÚ
("fisk"));

1746 ià(
a
 == 1)

1748 
out
.
	`´šn
("should‚ot…rinthis");

1752 
out
.
	`´šn
("should…rinthis");

1754 
	}
}

1758 
	$‹¡Dup
() {

1760 
a
, 
b
;

1762 
a
 = 
b
 = 7;

1764  
a
;

1766 
	}
}

1770 
	$‹¡FÜLoİ
(
x
, 
y
) {

1772 
a
 = 0;

1774 
i
=
x
; i < 
y
; i++)

1776 
a
 +ğ
i
*i;

1778  
a
;

1780 
	}
}

1786 
subCÏss
 
	g¡©icSubA¼ay
[][] = {{
nuÎ
,null}, {null,null}};

1788 
	g¡©icIÁA¼ay
[][] = {{1,2,3}, {4,5,6}};

1792 
SŒšg
 
	$‹¡A¼ay
() {

1794 
out
.
	`´št
("testArray: ");

1796 
x
[];

1798 
x
 = 
Ãw
 [6];

1800 
x
[4] = 3;

1802 
x
[3] = x[4];

1804 ià(
x
[3] != 3)  "got bad‡rray value-";

1808 
y
[][];

1810 
y
 = 
Ãw
 [5][6];

1812 
y
[1][2] = 3.0;

1814 ià(
y
[1][2] != 3.0)  "got bad‡rray value-2";

1818 
java
.
ut
.
Sck
 
fisk
[][][] = 
Ãw
 java.util.Stack[4][][];

1820 ià(
fisk
[2] !ğ
nuÎ
)

1828 
boŞ—n
 
h™™
 = 
çl£
;

1830 
Œy
 {

1832 
i
 = 0; i < 5; i++) {

1834 
x
[
i
 + 3] = i;

1838 } 
	`ÿtch
 (
java
.
Ïng
.
A¼ayIndexOutOfBoundsExû±iÚ
 
e
) {

1840 
h™™
 = 
Œue
;

1844 ià(!
h™™
)  "missingƒxception";

1846 ià(
x
[4] != 1 || x[5] != 2)  "missing side-effect";

1848  
nuÎ
;

1850 
	}
}

1854 
boŞ—n
 
	$isPrime
(
i
) {

1856 ià(
i
 == 2)

1858  
Œue
;

1860 ià(
i
 % 2 == 0)

1862  
çl£
;

1864 
j
 = 3;

1866 
j
 * j <ğ
i
) {

1868 ià(
i
 % 
j
 == 0)

1870  
çl£
;

1872 
j
 = j + 2;

1876  
Œue
;

1878 
	}
}

1882 
	$´štPrimes
() {

1884 
out
.
	`´št
("Primes†esshan 50: ");

1886 
i
 = 2; i < 50; i++) {

1888 ià(
	`isPrime
(
i
)) {

1890 
out
.
	`´št
(
i
);

1892 
out
.
	`´št
(" ");

1898 
out
.
	`´šn
("");

1900 
	}
}

1904 
public
 
	$V”ify
(
SŒšg
 
¡r
) {

1906 ià(
nuÎ
 =ğ
¡r
 || sŒ.
	`equ®s
(""))

1908 
out
.
	`´šn
("OK");

1912 
gÙE¼Ü
 = 
Œue
;

1914 
out
.
	`´šn
();

1916 
out
.
	`´šn
("******************************************");

1918 
out
.
	`´šn
(
¡r
);

1920 
out
.
	`´šn
("******************************************");

1924 
	}
}

1928 
boŞ—n
 
	$checkRemL
(
a
, 
b
, 
»s
) {

1930 
boŞ—n
 
ok
 = (
»s
 =ğ
a
 % 
b
);

1932 ià(!
ok
) {

1934 
out
.
	`´št
("Faed: " + 
a
 + " % " + 
b
 + " = " + (a % b));

1936 
out
.
	`´šn
(" (should be: " + 
»s
);

1940  
ok
;

1942 
	}
}

1946 
boŞ—n
 
	$checkRemD
(
a
, 
b
, 
»s
) {

1948 
boŞ—n
 
ok
 = (
»s
 =ğ
a
 % 
b
);

1950 ià(!
ok
) {

1952 
out
.
	`´št
("Faed: " + 
a
 + " % " + 
b
 + " = " + (a % b));

1954 
out
.
	`´šn
(" (should be: " + 
»s
);

1958  
ok
;

1960 
	}
}

1966 
	$´štRemD
(
a
, 
b
) {

1968 
out
.
	`´št
(
a
 + " % " + 
b
 + " = " + (a % b));

1970 
	}
}

1974 
SŒšg
 
	$checkRemašd”s
() {

1976 
out
.
	`´št
("checkRemainders: ");

1978 
boŞ—n
 
ok
 = 
Œue
;

1980 
out
.
	`´št
("†ong ");

1982 ià(!
	`checkRemL
Ğ10L, 7L, 3L)è
ok
 = 
çl£
;

1984 ià(!
	`checkRemL
Ğ10L, -7L, 3L)è
ok
 = 
çl£
;

1986 ià(!
	`checkRemL
(-10L, 7L, -3L)è
ok
 = 
çl£
;

1988 ià(!
	`checkRemL
(-10L, -7L, -3L)è
ok
 = 
çl£
;

1992 ià(!
	`checkRemD
Ğ10.5, 7.0, 3.5)è
ok
 = 
çl£
;

1994 ià(!
	`checkRemD
Ğ10.5, -7.0, 3.5)è
ok
 = 
çl£
;

1996 ià(!
	`checkRemD
(-10.5, 7.0, -3.5)è
ok
 = 
çl£
;

1998 ià(!
	`checkRemD
(-10.5, -7.0, -3.5)è
ok
 = 
çl£
;

2000 ià(!
ok
)  "remainders failed";

2002 
out
.
	`´št
("double ");

2004  
nuÎ
;

2006 
	}
}

2010 
boŞ—n
 
	$checkClo£
(
SŒšg
 
ex´SŒ
, 
v
, 
r
) {

2012 
m
, 
av
 = 
v
, 
¬
 = 
r
;

2014 ià(
av
 < 0.0)‡v = -av;

2016 ià(
¬
 < 0.0)‡r = -ar;

2018 ià(
av
 > 
¬
)

2020 
m
 = 
av
;

2024 
m
 = 
¬
;

2026 ià(
m
 == 0.0) m = 1.0;

2028 ià((
v
 - 
r
è/ 
m
 > 0.0001) {

2030 
out
.
	`´šn
(
ex´SŒ
 + "ƒv®u©edo: " + 
v
 + ",ƒx³ùed: " + 
r
);

2032  
çl£
;

2036  
Œue
;

2038 
	}
}

2042 
SŒšg
 
	$checkM©hFùs
() {

2044 
out
.
	`´št
("checkMathFcts: ");

2046 
boŞ—n
 
ok
 = 
Œue
;

2048 ià(!
	`checkClo£
("log(0.7)", 
M©h
.
	`log
(0.7), -0.356675)è
ok
 = 
çl£
;

2050 ià(!
	`checkClo£
("sš(0.7)", 
M©h
.
	`sš
(0.7), 0.644218)è
ok
 = 
çl£
;

2052 ià(!
	`checkClo£
("cos(0.7)", 
M©h
.
	`cos
(0.7), 0.764842)è
ok
 = 
çl£
;

2054 ià(!
	`checkClo£
("n(0.7)", 
M©h
.
	`n
(0.7), 0.842288)è
ok
 = 
çl£
;

2056 ià(!
	`checkClo£
("asš(0.7)", 
M©h
.
	`asš
(0.7), 0.775397)è
ok
 = 
çl£
;

2058 ià(!
	`checkClo£
("acos(0.7)", 
M©h
.
	`acos
(0.7), 0.795399)è
ok
 = 
çl£
;

2060 ià(!
	`checkClo£
("©ª(0.7)", 
M©h
.
	`©ª
(0.7), 0.610726)è
ok
 = 
çl£
;

2062 ià(!
ok
)  "Some math function failed";

2064  
nuÎ
;

2066 
	}
}

2070 
	$doIÁWheLoİ
() {

2072 
a
 = 0;

2074 
a
 != 100000) {

2076 
a
++;

2080 
	}
}

2084 
	$doLÚgWheLoİ
() {

2086 
a
 = 0;

2088 
a
 != 100000) {

2090 
a
++;

2094 
	}
}

2098 
SŒšg
 
	$fiskSŒšg
() {

2102 
	}
}

2106 
	$d“pRecursiÚ
(
n
, 
sum
) {

2108 
s
;

2110 ià(
n
 =ğ0è 
sum
;

2112  
	`d“pRecursiÚ
(
n
 - 1,‚ + 
sum
);

2117 
	}
}

2121 
SŒšg
 
	$‹¡D“pSck
() {

2123 
out
.
	`´št
("testDeepStack: ");

2125 ià(
	`d“pRecursiÚ
(5555, 0) != (5555 * 5555 + 5555) / 2)  "failed";

2127  
nuÎ
;

2129 
	}
}

2133 
SŒšg
 
	$‹¡Misk
() {

2135 
out
.
	`´št
("testMisk: ");

2137 
SŒšg
 
right
 = "-9223372036854775808";

2139 ià(!
right
.
	`equ®s
("" + (()1 << 63)))

2143 ", should be: " + 
right
;

2149 ià(!
	`g‘CÏss
().
	`g‘Name
().
	`equ®s
((
Ãw
 
	`P•Te¡
()).getClass().getName()))

2153 
SŒšg
 
¡r1
, 
¡r2
;

2155 
¡r1
 = "fisk";

2157 
¡r2
 = "fisk";

2159 ià(
¡r1
 !ğ
¡r2
)

2163 ià(
	`fiskSŒšg
() != fiskString())

2169 ià(
Ãw
 
java
.
Ïng
.
	`DoubË
("3.14").
	`doubËV®ue
() != 3.14D)

2175 ià(
Ãw
 
java
.
Ïng
.
	`DoubË
("-23.14").
	`doubËV®ue
() != -23.14D)

2181 
Œy
 {

2183 
¡r1
 = "java.lang.Thread";

2185 ià(!
¡r1
.
	`equ®s
(
java
.
Ïng
.
CÏss
.
	`fÜName
(¡r1).
	`g‘Name
()))

2189 } 
	`ÿtch
(
java
.
Ïng
.
Exû±iÚ
 
gÙIt
) {}

2191  
nuÎ
;

2193 
	}
}

2197 
SŒšg
 
	$‹¡GC
() {

2199 
out
.
	`´št
("testGC: ");

2201 
by‹
[][] 
by‹sA¼ays
 = 
Ãw
 byte[1000][];

2203 
by‹sA¼ays
[0] = 
Ãw
 
by‹
[1000];

2205 
RuÁime
.
	`g‘RuÁime
().
	`gc
();

2207 ià(!
by‹sA¼ays
[0].
	`g‘CÏss
().
	`g‘Name
().
	`equ®s
("[B"))

2211 
SŒšg
 
ú
 = 
	`g‘CÏss
().
	`g‘Name
();

2213 
RuÁime
.
	`g‘RuÁime
().
	`gc
();

2217 ià(!
ú
.
	`equ®s
(
	`g‘CÏss
().
	`g‘Name
()))  "got different class‚ame";

2226  
nuÎ
;

2228 
	}
}

2230 
SŒšg
 
	$‹¡Rªdom
() {

2231 
out
.
	`´št
("testRandom : ");

2233 
Rªdom
 
r
 = 
Ãw
 
	`Rªdom
(20357846L);

2234 
lÚgRªdom
 = 0;

2235 
i
 = 0; i < 163; i++) {

2236 
lÚgRªdom
 = 
r
.
	`ÃxtLÚg
();

2239 
Answ”
 = -2496176611084489277L;

2240 ià(
lÚgRªdom
 =ğ
Answ”
)

2241  
nuÎ
;

2244 
	}
}

2256 
public
 
	$š¡ªûMaš
() {

2260 
	`V”ify
(
	`‹¡If
());

2262 
	`V”ify
(
	`‹¡A¼ay
());

2264 
	`V”ify
(
	`‹¡B™Ops
());

2266 
	`V”ify
(
	`‹¡FÜ
());

2268 
	`V”ify
(
	`‹¡Div
());

2270 
	`V”ify
(
	`‹¡TabËSw™ch
());

2272 
	`V”ify
(
	`‹¡LookupSw™ch
());

2274 
	`V”ify
(
	`‹¡Hidd’F›ld
());

2276 
	`V”ify
(
	`checkRemašd”s
());

2278 
	`V”ify
(
	`checkM©hFùs
());

2280 
	`´štPrimes
();

2282 
	`V”ify
(
	`‹¡Exc1
());

2284 
	`V”ify
(
	`‹¡Exc2
());

2286 
	`V”ify
(
	`‹¡Exc3
());

2288 
	`V”ify
(
	`‹¡Exc4
());

2290 
	`V”ify
(
	`‹¡Exc5
());

2292 
	`V”ify
(
	`‹¡Exc6
());

2294 
	`V”ify
(
	`‹¡Exc7
());

2300 
	`V”ify
(
	`loİEx™CÚtšueInExû±iÚHªdËr
());

2302 
	`V”ify
(
	`‹¡SŒšgHash
());

2309 
	`V”ify
(
	`‹¡ClÚe
());

2311 
	`V”ify
(
	`‹¡ObjeùA¼ay
());

2313 
	`‹¡CÏss
();

2315 
	`V”ify
(
	`checkIn¡ªûOf
());

2317 
	`V”ify
(
	`checkIÁ”çûIn¡ªûOf
());

2319 
	`V”ify
(
	`‹¡Wa™NuÎ
());

2321 
	`V”ify
(
	`‹¡V¬AndM‘hodNameCÏsh
());

2325 
	`V”ify
(
	`‹¡Misk
());

2327 
	`V”ify
(
	`‹¡GC
());

2329 
	`V”ify
(
	`‹¡Rªdom
());

2341 ià(
gÙE¼Ü
){

2343 
out
.
	`´šn
("PepTest:ƒrror");

2347 
Sy¡em
.
	`ex™
(1);

2351 
out
.
	`´šn
("PepTest: OK");

2357 
	}
}

2361 
public
 
	$maš
(
SŒšg
[] 
¬gs
) {

2363 
P•Te¡
 
hÜ£
 = 
Ãw
 
	`P•Te¡
();

2365 
hÜ£
.
	`š¡ªûMaš
();

2367 ià(
hÜ£
.
gÙE¼Ü
è
Sy¡em
.
	`ex™
(1);

2369 
	}
}

	@spec/jbb/validity/Sub.java

13 
·ckage
 
	g¥ec
.
	gjbb
.
	gv®id™y
;

15 
public
 cÏs 
	cSub
 
ex‹nds
 
	mSu³r
 {

17 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

27 
´iv©e
 
SŒšg
 
	mÇme
 = "Sub";

29 
´iv©e
 
	mpsi
 = 
publicStic
 + 7;

34 
´iv©e
 
	m´iv
 = 5;

36 
´Ùeùed
 
	m´Ù
 = 11;

38 
public
 
	mpub
 = 13;

43 
public
 
	$Sub
(
bÏck
) {

44 
	`su³r
(
bÏck
 + 77);

45 
pub
 +ğ
bÏck
 * 2;

54 
public
 
SŒšg
 
	$g‘Name
() {

55  
Çme
;

56 
	}
}

58 
public
 
	$g‘Priv©e
() {

59  
´iv
 + 100;

60 
	}
}

62 
public
 
	$g‘PrÙeùed
() {

63  
´Ù
 + 100;

64 
	}
}

	@spec/jbb/validity/Super.java

13 
·ckage
 
	g¥ec
.
	gjbb
.
	gv®id™y
;

15 
public
 cÏs 
	cSu³r
 {

17 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

27 
´iv©e
 
SŒšg
 
	mÇme
 = "Super";

29 
´iv©e
 
	mpsi
 = 10;

31 
public
 
	mpublicStic
 = 
psi
 - 2;

36 
´iv©e
 
	m´iv
 = 2;

38 
´Ùeùed
 
	m´Ù
 = 3;

40 
public
 
	mpub
 = 4;

45 
public
 
	$Su³r
(
magic
) {

46 
´iv
 +ğ
psi
 * 
magic
;

47 
´Ù
 +ğ
psi
 * 
magic
;

48 
pub
 +ğ
psi
 * 
magic
;

57 
public
 
SŒšg
 
	$g‘Name
() {

58  
Çme
;

59 
	}
}

61 
public
 
	$g‘Priv©e
() {

62  
´iv
;

63 
	}
}

65 
public
 
	$g‘PrÙeùed
() {

66  
´Ù
;

67 
	}
}

69 
public
 
SŒšg
 
	$toSŒšg
() {

70  "CÏs " + 
Çme
 + ",…ublic=" + 
pub
 + ",…rÙeùed=" + 
´Ù


71 + ",…riv©e=" + 
´iv
;

72 
	}
}

	@spec/jbb/validity/digest.java

10 
·ckage
 
	g¥ec
.
	gjbb
.
	gv®id™y
;

12 
impÜt
 
	gjava
.
	gio
.*;

13 
impÜt
 
	gjava
.
	g£cur™y
.*;

15 
public
 cÏs 
	cdige¡
 {

17 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

26 
boŞ—n
 
	mdebug
;

28 
public
 
	$dige¡
() {

29 
debug
 = 
çl£
;

32 
public
 
boŞ—n
 
	$üunch_j¬
(
SŒšg
 
Çme
) {

33 
boŞ—n
 
cÜ»ù
 = 
Œue
;

34 
SŒšg
 
·th
 = 
Sy¡em
.
	`g‘Prİ”ty
("java.class.path");

36 
šdex_j¬
 = 
·th
.
	`šdexOf
("jbb.jar");

38 
SŒšg
 
j¬_Çme
 = "jbb.jar";

39 ià(
šdex_j¬
 < 0) {

40 
cÜ»ù
 = 
çl£
;

41 
Sy¡em
.
out
.
	`´šn
("jbb.jar‚ot in CLASSPATH");

42  
çl£
;

44 ià(
šdex_j¬
 > 0) {

46 ià(
·th
.
	`ch¬At
(
šdex_j¬
 - 1è!ğ
Fe
.
£·¿tÜCh¬
) {

47 
cÜ»ù
 = 
çl£
;

48  
çl£
;

51 
šdex_£·¿tÜ
 = 
·th
.
	`šdexOf
(
Fe
.
·thS•¬©ÜCh¬
);

52 ià(
šdex_£·¿tÜ
 < 
šdex_j¬
) {

53 
Sy¡em
.
out


54 .
	`´šn
("fails validation because something is before jbb.jar in CLASSPATH");

55 
cÜ»ù
 = 
çl£
;

56  
çl£
;

59 
j¬_Çme
 = 
·th
.
	`sub¡ršg
(0, 
šdex_j¬
 + 7);

62 
Œy
 {

63 
FeIÅutSŒ—m
 
the_j¬
 = 
Ãw
 
	`FeIÅutSŒ—m
(
j¬_Çme
);

66 
dige¡Ex³ùed
 
e
 = 
Ãw
 
	`dige¡Ex³ùed
();

67 
by‹
[] 
ex³ùed
 = 
e
.
	`g‘A¼ay
();

68 
Mes§geDige¡
 
md
 = Mes§geDige¡.
	`g‘In¡ªû
("SHA");

69 
Dige¡IÅutSŒ—m
 
dis
 = 
Ãw
 
	`Dige¡IÅutSŒ—m
(
the_j¬
, 
md
);

70 
couÁ
 = (è(
Ãw
 
	`Fe
(
j¬_Çme
).
	`Ëngth
());

71 
i
 = 0; i < 
couÁ
; i++)

72 
dis
.
	`»ad
();

73 
by‹
 
a
[] = 
md
.
	`dige¡
();

74 
i
 = 0; i < 10; i++) {

75 ià(
debug
)

76 
Sy¡em
.
out
.
	`´šn
(", " + 
a
[
i
]);

77 ià(
a
[
i
] !ğ
ex³ùed
[i])

78 
cÜ»ù
 = 
çl£
;

80 
Sy¡em
.
out
.
	`´šn
("j¬ v®id™y i " + 
cÜ»ù
);

81  
cÜ»ù
;

83 
	`ÿtch
 (
Exû±iÚ
 
e
) {

84 
Sy¡em
.
out
.
	`´šn
("dige¡: caughˆexû±iÚ " + 
e
);

86  
çl£
;

87 
	}
}

	@spec/jbb/validity/digestExpected.java

11 
·ckage
 
	g¥ec
.
	gjbb
.
	gv®id™y
;

13 
public
 cÏs 
	cdige¡Ex³ùed
 {

15 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

24 
by‹
 
	ma
[] = {

28 
public
 
	$dige¡Ex³ùed
() {

29 
	}
}

31 
public
 
	gby‹
[] 
	$g‘A¼ay
() {

32  
a
;

33 
	}
}

	@spec/reporter/GraphImage.java

17 
·ckage
 
	g¥ec
.
	g»pÜ‹r
;

19 
impÜt
 
	gjava
.
	gawt
.*;

20 
impÜt
 
	gjava
.
	gawt
.
	gimage
.*;

21 
impÜt
 
	gjava
.
	gio
.*;

22 
impÜt
 
	gjava
.
	g‹xt
.*;

23 
impÜt
 
	gjava
.
	gut
.
	gloggšg
.
	gLev–
;

24 
impÜt
 
	g¥ec
.
	gjbb
.
	gJBBut
;

25 
impÜt
 
	gjavax
.
	gimageio
.*;

27 
public
 cÏs 
	cG¿phImage
 
ex‹nds
 
	mBufã»dImage
 {

29 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

36 
´iv©e
 
	m´evx
;

38 
´iv©e
 
	m´evy
;

40 
´iv©e
 
boŞ—n
 
	m´evS‘
;

42 
´iv©e
 
	m®phax
;

44 
´iv©e
 
	m®phay
;

46 
´iv©e
 
	mpix–size
;

48 
´iv©e
 
	mpix–ty³
;

50 
´iv©e
 
CŞÜ
 
	mpix–cŞÜ
;

52 
´iv©e
 
G¿phics
 
	mg¿phics
;

54 
´iv©e
 
	mqu®™y
;

56 
´iv©e
 
boŞ—n
 
	mcÚÃùPoštsEÇbËd
;

58 
public
 
fš®
 
	mMINX
 = 0;

60 
public
 
fš®
 
	mMAXX
 = 1;

62 
public
 
fš®
 
	mMINY
 = 2;

64 
public
 
fš®
 
	mMAXY
 = 3;

66 
public
 
fš®
 
	mDASH_LENGTH
 = 10;

68 
public
 
fš®
 
	mAXIS_TICK_RADIUS
 = 4;

70 
public
 
fš®
 
	mDEFAULT_WIDTH
 = 250;

72 
public
 
fš®
 
	mDEFAULT_HEIGHT
 = 250;

74 
public
 
fš®
 
	mPIXEL_TYPE_CIRCLE
 = 0;

76 
public
 
fš®
 
	mPIXEL_TYPE_SQUARE
 = 1;

78 
public
 
fš®
 
	mDEFAULT_PIXEL_SIZE
 = 1;

80 
public
 
fš®
 
	mDEFAULT_PIXEL_TYPE
 = 
PIXEL_TYPE_CIRCLE
;

82 
public
 
fš®
 
CŞÜ
 
	mDEFAULT_FOREGROUND_COLOR
 = CŞÜ.
»d
;

84 
public
 
fš®
 
CŞÜ
 
	mDEFAULT_BACKGROUND_COLOR
 = CŞÜ.
bÏck
;

86 
public
 
fš®
 
SŒšg
 
	mDEFAULT_FILENAME
 = "GraphImage.jpg";

88 
public
 
fš®
 
	mDEFAULT_JPEG_QUALITY
 = 1.0f;

90 
public
 
fš®
 
FÚt
 
	mFONT
 = 
Ãw
 Font(

92 
FÚt
.
PLAIN
,

95 
public
 
fš®
 [] 
	mDEFAULT_SCALE
 = 
Ãw
 [] {

99 
´iv©e
 
fš®
 [] 
	gsÿË
 = 
Ãw
 [
DEFAULT_SCALE
.
Ëngth
];

101 
´iv©e
 
fš®
 
Decim®FÜm©
 
	gdfx
 = 
Ãw
 DecimalFormat(

104 
´iv©e
 
fš®
 
Decim®FÜm©
 
	gdfy
 = 
Ãw
 DecimalFormat(

107 
public
 
	$G¿phImage
() {

108 
	`this
(
DEFAULT_WIDTH
, 
DEFAULT_HEIGHT
);

109 
	}
}

111 
public
 
	$G¿phImage
(
width
, 
height
) {

112 
	`su³r
(
width
, 
height
, 
TYPE_3BYTE_BGR
);

113 
	`š™
();

114 
	}
}

116 
´iv©e
 
	$š™
() {

117 
g¿phics
 = 
	`g‘G¿phics
();

118 
g¿phics
.
	`£tFÚt
(
FONT
);

119 
	`£tSÿË
(
DEFAULT_SCALE
);

120 
	`£tPix–Size
(
DEFAULT_PIXEL_SIZE
);

121 
	`£tPix–Ty³
(
DEFAULT_PIXEL_TYPE
);

122 
	`£tBackground
(
DEFAULT_BACKGROUND_COLOR
);

123 
	`£tFÜeground
(
DEFAULT_FOREGROUND_COLOR
);

124 
	`£tImageQu®™y
(
DEFAULT_JPEG_QUALITY
);

125 
	`£tCÚÃùPoštsEÇbËd
(
çl£
);

126 
	`£tXYAxesLab–sP»cisiÚ
(2, 2);

127 
	}
}

129 
public
 
	$£tImageQu®™y
(
qu®™y
) {

130 ià(
qu®™y
 < 0.0f || quality > 1.0f)

132 
this
.
qu®™y
 = quality;

133 
	}
}

135 
public
 
	$£tPix–Size
(
pix–size
) {

136 
this
.
pix–size
 =…ixelsize;

137 
	}
}

139 
public
 
	$£tPix–Ty³
(
pix–ty³
) {

140 
this
.
pix–ty³
 =…ixeltype;

141 
	}
}

143 
public
 
	$£tBackground
(
CŞÜ
 
cŞÜ
) {

144 
g¿phics
.
	`£tCŞÜ
(
cŞÜ
);

145 
g¿phics
.
	`flReù
(0, 0, 
	`g‘Width
(), 
	`g‘Height
());

146 
	}
}

148 
public
 
	$£tFÜeground
(
CŞÜ
 
cŞÜ
) {

149 
pix–cŞÜ
 = 
cŞÜ
;

150 
	}
}

154 
public
 
	$g‘Sugge¡edYAxisTickIÁ”v®
(
sugge¡edNumTicks
, 
maxy
) {

156 
t
 = 
maxy
 / 
sugge¡edNumTicks
;

158 
Î
 = (è(
M©h
.
	`log
(
t
) / Math.log(10));

159 
lu
 = 
Î
 + 1;

160 [] 
ti
 = 
Ãw
 [10];

161 
ti
[0] = (è
M©h
.
	`pow
(10, 
Î
);

162 
ti
[9] = (è
M©h
.
	`pow
(10, 
lu
);

163 
i
 = 0; i < 
ti
.
Ëngth
 - 1; i++) {

164 
ti
[
i
 + 1] =i[i] +i[0];

166 
šdex
 = 9;

167 
d–
 = 
IÁeg”
.
MAX_VALUE
;

168 
i
 = 
ti
.
Ëngth
 - 1; i >= 0; i--) {

169 
ddiff
 = (
ti
[
i
] - 
t
);

170 ià(
ddiff
 < 0.0)

172 
diff
 = (è
ddiff
;

173 ià(
diff
 <ğ
d–
 || delta < 0) {

174 
d–
 = 
diff
;

175 
šdex
 = 
i
;

179  
ti
[
šdex
];

180 
	}
}

182 
public
 
synchrÚized
 
	$g‘Sugge¡edMšXSÿË
(
maxx
, 
maxy
) {

183 [] 
sÿË
 = 
Ãw
 [
this
.sÿË.
Ëngth
];

184 
Sy¡em
.
	`¬¿ycİy
(
this
.
sÿË
, 0, sÿË, 0, sÿË.
Ëngth
);

185 
	`£tSÿË
(
Ãw
 [] {

186 0, 
maxx
, 0, 
maxy


188 
FÚtM‘rics
 
fm
 = 
g¿phics
.
	`g‘FÚtM‘rics
();

189 
w
 = 
fm
.
	`¡ršgWidth
(
dfy
.
	`fÜm©
(
maxy
)è+ 
AXIS_TICK_RADIUS
 + 20;

190 
mšx
 = -(
this
.
sÿË
[
MINX
] + 
w
 * 
®phax
);

191 
	`£tSÿË
(
sÿË
);

192  
mšx
;

193 
	}
}

195 
public
 
synchrÚized
 
	$g‘Sugge¡edMšYSÿË
(
maxx
, 
maxy
) {

196 [] 
sÿË
 = 
Ãw
 [
this
.sÿË.
Ëngth
];

197 
Sy¡em
.
	`¬¿ycİy
(
this
.
sÿË
, 0, sÿË, 0, sÿË.
Ëngth
);

198 
	`£tSÿË
(
Ãw
 [] {

199 0, 
maxx
, 0, 
maxy


201 
FÚtM‘rics
 
fm
 = 
g¿phics
.
	`g‘FÚtM‘rics
();

202 
h
 = 
AXIS_TICK_RADIUS
 + 
fm
.
	`g‘Height
() + 40;

203 
mšy
 = (
this
.
sÿË
[
MAXY
] - 
h
 * 
®phay
) -his.scale[MAXY];

204 
	`£tSÿË
(
sÿË
);

205  
mšy
;

206 
	}
}

208 
public
 
	$£tSÿË
([] 
sÿË
) {

209 ià(
sÿË
 =ğ
nuÎ
 || sÿË.
Ëngth
 < 
this
.scale.length)

211 
Sy¡em
.
	`¬¿ycİy
(
sÿË
, 0, 
this
.sÿË, 0,his.sÿË.
Ëngth
);

212 
®phax
 = (
this
.
sÿË
[
MAXX
] -his.sÿË[
MINX
]è/ 
	`g‘Width
();

213 
®phay
 = (
this
.
sÿË
[
MAXY
] -his.sÿË[
MINY
]è/ 
	`g‘Height
();

214 
	}
}

216 
´iv©e
 
	$g‘Lš—rM­X
(
x
) {

217  (è
M©h
.
	`round
((
x
 - 
sÿË
[
MINX
]è/ 
®phax
);

218 
	}
}

220 
´iv©e
 
	$g‘Lš—rM­Y
(
y
) {

221  (è
M©h
.
	`round
((
sÿË
[
MAXY
] - 
y
è/ 
®phay
);

222 
	}
}

224 
´iv©e
 
	$£tAxisLab–sP»cisiÚ
(
Decim®FÜm©
 
df
, 
i
, 
f
) {

225 
df
.
	`£tMšimumIÁeg”Dig™s
(
i
);

226 
df
.
	`£tMšimumF¿ùiÚDig™s
(
f
);

227 
df
.
	`£tMaximumF¿ùiÚDig™s
(
f
);

228 
	}
}

230 
public
 
	$£tXAxisLab–sP»cisiÚ
(
i
, 
f
) {

231 
	`£tAxisLab–sP»cisiÚ
(
dfx
, 
i
, 
f
);

232 
	}
}

234 
public
 
	$£tYAxisLab–sP»cisiÚ
(
i
, 
f
) {

235 
	`£tAxisLab–sP»cisiÚ
(
dfy
, 
i
, 
f
);

236 
	}
}

238 
public
 
	$£tXYAxesLab–sP»cisiÚ
(
x
, 
y
) {

239 
	`£tAxisLab–sP»cisiÚ
(
dfx
, 1, 
x
);

240 
	`£tAxisLab–sP»cisiÚ
(
dfy
, 1, 
y
);

241 
	}
}

243 
public
 
	$¶ÙXYAxes
(
CŞÜ
 
c
) {

244 
g¿phics
.
	`£tCŞÜ
(
c
);

245 
pix–OrigšX
 = 
	`g‘Lš—rM­X
(0.0);

246 
pix–OrigšY
 = 
	`g‘Lš—rM­Y
(0.0);

247 
g¿phics
.
	`d¿wLše
(0, 
pix–OrigšY
, 
	`g‘Width
(),…ixelOriginY);

248 
g¿phics
.
	`d¿wLše
(
pix–OrigšX
, 0,…ix–OrigšX, 
	`g‘Height
());

249 
	}
}

251 
public
 
	$¶ÙXAxisTicks
(
¡•
, 
CŞÜ
 
c
, 
SŒšg
 
Ïb–
) {

252 
g¿phics
.
	`£tCŞÜ
(
c
);

253 
py
 = 
	`g‘Lš—rM­Y
(0.0);

254 
FÚtM‘rics
 
fm
 = 
g¿phics
.
	`g‘FÚtM‘rics
();

255 
x
 = 0.0; x <ğ
sÿË
[
MAXX
]; x +ğ
¡•
) {

256 
px
 = 
	`g‘Lš—rM­X
(
x
);

257 
g¿phics
.
	`d¿wLše
(
px
, 
py
 - 
AXIS_TICK_RADIUS
 * ((
x
 == 0.0) ? 2 : 1),

258 
px
, 
py
 + 
AXIS_TICK_RADIUS
 * ((
x
 == 0.0) ? 2 : 1));

259 ià(
x
 == 0.0)

261 
SŒšg
 
sx
 = 
dfx
.
	`fÜm©
(
x
);

262 
sw
 = 
fm
.
	`¡ršgWidth
(
sx
) / 2;

263 
g¿phics
.
	`d¿wSŒšg
(
sx
, 
px
 - 
sw
, 
py
 + 
AXIS_TICK_RADIUS


264 + 
fm
.
	`g‘AsûÁ
());

266 
x
 = 0.0; x >ğ
sÿË
[
MINX
]; x -ğ
¡•
) {

267 
px
 = 
	`g‘Lš—rM­X
(
x
);

268 
g¿phics
.
	`d¿wLše
(
px
, 
py
 - 
AXIS_TICK_RADIUS
,…x,…y

269 + 
AXIS_TICK_RADIUS
);

271 
g¿phics
.
	`d¿wSŒšg
(
Ïb–
, 
	`g‘Lš—rM­X
(
sÿË
[
MAXX
] - 2), 
py
 + 3

272 * 
AXIS_TICK_RADIUS
 + 
fm
.
	`g‘AsûÁ
());

273 
	}
}

275 
public
 
	$¶ÙYAxisTicks
(
¡•
, 
CŞÜ
 
c
, 
SŒšg
 
Ïb–
) {

276 
g¿phics
.
	`£tCŞÜ
(
c
);

277 
px
 = 
	`g‘Lš—rM­X
(0.0);

278 
FÚtM‘rics
 
fm
 = 
g¿phics
.
	`g‘FÚtM‘rics
();

279 
y
 = 0.0; y <ğ
sÿË
[
MAXY
] - 
¡•
; y += step) {

280 
py
 = 
	`g‘Lš—rM­Y
(
y
);

281 
g¿phics
.
	`d¿wLše
(
px
 - 
AXIS_TICK_RADIUS
 * ((
y
 =ğ0.0è? 2 : 1), 
py
,

282 
px
 + 
AXIS_TICK_RADIUS
 * ((
y
 =ğ0.0è? 2 : 1), 
py
);

283 ià(
y
 == 0.0)

285 
SŒšg
 
sy
 = 
dfy
.
	`fÜm©
(
y
);

286 
g¿phics
.
	`d¿wSŒšg
(
sy
, 
px
 - 
AXIS_TICK_RADIUS
 - 
fm
.
	`¡ršgWidth
(sy)

287 - 2, 
py
 + 
fm
.
	`g‘DesûÁ
());

289 
y
 = 0.0; y >ğ
sÿË
[
MINY
]; y -ğ
¡•
) {

290 
py
 = 
	`g‘Lš—rM­Y
(
y
);

291 
g¿phics
.
	`d¿wLše
(
px
 - 
AXIS_TICK_RADIUS
, 
py
,…x + AXIS_TICK_RADIUS,

292 
py
);

294 
g¿phics
.
	`d¿wSŒšg
(
Ïb–
, 
px
 - 
AXIS_TICK_RADIUS


295 - 
fm
.
	`¡ršgWidth
(
Ïb–
), 
	`g‘Lš—rM­Y
(
sÿË
[
MAXY
]) + 4

296 + 
fm
.
	`g‘DesûÁ
());

297 
	}
}

299 
public
 
	$d¿wLeg’d
(
SŒšg
 
Ëg’d
, 
XOff£t
, 
YOff£t
,

300 
CŞÜ
 
symbŞCŞÜ
, CŞÜ 
Ëg’dCŞÜ
, 
SŒšg
 
Ëg’dTy³
) {

301 
FÚtM‘rics
 
fm
 = 
g¿phics
.
	`g‘FÚtM‘rics
();

302 
tx
 = 
	`g‘Lš—rM­X
(
sÿË
[
MINX
] + 
XOff£t
);

303 
ty
 = 
	`g‘Lš—rM­Y
(0è+ (è(
YOff£t
 * 
AXIS_TICK_RADIUS
)

304 + 
fm
.
	`g‘AsûÁ
();

305 
p
 = 
pix–size
;

306 
r
 = (è
M©h
.
	`round
(
p
 / 2.0);

307 
g¿phics
.
	`£tCŞÜ
(
symbŞCŞÜ
);

308 ià(
Ëg’dTy³
.
	`equ®s
("Line")) {

309 
g¿phics
.
	`d¿wLše
(
tx
, 
ty
 - 
fm
.
	`g‘AsûÁ
() / 2,x + 20,y

310 - 
fm
.
	`g‘AsûÁ
() / 2);

311 
g¿phics
.
	`£tCŞÜ
(
Ëg’dCŞÜ
);

312 
g¿phics
.
	`d¿wSŒšg
(" - " + 
Ëg’d
, 
tx
 + 22, 
ty
);

314 ià(
Ëg’dTy³
.
	`equ®s
("Dot")) {

315 
g¿phics
.
	`flArc
(
tx
 - 
r
, 
ty
 -„ - 
fm
.
	`g‘AsûÁ
(è/ 2, 
p
,…, 0, 360);

316 
g¿phics
.
	`£tCŞÜ
(
Ëg’dCŞÜ
);

317 
g¿phics
.
	`d¿wSŒšg
(" - " + 
Ëg’d
, 
tx
, 
ty
);

319 
	}
}

321 
public
 
	$£tCÚÃùPoštsEÇbËd
(
boŞ—n
 
cÚÃùPoštsEÇbËd
) {

322 
this
.
cÚÃùPoštsEÇbËd
 = connectPointsEnabled;

323 
	}
}

325 
public
 
	$»£tCÚÃùPošts
() {

326 
´evS‘
 = 
çl£
;

327 
	}
}

329 
public
 
	$¶ÙLše
(
x1
, 
y1
, 
x2
, 
y2
) {

330 
g¿phics
.
	`£tCŞÜ
(
pix–cŞÜ
);

331 
g¿phics
.
	`d¿wLše
(
	`g‘Lš—rM­X
(
x1
), 
	`g‘Lš—rM­Y
(
y1
),

332 
	`g‘Lš—rM­X
(
x2
), 
	`g‘Lš—rM­Y
(
y2
));

333 
	}
}

335 
public
 
	$¶ÙFÏtLše
(
x1
, 
x2
, 
y
, 
CŞÜ
 
c
) {

336 
py
 = 
	`g‘Lš—rM­Y
(
y
);

337 
px
 = 
	`g‘Lš—rM­X
(
x1
);

338 
ex
 = 
	`g‘Lš—rM­X
(
x2
);

339 
g¿phics
.
	`£tCŞÜ
(
c
);

340 
x
 = 
px
; x < 
ex
; x +ğ2 * 
DASH_LENGTH
) {

341 
g¿phics
.
	`d¿wLše
(
x
, 
py
, x + 
DASH_LENGTH
,…y);

343 
	}
}

345 
public
 
	$¶ÙFÏtLše
(
y
, 
CŞÜ
 
c
) {

346 
w
 = 
	`g‘Width
();

347 
py
 = 
	`g‘Lš—rM­Y
(
y
);

348 
px
 = 
	`g‘Lš—rM­X
(0.0);

349 
g¿phics
.
	`£tCŞÜ
(
c
);

350 
x
 = 
px
; x < 
w
; x +ğ2 * 
DASH_LENGTH
) {

351 
g¿phics
.
	`d¿wLše
(
x
, 
py
, x + 
DASH_LENGTH
,…y);

353 
	}
}

355 
public
 
	$¶Ù
(
x
, 
y
, 
p
, 
CŞÜ
 
c
) {

356 ià(
cÚÃùPoštsEÇbËd
) {

357 ià(
´evS‘
) {

358 
	`¶ÙLše
(
´evx
, 
´evy
, 
x
, 
y
);

360 
´evS‘
 = 
Œue
;

361 
´evx
 = 
x
;

362 
´evy
 = 
y
;

365 
´evS‘
 = 
çl£
;

367 
g¿phics
.
	`£tCŞÜ
(
c
);

368 
px
 = 
	`g‘Lš—rM­X
(
x
);

369 
py
 = 
	`g‘Lš—rM­Y
(
y
);

370 
r
 = (è
M©h
.
	`round
(
p
 / 2.0);

371 
pix–ty³
) {

372 
PIXEL_TYPE_CIRCLE
:

373 
g¿phics
.
	`flArc
(
px
 - 
r
, 
py
 -„, 
p
,…, 0, 360);

375 
PIXEL_TYPE_SQUARE
:

376 
g¿phics
.
	`flReù
(
px
 - 
r
, 
py
 -„, 
p
,…);

379 
	}
}

381 
public
 
	$¶Ù
(
x
, 
y
, 
CŞÜ
 
c
) {

382 
	`¶Ù
(
x
, 
y
, 
pix–size
, 
c
);

383 
	}
}

385 
public
 
	$¶Ù
(
x
, 
y
) {

386 
	`¶Ù
(
x
, 
y
, 
pix–size
, 
pix–cŞÜ
);

387 
	}
}

389 
public
 
	$make
() {

390 
	`make
(
DEFAULT_FILENAME
);

391 
	}
}

393 
public
 
	$make
(
SŒšg
 
f’ame
) {

394 ià(
f’ame
 =ğ
nuÎ
)

396 
Œy
 {

397 
Fe
 
outfe
 = 
Ãw
 
	`Fe
(
f’ame
);

398 
ImageIO
.
	`wr™e
(
this
, "j³g", 
outfe
);

400 
	`ÿtch
 (
Exû±iÚ
 
e
) {

401 
JBBut
.
	`g‘Log
().
	`log
(
Lev–
.
WARNING
, "Exû±iÚ: " + 
e
.
	`g‘Mes§ge
(),

402 
e
);

404 
	}
}

	@spec/reporter/HTMLTableGraphGenerator3.java

11 
·ckage
 
	g¥ec
.
	g»pÜ‹r
;

13 
impÜt
 
	gjava
.
	gio
.*;

14 
impÜt
 
	gjava
.
	gawt
.*;

15 
impÜt
 
	gjava
.
	gut
.*;

16 
impÜt
 
	gjava
.
	gut
.
	gloggšg
.
	gLev–
;

17 
impÜt
 
	gjava
.
	g‹xt
.*;

18 
impÜt
 
	g¥ec
.
	gjbb
.
	gJBBut
;

20 
public
 cÏs 
	cHTMLTabËG¿phG’”©Ü3
 {

22 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

29 
public
 
fš®
 
	mX
 = 0;

31 
public
 
fš®
 
	mY
 = 1;

33 
public
 
fš®
 
	mDIM
 = 2;

35 
public
 
fš®
 
	mMINX
 = 0;

37 
public
 
fš®
 
	mMAXX
 = 1;

39 
public
 
fš®
 
	mMINY
 = 2;

41 
public
 
fš®
 
	mMAXY
 = 3;

43 
public
 
fš®
 
SŒšg
 
	mDEFAULT_XAXIS
 = "x";

45 
public
 
fš®
 
SŒšg
 
	mDEFAULT_YAXIS
 = "y";

47 
public
 
fš®
 
	mDEFAULT_PADSIZE
 = 2;

49 
public
 
fš®
 
	mDEFAULT_PIXELSIZE
 = 2;

51 
public
 
fš®
 
CŞÜ
 
	mDEFAULT_FGCOLOR
 = CŞÜ.
»d
;

53 
public
 
fš®
 
CŞÜ
 
	mDEFAULT_BGCOLOR
 = CŞÜ.
bÏck
;

55 
public
 
fš®
 
Dim’siÚ
 
	mDEFAULT_SIZE
 = 
Ãw
 Dimension(50, 50);

57 
public
 
fš®
 [] 
	mDEFAULT_SCALE
 = 
Ãw
 [] {

61 
public
 
fš®
 
SŒšg
 
	gDEFAULT_HTMLFILE
 = "HTMLTableGraph.html";

63 
´iv©e
 
	g·d
;

65 
´iv©e
 
SŒšg
 
	gpix–
;

67 
´iv©e
 
	gpix–size
;

69 
´iv©e
 
Dim’siÚ
 
	gsize
;

71 
´iv©e
 
SŒšg
 
	gxaxis
;

73 
´iv©e
 
SŒšg
 
	gyaxis
;

75 
´iv©e
 
SŒšg
 
	gfgcŞÜ
;

77 
´iv©e
 
SŒšg
 
	gbgcŞÜ
;

79 
´iv©e
 
boŞ—n
 
	gbgcŞÜEÇbËd
;

81 
´iv©e
 
SŒšg
 
	gpix–cŞÜ
;

83 
´iv©e
 
boŞ—n
 
	gpix–cŞÜEÇbËd
;

85 
´iv©e
 
	g®phax
;

87 
´iv©e
 
	g®phay
;

89 
´iv©e
 
fš®
 
HashbË
 
	gxy·œs
 = 
Ãw
 Hashtable();

91 
´iv©e
 
fš®
 [] 
	gsÿË
 = 
Ãw
 [
DEFAULT_SCALE
.
Ëngth
];

93 
´iv©e
 
fš®
 
Decim®FÜm©
 
	gdfx
 = 
Ãw
 DecimalFormat("#.##");

95 
´iv©e
 
fš®
 
Decim®FÜm©
 
	gdfy
 = 
Ãw
 DecimalFormat("#.##");

97 
public
 
	$HTMLTabËG¿phG’”©Ü3
() {

98 
	`£tTabËSize
(
DEFAULT_SIZE
);

99 
	`£tPix–Size
(
DEFAULT_PIXELSIZE
);

100 
	`£tPix–PadSize
(
DEFAULT_PADSIZE
);

101 
	`£tFÜegroundCŞÜ
(
DEFAULT_FGCOLOR
);

102 
	`£tBackgroundCŞÜ
(
DEFAULT_BGCOLOR
);

103 
	`£tAxesLab–s
(
DEFAULT_XAXIS
, 
DEFAULT_YAXIS
);

104 
	`£tAxesLab–sP»cisiÚ
(0, 0);

105 
	}
}

107 
´iv©e
 
SŒšg
 
	$toHexSŒšg
(
CŞÜ
 
c
) {

108  "#" + 
	`toHexSŒšg
(
c
.
	`g‘Red
()è+oHexSŒšg(c.
	`g‘G»’
())

109 + 
	`toHexSŒšg
(
c
.
	`g‘Blue
());

110 
	}
}

112 
´iv©e
 
SŒšg
 
	$toHexSŒšg
(
v®ue
) {

113 
SŒšg
 
s
 = 
IÁeg”
.
	`toHexSŒšg
(
v®ue
);

114  (
s
.
	`Ëngth
() == 1) ? "0" + s : s;

115 
	}
}

117 
public
 
	$£tBackgroundCŞÜEÇbËd
(
boŞ—n
 
bgcŞÜEÇbËd
) {

118 
this
.
bgcŞÜEÇbËd
 = bgcolorEnabled;

119 
	}
}

121 
public
 
boŞ—n
 
	$isBackgroundCŞÜEÇbËd
() {

122  
bgcŞÜEÇbËd
;

123 
	}
}

125 
public
 
	$£tPix–BÜd”CŞÜEÇbËd
(
boŞ—n
 
pix–cŞÜEÇbËd
) {

126 
this
.
pix–cŞÜEÇbËd
 =…ixelcolorEnabled;

127 
	}
}

129 
public
 
boŞ—n
 
	$isPix–BÜd”CŞÜEÇbËd
() {

130  
pix–cŞÜEÇbËd
;

131 
	}
}

133 
public
 
	$£tPix–BÜd”CŞÜ
(
CŞÜ
 
c
) {

134 ià(
c
 =ğ
nuÎ
)

136 
pix–cŞÜ
 = 
	`toHexSŒšg
(
c
);

137 
	`£tPix–BÜd”CŞÜEÇbËd
(
Œue
);

138 
	}
}

140 
public
 
	$£tBackgroundCŞÜ
(
CŞÜ
 
c
) {

141 ià(
c
 =ğ
nuÎ
)

143 
bgcŞÜ
 = 
	`toHexSŒšg
(
c
);

144 
	`£tBackgroundCŞÜEÇbËd
(
Œue
);

145 
	}
}

147 
public
 
	$£tFÜegroundCŞÜ
(
CŞÜ
 
c
) {

148 ià(
c
 =ğ
nuÎ
)

150 
fgcŞÜ
 = 
	`toHexSŒšg
(
c
);

151 
	}
}

153 
public
 
	$£tTabËSize
(
Dim’siÚ
 
size
) {

154 ià(
size
 =ğ
nuÎ
)

156 
this
.
size
 = size;

157 
	`£tSÿË
(
sÿË
);

158 
	}
}

160 
public
 
	$£tPix–Size
(
pix–size
) {

161 
this
.
pix–size
 =…ixelsize;

162 
	`£tPix–Image
(
pix–
);

163 
	}
}

165 
public
 
	$£tPix–PadSize
(
·d
) {

166 
this
.
·d
 =…ad;

167 
	}
}

169 
public
 
	$£tPix–Image
(
SŒšg
 
pix–
) {

170 
pix–
 = "<IMG SRC=" +…ix– + " WIDTH=" + 
pix–size
 + " HEIGHT="

171 + 
pix–size
 + ">";

172 
this
.
pix–
 =…ixel;

173 
	}
}

175 
public
 
	$£tSÿË
([] 
sÿË
) {

176 ià(
sÿË
 =ğ
nuÎ
 || sÿË.
Ëngth
 < 
this
.scale.length)

178 
Sy¡em
.
	`¬¿ycİy
(
sÿË
, 0, 
this
.sÿË, 0,his.sÿË.
Ëngth
);

179 
®phax
 = (
this
.
sÿË
[
MAXX
] -his.sÿË[
MINX
]è/ 
size
.
width
;

180 
®phay
 = (
this
.
sÿË
[
MAXY
] -his.sÿË[
MINY
]è/ 
size
.
height
;

181 
	}
}

183 
´iv©e
 
	$g‘Lš—rM­X
(
x
) {

184  (è
M©h
.
	`round
((
x
 - 
sÿË
[
MINX
]è/ 
®phax
);

185 
	}
}

187 
´iv©e
 
	$g‘Lš—rM­Y
(
y
) {

188  (è
M©h
.
	`round
((
sÿË
[
MAXY
] - 
y
è/ 
®phay
);

189 
	}
}

191 
´iv©e
 
	$g‘Inv”£Lš—rM­X
(
x
) {

192  (
sÿË
[
MINX
] + 
x
 * 
®phax
);

193 
	}
}

195 
´iv©e
 
	$g‘Inv”£Lš—rM­Y
(
y
) {

196  (
sÿË
[
MAXY
] - 
y
 * 
®phay
);

197 
	}
}

199 
public
 
	$£tAxesLab–s
(
SŒšg
 
xaxis
, SŒšg 
yaxis
) {

200 
this
.
xaxis
 = xaxis;

201 ià(
yaxis
.
	`Ëngth
() > 1) {

202 [] 
c
 = 
yaxis
.
	`toCh¬A¼ay
();

203 
yaxis
 = "";

204 
i
 = 0; i < 
c
.
Ëngth
; i++) {

205 
yaxis
 +ğ"&nb¥;" + 
c
[
i
] + "&nbsp;<BR>";

208 
this
.
yaxis
 = yaxis;

209 
	}
}

211 
public
 
	$£tAxesLab–sP»cisiÚ
(
x
, 
y
) {

212 
dfx
.
	`£tMšimumIÁeg”Dig™s
(1);

213 
dfx
.
	`£tMšimumF¿ùiÚDig™s
(
x
);

214 
dfx
.
	`£tMaximumF¿ùiÚDig™s
(
x
);

215 
dfy
.
	`£tMšimumIÁeg”Dig™s
(1);

216 
dfy
.
	`£tMšimumF¿ùiÚDig™s
(
y
);

217 
dfy
.
	`£tMaximumF¿ùiÚDig™s
(
y
);

218 
	}
}

220 
public
 
	$ş—rXYPaœs
() {

221 
xy·œs
.
	`ş—r
();

222 
	}
}

224 
public
 
	$addXYPaœ
([] 
xy·œ
) {

225 ià(
xy·œ
 =ğ
nuÎ
 || xy·œ.
Ëngth
 !ğ
DIM
)

227 
SŒšg
 
lmx
 = 
IÁeg”
.
	`toSŒšg
(
	`g‘Lš—rM­X
(
xy·œ
[
X
]));

228 
SŒšg
 
lmy
 = 
IÁeg”
.
	`toSŒšg
(
	`g‘Lš—rM­Y
(
xy·œ
[
Y
]));

229 ià(!
xy·œs
.
	`cÚšsKey
(
lmx
)) {

230 
xy·œs
.
	`put
(
lmx
, 
Ãw
 
	`VeùÜ
());

232 ((
VeùÜ
è
xy·œs
.
	`g‘
(
lmx
)).
	`addEËm’t
(
lmy
);

233 
	}
}

235 
public
 
	$£tXYPaœs
([][] 
xy·œs
) {

236 ià(
xy·œs
 =ğ
nuÎ
)

238 
i
 = 0; i < 
xy·œs
.
Ëngth
; i++) {

239 
	`addXYPaœ
(
xy·œs
[
i
]);

241 
	}
}

243 
public
 
	$£tXYPaœs
(
VeùÜ
 
xy·œs
) {

244 ià(
xy·œs
 =ğ
nuÎ
)

246 
Enum”©iÚ
 
e
 = 
xy·œs
.
	`–em’ts
();

247 
e
.
	`hasMÜeEËm’ts
()) {

248 
	`addXYPaœ
(([]è
e
.
	`ÃxtEËm’t
());

250 
	}
}

252 
public
 
	$g’”©e
() {

253 
	`g’”©e
(
DEFAULT_HTMLFILE
);

254 
	}
}

256 
public
 
	$g’”©e
(
SŒšg
 
f’ame
) {

257 ià(
f’ame
 =ğ
nuÎ
)

259 
Œy
 {

260 
FeWr™”
 
fw
 = 
Ãw
 
	`FeWr™”
(
f’ame
);

261 
fw
.
	`wr™e
(
	`g’”©eSŒšg
());

262 
fw
.
	`æush
();

263 
fw
.
	`şo£
();

265 
	`ÿtch
 (
IOExû±iÚ
 
iÛ
) {

266 
JBBut
.
	`g‘Log
().
	`log
(
Lev–
.
WARNING
,

267 "IOExû±iÚ: " + 
iÛ
.
	`g‘Mes§ge
(), ioe);

269 
	`ÿtch
 (
Exû±iÚ
 
e
) {

270 
JBBut
.
	`g‘Log
().
	`log
(
Lev–
.
WARNING
, "Exû±iÚ: " + 
e
.
	`g‘Mes§ge
(),

271 
e
);

272 
e
.
	`´štSckT¿û
();

274 
	}
}

276 
public
 
SŒšg
 
	$g’”©eSŒšg
() {

277 
SŒšgBufãr
 
buf
 = 
Ãw
 
	`SŒšgBufãr
();

278 
buf
.
	`­³nd
("<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=0><TR><TD>");

279 
buf
.
	`­³nd
("<TABLE BORDER=0 CELLSPACING=" + 
·d
 + " CELLPADDING=" +…ad

280 + ((
bgcŞÜEÇbËd
è? " BGCOLOR=" + 
bgcŞÜ
 : "") + " WIDTH="

281 + (
size
.
width
 * 
pix–size
) + ">\n");

282 
y
 = 0; y < 
size
.
height
; y++) {

283 
buf
.
	`­³nd
("<TR>");

284 ià(
y
 == 0) {

285 
buf
.
	`­³nd
("<TD ALIGN=center VALIGN=middle ROWSPAN="

286 + 
size
.
height
 + " BGCOLOR=#ffffff>" + 
yaxis
 + "</TD>");

288 ià(
y
 % 10 == 0) {

289 
d
 = 
	`g‘Inv”£Lš—rM­Y
(
y
);

290 
SŒšg
 
Ïb–
 = 
dfy
.
	`fÜm©
(
d
).
	`»¶aû
('-', ' ').
	`Œim
();

291 
SŒšg
 
cŞÜ
 = (
d
 < 0) ? "COLOR=#ff0000" : "COLOR=#000000";

292 
buf


293 .
	`­³nd
("<TD BGCOLOR=white NOWRAP ROWSPAN=10 ALIGN=right VALIGN=top>"

295 + 
cŞÜ


297 + 
Ïb–


300 
x
 = 0; x < 
size
.
width
; x++) {

301 
SŒšg
 
¶Ù
 = "";

302 
SŒšg
 
sx
 = 
IÁeg”
.
	`toSŒšg
(
x
);

303 
SŒšg
 
sy
 = 
IÁeg”
.
	`toSŒšg
(
y
);

304 ià(
xy·œs
.
	`cÚšsKey
(
sx
)) {

305 
VeùÜ
 
v
 = (VeùÜè
xy·œs
.
	`g‘
(
sx
);

306 
Enum”©iÚ
 
e
 = 
v
.
	`–em’ts
();

307 
e
.
	`hasMÜeEËm’ts
()) {

308 
SŒšg
 
svy
 = 
e
.
	`ÃxtEËm’t
().
	`toSŒšg
();

309 ià(
svy
.
	`equ®s
(
sy
)) {

310 
¶Ù
 = 
pix–
;

316 
buf


317 .
	`­³nd
("<TD WIDTH="

318 + 
pix–size


319 + ((
pix–cŞÜEÇbËd
 && !
¶Ù
.
	`equ®s
("")) ? " BGCOLOR="

320 + 
pix–cŞÜ


321 : ""è+ ">" + 
¶Ù
 + "</TD>");

323 
buf
.
	`­³nd
("</TR>\n");

325 
buf
.
	`­³nd
("<TR><TD BGCOLOR=#ffffff COLSPAN=2 ROWSPAN=2>&nbsp;</TD>\n");

326 
x
 = 0; x < 
size
.
width
; x++) {

327 ià(
x
 % 10 == 0) {

328 
d
 = 
	`g‘Inv”£Lš—rM­X
(
x
);

329 
SŒšg
 
Ïb–
 = 
dfx
.
	`fÜm©
(
d
).
	`»¶aû
('-', ' ').
	`Œim
();

330 
SŒšg
 
cŞÜ
 = (
d
 < 0) ? "COLOR=#ff0000" : "COLOR=#000000";

331 
buf


332 .
	`­³nd
("<TD ALIGN=left BGCOLOR=white NOWRAP COLSPAN=10 VALIGN=top>"

334 + 
cŞÜ


336 + 
Ïb–


340 
buf
.
	`­³nd
("</TR><TR><TD COLSPAN=" + 
size
.
width


341 + " ALIGN=ûÁ” BGCOLOR=#ffffff>" + 
xaxis
 + "</TD></TR>");

342 
buf
.
	`­³nd
("</TABLE></TD></TR></TABLE>");

343  
buf
.
	`toSŒšg
();

344 
	}
}

	@spec/reporter/Metrics.java

10 
·ckage
 
	g¥ec
.
	g»pÜ‹r
;

12 
impÜt
 
	gjava
.
	gawt
.*;

13 
impÜt
 
	gjava
.
	gio
.*;

14 
impÜt
 
	gjava
.
	gut
.
	gVeùÜ
;

15 
impÜt
 
	gjava
.
	gut
.
	gRªdom
;

16 
impÜt
 
	gjava
.
	gut
.
	gloggšg
.
	gLev–
;

17 
impÜt
 
	g¥ec
.
	gjbb
.
	gJBBut
;

19 
public
 cÏs 
	cM‘rics
 {

21 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

33 
´iv©e
 
	mmaxB¬Width
 = 0;

35 
´iv©e
 
	mdig™s
 = 3;

37 
´iv©e
 
fš®
 
	mwidthAdj1
 = 80;

41 
´iv©e
 
fš®
 
	mwidthAdj2
 = -80;

45 
´iv©e
 
fš®
 
	mMAXINT
 = 2000000000;

47 
´iv©e
 
fš®
 
SŒšg
 
	mIMAGE_PIX
 = "pix.jpg";

51 
´iv©e
 
fš®
 
SŒšg
 
	mIMAGE_PIX_2
 = "pix2.jpg";

53 
´iv©e
 
fš®
 
SŒšg
 
	mIMAGE_INVALID
 = "invalid.gif";

55 
´iv©e
 
fš®
 
SŒšg
 
	mIMAGE_RESOURCE_PATH
 = "images/";

60 
public
 
	mhighe¡ScÜe
;

62 
public
 
	mmaxW¬ehou£s
;

64 
public
 
	mm—su»dP—kW¬ehou£
 = 0;

66 
public
 
	mex³ùedP—kWh
 = 0;

68 
public
 
	mjvm_š¡ªûs
 = 1;

70 
public
 
ResuÉ
 
	mcheck
;

72 
public
 
	mSŒšg
[] 
	mÇme
;

74 
public
 
R•ÜtPrİs
 
	m´İs
;

76 
public
 
	mResuÉ
[] 
	m»suÉ
;

78 
public
 
	mscÜe_©
[];

80 
´iv©e
 
	m¿mpup_mlis
[];

82 
´iv©e
 
	m¿mpdown_mlis
[];

84 
´iv©e
 
	m¡¬t_mlis
[];

86 
´iv©e
 
	m’d_mlis
[];

88 
public
 
	mmaximum_w¬ehou£s
;

90 
´iv©e
 
	mw¬ehou£sTe¡ed
 = 0;

92 
public
 
boŞ—n
 
	mv®id
;

94 
public
 
boŞ—n
 
	m´št_scÜe
;

98 
public
 
boŞ—n
 
	mSPECIÁ”ÇlU£
;

100 
´iv©e
 
SŒšg
 
	mo_dœeùÜy
;

102 
public
 
SŒšgBufãr
 
	mbuf
;

104 
public
 
SŒšgBufãr
 
	mšv®id_buf
;

106 
public
 
SŒšgBufãr
 
	m»suÉs_buf
;

108 
public
 
SŒšgBufãr
 
	mcheck_®l_buf
;

116 
public
 
	$M‘rics
(
R•ÜtPrİs
 
´İs
, 
boŞ—n
 
SPECIÁ”ÇlU£
) {

118 
this
.
´İs
 =…rops;

121 
this
.
SPECIÁ”ÇlU£
 = SPECInternalUse;

124 
this
.
v®id
 = 
Œue
;

125 
this
.
buf
 = 
Ãw
 
	`SŒšgBufãr
();

126 
this
.
šv®id_buf
 = 
Ãw
 
	`SŒšgBufãr
();

127 
this
.
»suÉs_buf
 = 
Ãw
 
	`SŒšgBufãr
();

128 
Çme
 = 
	`b’chm¬kLi¡
(
´İs
);

129 
»suÉ
 = 
Ãw
 
ResuÉ
[
Çme
.
Ëngth
];

130 
i
 = 0; i < 
»suÉ
.
Ëngth
; i++) {

131 
»suÉ
[
i
] = 
Ãw
 
	`ResuÉ
(
Çme
[i], 
´İs
);

133 
SŒšg
 
v®
 = (SŒšgè
´İs
.
	`g‘
("input.jvm_instances");

134 
jvm_š¡ªûs
 = 
IÁeg”
.
	`·r£IÁ
(
v®
.
	`Œim
());

135 
w¬ehou£sTe¡ed
 = 
Çme
.
Ëngth
;

136 
	`ü—‹_w¬ehou£_¬¿y
();

137 
	`ÿlcuÏ‹
();

138 
check_®l_buf
 = 
Ãw
 
	`SŒšgBufãr
();

139 
check_®l_buf
.
	`­³nd
(
	`check_®l
());

142 
public
 
SŒšg
 
	$w¿p
(
SŒšg
 
s
) {

143  ("<h1>" + 
s
 + "</h1>");

144 
	}
}

146 
public
 
SŒšg
 
	$check_®l
() {

148 
buf
 = 
Ãw
 
	`SŒšgBufãr
();

149 
SŒšg
 
v®
 = 
´İs
.
	`g‘
("result.validity.200_check");

150 ià(
v®
 !ğ
nuÎ
) {

155 ià(!
v®
.
	`equ®s
("true")) {

156 
this
.
v®id
 = 
çl£
;

165 
this
.
v®id
 = 
çl£
;

167 
this
.
´št_scÜe
 = 
Œue
;

168 ià(!
this
.
v®id
) {

169 
	`ouut_´İ”ly
("INVALID because conformance checking„eturned‚egative.\n");

171 
v®
 = 
´İs
.
	`g‘
("result.validity.999_checkit");

172 ià(
v®
 !ğ
nuÎ
) {

173 ià(
v®
.
	`equ®s
("false")) {

174 
this
.
v®id
 = 
çl£
;

175 
	`ouut_´İ”ly
("INVALID because benchmark„ecompiled or jbb.jar‚ot first in CLASSPATH.");

178 
boŞ—n
 
check™
;

179 
v®
 = 
´İs
.
	`g‘
("result.validity.jbb_operation");

180 ià(
v®
 !ğ
nuÎ
) {

181 ià(
v®
.
	`equ®s
("true")) {

182 
check™
 = 
Œue
;

185 
check™
 = 
çl£
;

189 
check™
 = 
Œue
;

191 
this
.
v®id
 =his.v®id && 
check™
;

192 ià(!
check™
) {

193 
SŒšg
 
s
 = "INVALID: JVM failed operational validity check.\n";

194 
	`ouut_´İ”ly
(
s
);

196 
boŞ—n
 
–­£dOK
 = 
	`checkEÏp£d
();

197 ià(!
–­£dOK
) {

198 
SŒšg
 
£
 = "INVALID: measurement interval failingoƒnd in closeƒnoughime†imits.";

199 
	`ouut_´İ”ly
(
£
);

200 
this
.
v®id
 = 
çl£
;

208 
boŞ—n
 
pošts_befÜe_m‘ric
 = 
	`check_pošts_befÜe_m‘ric
();

211 ià(!
pošts_befÜe_m‘ric
) {

212 
	`ouut_´İ”ly
("INVALID:‡ll…oints upohe…eak‡re„equired");

213 
this
.
v®id
 = 
çl£
;

215 ià(
maximum_w¬ehou£s
 < 8) {

216 
SŒšg
 
s8
 = "INVALID:‡t†easthe…oints from 1o 8‡re‚eeded for‡…ublishable„un.";

217 
	`ouut_´İ”ly
(
s8
);

220 
this
.
v®id
 = 
çl£
;

227 
boŞ—n
 
pošts_fÜ_m‘ric
 = 
	`check_pošts_fÜ_m‘ric
();

234 ià(
this
.
v®id
 && !
SPECIÁ”ÇlU£
) {

235 
	`ouut_´İ”ly
("Noƒrrors. Valid„un.");

237  
buf
.
	`toSŒšg
();

238 
	}
}

240 
public
 
	$ouut_´İ”ly
(
SŒšg
 
s
) {

241 
buf
.
	`­³nd
(
this
.
	`w¿p
(
s
));

242 
this
.
šv®id_buf
.
	`­³nd
Ñhis.
	`w¿p
(
s
));

243 
this
.
»suÉs_buf
.
	`­³nd
(
s
 + "\n");

244 
	}
}

249 
public
 
	$g‘_whAtP—k
() {

250  
ex³ùedP—kWh
;

251 
	}
}

253 
public
 
	$g‘Highe¡ScÜe
() {

254  
highe¡ScÜe
;

255 
	}
}

257 
public
 
	$g‘W¬ehou£sTe¡ed
() {

258  
w¬ehou£sTe¡ed
;

259 
	}
}

268 
public
 
SŒšg
 
	$scÜe_fÜm©
(
x
) {

269 
n
;

270 
SŒšg
 
s
;

271 
SŒšg
 
fÜm©‹d
;

272 
Œy
 {

273 ià(
x
 < 0.01) {

274 
fÜm©‹d
 = "0";

276 ià(
x
 < 0.1) {

277 
n
 = (è(1000 * 
x
 + 0.5);

278 
s
 = 
IÁeg”
.
	`toSŒšg
(
n
);

279 
fÜm©‹d
 = ".0" + 
s
;

281 ià(
x
 < 1) {

282 
n
 = (è(1000 * 
x
 + 0.5);

283 
s
 = 
IÁeg”
.
	`toSŒšg
(
n
);

284 
fÜm©‹d
 = "." + 
s
;

286 ià(
x
 < 10) {

287 
n
 = (è(100 * 
x
 + 0.5);

288 
s
 = 
IÁeg”
.
	`toSŒšg
(
n
);

289 
fÜm©‹d
 = 
s
.
	`sub¡ršg
(0, 1) + "." + s.substring(1, 3);

291 ià(
x
 < 100) {

292 
n
 = (è(10 * 
x
 + 0.5);

293 
s
 = 
IÁeg”
.
	`toSŒšg
(
n
);

294 
fÜm©‹d
 = 
s
.
	`sub¡ršg
(0, 2) + "." + s.substring(2, 3);

297 
n
 = (è(
x
 + 0.5);

298 
fÜm©‹d
 = 
IÁeg”
.
	`toSŒšg
(
n
);

301 
	`ÿtch
 (
SŒšgIndexOutOfBoundsExû±iÚ
 
e
) {

302 
fÜm©‹d
 = "n/a";

304  
fÜm©‹d
;

305 
	}
}

310 
public
 
SŒšg
 
	$fÜm©
(
x
) {

311 
n
;

312 
SŒšg
 
s
;

313 
SŒšg
 
fÜm©‹d
;

314 
Œy
 {

315 ià(
x
 < 0.01) {

316 
fÜm©‹d
 = "<0.01";

318 ià(
x
 < 0.1) {

319 
n
 = (è(1000 * 
x
 + 0.5);

320 
s
 = 
IÁeg”
.
	`toSŒšg
(
n
);

321 
fÜm©‹d
 = ".0" + 
s
;

323 ià(
x
 < 1) {

324 
n
 = (è(1000 * 
x
 + 0.5);

325 
s
 = 
IÁeg”
.
	`toSŒšg
(
n
);

326 
fÜm©‹d
 = "." + 
s
;

328 ià(
x
 < 10) {

329 
n
 = (è(100 * 
x
 + 0.5);

330 
s
 = 
IÁeg”
.
	`toSŒšg
(
n
);

331 
fÜm©‹d
 = 
s
.
	`sub¡ršg
(0, 1) + "." + s.substring(1, 3);

333 ià(
x
 < 100) {

334 
n
 = (è(10 * 
x
 + 0.5);

335 
s
 = 
IÁeg”
.
	`toSŒšg
(
n
);

336 
fÜm©‹d
 = 
s
.
	`sub¡ršg
(0, 2) + "." + s.substring(2, 3);

339 
n
 = (è(
x
 + 0.5);

340 
fÜm©‹d
 = 
IÁeg”
.
	`toSŒšg
(
n
);

343 
	`ÿtch
 (
SŒšgIndexOutOfBoundsExû±iÚ
 
e
) {

344 
fÜm©‹d
 = "n/a";

346  
fÜm©‹d
;

347 
	}
}

356 
public
 
	gResuÉ
[] 
	$g‘ResuÉs
() {

357  
»suÉ
;

358 
	}
}

360 
public
 
boŞ—n
 
	$checkEÏp£d
() {

361 
i
 = 0; i < 
»suÉ
.
Ëngth
; i++) {

362 
e
 = 
»suÉ
[
i
].
	`–­£d
();

363 
mi
 = 
»suÉ
[
i
].
	`m—s_št
();

364 
ri
 = 
»suÉ
[
i
].
	`¿mp_up_št
();

365 
•
 = 
»suÉ
[
i
].
	`ex³ùed_³ak
();

367 ià(
i
 >ğ(
•
 - 1)) {

368 ià(
e
 / 
mi
 > 1150) {

369 
	`ouut_´İ”ly
(" INVALID: fÜ…ošˆ" + 
i


370 + ",ƒÏp£d m =" + 
e


371 + " s³cif›d m—su»m’ˆš‹rv® secÚd ğ" + 
mi


373 
	`ouut_´İ”ly
("ƒÏp£d / iÁ’ded =" + 
e
 / (10 * 
mi
)

375  
çl£
;

377 ià(
e
 / 
mi
 < 995) {

378 
	`ouut_´İ”ly
(" INVALID: fÜ…ošˆ" + 
i


379 + ",ƒÏp£d m =" + 
e


380 + " s³cif›d m—su»m’ˆš‹rv® secÚd ğ" + 
mi


382 
	`ouut_´İ”ly
("ƒÏp£d / iÁ’ded =" + 
e
 / (10 * 
mi
)

384  
çl£
;

388  
Œue
;

389 
	}
}

407 
public
 
	gSŒšg
[] 
	$b’chm¬kLi¡
(
R•ÜtPrİs
 
´İs
) {

408 
VeùÜ
<
SŒšg
> 
v
 = 
Ãw
 Vector<String>();

409 
j
 = 1;; j++) {

410 
SŒšg
 
Çme
 = 
´İs
.
	`g‘
("»suÉ.‹¡" + 
j
 + ".warehouses");

411 ià(
Çme
 =ğ
nuÎ
)

413 
v
.
	`addEËm’t
("‹¡" + 
j
);

415 
Ãl
 = 
v
.
	`size
();

416 ià(
Ãl
 == 0)

417  
Ãw
 
SŒšg
[0];

418 
SŒšg
[] 
Çmes
 = 
Ãw
 SŒšg[
Ãl
];

419 
i
 = 0; i < 
Ãl
; i++)

420 
Çmes
[
i
] = (
SŒšg
è
v
.
	`–em’tAt
(i);

421  
Çmes
;

422 
	}
}

425 
´iv©e
 
	$ÿlcuÏ‹
() {

426 
´oduùWÜ¡
 = 1;

427 
´oduùBe¡
 = 1;

428 
weights
 = 0;

429 
w¬ehou£s
;

430 
scÜe
;

431 
j
;

432 
highe¡ScÜe
 = 0;

433 
maxW¬ehou£s
 = 0;

435 
ex³ùedP—kWh
 = 
´İs
.
	`g‘IÁ
("input.expected_peak_warehouse");

436 
j
 = 1;; j++) {

437 
scÜe
 = 
´İs
.
	`g‘DoubË
("»suÉ.‹¡" + 
j
 + ".company.score");

438 ià(
scÜe
 == 0)

440 ià(
scÜe
 > 
highe¡ScÜe
) {

441 
highe¡ScÜe
 = 
scÜe
;

442 
m—su»dP—kW¬ehou£
 = 
´İs
.
	`g‘IÁ
("»suÉ.‹¡" + 
j


445 
w¬ehou£s
 = 
´İs
.
	`g‘IÁ
("»suÉ.‹¡" + 
j
 + ".warehouses");

446 ià(
w¬ehou£s
 > 
maxW¬ehou£s
) {

447 
maxW¬ehou£s
 = 
w¬ehou£s
;

451 
	}
}

453 
public
 
SŒšg
 
	$d‘a
() {

455 
SŒšgBufãr
 
buf
 = 
Ãw
 
	`SŒšgBufãr
();

456 ià(!
v®id
) {

457 
buf
.
	`­³nd
("<H4>Invalid Result</H4>\n");

458 
buf


459 .
	`­³nd
("This„esult is‚ot valid forhe following„eason(s):\n");

460 
buf
.
	`­³nd
("<PRE>\n");

461 
buf
.
	`­³nd
(
this
.
šv®id_buf
);

465 
buf
.
	`­³nd
("</PRE>\n");

468 
buf
.
	`­³nd
(
this
.
šv®id_buf
);

470 
buf
.
	`­³nd
("<H4>Details of Runs</H4>\n");

473 
buf
.
	`­³nd
("<TABLE BORDER WIDTH=100%>\n");

474 
buf
.
	`­³nd
("<TR><TH ROWSPAN=2>Warehouses</TH>\n");

475 
buf
.
	`­³nd
(" <TH ROWSPAN=2>Thrput</TH>\n");

476 
buf
.
	`­³nd
(" <TH COLSPAN=2>Total heap (MB)</TH>\n");

477 
buf
.
	`­³nd
(" <TH ROWSPAN=2>Thread spread %</TH>\n");

478 
buf
.
	`­³nd
(" <TH ROWSPAN=2>% > 120s</TH>\n");

479 
buf
.
	`­³nd
(" <TH ROWSPAN=2>transactionype</TH>\n");

480 
buf
.
	`­³nd
(" <TH ROWSPAN=2>Count</TH>\n");

481 
buf
.
	`­³nd
(" <TH COLSPAN=4>Time (in seconds)</TH>\n");

482 
buf
.
	`­³nd
("</TR>\n");

483 
buf
.
	`­³nd
("<TR><TH>Size</TH><TH>Used</TH>\n");

484 
buf
.
	`­³nd
("<TH>total</TH><TH>max</TH></TR>\n");

486 
i
 = 0; i < 
»suÉ
.
Ëngth
; i++) {

487 
buf
.
	`­³nd
(
»suÉ
[
i
].
	`toD‘aRows
());

489 
buf
.
	`­³nd
("</TABLE>\n");

490  
buf
.
	`toSŒšg
();

491 
	}
}

493 
´iv©e
 
SŒšg
 
	$JasÚG¿ph
(
SŒšg
 
Ïb–
) {

494 
G¿phImage
 
g¿ph
 = 
Ãw
 
	`G¿phImage
(400, 400);

495 
g¿ph
.
	`£tPix–Size
(6);

496 
g¿ph
.
	`£tPix–Ty³
(
G¿phImage
.
PIXEL_TYPE_CIRCLE
);

497 
g¿ph
.
	`£tFÜeground
(
CŞÜ
.
»d
);

498 
g¿ph
.
	`£tBackground
(
CŞÜ
.
wh™e
);

499 
g¿ph
.
	`£tCÚÃùPoštsEÇbËd
(
Œue
);

500 
g¿ph
.
	`£tXAxisLab–sP»cisiÚ
(1, 0);

501 
g¿ph
.
	`£tYAxisLab–sP»cisiÚ
(3, 0);

502 
maxx
 = 
maxW¬ehou£s
 * 1.15;

503 
maxy
 = 
highe¡ScÜe
 * 1.15;

504 
g¿ph
.
	`£tSÿË
(
Ãw
 [] {

505 
g¿ph
.
	`g‘Sugge¡edMšXSÿË
(
maxx
, 
maxy
), maxx,

506 
g¿ph
.
	`g‘Sugge¡edMšYSÿË
(
maxx
, 
maxy
), maxy

508 
g¿ph
.
	`¶ÙXYAxes
(
CŞÜ
.
g¿y
);

511 
g¿ph
.
	`¶ÙXAxisTicks
(4.0, 
CŞÜ
.
g¿y
, "warehouses");

512 
g¿ph
.
	`¶ÙYAxisTicks
(g¿ph.
	`g‘Sugge¡edYAxisTickIÁ”v®
(10, 
maxy
),

513 
CŞÜ
.
g¿y
, "scores");

514 
maximumW¬ehou£
 = 0;

516 
i
 = 0; i < 
»suÉ
.
Ëngth
; i++) {

517 
x
 = (è
»suÉ
[
i
].
	`w¬ehou£s
();

518 ià(
x
 > 
maximumW¬ehou£
) {

519 
maximumW¬ehou£
 = 
x
;

521 
y
 = 
»suÉ
[
i
].
	`scÜe
();

522 ià((
x
 >ğ
ex³ùedP—kWh
) && (x <= 2 *ƒxpectedPeakWh))

523 
g¿ph
.
	`¶Ù
(
x
, 
y
, 
CŞÜ
.
»d
);

525 
g¿ph
.
	`¶Ù
(
x
, 
y
, 
CŞÜ
.
Üªge
);

527 ià(
maximumW¬ehou£
 > 2 * 
ex³ùedP—kWh
 - 1) {

528 
g¿ph
.
	`¶ÙFÏtLše
(
ex³ùedP—kWh
, 2 *ƒx³ùedP—kWh, 
IÁeg”


529 .
	`·r£IÁ
(
	`m‘ric
()), (
CŞÜ
.
»d
));

531 
g¿ph
.
	`d¿wLeg’d
("Inşuded iÀscÜÿlcuÏtiÚ", 2, 4, 
CŞÜ
.
»d
,

532 
CŞÜ
.
g¿y
, "Dot");

533 
g¿ph
.
	`d¿wLeg’d
("Not included in score calculation", 2, 6,

534 
CŞÜ
.
Üªge
, CŞÜ.
g¿y
, "Dot");

535 
g¿ph
.
	`£tImageQu®™y
(0.85f);

536 ià(
Ïb–
 =ğ
nuÎ
) {

537 
Rªdom
 
¿ndom
 = 
Ãw
 
	`Rªdom
();

538 
Ïb–
 = "" + (10000 + 
¿ndom
.
	`ÃxtIÁ
() % 10000);

540 
SŒšg
 
fe_Çme
;

541 ià(
SPECIÁ”ÇlU£
) {

542 
fe_Çme
 = 
Ïb–
 + ".jpg";

545 
fe_Çme
 = "SPECjbb." + 
Ïb–
 + ".jpg";

547 
g¿ph
.
	`make
(
o_dœeùÜy
 + 
java
.
io
.
Fe
.
£·¿tÜ
 + 
fe_Çme
);

548  (" <UL><IMG SRC=\"" + 
fe_Çme
 + "\" WIDTH=400 HEIGHT=400></UL>");

549 
	}
}

552 
´iv©e
 
SŒšg
 
	$JasÚG¿ph
(
M‘rics
 
m‘rics_2
, 
SŒšg
 
Ïb–
) {

553 
G¿phImage
 
g¿ph
 = 
Ãw
 
	`G¿phImage
(400, 400);

554 
g¿ph
.
	`£tPix–Size
(8);

555 
g¿ph
.
	`£tPix–Ty³
(
G¿phImage
.
PIXEL_TYPE_CIRCLE
);

556 
g¿ph
.
	`£tFÜeground
(
CŞÜ
.
blue
);

557 
g¿ph
.
	`£tBackground
(
CŞÜ
.
wh™e
);

558 
g¿ph
.
	`£tCÚÃùPoštsEÇbËd
(
Œue
);

559 
g¿ph
.
	`£tXAxisLab–sP»cisiÚ
(1, 0);

560 
g¿ph
.
	`£tYAxisLab–sP»cisiÚ
(3, 0);

561 
mw
 = 
M©h
.
	`max
(
maxW¬ehou£s
, 
m‘rics_2
.maxWarehouses);

562 
hs
 = 
M©h
.
	`max
(
highe¡ScÜe
, 
m‘rics_2
.highestScore);

563 
maxx
 = 
mw
 * 1.15;

564 
maxy
 = 
hs
 * 1.15;

565 
g¿ph
.
	`£tSÿË
(
Ãw
 [] {

566 
g¿ph
.
	`g‘Sugge¡edMšXSÿË
(
maxx
, 
maxy
), maxx,

567 
g¿ph
.
	`g‘Sugge¡edMšYSÿË
(
maxx
, 
maxy
), maxy

569 
g¿ph
.
	`¶ÙXYAxes
(
CŞÜ
.
g¿y
);

570 
g¿ph
.
	`¶ÙXAxisTicks
(4.0, 
CŞÜ
.
g¿y
, "warehouses");

571 
g¿ph
.
	`¶ÙYAxisTicks
(g¿ph.
	`g‘Sugge¡edYAxisTickIÁ”v®
(10, 
maxy
),

572 
CŞÜ
.
g¿y
, "scores");

573 
i
 = 0; i < 
»suÉ
.
Ëngth
; i++) {

574 
x
 = 
»suÉ
[
i
].
	`w¬ehou£s
();

575 
y
 = 
»suÉ
[
i
].
	`scÜe
();

576 
g¿ph
.
	`¶Ù
(
x
, 
y
, 
CŞÜ
.
»d
);

578 
ResuÉ
[] 
»suÉ_2
 = 
m‘rics_2
.
	`g‘ResuÉs
();

579 
g¿ph
.
	`£tFÜeground
(
CŞÜ
.
wh™e
);

580 
i
 = 0; i < 
»suÉ_2
.
Ëngth
; i++) {

581 ià(1 =ğ
i
)

582 
g¿ph
.
	`£tFÜeground
(
CŞÜ
.
g»’
);

583 
x
 = 
»suÉ_2
[
i
].
	`w¬ehou£s
();

584 
y
 = 
»suÉ_2
[
i
].
	`scÜe
();

585 
g¿ph
.
	`¶Ù
(
x
, 
y
, 
CŞÜ
.
cyª
);

587 
g¿ph
.
	`£tImageQu®™y
(0.85f);

588 ià(
Ïb–
 =ğ
nuÎ
) {

589 
Rªdom
 
¿ndom
 = 
Ãw
 
	`Rªdom
();

590 
Ïb–
 = "" + (10000 + 
¿ndom
.
	`ÃxtIÁ
() % 10000);

592 
SŒšg
 
fe_Çme
;

593 ià(
SPECIÁ”ÇlU£
) {

594 
fe_Çme
 = 
Ïb–
 + ".jpg";

597 
fe_Çme
 = "SPECjbb." + 
Ïb–
 + ".jpg";

599 
g¿ph
.
	`make
(
o_dœeùÜy
 + 
java
.
io
.
Fe
.
£·¿tÜ
 + 
fe_Çme
);

600  (" <UL><IMG SRC=\"" + 
fe_Çme
 + "\" WIDTH=400 HEIGHT=400></UL>");

601 
	}
}

603 
public
 
SŒšg
 
	$muÉiCurvesG¿ph
(
M‘rics
[] 
m‘rics
, 
SŒšg
 
Ïb–
,

604 
boŞ—n
 
SPECIÁ”ÇlU£
, 
SŒšg
 
o_dœeùÜy
) {

605 
G¿phImage
 
g¿ph
 = 
Ãw
 
	`G¿phImage
(400, 400);

606 
g¿ph
.
	`£tPix–Size
(6);

607 
g¿ph
.
	`£tPix–Ty³
(
G¿phImage
.
PIXEL_TYPE_CIRCLE
);

608 
g¿ph
.
	`£tFÜeground
(
CŞÜ
.
blue
);

609 
g¿ph
.
	`£tBackground
(
CŞÜ
.
wh™e
);

610 
g¿ph
.
	`£tCÚÃùPoštsEÇbËd
(
Œue
);

611 
g¿ph
.
	`£tXAxisLab–sP»cisiÚ
(1, 0);

612 
g¿ph
.
	`£tYAxisLab–sP»cisiÚ
(3, 0);

613 
maxX
 = 0;

614 
maxY
 = 0;

615 
maxWh
 = 0;

616 
i
 = 0; i < 
m‘rics
.
Ëngth
; i++) {

617 ià(
maxX
 < 
m‘rics
[
i
].
maxW¬ehou£s
)

618 
maxX
 = 
m‘rics
[
i
].
maxW¬ehou£s
;

619 
maxY
 +ğ
m‘rics
[
i
].
highe¡ScÜe
;

620 ià(
maxWh
 < 
m‘rics
[
i
].
maximum_w¬ehou£s
)

621 
maxWh
 = 
m‘rics
[
i
].
maximum_w¬ehou£s
;

623 
maxx
 = 
maxX
 * 1.15;

624 
maxy
 = 
maxY
 * 1.15;

625 
g¿ph
.
	`£tSÿË
(
Ãw
 [] {

626 
g¿ph
.
	`g‘Sugge¡edMšXSÿË
(
maxx
, 
maxy
), maxx,

627 
g¿ph
.
	`g‘Sugge¡edMšYSÿË
(
maxx
, 
maxy
), maxy

629 
g¿ph
.
	`¶ÙXYAxes
(
CŞÜ
.
g¿y
);

630 
g¿ph
.
	`¶ÙXAxisTicks
(4.0, 
CŞÜ
.
g¿y
, "warehouses");

631 
g¿ph
.
	`¶ÙYAxisTicks
(g¿ph.
	`g‘Sugge¡edYAxisTickIÁ”v®
(10, 
maxy
),

632 
CŞÜ
.
g¿y
, "scores");

633 
sumX
[] = 
Ãw
 [
maxWh
];

634 
sumY
[] = 
Ãw
 [
maxWh
];

635 
j
 = 0; j < 
m‘rics
.
Ëngth
; j++) {

636 
expP—k
 = 
m‘rics
[
j
].
ex³ùedP—kWh
;

637 
ResuÉ
[] 
»suÉ
 = 
m‘rics
[
j
].
	`g‘ResuÉs
();

638 
CŞÜ
 
cŞÜ
 = CŞÜ.
g»’
;

639 
i
 = 0; i < 
»suÉ
.
Ëngth
; i++) {

640 ià(1 =ğ
i
)

641 
g¿ph
.
	`£tFÜeground
(
cŞÜ
.
	`d¬k”
());

642 
x
 = 
»suÉ
[
i
].
	`w¬ehou£s
();

643 
y
 = 
»suÉ
[
i
].
	`scÜe
();

644 ià((
x
 >ğ
expP—k
) && (x <= 2 *ƒxpPeak))

645 
g¿ph
.
	`¶Ù
(
x
, 
y
, 
CŞÜ
.
»d
);

647 
g¿ph
.
	`¶Ù
(
x
, 
y
, 
CŞÜ
.
Üªge
);

648 
sumX
[
i
] = 
x
;

649 
sumY
[
i
] +ğ
y
;

651 
g¿ph
.
	`£tFÜeground
(
CŞÜ
.
wh™e
);

653 
i
 = 0; i < 
sumX
.
Ëngth
; i++) {

654 ià(
i
 == 1)

655 
g¿ph
.
	`£tFÜeground
(
CŞÜ
.
mag’
);

656 
g¿ph
.
	`¶Ù
(
sumX
[
i
], 
sumY
[i], 
CŞÜ
.
blue
);

658 
g¿ph
.
	`d¿wLeg’d
("In¡ªû„esuÉ", 2, 4, 
CŞÜ
.
g»’
, CŞÜ.
g¿y
,

660 
g¿ph
.
	`d¿wLeg’d
("Agg»g©ed„esuÉ", 2, 6, 
CŞÜ
.
mag’
, CŞÜ.
g¿y
,

662 
g¿ph
.
	`£tImageQu®™y
(0.85f);

663 ià(
Ïb–
 =ğ
nuÎ
) {

664 
Rªdom
 
¿ndom
 = 
Ãw
 
	`Rªdom
();

665 
Ïb–
 = "" + (10000 + 
¿ndom
.
	`ÃxtIÁ
() % 10000);

667 
SŒšg
 
fe_Çme
;

668 ià(
SPECIÁ”ÇlU£
) {

669 
fe_Çme
 = 
Ïb–
 + ".jpg";

672 
fe_Çme
 = "SPECjbb." + 
Ïb–
 + ".jpg";

674 
g¿ph
.
	`make
(
o_dœeùÜy
 + 
java
.
io
.
Fe
.
£·¿tÜ
 + 
fe_Çme
);

675  (" <UL><IMG SRC=\"" + 
fe_Çme
 + "\" WIDTH=400 HEIGHT=400></UL>");

676 
	}
}

678 
´iv©e
 
SŒšg
 
	$dÙsG¿ph
(
M‘rics
 
m‘rics_2
) {

679 
SŒšgBufãr
 
buf
 = 
Ãw
 
	`SŒšgBufãr
();

680 
SŒšgBufãr
 
bufLab–s
 = 
Ãw
 
	`SŒšgBufãr
();

681 [][] 
xy
 = 
Ãw
 [101][101];

682 
mw
;

683 
hs
;

684 ià(
m‘rics_2
 !ğ
nuÎ
) {

685 
mw
 = 
M©h
.
	`max
(
maxW¬ehou£s
, 
m‘rics_2
.maxWarehouses);

686 
hs
 = 
M©h
.
	`max
(
highe¡ScÜe
, 
m‘rics_2
.highestScore);

689 
mw
 = 
maxW¬ehou£s
;

690 
hs
 = 
highe¡ScÜe
;

692 
x_width
 = 
M©h
.
	`max
(50, 
mw
);

693 
y_width
 = 50;

694 
x_çùÜ
 = ((è
x_width
è/ (è(
mw
);

695 
y_çùÜ
 = 
y_width
 * 0.9 / 
hs
;

696 
i
 = 0; i < 
»suÉ
.
Ëngth
; i++) {

700 
x
 = (è((è
»suÉ
[
i
].
	`w¬ehou£s
(è* 
x_çùÜ
) - 1;

701 
y
 = (è(
»suÉ
[
i
].
	`scÜe
(è* 
y_çùÜ
);

702 
xy
[
x
][
y
] = 1;

704 ià(
m‘rics_2
 !ğ
nuÎ
) {

705 
i
 = 0; i < 
m‘rics_2
.
»suÉ
.
Ëngth
; i++) {

709 
x
 = (è((è
m‘rics_2
.
»suÉ
[
i
].
	`w¬ehou£s
(è* 
x_çùÜ
) - 1;

710 
y
 = (è(
m‘rics_2
.
»suÉ
[
i
].
	`scÜe
(è* 
y_çùÜ
);

711 
xy
[
x
][
y
] = 2;

716 
un™
 = 
	`g‘Sugge¡edYAxisTickIÁ”v®
(6, 1.1 * 
hs
);

717 
buf
.
	`­³nd
("<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0>");

718 
buf
.
	`­³nd
("<TR><TD NOWRAP>");

719 
buf
.
	`­³nd
("<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 HEIGHT=100%>");

720 
buf
.
	`­³nd
("<TR><TD ALIGN=center VALIGN=middle NOWRAP>");

721 
buf


722 .
	`­³nd
("<FONT FACE=courier>&nbsp;o&nbsp;<BR>&nbsp;p&nbsp;<BR>&nbsp;s&nbsp;<BR>&nbsp;/&nbsp;<BR>&nbsp;s&nbsp;</FONT>");

723 
buf
.
	`­³nd
("</TD>");

724 
buf
.
	`­³nd
("<TD VALIGN=top>");

725 
buf
.
	`­³nd
("<TABLE BORDER=0 CELLSPACING=2 CELLPADDING=0 HEIGHT=100%>");

726 
couÁ_down
 = (è(1.1 * (
hs
 / 
un™
));

727 
y
 = 
y_width
; y > 0; y--) {

728 
buf
.
	`­³nd
("<TR>");

729 ià(
y
 / (
y_çùÜ
è< 
un™
 * 
couÁ_down
) {

732 
buf


733 .
	`­³nd
("<TD BGCOLOR=white NOWRAP VALIGN=top ALIGN=right VALIGN=top><FONT SIZE=1 COLOR=#ff0000>");

734 
buf
.
	`­³nd
(
un™
 * 
couÁ_down
);

735 
couÁ_down
--;

736 
buf
.
	`­³nd
("</FONT></TD>");

739 
buf
.
	`­³nd
("<td></td>");

741 
buf
.
	`­³nd
("</TR>");

743 
buf
.
	`­³nd
("</TABLE></TD></TR></TABLE></TD><TD>");

744 
buf
.
	`­³nd
("<TABLE BORDER=1 CELLSPACING=2 CELLPADDING=0 WIDTH=100%>");

745 
y
 = 
y_width
; y > 0; y--) {

746 
buf
.
	`­³nd
("<TR>");

752 
x
 = 1; x < 
x_width
; x++) {

753 ià(
xy
[
x
][
y
] == 1)

754 
buf
.
	`­³nd
("<TD BGCOLOR=#000000 WIDTH=2><IMG SRC="

755 + 
IMAGE_PIX
 + " WIDTH=2 HEIGHT=2></TD>\n");

756 ià(
xy
[
x
][
y
] == 2)

757 
buf
.
	`­³nd
("<TD BGCOLOR=#000000 WIDTH=2><IMG SRC="

758 + 
IMAGE_PIX_2
 + " WIDTH=2 HEIGHT=2></TD>\n");

760 
buf
.
	`­³nd
("<TD WIDTH=2></TD>\n");

762 
buf
.
	`­³nd
("</TR>");

764 
buf
.
	`­³nd
("</TABLE>");

765 
buf
.
	`­³nd
("</td></TR><TR><TD></TD><TD>");

768 
buf
.
	`­³nd
("<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH=100%>");

769 
buf
.
	`­³nd
("<TR>\n");

770 
x_un™
;

771 ià(
mw
 < 8) {

772 
x_un™
 = 1;

774 ià(
mw
 < 120) {

775 
x_un™
 = 4;

779 
x_un™
 = 10;

782 
buf


783 .
	`­³nd
("<TD BGCOLOR=white ALIGN=left><FONT SIZE=1 COLOR=red>0</FONT></TD>\n");

784 
i
 = 1; i <ğ
mw
; i++) {

785 ià(
mw
 <ğ8 || (mw > 8 && (
i
 % 
x_un™
 == 0))) {

787 ià(
i
 + 
x_un™
 > 
mw
)

788 
buf


789 .
	`­³nd
("<TD BGCOLOR=white ALIGN=right><FONT SIZE=1 COLOR=red>");

791 
buf


792 .
	`­³nd
("<TD BGCOLOR=white ALIGN=center><FONT SIZE=1 COLOR=red>");

795 ià(
i
 < 10) {

796 
buf
.
	`­³nd
("0" + 
i
);

799 
buf
.
	`­³nd
("" + 
i
);

801 
buf
.
	`­³nd
("</FONT></TD>\n");

805 
buf
.
	`­³nd
("<TD>&nbsp&nbsp</TD>\n");

808 
buf
.
	`­³nd
("</TR><TR>");

809 
buf
.
	`­³nd
("<TD COLSPAN=" + 
mw
 + " ALIGN=center BGCOLOR=white>"

811 
buf
.
	`­³nd
("</TABLE>");

812 
buf
.
	`­³nd
("</TD></TR></TABLE>");

813  
buf
.
	`toSŒšg
();

814 
	}
}

822 
	$scÜe_©_wh
(
n
) {

823 ià(
n
 < 
scÜe_©
.
Ëngth
) {

824  
scÜe_©
[
n
];

829 
	}
}

831 
public
 
	$¿mpup_mlis_©_wh
(
n
) {

832 ià(
n
 < 
¿mpup_mlis
.
Ëngth
) {

833  
¿mpup_mlis
[
n
];

838 
	}
}

840 
public
 
	$¿mpdown_mlis_©_wh
(
n
) {

841 ià(
n
 < 
¿mpdown_mlis
.
Ëngth
) {

842  
¿mpdown_mlis
[
n
];

847 
	}
}

849 
public
 
	$¡¬t_mlis_©_wh
(
n
) {

850 ià(
n
 < 
¡¬t_mlis
.
Ëngth
) {

851  
¡¬t_mlis
[
n
];

856 
	}
}

858 
public
 
	$’d_mlis_©_wh
(
n
) {

859 ià(
n
 < 
’d_mlis
.
Ëngth
) {

860  
’d_mlis
[
n
];

865 
	}
}

869 
´iv©e
 
	$ü—‹_w¬ehou£_¬¿y
() {

870 
i
 = 0; i < 
»suÉ
.
Ëngth
; i++) {

871 ià(
»suÉ
[
i
].
	`w¬ehou£s
(è> 
maximum_w¬ehou£s
)

872 
maximum_w¬ehou£s
 = 
»suÉ
[
i
].
	`w¬ehou£s
();

874 
scÜe_©
 = 
Ãw
 [
maximum_w¬ehou£s
 + 2];

875 
¿mpup_mlis
 = 
Ãw
 [
maximum_w¬ehou£s
 + 2];

876 
¿mpdown_mlis
 = 
Ãw
 [
maximum_w¬ehou£s
 + 2];

877 
¡¬t_mlis
 = 
Ãw
 [
maximum_w¬ehou£s
 + 2];

878 
’d_mlis
 = 
Ãw
 [
maximum_w¬ehou£s
 + 2];

879 
i
 = 0; i <ğ
maximum_w¬ehou£s
 + 1; i++) {

880 
scÜe_©
[
i
] = 0;

881 
¿mpup_mlis
[
i
] = 0;

882 
¿mpdown_mlis
[
i
] = 0;

883 
¡¬t_mlis
[
i
] = 0;

884 
’d_mlis
[
i
] = 0;

886 
i
 = 0; i < 
»suÉ
.
Ëngth
; i++) {

889 ià(
scÜe_©
[(è(
»suÉ
[
i
].
	`w¬ehou£s
())] != 0) {

890 
	`ouut_´İ”ly
("INVALID: cannot„epeat…oints");

891 
this
.
v®id
 = 
çl£
;

894 
scÜe_©
[(è(
»suÉ
[
i
].
	`w¬ehou£s
())] =„esuÉ[i].
	`scÜe
();

895 ià(
jvm_š¡ªûs
 > 1) {

896 
¿mpup_mlis
[(è(
»suÉ
[
i
].
	`w¬ehou£s
())] =„esult[i]

897 .
	`¿mpup_mlis
();

898 
¿mpdown_mlis
[(è(
»suÉ
[
i
].
	`w¬ehou£s
())] =„esult[i]

899 .
	`¿mpdown_mlis
();

900 
¡¬t_mlis
[(è(
»suÉ
[
i
].
	`w¬ehou£s
())] =„esult[i]

901 .
	`¡¬t_mlis
();

902 
’d_mlis
[(è(
»suÉ
[
i
].
	`w¬ehou£s
())] =„esult[i]

903 .
	`’d_mlis
();

907 
	}
}

909 
´iv©e
 
boŞ—n
 
	$check_pošts_befÜe_m‘ric
() {

910 
boŞ—n
 
v®ue
 = 
Œue
;

911 
SŒšg
 
s
;

912 
i
 = 1; i < 
ex³ùedP—kWh
; i++) {

913 ià(
	`g‘ScÜeAt
(
i
) == 0) {

914 
	`ouut_´İ”ly
("INVALID: Missing…oint: "

915 + 
i


917 + 
ex³ùedP—kWh
 + ",‡re„equired.");

918 
v®ue
 = 
çl£
;

921  
v®ue
;

922 
	}
}

924 
´iv©e
 
boŞ—n
 
	$check_pošts_fÜ_m‘ric
() {

925 
boŞ—n
 
v®ue
 = 
Œue
;

926 
SŒšg
 
s
;

927 ià(
maximum_w¬ehou£s
 < 2 * 
ex³ùedP—kWh
) {

928 
s
 = "Warning:‡ll…oints from "

929 + 
ex³ùedP—kWh


932 * 
ex³ùedP—kWh


934 
	`ouut_´İ”ly
(
s
);

935  
çl£
;

937 
i
 = 
ex³ùedP—kWh
; i <= 2 *ƒxpectedPeakWh; i++) {

938 ià(
scÜe_©
[
i
] == 0) {

939 
	`ouut_´İ”ly
("Warning: Missing…oint: 0 will used for…oint "

940 + 
i
 + ".");

941 
v®ue
 = 
çl£
;

944  
v®ue
;

945 
	}
}

947 
public
 
SŒšg
 
	$m‘ric
() {

948 
n
 = 
ex³ùedP—kWh
;

949 
tÙ®
 = 0;

950 
up_to
 = 2 * 
n
;

951 ià(
maximum_w¬ehou£s
 < 2 * 
n
)

953 
up_to
 = 
maximum_w¬ehou£s
;

957 
i
 = 
n
; i <ğ
up_to
; i++) {

958 
tÙ®
 +ğ
scÜe_©
[
i
];

960  (
	`¿tioOrNa
(
tÙ®
 / (
n
 + 1)));

961 
	}
}

963 
public
 
SŒšg
 
	$¿tioOrNa
(
x
) {

964 ià(!
´št_scÜe
 || 
x
 <= 0)

966 ià(
v®id
 && 
´št_scÜe
)

967  
	`fÜm©
(
x
);

970  
	`fÜm©
(
x
);

971 
	}
}

983 
public
 
SŒšg
 
	$bËAndG¿ph
(
SŒšg
 
Ïb–
, 
boŞ—n
 
u£Html
,

984 
SŒšg
 
ouut_dœeùÜy
) {

985 
SŒšgBufãr
 
buf
 = 
Ãw
 
	`SŒšgBufãr
();

986 
o_dœeùÜy
 = 
ouut_dœeùÜy
;

987 
buf
.
	`­³nd
(
check_®l_buf
);

988 
cŞumns
 = 5;

989 
buf
.
	`­³nd
("<TABLE BORDER WIDTH=\"100%\">\n" + " <TH COLSPAN="

990 + 
cŞumns
 + "></TH>\n");

992 
¥ª
 = 
»suÉ
.
Ëngth
 + 3;

993 
buf
.
	`­³nd
(" <TH ROWSPAN=" + 
¥ª
 + ">\n");

994 ià(
u£Html
) {

997 
	`»loÿ‹ImageResourû
(
IMAGE_PIX
, 
ouut_dœeùÜy
);

998 
	`»loÿ‹ImageResourû
(
IMAGE_PIX_2
, 
ouut_dœeùÜy
);

1001 
buf
.
	`­³nd
(
	`dÙsG¿ph
(
nuÎ
));

1004 
Œy
 {

1005 
CÏss
.
	`fÜName
("java.awt.image.BufferedImage");

1008 
buf
.
	`­³nd
(
	`JasÚG¿ph
(
Ïb–
));

1010 
	`ÿtch
 (
java
.
Ïng
.
IÁ”ÇlE¼Ü
 
e
) {

1011 
buf
.
	`­³nd
(
	`dÙsG¿ph
(
nuÎ
));

1013 
	`ÿtch
 (
Exû±iÚ
 
e
) {

1014 
buf
.
	`­³nd
(
	`dÙsG¿ph
(
nuÎ
));

1017 
buf
.
	`­³nd
("</TH></TR>\n");

1018 
buf
.
	`­³nd
("<TR><TH ALIGN=RIGHT>Warehouses</TH>\n"

1021 
i
 = 0; i < 
»suÉ
.
Ëngth
; i++)

1022 
buf
.
	`­³nd
(
»suÉ
[
i
].
	`toRow
(
ex³ùedP—kWh
));

1025 
buf
.
	`­³nd
("<TR><TH ALIGN=LEFT>SPECjbb2005 </TH>\n"

1026 + " <TH ALIGN=RIGHT> (äom " + 
ex³ùedP—kWh
 + "o " + 2

1027 * 
ex³ùedP—kWh
 + ") " + "</TH>\n" + " <TH ALIGN=RIGHT>"

1028 + 
	`m‘ric
() + " SPECjbb2005 bops</TH>\n" + "</TR>\n</TABLE>\n");

1029 
buf
.
	`­³nd
("</TR>\n</TABLE>\n");

1030  
buf
.
	`toSŒšg
();

1031 
	}
}

1038 
public
 
SŒšg
 
	$com·»TabËAndG¿ph
(
M‘rics
 
m‘rics_2
, 
SŒšg
 
Ïb–
,

1039 
boŞ—n
 
u£Html
, 
SŒšg
 
ouut_dœeùÜy
) {

1040 
SŒšgBufãr
 
buf
 = 
Ãw
 
	`SŒšgBufãr
();

1041 
cŞumns
 = 5;

1042 ià(
m‘rics_2
 =ğ
nuÎ
) {

1044  
	`bËAndG¿ph
(
Ïb–
, 
u£Html
, 
ouut_dœeùÜy
);

1046 
o_dœeùÜy
 = 
ouut_dœeùÜy
;

1047 
buf
.
	`­³nd
(
check_®l_buf
);

1048 
buf
.
	`­³nd
("<TABLE BORDER WIDTH=\"100%\">\n" + " <TH COLSPAN="

1049 + 
cŞumns
 + "></TH>\n");

1051 
¥ª
 = 
»suÉ
.
Ëngth
 + 3;

1052 
buf
.
	`­³nd
(" <TH ROWSPAN=" + 
¥ª
 + ">\n");

1053 ià(
u£Html
) {

1056 
	`»loÿ‹ImageResourû
(
IMAGE_PIX
, 
ouut_dœeùÜy
);

1057 
	`»loÿ‹ImageResourû
(
IMAGE_PIX_2
, 
ouut_dœeùÜy
);

1060 
buf
.
	`­³nd
(
	`dÙsG¿ph
(
m‘rics_2
));

1063 
Œy
 {

1064 
CÏss
.
	`fÜName
("java.awt.image.BufferedImage");

1065 ià(
m‘rics_2
 !ğ
nuÎ
)

1066 
buf
.
	`­³nd
(
	`JasÚG¿ph
(
m‘rics_2
, 
Ïb–
));

1068 
buf
.
	`­³nd
(
	`JasÚG¿ph
(
Ïb–
));

1070 
	`ÿtch
 (
java
.
Ïng
.
IÁ”ÇlE¼Ü
 
e
) {

1073 
buf
.
	`­³nd
(
	`dÙsG¿ph
(
m‘rics_2
));

1075 
	`ÿtch
 (
Exû±iÚ
 
e
) {

1078 
buf
.
	`­³nd
(
	`dÙsG¿ph
(
m‘rics_2
));

1081 
buf
.
	`­³nd
("</TH></TR>\n");

1082 
buf
.
	`­³nd
("<TR><TH ALIGN=RIGHT>Warehouses</TH>\n"

1087 
ResuÉ
[] 
»suÉ_2
 = 
m‘rics_2
.
	`g‘ResuÉs
();

1088 
mw
 = 
M©h
.
	`max
(
maxW¬ehou£s
, 
m‘rics_2
.maxWarehouses);

1089 
hs
 = 
M©h
.
	`max
(
highe¡ScÜe
, 
m‘rics_2
.highestScore);

1090 
shÜ‹r
 = 
M©h
.
	`mš
(
»suÉ
.
Ëngth
, 
»suÉ_2
.length);

1091 
lÚg”
 = 
M©h
.
	`max
(
»suÉ
.
Ëngth
, 
»suÉ_2
.length);

1092 
i
 = 1; i <ğ
mw
; i++) {

1093 
buf
.
	`­³nd
(
	`BÙhScÜe
(
i
, 
	`scÜe_©_wh
(i), 
m‘rics_2
.score_at_wh(i),

1094 
ex³ùedP—kWh
, 
m‘rics_2
.
	`g‘_whAtP—k
()));

1098 
buf
.
	`­³nd
("<TR><TH ALIGN=LEFT>SPECjbb2005 = </TH>\n"

1099 + " <TH ALIGN=RIGHT>" + 
	`m‘ric
()

1101 + 
m‘rics_2
.
	`m‘ric
() + "SPECjbb2005 bops</TH>\n<TH> &nbsp </TH>"

1103 
buf
.
	`­³nd
("</TR>\n</TABLE>\n");

1104  
buf
.
	`toSŒšg
();

1105 
	}
}

1107 
public
 
	$»loÿ‹ImageResourû
(
SŒšg
 
image
, SŒšg 
»loÿ‹To
) {

1117 
SŒšg
 
imageResourû
 = 
IMAGE_RESOURCE_PATH
 + 
image
;

1118 
IÅutSŒ—m
 
is
 = 
	`g‘CÏss
().
	`g‘ResourûAsSŒ—m
(
imageResourû
);

1119 ià(
is
 =ğ
nuÎ
)

1121 
Œy
 {

1122 
b
 = -1;

1125 
Fe
 
fe
 = 
Ãw
 
	`Fe
(
»loÿ‹To
 + Fe.
£·¿tÜ
 + 
image
);

1126 
FeOuutSŒ—m
 
fos
 = 
Ãw
 
	`FeOuutSŒ—m
(
fe
);

1127 (
b
 = 
is
.
	`»ad
()) > -1) {

1128 
fos
.
	`wr™e
(
b
);

1130 
fos
.
	`æush
();

1131 
fos
.
	`şo£
();

1132 
is
.
	`şo£
();

1134 
	`ÿtch
 (
IOExû±iÚ
 
iÛ
) {

1135 
JBBut
.
	`g‘Log
().
	`log
(
Lev–
.
WARNING
,

1136 "IOExû±iÚ:" + 
iÛ
.
	`g‘Mes§ge
(), ioe);

1138 
	}
}

1143 
public
 
	$g‘Sugge¡edYAxisTickIÁ”v®
(
sugge¡edNumTicks
, 
maxy
) {

1145 
t
 = 
maxy
 / 
sugge¡edNumTicks
;

1147 
Î
 = (è(
M©h
.
	`log
(
t
) / Math.log(10));

1148 
lu
 = 
Î
 + 1;

1149 [] 
ti
 = 
Ãw
 [10];

1150 
ti
[0] = (è
M©h
.
	`pow
(10, 
Î
);

1151 
ti
[9] = (è
M©h
.
	`pow
(10, 
lu
);

1152 
i
 = 0; i < 
ti
.
Ëngth
 - 1; i++) {

1153 
ti
[
i
 + 1] =i[i] +i[0];

1155 
šdex
 = 9;

1156 
d–
 = 
IÁeg”
.
MAX_VALUE
;

1157 
i
 = 
ti
.
Ëngth
 - 1; i >= 0; i--) {

1158 
ddiff
 = (
ti
[
i
] - 
t
);

1159 ià(
ddiff
 < 0.0)

1161 
diff
 = (è
ddiff
;

1162 ià(
diff
 <ğ
d–
 || delta < 0) {

1163 
d–
 = 
diff
;

1164 
šdex
 = 
i
;

1168  
ti
[
šdex
];

1169 
	}
}

1173 
public
 
SŒšg
 
	$BÙhScÜe
(
w
, 
scÜe_1
, 
scÜe_2
,

1174 
whAtP—k_1
, 
whAtP—k2
) {

1175 
SŒšgBufãr
 
buf
 = 
Ãw
 
	`SŒšgBufãr
("<TR>\n");

1176 
buf
.
	`­³nd
(" <TD ALIGN=RIGHT>" + 
w
 + "</TD>\n");

1177 
buf
.
	`­³nd
(" <TD ALIGN=RIGHT>" + 
	`scÜe_fÜm©
(
scÜe_1
) + "</TD>\n");

1178 ià((
whAtP—k_1
 <ğ
w
) && (w <= 2 * whAtPeak_1)) {

1179 
buf
.
	`­³nd
(" <TD ALIGN=RIGHT> * </TD>\n");

1182 
buf
.
	`­³nd
(" <TD ALIGN=RIGHT> &nbsp </TD>\n");

1184 
buf
.
	`­³nd
(" <TD ALIGN=RIGHT>" + 
	`scÜe_fÜm©
(
scÜe_2
) + "</TD>\n");

1185 ià((
whAtP—k2
 <ğ
w
) && (w <= 2 * whAtPeak2)) {

1186 
buf
.
	`­³nd
(" <TD ALIGN=RIGHT> * </TD>\n");

1189 
buf
.
	`­³nd
(" <TD ALIGN=RIGHT> &nbsp </TD>\n");

1191 
buf
.
	`­³nd
("</TR>\n");

1192  
buf
.
	`toSŒšg
();

1193 
	}
}

1195 
´iv©e
 
	$g‘ScÜeAt
(
i
) {

1196 ià(
i
 < 
scÜe_©
.
Ëngth
) {

1197  
scÜe_©
[
i
];

1201 
	}
}

	@spec/reporter/MultiVMReport.java

11 
·ckage
 
	g¥ec
.
	g»pÜ‹r
;

13 
impÜt
 
	gjava
.
	gio
.*;

14 
impÜt
 
	gjava
.
	gut
.*;

15 
impÜt
 
	gjava
.
	gut
.
	gloggšg
.
	gLev–
;

16 
impÜt
 
	g¥ec
.
	gjbb
.
	gJBBut
;

18 şas 
	cJBBR•ÜtF’ameF‹r
 
im¶em’ts
 
	mF’ameF‹r
 {

20 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

29 
SŒšg
 
	mfeP»fix
;

31 
SŒšg
 
	mfeSuffix
;

33 
	mfeP»fixL’
;

35 
	mfeSuffixS¹
;

37 
public
 
	$JBBR•ÜtF’ameF‹r
(
SŒšg
 
´efix
, SŒšg 
suffix
) {

38 
feP»fix
 = 
´efix
;

39 
feP»fixL’
 = 
feP»fix
.
	`Ëngth
();

40 
feSuffix
 = 
suffix
;

41 
feSuffixS¹
 = 
feP»fixL’
 + 3;

44 
public
 
boŞ—n
 
	$acû±
(
Fe
 
dœ
, 
SŒšg
 
Çme
) {

45  ((
Çme
.
	`¡¬tsW™h
(
feP»fix
)) && ((name

46 .
	`sub¡ršg
(
feSuffixS¹
).
	`equ®s
(
feSuffix
))));

47 
	}
}

50 
public
 cÏs 
	cMuÉiVMR•Üt
 {

52 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

61 
´iv©e
 
SŒšg
 
	mlogo
 = "<IMG SRC=\"spec-sm.gif\" WIDTH=\"57\" HEIGHT=\"72\"\n"

64 
´iv©e
 
fš®
 
SŒšg
 
	mv”siÚ
 = "@(#)Report.java 1.18 08/03/98";

66 
public
 
SŒšg
 
	mh¬dw¬e
, 
	mÇme
, 
	msoáw¬e
;

68 
public
 
boŞ—n
 
	mSPECIÁ”ÇlU£
;

70 
public
 
SŒšg
 
	missue
;

72 
public
 
boŞ—n
 
	mechoRaw
;

74 
public
 
SŒšg
 
	m´efix
;

76 
public
 
SŒšg
 
	mÏb–Img
;

78 
public
 
SŒšg
 
	mm‘ric1
;

80 
public
 
SŒšg
 
	mm‘ric2
;

82 
public
 
SŒšg
 
	mg¿phTabË
[];

84 
public
 
SŒšg
 
	mm‘ric
[];

86 
public
 
M‘rics
 
	mm‘rics
[];

88 
public
 
R•ÜtPrİs
 
	m»suÉs
[];

90 
public
 
Fe
 
	mhtmlFes
[];

92 
public
 
Tem¶©e
 
	m‹m¶©e
;

94 
public
 
R•ÜtPrİs
 
	mt™Ës
 = 
Ãw
 ReportProps();

96 
public
 
boŞ—n
 
	mu£Html
;

98 
public
 
SŒšg
 
	mÏb–
[];

100 
public
 
SŒšg
 
	mouut_dœeùÜy
;

102 
public
 
	mš¡ªûs
 = 0;

104 
public
 
boŞ—n
 
	mš¡ªûChecksPas£d
 = 
Œue
;

106 
public
 
	$MuÉiVMR•Üt
(
SŒšg
 
ouut_dœeùÜy
, 
boŞ—n
 
SPECIÁ”ÇlU£
,

107 
SŒšg
 
Ãw¦‘‹r
, 
boŞ—n
 
u£Html
, boŞ—À
echoRaw
) {

108 
	`this
(
ouut_dœeùÜy
, 
SPECIÁ”ÇlU£
, 
Ãw¦‘‹r
, 
u£Html
,

109 
echoRaw
, "000", "SPECjbb.");

112 
public
 
	$MuÉiVMR•Üt
(
SŒšg
 
ouut_dœeùÜy
, 
boŞ—n
 
SPECIÁ”ÇlU£
,

113 
SŒšg
 
Ãw¦‘‹r
, 
boŞ—n
 
u£Html
, boŞ—À
echoRaw
, SŒšg 
Ïb–Img
,

114 
SŒšg
 
´efix
) {

115 
this
.
SPECIÁ”ÇlU£
 = SPECInternalUse;

116 
this
.
issue
 = 
Ãw¦‘‹r
;

117 
this
.
ouut_dœeùÜy
 = output_directory;

118 
this
.
Ïb–Img
 =†abelImg;

119 
SŒšg
 
suffix
;

120 
Fe
 
dœ
 = 
Ãw
 
	`Fe
(
ouut_dœeùÜy
);

121 ià(!
dœ
.
	`exi¡s
()) {

122 
Sy¡em
.
out
.
	`´šn
("E¼Ü: f" + 
ouut_dœeùÜy


124 
Sy¡em
.
	`ex™
(1);

126 ià(!
dœ
.
	`isDœeùÜy
()) {

127 
Sy¡em
.
out
.
	`´šn
("E¼Ü: f" + 
ouut_dœeùÜy


129 
Sy¡em
.
	`ex™
(1);

132 
suffix
 = ".raw";

133 
F’ameF‹r
 
f‹r
 = 
Ãw
 
	`JBBR•ÜtF’ameF‹r
(
´efix
, 
suffix
);

134 
Fe
[] 
»suÉFes
 = 
dœ
.
	`li¡Fes
(
f‹r
);

135 
š¡ªûs
 = 
»suÉFes
.
Ëngth
;

136 
suffix
 = ".html";

137 
f‹r
 = 
Ãw
 
	`JBBR•ÜtF’ameF‹r
(
´efix
, 
suffix
);

138 
htmlFes
 = 
dœ
.
	`li¡Fes
(
f‹r
);

139 
»suÉs
 = 
Ãw
 
R•ÜtPrİs
[
»suÉFes
.
Ëngth
];

140 
m‘rics
 = 
Ãw
 
M‘rics
[
»suÉFes
.
Ëngth
];

141 
g¿phTabË
 = 
Ãw
 
SŒšg
[
»suÉFes
.
Ëngth
];

142 
m‘ric
 = 
Ãw
 
SŒšg
[
»suÉFes
.
Ëngth
];

143 
Ïb–
 = 
Ãw
 
SŒšg
[
»suÉFes
.
Ëngth
];

144 
Œy
 {

145 
SŒšgR—d”
 
tis
 = 
Ãw
 
	`SŒšgR—d”
Òew 
	`T™Ë
().
	`g‘T™ËSŒšg
());

146 
t™Ës
.
	`lßd
(
tis
);

148 
	`ÿtch
 (
IOExû±iÚ
 
e
) {

149 
JBBut
.
	`g‘Log
().
	`log
(
Lev–
.
WARNING
,

150 "E¼Ü†ßdšg™Ë fÜ„•Üt\n", 
e
);

151 
Sy¡em
.
	`ex™
(1);

153 
sum
 = 0;

154 
¿mpup_mlis
 = 0;

155 
¿mpdown_mlis
 = 0;

156 
boŞ—n
 
isM‘ricsDoubË
 = 
Œue
;

157 
i
 = 0; i < 
»suÉFes
.
Ëngth
; i++) {

158 
»suÉs
[
i
] = 
Ãw
 
	`R•ÜtPrİs
();

159 
Ïb–
[
i
] = 
»suÉFes
[i].
	`g‘Name
().
	`sub¡ršg
(
´efix
.
	`Ëngth
(),

160 
´efix
.
	`Ëngth
() + 3);

161 ià(
SPECIÁ”ÇlU£
) {

162 
Ïb–
[
i
] = 
´efix
 +†abel[i];

164 
Œy
 {

165 
»suÉs
[
i
].
	`lßd
(
»suÉFes
[i].
	`g‘P©h
());

167 
	`ÿtch
 (
IOExû±iÚ
 
e
) {

168 
JBBut
.
	`g‘Log
().
	`log
(

169 
Lev–
.
WARNING
,

170 "E¼Ü„—dšg„esuÉ f" + 
»suÉFes
[
i
] + ": "

171 + 
e
,ƒ);

172 
Sy¡em
.
	`ex™
(1);

175 
m‘rics
[
i
] = 
Ãw
 
	`M‘rics
(
»suÉs
[i], 
SPECIÁ”ÇlU£
);

176 
g¿phTabË
[
i
] = 
m‘rics
[i].
	`bËAndG¿ph
(
Ïb–
[i], 
u£Html
,

177 
ouut_dœeùÜy
);

178 
m‘ric
[
i
] = 
m‘rics
[i].
	`m‘ric
();

179 
Œy
 {

180 
sum
 +ğ
DoubË
.
	`·r£DoubË
(
m‘ric
[
i
]);

182 
	`ÿtch
 (
Numb”FÜm©Exû±iÚ
 
e
) {

183 
isM‘ricsDoubË
 = 
çl£
;

184 
m‘ric1
 = "n/a";

185 
m‘ric2
 = "n/a";

187 
Œy
 {

190 
	`ÿtch
 (
Numb”FÜm©Exû±iÚ
 
e
) {

191 
isM‘ricsDoubË
 = 
çl£
;

192 
m‘ric1
 = "n/a";

193 
m‘ric2
 = "n/a";

196 
	`checkIn¡ªûTimšg
();

197 ià(
isM‘ricsDoubË
) {

198 
m‘ric1
 = 
M‘rics
.
	`fÜm©
(
sum
);

199 
m‘ric2
 = 
M‘rics
.
	`fÜm©
(
sum
 / 
m‘rics
.
Ëngth
);

201 
this
.
Çme
 = 
»suÉs
[0].
	`g‘
("input.suite");

202 
this
.
h¬dw¬e
 = 
»suÉs
[0].
	`g‘
("config.hw.vendor") + " "

203 + 
»suÉs
[0].
	`g‘
("config.hw.model");

204 
this
.
soáw¬e
 = 
»suÉs
[0].
	`g‘
("config.sw.vendor") + " "

205 + 
»suÉs
[0].
	`g‘
("config.sw.JVM");

207 
	`g’”©eSšgËRawFe
();

208 
	}
}

210 
public
 
	$checkIn¡ªûTimšg
() {

212 
couÁ
 = 0;

213 
š¡ªûsChecked
 = 0;

214 
š¡ªûChecksPas£d
 = 
Œue
;

215 
Ï¡_¿mpup_mlis
 = 0;

216 
fœ¡_¡¬t_mlis
 = 
LÚg
.
MAX_VALUE
;

217 
fœ¡_¿mpdown_mlis
 = 
LÚg
.
MAX_VALUE
;

218 
Ï¡_’d_mlis
 = 0;

219 
tmpRampdown
 = 0;

220 
tmpEnd
 = 0;

221 
tmpS¹
 = 0;

222 
tmpRampup
 = 0;

223 
couÁ
 = 
m‘rics
[0].
	`g‘W¬ehou£sTe¡ed
();

224 
š¡ªûsChecked
++;

225 
n
 = 1;‚ < 
š¡ªûs
;‚++) {

226 ià(
couÁ
 !ğ
m‘rics
[
n
].
	`g‘W¬ehou£sTe¡ed
())

228 
š¡ªûsChecked
++;

230 ià(
š¡ªûsChecked
 !ğ
š¡ªûs
) {

231 
Sy¡em
.
out


232 .
	`´šn
("INVALID: Instances do‚ot have identicalest counts");

233 
š¡ªûChecksPas£d
 = 
çl£
;

237 
i
 = 1; i <ğ
couÁ
 && 
š¡ªûChecksPas£d
; i++) {

238 
Ï¡_¿mpup_mlis
 = 0;

239 
fœ¡_¡¬t_mlis
 = 
LÚg
.
MAX_VALUE
;

240 
fœ¡_¿mpdown_mlis
 = 
LÚg
.
MAX_VALUE
;

241 
Ï¡_’d_mlis
 = 0;

242 
j
 = 0; j < 
š¡ªûs
; j++) {

244 if(
i
 >ğ
m‘rics
[
j
].
	`g‘_whAtP—k
()){

246 
tmpS¹
 = 
m‘rics
[
j
].
	`¡¬t_mlis_©_wh
(
i
);

247 ià(
tmpS¹
 < 
fœ¡_¡¬t_mlis
)

248 
fœ¡_¡¬t_mlis
 = 
tmpS¹
;

250 
tmpRampup
 = 
m‘rics
[
j
].
	`¿mpup_mlis_©_wh
(
i
);

251 ià(
tmpRampup
 > 
Ï¡_¿mpup_mlis
)

252 
Ï¡_¿mpup_mlis
 = 
tmpRampup
;

254 
tmpRampdown
 = 
m‘rics
[
j
].
	`¿mpdown_mlis_©_wh
(
i
);

255 ià(
tmpRampdown
 < 
fœ¡_¿mpdown_mlis
)

256 
fœ¡_¿mpdown_mlis
 = 
tmpRampdown
;

258 
tmpEnd
 = 
m‘rics
[
j
].
	`’d_mlis_©_wh
(
i
);

259 ià(
tmpEnd
 > 
Ï¡_’d_mlis
)

260 
Ï¡_’d_mlis
 = 
tmpEnd
;

265 ià((
fœ¡_¿mpdown_mlis
 > 
Ï¡_’d_mlis
)

266 && (
fœ¡_¡¬t_mlis
 > 
Ï¡_¿mpup_mlis
)) {

267 
š¡ªûChecksPas£d
 = 
Œue
;

270 
Sy¡em
.
out
.
	`´šn
("INVALID MULTI-JVM Run: Test Interval "

271 + 
i
 + ": Instance Timing Checks: FAILED");

272 
Sy¡em
.
out


273 .
	`´šn
("(first_rampdown_millis >†ast_end_millis) && (first_start_millis >†ast_rampup_millis))");

274 
Sy¡em
.
out
.
	`´šn
("first_start_millis = "

275 + 
fœ¡_¡¬t_mlis
);

276 
Sy¡em
.
out
.
	`´šn
("last_rampup_millis = "

277 + 
Ï¡_¿mpup_mlis
);

278 
Sy¡em
.
out
.
	`´šn
("first_rampdown_millis = "

279 + 
fœ¡_¿mpdown_mlis
);

280 
Sy¡em
.
out
.
	`´šn
("last_end_millis = "

281 + 
Ï¡_’d_mlis
);

282 
š¡ªûChecksPas£d
 = 
çl£
;

286 
	}
}

288 
public
 
	$´št
(
SŒšg
 
outFe
) {

289 
Œy
 {

290 
	`´št
(
Ãw
 
	`PrštSŒ—m
Òew 
	`Bufã»dOuutSŒ—m
(

291 
Ãw
 
	`FeOuutSŒ—m
(
outFe
))));

293 
	`ÿtch
 (
IOExû±iÚ
 
e
) {

294 
JBBut
.
	`g‘Log
().
	`log
(
Lev–
.
WARNING
, "E¼Ü c»©šg ouut: " + 
e
,

295 
e
);

297 
	}
}

299 
public
 
	$´št
(
PrštSŒ—m
 
out
) {

300 
boŞ—n
 
v®idRun
 = 
Œue
;

301 
SŒšg
 
msg
 = "";

302 
i
 = 0; i < 
m‘rics
.
Ëngth
; i++) {

303 ià(!
m‘rics
[
i
].
v®id
)

304 
v®idRun
 = 
çl£
;

306 ià(!
š¡ªûChecksPas£d
) {

307 
v®idRun
 = 
çl£
;

308 
msg
 = "JVM Instance Timing Checks Failed";

310 
Œy
 {

311 
out
.
	`´šn
("<HTML><HEAD>\n"

313 + "SPEC Jav¨R•Ü‹r\">\n" + "<TITLE> " + 
Çme


315 
out
.
	`´št
("<BODY ");

316 ià(
v®idRun
)

317 
out
.
	`´št
(
»suÉs
[0].
	`g‘
("spec.report.bodyAttributes", ""));

319 
m‘rics
[0].
	`»loÿ‹ImageResourû
("invalid.gif",

320 
ouut_dœeùÜy
);

321 
out
.
	`´št
("BACKGROUND=\"invalid.gif\"");

323 
out
.
	`´št
(">\n");

324 
out
.
	`´št
("<TABLE WIDTH=100%>\n" + "<TR><TD COLSPAN=2>");

325 ià(
issue
 !ğ
nuÎ
 && !issue.
	`equ®s
("")) {

326 
m‘rics
[0].
	`»loÿ‹ImageResourû
("spec-sm.gif",

327 
ouut_dœeùÜy
);

328 
out
.
	`´št
(
logo
);

331 
out
.
	`´št
("<FONT SIZE=+2></FONT>&nbsp;");

332 ià(!
v®idRun
)

333 
out
.
	`´št
("<FONT SIZE=+2> Invalid Run: </FONT>&nbsp");

334 
out
.
	`´št
("<FONT SIZE=+2>" + 
Çme
 + "2005</FONT></TD>\n"

336 + " <FONT SIZE=+2 COLOR=000000><B> SPECjbb2005 bİ ğ" + 
m‘ric1


337 + ", SPECjbb2005 bİs/JVM = " + 
m‘ric2
 + "</B></FONT></TD></TR>\n"

338 + "<TR><TD COLSPAN=3><FONT SIZE=+1>" + 
h¬dw¬e


340 ià(
soáw¬e
 !ğ
nuÎ
)

341 
out
.
	`´št
("<TR><TD COLSPAN=3><FONT SIZE=+1>" + 
soáw¬e


343 ià(
msg
 != "") {

344 
out
.
	`´št
("<TR><TD COLSPAN=3><font size=+2>INVALID because "

345 + 
msg
 + "</TD><TR>");

347 
out
.
	`´šn
("</TABLE>");

349 
out


350 .
	`´šn
("<P> <TABLE WIDTH=100%><TR><TD ALIGN=TOP>"

353 
i
 = 0; i < 
m‘rics
.
Ëngth
; i++) {

354 
out
.
	`´šn
("<TR><TD>" + (
i
 + 1è+ "</TD><TD>" + 
m‘ric
[i]

357 
out
.
	`´šn
("<TR><TH COLSPAN=2> SPECjbb2005 bops = "

358 + 
m‘ric1


360 + 
m‘ric2


362 + 
M‘rics
.
	`muÉiCurvesG¿ph
(
m‘rics
, 
Ïb–Img
, 
SPECIÁ”ÇlU£
,

363 
ouut_dœeùÜy
) + "</TD></TABLE>");

365 
out
.
	`´št
("<P>\n");

366 
Bufã»dR—d”
 
š
;

367 
Bufã»dR—d”
 
š_2
;

368 
TabËGroupCom·»
 
m
;

369 
š
 = 
Ãw
 
	`Bufã»dR—d”
Òew 
	`SŒšgR—d”
Òew 
	`Tem¶©e
()

370 .
	`g‘Tem¶©eSŒšg
()));

371 
š_2
 = 
Ãw
 
	`Bufã»dR—d”
Òew 
	`SŒšgR—d”
Òew 
	`Tem¶©e
()

372 .
	`g‘Tem¶©eSŒšg
()));

373 
m
 = 
Ãw
 
	`TabËGroupCom·»
(
š
, 
š_2
, 
»suÉs
[0], 
nuÎ
, 
t™Ës
);

374 
out
.
	`´šn
(
m
.
	`toSŒšg
());

376 
i
 = 0; i < 
m‘rics
.
Ëngth
; i++) {

377 
out
.
	`´šn
("<p><p><hr><center><b><font size=+2><a href="

378 + 
htmlFes
[
i
].
	`g‘Name
() + "> JVM " + (i + 1)

381 
out
.
	`´šn
(
g¿phTabË
[
i
]);

382 
	`‹¡B¬
(
out
);

386 
out
.
	`´šn
("<HR><FONT SIZE=-1>\n");

387 
out


388 .
	`´šn
("SPECjbb2005 Version: ["

389 + 
»suÉs
[0].
	`g‘
("config.benchmark_version", "N/A")

391 + 
»suÉs
[0].
	`g‘
("config.benchmark_versionDate",

393 
out
.
	`´šn
("<BR><I>\n");

394 ià(
issue
 !ğ
nuÎ
 && !issue.
	`equ®s
(""è&& 
v®idRun
)

395 
out
.
	`´šn
("Published by SPEC " + 
issue
 + "<br>");

396 
out
.
	`´šn
("Reporting…age, Copyright &copy; 2005 SPEC. "

398 
out
.
	`´šn
("<!-- ");

399 
out
.
	`´šn
("R•Ütšg PagG’”©Ü " + 
v”siÚ
);

400 ià(
echoRaw
)

401 
i
 = 0; i < 
»suÉs
.
Ëngth
; i++) {

402 
»suÉs
[
i
]

403 .
	`¡Üe
(
out
, "Raw ResuÉ fÜ " + (
i
 + 1) + " JVM");

405 
out
.
	`´šn
(" -->");

406 
out
.
	`´št
("</BODY></HTML>\n");

407 
out
.
	`şo£
();

409 
	`ÿtch
 (
Exû±iÚ
 
e
) {

410 
JBBut
.
	`g‘Log
().
	`log
(
Lev–
.
WARNING
, "E¼Ü: " + 
e
,ƒ);

412 
	}
}

414 
public
 
	$‹¡B¬
(
PrštSŒ—m
 
out
è
throws
 
IOExû±iÚ
 {

415 
SŒšg
 
liûn£
 = 
»suÉs
[0].
	`g‘
("config.test.specLicense", "MISSING");

416 
SŒšg
 
‹¡edBy
 = 
»suÉs
[0].
	`g‘
("config.test.testedBy", "MISSING");

417 
SŒšg
 
‹¡D©e
 = 
»suÉs
[0].
	`g‘
("config.test.date", "MISSING");

418 
out


419 .
	`´šn
("<TABLE WIDTH=\"100%\" BORDER=1 CELLSPACING=2 CELLPADDING=0><tr>\n"

421 + 
liûn£


424 + 
‹¡edBy


427 + 
‹¡D©e
 + "</td>\n" + "</tr></TABLE>");

428 
	}
}

430 
public
 
	$g’”©eSšgËRawFe
() {

431 
Enum”©iÚ
 
´İNames
;

432 
PrštSŒ—m
 
outRawFe
;

433 
R•ÜtPrİs
 
tÙ®Prİs
 = 
Ãw
 
	`R•ÜtPrİs
();

434 
SŒšg
 
Çme
, 
v®ue
;

435 
SŒšg
 
sšgËRawFeName
 = 
ouut_dœeùÜy
 + 
Fe
.
£·¿tÜ


437 
Fe
 
sšgËRawFe
 = 
Ãw
 
	`Fe
(
sšgËRawFeName
);

438 ià(
sšgËRawFe
.
	`exi¡s
()) {

439 
sšgËRawFe
.
	`d–‘e
();

441 
Enum”©iÚ
 
e
 = 
»suÉs
[0].
	`´İ”tyNames
();ƒ.
	`hasMÜeEËm’ts
();) {

442 
Çme
 = (
SŒšg
è
e
.
	`ÃxtEËm’t
();

443 ià(!
Çme
.
	`¡¬tsW™h
("result.")) {

444 
v®ue
 = 
»suÉs
[0].
	`g‘
(
Çme
);

445 
tÙ®Prİs
.
	`put
("glob®." + 
Çme
, 
v®ue
);

448 
i
 = 0; i < 
»suÉs
.
Ëngth
; i++) {

449 
Enum”©iÚ
 
e
 = 
»suÉs
[
i
].
	`´İ”tyNames
();ƒ

450 .
	`hasMÜeEËm’ts
();) {

451 
Çme
 = (
SŒšg
è
e
.
	`ÃxtEËm’t
();

452 
v®ue
 = 
»suÉs
[
i
].
	`g‘
(
Çme
);

453 ià(
Çme
.
	`¡¬tsW™h
("result.")) {

454 
tÙ®Prİs
.
	`put
((
i
+1è+ "." + 
Çme
, 
v®ue
);

458 
Œy
 {

459 
outRawFe
 = 
Ãw
 
	`PrštSŒ—m
(
sšgËRawFeName
);

460 
S‘
 
keys
 = 
tÙ®Prİs
.
	`keyS‘
();

461 
VeùÜ
 
keyvec
 = 
Ãw
 
	`VeùÜ
(
keys
);

462 
CŞËùiÚs
.
	`sÜt
(
keyvec
);

463 
i
 = 0; i < 
keyvec
.
	`size
(); i++) {

464 
SŒšg
 
´İsKey
 = (SŒšgè
keyvec
.
	`–em’tAt
(
i
);

465 
SŒšg
 
sv®ue
 = 
tÙ®Prİs
.
	`g‘Prİ”ty
(
´İsKey
);

466 
outRawFe
.
	`´šn
(
´İsKey
 + "=" + 
sv®ue
);

469 
	`ÿtch
 (
FeNÙFoundExû±iÚ
 
e
) {

470 
JBBut
.
	`g‘Log
().
	`log
(
Lev–
.
WARNING
,

471 "ERROR: fnÙ found " + 
sšgËRawFeName
, 
e
);

472 
Sy¡em
.
	`ex™
(1);

474 
	}
}

	@spec/reporter/MultiVMReporter.java

10 
·ckage
 
	g¥ec
.
	g»pÜ‹r
;

12 
impÜt
 
	gjava
.
	gio
.
	gFe
;

14 
public
 cÏs 
	cMuÉiVMR•Ü‹r
 {

16 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

25 
´iv©e
 
boŞ—n
 
	mİ
 = 
çl£
;

27 
´iv©e
 
boŞ—n
 
	mİ‹
 = 
Œue
;

29 
´iv©e
 
boŞ—n
 
	mİth
 = 
çl£
;

31 
´iv©e
 
boŞ—n
 
	mİts
 = 
çl£
;

33 
´iv©e
 
SŒšg
 
	mİŠ
;

35 
´iv©e
 
SŒšg
 
	mİto
;

37 
´iv©e
 
SŒšg
 
	mİŒ
;

39 
´iv©e
 
SŒšg
 
	mİ
;

41 
´iv©e
 
SŒšg
 
	mİ
;

43 
public
 
	$maš
(
SŒšg
[] 
¬gs
) {

44 ià(!
	`g‘O±
(
¬gs
))

46 ià(
İ
) {

47 ià(
İto
 =ğ
nuÎ
)

48 
İto
 = 
İŒ
 + 
Fe
.
£·¿tÜ
 + "MultiVMReport.txt";

49 
MuÉiVMTxtR•Üt
 
r
 = 
Ãw
 
	`MuÉiVMTxtR•Üt
(
İŠ
, 
İŒ
, 
İts
, 
İ
);

50 
r
.
	`´št
(
İto
);

53 ià(
İto
 =ğ
nuÎ
)

54 
İto
 = 
İŒ
 + 
Fe
.
£·¿tÜ
 + "index.html";

55 
MuÉiVMR•Üt
 
r
 = 
Ãw
 
	`MuÉiVMR•Üt
(
İŒ
, 
İts
, 
İŠ
, 
İth
, 
İ‹
, 
İ
, 
İ
);

56 
r
.
	`´št
(
İto
);

60 
´iv©e
 
boŞ—n
 
	$g‘O±
(
SŒšg
[] 
¬gs
) {

61 
Œy
 {

62 
i
 = 0; i < 
¬gs
.
Ëngth
; i++)

63 ià(
¬gs
[
i
].
	`equ®s
("-a"))

64 
İ
 = 
Œue
;

65 ià(
¬gs
[
i
].
	`equ®s
("-e"))

66 
İ‹
 = 
çl£
;

67 ià(
¬gs
[
i
].
	`equ®s
("-s"))

68 
İts
 = 
Œue
;

69 ià(
¬gs
[
i
].
	`equ®s
("-n"))

70 
İŠ
 = 
¬gs
[++
i
];

71 ià(
¬gs
[
i
].
	`equ®s
("-o"))

72 
İto
 = 
¬gs
[++
i
];

73 ià(
¬gs
[
i
].
	`equ®s
("-r"))

74 
İŒ
 = 
¬gs
[++
i
];

75 ià(
¬gs
[
i
].
	`equ®s
("-l"))

76 
İ
 = 
¬gs
[++
i
];

77 ià(
¬gs
[
i
].
	`equ®s
("-p"))

78 
İ
 = 
¬gs
[++
i
];

80 
throw
 
Ãw
 
	`A¼ayIndexOutOfBoundsExû±iÚ
();

82 
	`ÿtch
 (
A¼ayIndexOutOfBoundsExû±iÚ
 
e
) {

83 
	`u§ge
();

84  
çl£
;

86 ià(
İŒ
 !ğ
nuÎ
)

87  
Œue
;

89 
	`u§ge
();

90  
çl£
;

91 
	}
}

93 
´iv©e
 
	$u§ge
() {

94 
Sy¡em
.
out


95 .
	`´šn
("Usage: java spec.reporter.MultiVMReporter [options]\n"

107 
	}
}

	@spec/reporter/MultiVMTxtReport.java

10 
·ckage
 
	g¥ec
.
	g»pÜ‹r
;

12 
impÜt
 
	gjava
.
	gio
.*;

13 
impÜt
 
	gjava
.
	gut
.
	gloggšg
.
	gLev–
;

14 
impÜt
 
	g¥ec
.
	gjbb
.
	gJBBut
;

16 
public
 cÏs 
	cMuÉiVMTxtR•Üt
 {

18 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

27 
public
 
SŒšg
 
	mh¬dw¬e
, 
	mm‘ric1
, 
	mm‘ric2
, 
	msoáw¬e
;

29 
public
 
SŒšg
 
	mba£
;

31 
´iv©e
 
TextCŞumn
 
	mcŞumnT™Ë
;

33 
´iv©e
 
TextCŞumn
 
	mcŞumnV®ue
;

35 
public
 
SŒšg
 
	missue
;

37 
public
 
SŒšg
 
	m´efix
;

39 
´iv©e
 
SŒšg
 
	mmemÜy
;

41 
public
 
SŒšg
 
	mmemÜyDesütiÚ
;

43 
public
 
TextM‘rics
 
	mm‘rics
[];

45 
public
 
SŒšg
 
	mm‘ric
[];

47 
´iv©e
 
fš®
 
	m·geWidth
 = 120;

49 
public
 
R•ÜtPrİs
 
	m»suÉs
[];

51 
public
 
boŞ—n
 
	mSPECIÁ”ÇlU£
;

53 
public
 
boŞ—n
 
	mv®idRun
 = 
Œue
;

55 
public
 
SŒšg
 
	mouut_dœeùÜy
;

57 
public
 
	mš¡ªûs
 = 0;

59 
public
 
boŞ—n
 
	mš¡ªûChecksPas£d
 = 
Œue
;

61 
public
 
	$MuÉiVMTxtR•Üt
(
SŒšg
 
Ãw¦‘‹r
, SŒšg 
ouut_dœeùÜy
,

62 
boŞ—n
 
SPECIÁ”ÇlU£
) {

63 
	`this
(
Ãw¦‘‹r
, 
ouut_dœeùÜy
, 
SPECIÁ”ÇlU£
, "SPECjbb.");

67 
public
 
	$MuÉiVMTxtR•Üt
(
SŒšg
 
Ãw¦‘‹r
, SŒšg 
ouut_dœeùÜy
,

68 
boŞ—n
 
SPECIÁ”ÇlU£
, 
SŒšg
 
´efix
) {

69 
this
.
issue
 = 
Ãw¦‘‹r
;

70 
this
.
SPECIÁ”ÇlU£
 = SPECInternalUse;

71 
this
.
ouut_dœeùÜy
 = output_directory;

72 
this
.
´efix
 =…refix;

73 
SŒšg
 
suffix
 = ".raw";

74 
Fe
 
dœ
 = 
Ãw
 
	`Fe
(
ouut_dœeùÜy
);

75 ià(!
dœ
.
	`exi¡s
()) {

76 
Sy¡em
.
out
.
	`´šn
("E¼Ü: f" + 
ouut_dœeùÜy


78 
Sy¡em
.
	`ex™
(1);

80 ià(!
dœ
.
	`isDœeùÜy
()) {

81 
Sy¡em
.
out
.
	`´šn
("E¼Ü: f" + 
ouut_dœeùÜy


83 
Sy¡em
.
	`ex™
(1);

86 
F’ameF‹r
 
f‹r
 = 
Ãw
 
	`JBBR•ÜtF’ameF‹r
(
´efix
, 
suffix
);

87 
Fe
[] 
»suÉFes
 = 
dœ
.
	`li¡Fes
(
f‹r
);

88 
š¡ªûs
 = 
»suÉFes
.
Ëngth
;

89 
»suÉs
 = 
Ãw
 
R•ÜtPrİs
[
»suÉFes
.
Ëngth
];

90 
m‘rics
 = 
Ãw
 
TextM‘rics
[
»suÉFes
.
Ëngth
];

91 
m‘ric
 = 
Ãw
 
SŒšg
[
»suÉFes
.
Ëngth
];

92 
sum
 = 0;

93 
boŞ—n
 
isM‘ricsDoubË
 = 
Œue
;

94 
i
 = 0; i < 
»suÉFes
.
Ëngth
; i++) {

95 
»suÉs
[
i
] = 
Ãw
 
	`R•ÜtPrİs
();

96 
Œy
 {

97 
»suÉs
[
i
].
	`lßd
(
»suÉFes
[i].
	`g‘P©h
());

99 
	`ÿtch
 (
IOExû±iÚ
 
e
) {

100 
JBBut
.
	`g‘Log
().
	`log
(

101 
Lev–
.
WARNING
,

102 "E¼Ü„—dšg„esuÉ f" + 
»suÉFes
[
i
] + ": "

103 + 
e
,ƒ);

104 
Sy¡em
.
	`ex™
(1);

107 
m‘rics
[
i
] = 
Ãw
 
	`TextM‘rics
(
»suÉs
[i], 
SPECIÁ”ÇlU£
);

108 
m‘ric
[
i
] = 
m‘rics
[i].
	`m‘ric
();

109 
Œy
 {

110 
sum
 +ğ
DoubË
.
	`·r£DoubË
(
m‘ric
[
i
]);

112 
	`ÿtch
 (
Numb”FÜm©Exû±iÚ
 
e
) {

113 
isM‘ricsDoubË
 = 
çl£
;

114 
m‘ric1
 = "n/a";

115 
m‘ric2
 = "n/a";

118 
	`checkIn¡ªûTimšg
();

119 ià(
isM‘ricsDoubË
) {

120 
m‘ric1
 = 
M‘rics
.
	`fÜm©
(
sum
);

121 
m‘ric2
 = 
M‘rics
.
	`fÜm©
(
sum
 / 
m‘rics
.
Ëngth
);

123 
this
.
h¬dw¬e
 = 
	`g‘
("config.hw.vendor") + " " + get("config.hw.model");

124 
i
 = 0; i < 
m‘rics
.
Ëngth
; i++) {

125 ià(!
m‘rics
[
i
].
v®id
)

126 
v®idRun
 = 
çl£
;

135 
this
.
soáw¬e
 = 
	`g‘
("config.sw.vendor") + " " + get("config.sw.JVM");

136 
this
.
memÜy
 = 
»suÉs
[0].
	`g‘
("config.hw.memory");

137 
this
.
memÜyDesütiÚ
 = 
»suÉs
[0].
	`g‘
("config.hw.memory_description");

138 
	}
}

140 
´iv©e
 
SŒšg
 
	$cÚfigSeùiÚ
() {

146 
TextBlock
 
Ëá
 = 
Ãw
 
	`TextBlock
(37, "HARDWARE");

147 
cŞumnT™Ë
 = 
Ãw
 
	`TextCŞumn
(16);

148 
cŞumnV®ue
 = 
Ãw
 
	`TextCŞumn
(20);

149 
	`ıut
("config.hw.vendor", "Vendor");

150 
	`ıut
("config.hw.vendor.url", "Vendor URL");

151 
	`ıut
("config.hw.model", "Model");

152 
	`ıut
("config.hw.processor", "Processor");

153 
	`ıut
("config.hw.MHz", "MHz");

154 
	`ıut
("config.hw.nchips", "# of Chips");

155 
	`ıut
("config.hw.ncores", "# of Cores");

156 
	`ıut
("config.hw.ncoresperchip", "# of Cores/Chip");

157 
	`ıut
("config.hw.hwThreads", "HW Thresads");

158 
	`ıut
("config.sw.procsAvailtoJava", "Procs‡vailo Java");

159 
	`ıut
("config.hw.memory", "Memory (MB)");

160 
	`ıut
("config.hw.memory_description", "Memory Details");

161 
	`ıut
("config.hw.primaryCache", "L1 Cache");

162 
	`ıut
("config.hw.secondaryCache", "L2 Cache");

163 
	`ıut
("config.hw.otherCache", "Other Cache");

164 
	`ıut
("config.hw.fileSystem", "Filesystem");

165 
	`ıut
("config.hw.disk", "Disks");

166 
	`ıut
("config.hw.other", "Other H/W");

167 
Ëá
.
	`add
(
cŞumnT™Ë
.
	`još
(
cŞumnV®ue
, " ").
	`m”ge
());

173 
TextBlock
 
right
 = 
Ãw
 
	`TextBlock
(37, "SOFTWARE");

174 
cŞumnT™Ë
 = 
Ãw
 
	`TextCŞumn
(16);

175 
cŞumnV®ue
 = 
Ãw
 
	`TextCŞumn
(20);

176 
	`ıut
("config.sw.vendor", "Vendor");

177 
	`ıut
("config.sw.vendor.url", "Vendor URL");

178 
	`ıut
("config.sw.JVM", "JVM Version");

179 
	`ıut
("config.sw.command_line", "Command Line");

180 
	`ıut
("config.sw.JVMheapInitial", "Initial Heap Mem (MB)");

181 
	`ıut
("config.sw.JVMheapMax", "Max Heap Mem (MB)");

182 
	`ıut
("config.sw.JVMbitness", "JVM‡ddressing bits");

184 
	`ıut
("java.class.path", "JVM CLASSPATH");

185 
	`ıut
("java.library.path", "JVM BOOTCLASSPATH");

186 
	`ıut
("config.sw.OS", "OS Version");

187 
	`ıut
("config.sw.other", "Other S/W");

188 
right
.
	`add
(
cŞumnT™Ë
.
	`još
(
cŞumnV®ue
, " ").
	`m”ge
());

189 
right
.
	`add
("");

190 
right
.
	`add
("AOT Compilation Details");

191 ià((
»suÉs
[0].
	`g‘
("cÚfig.sw.aÙ")è!ğ
nuÎ
)

192 
right
.
	`add
(
»suÉs
[0].
	`g‘
("config.sw.aot"));

193 
right
.
	`add
("");

194 
right
.
	`add
("TUNING AND NOTES");

195 ià((
»suÉs
[0].
	`g‘
("cÚfig.sw.tunšg")è!ğ
nuÎ
)

196 
right
.
	`add
(
»suÉs
[0].
	`g‘
("config.sw.tuning"));

197 ià((
»suÉs
[0].
	`g‘
("cÚfig.sw.nÙes")è!ğ
nuÎ
)

198 
right
.
	`add
(
»suÉs
[0].
	`g‘
("config.sw.notes"));

199 
right
.
	`add
("");

204 
TextBlock
 
tİ
 = 
Ëá
.
	`još
(
right
);

205 
tİ
.
	`add
("");

216 
right
 = 
Ãw
 
	`TextBlock
(37, "TEST INFORMATION");

217 
cŞumnT™Ë
 = 
Ãw
 
	`TextCŞumn
(18);

218 
cŞumnV®ue
 = 
Ãw
 
	`TextCŞumn
(18);

219 
	`ıut
("config.test.testedBy", "Tested by");

220 
	`ıut
("config.test.specLicense", "SPEC License");

221 
	`ıut
("config.test.location", "Test Location");

222 
	`ıut
("config.test.date", "Test Date");

223 
	`ıut
("config.sw.JVMavailable", "JVM‡vailable");

224 
	`ıut
("config.hw.available", "H/w‡vailable");

225 
	`ıut
("config.sw.OSavailable", "OS‡vailable");

226 
	`ıut
("config.sw.otherAvailable", "Other s/w‡vailable");

227 
right
.
	`add
(
cŞumnT™Ë
.
	`još
(
cŞumnV®ue
, " ").
	`m”ge
());

231 
tİ
.
	`add
(
right
);

232  
tİ
.
	`toSŒšg
();

233 
	}
}

235 
´iv©e
 
	$ıut
(
SŒšg
 
Çme
, SŒšg 
t™Ë
) {

236 
cŞumnT™Ë
.
	`add
(
t™Ë
);

237 
cŞumnV®ue
.
	`add
(
	`g‘
(
Çme
));

238 
	}
}

240 
´iv©e
 
SŒšg
 
	$g‘
(
SŒšg
 
Çme
) {

241  
	`g‘
(
Çme
, "MISSING");

242 
	}
}

244 
´iv©e
 
SŒšg
 
	$g‘
(
SŒšg
 
Çme
, SŒšg 
def
) {

245 
SŒšg
 
s
 = 
»suÉs
[0].
	`g‘
(
Çme
, 
def
);

246 ià(
s
.
	`šdexOf
('<') >= 0) {

247 
i
 = 
s
.
	`šdexOf
("<i>");

248 ià(
i
 >= 0)

249 
s
 = s.
	`sub¡ršg
(0, 
i
) + s.substring(i + 3);

250 
i
 = 
s
.
	`šdexOf
("<I>");

251 ià(
i
 >= 0)

252 
s
 = s.
	`sub¡ršg
(0, 
i
) + s.substring(i + 3);

253 
i
 = 
s
.
	`šdexOf
("</i>");

254 ià(
i
 >= 0)

255 
s
 = s.
	`sub¡ršg
(0, 
i
) + s.substring(i + 4);

256 
i
 = 
s
.
	`šdexOf
("</I>");

257 ià(
i
 >= 0)

258 
s
 = s.
	`sub¡ršg
(0, 
i
) + s.substring(i + 4);

260  
s
;

261 
	}
}

263 
public
 
	$´št
(
SŒšg
 
outFe
) {

264 
Œy
 {

265 
	`´št
(
Ãw
 
	`PrštSŒ—m
Òew 
	`Bufã»dOuutSŒ—m
(

266 
Ãw
 
	`FeOuutSŒ—m
(
outFe
))));

268 
	`ÿtch
 (
IOExû±iÚ
 
e
) {

269 
JBBut
.
	`g‘Log
().
	`log
(
Lev–
.
WARNING
, "E¼Ü c»©šg ouut: " + 
e
,

270 
e
);

272 
	}
}

274 
public
 
	$´št
(
PrštSŒ—m
 
out
) {

275 
SŒšg
 
msg
 = "";

276 ià(!
š¡ªûChecksPas£d
) {

277 
v®idRun
 = 
çl£
;

278 
msg
 = "JVM Instance Timing Checks Failed";

280 
Œy
 {

281 
SŒšg
 
nÙV®id
 = "";

282 ià(!
v®idRun
)

283 
nÙV®id
 = "Invalid";

284 
out
.
	`´šn
(
nÙV®id
 + " SPECjbb2005 bops = "

285 + 
m‘ric1
 + ", SPECjbb2005 bİs/JVM = " + 
m‘ric2
);

287 
out
.
	`´šn
();

288 ià(
msg
 != "") {

289 
out
.
	`´št
("INVALID beÿu£ " + 
msg
);

290 
out
.
	`´šn
();

291 
out
.
	`´šn
();

293 
out
.
	`´šn
(
h¬dw¬e
);

294 
out
.
	`´šn
(
soáw¬e
);

295 
	`‹¡B¬
(
out
);

296 
out
.
	`´šn
();

297 
out
.
	`´šn
(" Multi JVM Mode");

298 
out
.
	`´šn
();

299 
out
.
	`´šn
(" JVM„un JVM Scores");

300 
i
 = 0; i < 
m‘rics
.
Ëngth
; i++) {

301 
out
.
	`´šn
(" " + (
i
 + 1) + " "

302 + 
m‘ric
[
i
]);

304 
out
.
	`´šn
("SPECjbb2005 bİs=" + 
m‘ric1
 + ", SPECjbb2005 bİs/JVM=" + 
m‘ric2
);

305 
out
.
	`´šn
();

306 
out
.
	`´šn
(
	`cÚfigSeùiÚ
());

307 
i
 = 0; i < 
m‘rics
.
Ëngth
; i++) {

308 
out
.
	`´šn
();

309 
out
.
	`´šn
(" JVM " + (
i
 + 1) + " Scores");

310 
out
.
	`´šn
(
m‘rics
[
i
].
	`¿tioTabË
());

311 
out
.
	`´šn
();

313 
out


314 .
	`´šn
("\nSPECjbb2005 Version: ["

315 + 
»suÉs
[0].
	`g‘
("config.benchmark_version", "N/A")

317 + 
»suÉs
[0].
	`g‘
("config.benchmark_versionDate",

319 ià(
issue
 !ğ
nuÎ
 && !issue.
	`equ®s
(""è&& 
v®idRun
)

320 
out
.
	`´šn
("Published by SPEC " + 
issue
);

321 
out
.
	`´šn
("Reporting…age (C) Copyright SPEC, 2005. "

323 
out
.
	`şo£
();

325 
	`ÿtch
 (
Exû±iÚ
 
e
) {

326 
JBBut
.
	`g‘Log
().
	`log
(
Lev–
.
WARNING
, "E¼Ü: " + 
e
,ƒ);

328 
	}
}

330 
public
 
	$‹¡B¬
(
PrštSŒ—m
 
out
è
throws
 
IOExû±iÚ
 {

331 
SŒšg
 
liûn£
 = 
»suÉs
[0].
	`g‘
("config.test.specLicense", "MISSING");

332 
SŒšg
 
‹¡edBy
 = 
»suÉs
[0].
	`g‘
("config.test.testedBy", "MISSING");

333 
SŒšg
 
‹¡D©e
 = 
»suÉs
[0].
	`g‘
("config.test.date", "MISSING");

334 
out
.
	`´šn
("SPEC†iûn£ # " + 
liûn£
 + ", " + "Tested by: "

335 + 
‹¡edBy
 + ", " + "Te¡ d©e: " + 
‹¡D©e
);

336 
	}
}

338 
public
 
	$checkIn¡ªûTimšg
() {

340 
couÁ
 = 0;

341 
š¡ªûsChecked
 = 0;

342 
š¡ªûChecksPas£d
 = 
Œue
;

343 
Ï¡_¿mpup_mlis
 = 0;

344 
fœ¡_¡¬t_mlis
 = 
LÚg
.
MAX_VALUE
;

345 
fœ¡_¿mpdown_mlis
 = 
LÚg
.
MAX_VALUE
;

346 
Ï¡_’d_mlis
 = 0;

347 
tmpRampdown
 = 0;

348 
tmpEnd
 = 0;

349 
tmpS¹
 = 0;

350 
tmpRampup
 = 0;

351 
couÁ
 = 
m‘rics
[0].
	`g‘W¬ehou£sTe¡ed
();

352 
š¡ªûsChecked
++;

353 
n
 = 1;‚ < 
š¡ªûs
;‚++) {

354 ià(
couÁ
 !ğ
m‘rics
[
n
].
	`g‘W¬ehou£sTe¡ed
())

356 
š¡ªûsChecked
++;

358 ià(
š¡ªûsChecked
 !ğ
š¡ªûs
) {

359 
Sy¡em
.
out


360 .
	`´šn
("INVALID: Instances do‚ot have identicalest counts");

361 
š¡ªûChecksPas£d
 = 
çl£
;

365 
i
 = 1; i <ğ
couÁ
 && 
š¡ªûChecksPas£d
; i++) {

366 
Ï¡_¿mpup_mlis
 = 0;

367 
fœ¡_¡¬t_mlis
 = 
LÚg
.
MAX_VALUE
;

368 
fœ¡_¿mpdown_mlis
 = 
LÚg
.
MAX_VALUE
;

369 
Ï¡_’d_mlis
 = 0;

370 
j
 = 0; j < 
š¡ªûs
; j++) {

372 
tmpS¹
 = 
m‘rics
[
j
].
	`¡¬t_mlis_©_wh
(
i
);

373 ià(
tmpS¹
 < 
fœ¡_¡¬t_mlis
)

374 
fœ¡_¡¬t_mlis
 = 
tmpS¹
;

376 
tmpRampup
 = 
m‘rics
[
j
].
	`¿mpup_mlis_©_wh
(
i
);

377 ià(
tmpRampup
 > 
Ï¡_¿mpup_mlis
)

378 
Ï¡_¿mpup_mlis
 = 
tmpRampup
;

380 
tmpRampdown
 = 
m‘rics
[
j
].
	`¿mpdown_mlis_©_wh
(
i
);

381 ià(
tmpRampdown
 < 
fœ¡_¿mpdown_mlis
)

382 
fœ¡_¿mpdown_mlis
 = 
tmpRampdown
;

384 
tmpEnd
 = 
m‘rics
[
j
].
	`’d_mlis_©_wh
(
i
);

385 ià(
tmpEnd
 > 
Ï¡_’d_mlis
)

386 
Ï¡_’d_mlis
 = 
tmpEnd
;

390 ià((
fœ¡_¿mpdown_mlis
 > 
Ï¡_’d_mlis
)

391 && (
fœ¡_¡¬t_mlis
 > 
Ï¡_¿mpup_mlis
)) {

392 
š¡ªûChecksPas£d
 = 
Œue
;

395 
š¡ªûChecksPas£d
 = 
çl£
;

399 
	}
}

	@spec/reporter/Report.java

10 
·ckage
 
	g¥ec
.
	g»pÜ‹r
;

12 
impÜt
 
	gjava
.
	gio
.*;

13 
impÜt
 
	gjava
.
	gut
.
	gEnum”©iÚ
;

14 
impÜt
 
	gjava
.
	gut
.
	gloggšg
.
	gLev–
;

15 
impÜt
 
	g¥ec
.
	gjbb
.
	gJBBut
;

17 
public
 cÏs 
	cR•Üt
 {

19 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

28 
´iv©e
 
SŒšg
 
	mlogo
 = "<IMG SRC=\"spec-sm.gif\" WIDTH=\"57\" HEIGHT=\"72\"\n"

31 
´iv©e
 
fš®
 
SŒšg
 
	mv”siÚ
 = "@(#)Report.java 1.18 08/03/98";

33 
public
 
SŒšg
 
	mg¿phTabË
, 
	mh¬dw¬e
, 
	mm‘ric
, 
	mÇme
, 
	msoáw¬e
;

35 
public
 
SŒšg
 
	mba£
;

37 
´iv©e
 
SŒšg
 
	mÿ‹gÜy
;

39 
public
 
boŞ—n
 
	mSPECIÁ”ÇlU£
;

41 
public
 
boŞ—n
 
	mechoRaw
;

43 
public
 
SŒšg
 
	missue
;

45 
´iv©e
 
SŒšg
 
	mmemÜy
;

47 
´iv©e
 
SŒšg
 
	mmemÜyDesütiÚ
;

49 
public
 
M‘rics
 
	mm‘rics
;

51 
public
 
M‘rics
 
	mm‘rics_2
;

53 
public
 
R•ÜtPrİs
 
	m»suÉs
 = 
Ãw
 ReportProps();

55 
public
 
R•ÜtPrİs
 
	m»suÉs_2
 = 
Ãw
 ReportProps();

57 
public
 
Tem¶©e
 
	m‹m¶©e
;

59 
public
 
R•ÜtPrİs
 
	mt™Ës
 = 
Ãw
 ReportProps();

61 
public
 
boŞ—n
 
	mu£JavaG¿ph
;

63 
public
 
boŞ—n
 
	mu£Html
;

65 
public
 
boŞ—n
 
	mv”bo£
;

67 
public
 
SŒšg
 
	mÏb–
;

69 
public
 
SŒšg
 
	mouut_dœeùÜy
;

71 
public
 
	$R•Üt
(
boŞ—n
 
echoRaw
, boŞ—À
SPECIÁ”ÇlU£
, 
SŒšg
 
Ãw¦‘‹r
,

72 
SŒšg
 
»suÉFe
, 
boŞ—n
 
v”bo£
, SŒšg 
»suÉFe_2
,

73 
SŒšg
 
Ïb–
, 
boŞ—n
 
u£Html
, SŒšg 
ouut_dœeùÜy
) {

74 
this
.
echoRaw
 =ƒchoRaw;

75 
this
.
SPECIÁ”ÇlU£
 = SPECInternalUse;

76 
this
.
issue
 = 
Ãw¦‘‹r
;

77 
this
.
v”bo£
 = verbose;

78 
this
.
Ïb–
 =†abel;

79 
this
.
ouut_dœeùÜy
 = output_directory;

80 
Œy
 {

81 
SŒšgR—d”
 
tis
 = 
Ãw
 
	`SŒšgR—d”
Òew 
	`T™Ë
().
	`g‘T™ËSŒšg
());

82 
t™Ës
.
	`lßd
(
tis
);

84 
	`ÿtch
 (
IOExû±iÚ
 
e
) {

85 
JBBut
.
	`g‘Log
().
	`log
(
Lev–
.
WARNING
,

86 "E¼Ü†ßdšg™Ë fÜ„•Üt\n", 
e
);

87 
Sy¡em
.
	`ex™
(1);

89 
Œy
 {

90 ià(
»suÉFe
 =ğ
nuÎ
)

91 
»suÉs
.
	`lßd
(
Ãw
 
	`IÅutSŒ—mR—d”
(
Sy¡em
.
š
));

93 
»suÉs
.
	`lßd
(
»suÉFe
);

95 
	`ÿtch
 (
IOExû±iÚ
 
e
) {

96 
JBBut
.
	`g‘Log
().
	`log
(
Lev–
.
WARNING
,

97 "E¼Ü„—dšg„esuÉ f" + 
»suÉFe
 + ": " + 
e
,ƒ);

98 
Sy¡em
.
	`ex™
(1);

100 
m‘rics
 = 
Ãw
 
	`M‘rics
(
»suÉs
, 
SPECIÁ”ÇlU£
);

101 
Œy
 {

102 ià(
»suÉFe_2
 !ğ
nuÎ
) {

103 
»suÉs_2
.
	`lßd
(
»suÉFe_2
);

104 
m‘rics_2
 = 
Ãw
 
	`M‘rics
(
»suÉs_2
, 
SPECIÁ”ÇlU£
);

107 
m‘rics_2
 = 
nuÎ
;

109 
	`ÿtch
 (
IOExû±iÚ
 
e
) {

110 
JBBut
.
	`g‘Log
().
	`log
(

111 
Lev–
.
WARNING
,

112 "E¼Ü„—dšg com·risÚ„esuÉ f" + 
»suÉFe_2


113 + ": " + 
e
,ƒ);

114 
Sy¡em
.
	`ex™
(1);

116 ià(
m‘rics_2
 =ğ
nuÎ
) {

117 
this
.
g¿phTabË
 = 
m‘rics
.
	`bËAndG¿ph
(
Ïb–
, 
u£Html
,

118 
ouut_dœeùÜy
);

121 
this
.
g¿phTabË
 = 
m‘rics
.
	`com·»TabËAndG¿ph
(
m‘rics_2
, 
Ïb–
,

122 
u£Html
, 
ouut_dœeùÜy
);

124 
this
.
Çme
 = 
»suÉs
.
	`g‘
("input.suite");

125 
this
.
h¬dw¬e
 = 
»suÉs
.
	`g‘
("config.hw.vendor") + " "

126 + 
»suÉs
.
	`g‘
("config.hw.model");

127 ià(
m‘ric
 =ğ
nuÎ
)

128 
m‘ric
 = " " + 
m‘rics
.
	`m‘ric
();

129 ià(
m‘rics
.
v®id
) {

130 ià(!
SPECIÁ”ÇlU£
) {

131 
m‘rics
.
»suÉs_buf
.
	`­³nd
("\nV®id„un, ScÜi " + 
m‘ric


136 ià(
m‘rics
.
´št_scÜe
) {

137 
m‘rics
.
»suÉs_buf
.
	`­³nd
("INVALID„un; ScÜi " + 
m‘ric


141 
m‘rics
.
»suÉs_buf


142 .
	`­³nd
("INVALID„un…reventing score calculation.\n");

145 
this
.
soáw¬e
 = 
»suÉs
.
	`g‘
("config.sw.vendor") + " "

146 + 
»suÉs
.
	`g‘
("config.sw.JVM");

147 
this
.
memÜy
 = 
»suÉs
.
	`g‘
("config.hw.memory");

148 
this
.
memÜyDesütiÚ
 = 
»suÉs
.
	`g‘
("config.hw.memory_description");

151 
public
 
	$´št
(
SŒšg
 
outFe
) {

152 
Œy
 {

153 
	`´št
(
Ãw
 
	`PrštSŒ—m
Òew 
	`Bufã»dOuutSŒ—m
(

154 
Ãw
 
	`FeOuutSŒ—m
(
outFe
))));

156 
	`ÿtch
 (
IOExû±iÚ
 
e
) {

157 
JBBut
.
	`g‘Log
().
	`log
(
Lev–
.
WARNING
, "E¼Ü c»©šg ouut: " + 
e
,

158 
e
);

160 
	}
}

162 
public
 
	$´št
(
PrštSŒ—m
 
out
) {

163 
Œy
 {

164 
out
.
	`´šn
("<HTML><HEAD>\n"

166 + "SPEC Jav¨R•Ü‹r\">\n" + "<TITLE> " + 
Çme


168 
out
.
	`´št
("<BODY ");

169 ià(
m‘rics
.
v®id
)

170 
out
.
	`´št
(
»suÉs
.
	`g‘
("spec.report.bodyAttributes", ""));

172 
m‘rics
.
	`»loÿ‹ImageResourû
("šv®id.gif", 
ouut_dœeùÜy
);

173 
out
.
	`´št
("BACKGROUND=\"invalid.gif\"");

175 
out
.
	`´št
(">\n");

176 
out
.
	`´št
("<TABLE WIDTH=100%>\n" + "<TR><TD COLSPAN=2>");

177 ià(
issue
 !ğ
nuÎ
 && !issue.
	`equ®s
("")) {

178 
m‘rics
.
	`»loÿ‹ImageResourû
("¥ec-sm.gif", 
ouut_dœeùÜy
);

179 
out
.
	`´št
(
logo
);

182 
out
.
	`´št
("<FONT SIZE=+2></FONT>&nbsp;");

183 ià(!
m‘rics
.
v®id
)

184 
out
.
	`´št
("<FONT SIZE=+2> Invalid</FONT>");

185 
out
.
	`´št
(

188 "<FONT SIZE=+2>" + 
Çme
 + "2005</FONT></TD>\n"

191 " <FONT SIZE=+2 COLOR=000000><B>SPECjbb2005 bİ ğ" + 
m‘ric


192 + ", SPECjbb2005 bİs/JVM = " + 
m‘ric
 + "</B></FONT></TD></TR>\n"

193 + "<TR><TD COLSPAN=3><FONT SIZE=+1>" + 
h¬dw¬e


195 ià(
soáw¬e
 !ğ
nuÎ
)

196 
out
.
	`´št
("<TR><TD COLSPAN=3><FONT SIZE=+1>" + 
soáw¬e


198 
out
.
	`´šn
("</TABLE>");

199 
out
.
	`´šn
(
g¿phTabË
);

200 
	`‹¡B¬
(
out
);

201 
out
.
	`´št
("<P>\n");

202 
Bufã»dR—d”
 
š
;

203 
Bufã»dR—d”
 
š_2
;

204 
TabËGroupCom·»
 
m
;

205 ià(
m‘rics_2
 !ğ
nuÎ
) {

206 
š
 = 
Ãw
 
	`Bufã»dR—d”
Òew 
	`SŒšgR—d”
Òew 
	`Tem¶©eCom·»
()

207 .
	`g‘Tem¶©eSŒšg
()));

208 
š_2
 = 
Ãw
 
	`Bufã»dR—d”
Òew 
	`SŒšgR—d”
(

209 
Ãw
 
	`Tem¶©eCom·»
().
	`g‘Tem¶©eSŒšg
()));

210 
m
 = 
Ãw
 
	`TabËGroupCom·»
(
š
, 
š_2
, 
»suÉs
, 
»suÉs_2
, 
t™Ës
);

213 
š
 = 
Ãw
 
	`Bufã»dR—d”
Òew 
	`SŒšgR—d”
Òew 
	`Tem¶©e
()

214 .
	`g‘Tem¶©eSŒšg
()));

215 
š_2
 = 
Ãw
 
	`Bufã»dR—d”
Òew 
	`SŒšgR—d”
Òew 
	`Tem¶©e
()

216 .
	`g‘Tem¶©eSŒšg
()));

217 
m
 = 
Ãw
 
	`TabËGroupCom·»
(
š
, 
š_2
, 
»suÉs
, 
nuÎ
, 
t™Ës
);

219 
out
.
	`´šn
(
m
.
	`toSŒšg
());

220 ià(
m‘rics_2
 =ğ
nuÎ
)

221 
out
.
	`´šn
(
m‘rics
.
	`d‘a
());

222 ià(
v”bo£
)

223 
	`´štOth”Prİ”t›s
(
out
);

224 
out
.
	`´šn
("<HR><FONT SIZE=-1>\n");

226 
out
.
	`´šn
("SPECjbb2005 Version: ["

227 + 
»suÉs
.
	`g‘
("config.benchmark_version", "N/A") + ", "

228 + 
»suÉs
.
	`g‘
("config.benchmark_versionDate", "-") + "]");

229 
out
.
	`´šn
("<BR><I>\n");

230 ià(
issue
 !ğ
nuÎ
 && !issue.
	`equ®s
(""è&& 
m‘rics
.
v®id
)

231 
out
.
	`´šn
("Published by SPEC " + 
issue
 + "<br>");

232 
out
.
	`´šn
("Reporting…age, Copyright &copy; 2005 SPEC. "

234 
out
.
	`´šn
("<!-- ");

235 
out
.
	`´šn
("R•Ütšg PagG’”©Ü " + 
v”siÚ
);

236 ià(
echoRaw
)

237 
»suÉs
.
	`¡Üe
(
out
, "Raw Results");

238 
out
.
	`´šn
(" -->");

239 
out
.
	`´št
("</BODY></HTML>\n");

240 
out
.
	`şo£
();

242 
	`ÿtch
 (
Exû±iÚ
 
e
) {

243 
JBBut
.
	`g‘Log
().
	`log
(
Lev–
.
WARNING
, "E¼Ü: " + 
e
,ƒ);

245 
	}
}

247 
public
 
SŒšg
 
	$mes§ges
() {

248  
m‘rics
.
»suÉs_buf
.
	`toSŒšg
();

249 
	}
}

251 
´iv©e
 
	$´štOth”Prİ”t›s
(
PrštSŒ—m
 
out
) {

252 
out


253 .
	`´šn
("<H4>Optional Information</H4>\n"

257 
Enum”©iÚ
 
e
 = 
»suÉs
.
	`´İ”tyNames
();ƒ.
	`hasMÜeEËm’ts
();) {

258 
SŒšg
 
key
 = (SŒšgè
e
.
	`ÃxtEËm’t
();

259 ià(
key
.
	`¡¬tsW™h
("config.testx.")

260 || 
key
.
	`¡¬tsW™h
("config.initial.")) {

261 
SŒšg
 
v®ue
 = 
»suÉs
.
	`g‘
(
key
);

262 ià(
key
.
	`equ®s
("config.testx.internalReference")

263 && (
v®ue
.
	`¡¬tsW™h
("http://") || value

264 .
	`¡¬tsW™h
("file:/")))

265 
v®ue
 = "<A HREF=\"" + value + "\">" + value + "</A>";

266 
out
.
	`´šn
("<BR>" + 
key
 + "=" + 
v®ue
);

269 
	}
}

271 
public
 
	$‹¡B¬
(
PrštSŒ—m
 
out
è
throws
 
IOExû±iÚ
 {

272 
SŒšg
 
liûn£
 = 
»suÉs
.
	`g‘
("config.test.specLicense", "MISSING");

273 
SŒšg
 
‹¡edBy
 = 
»suÉs
.
	`g‘
("config.test.testedBy", "MISSING");

274 
SŒšg
 
‹¡D©e
 = 
»suÉs
.
	`g‘
("config.test.date", "MISSING");

275 
out


276 .
	`´šn
("<TABLE WIDTH=\"100%\" BORDER=1 CELLSPACING=2 CELLPADDING=0><tr>\n"

278 + 
liûn£


281 + 
‹¡edBy


284 + 
‹¡D©e
 + "</td>\n" + "</tr></TABLE>");

285 
	}
}

	@spec/reporter/ReportProps.java

10 
·ckage
 
	g¥ec
.
	g»pÜ‹r
;

12 
impÜt
 
	gjava
.
	gio
.*;

13 
impÜt
 
	gjava
.
	gut
.
	gPrİ”t›s
;

15 
public
 cÏs 
	cR•ÜtPrİs
 
ex‹nds
 
	mPrİ”t›s
 {

19 
´iv©e
 
fš®
 
	m£rŸlV”siÚUID
 = 1L;

22 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

31 
public
 
SŒšg
 
	$g‘
(
SŒšg
 
key
) {

32  
su³r
.
	`g‘Prİ”ty
(
key
);

35 
public
 
SŒšg
 
	$g‘
(
SŒšg
 
key
, SŒšg 
def
) {

36 
SŒšg
 
s
 = 
su³r
.
	`g‘Prİ”ty
(
key
);

37 ià(
s
 =ğ
nuÎ
)

38  
def
;

39  
s
;

40 
	}
}

42 
public
 
	$g‘DoubË
(
Objeù
 
key
) {

43  
	`g‘DoubË
(
key
, 0);

44 
	}
}

46 
public
 
	$g‘DoubË
(
Objeù
 
key
, 
def
) {

47 
Œy
 {

48 
SŒšg
 
s
 = (SŒšgè
su³r
.
	`g‘
(
key
);

49 ià(
s
 !ğ
nuÎ
)

50  
DoubË
.
	`v®ueOf
(
s
).
	`doubËV®ue
();

52 
	`ÿtch
 (
Exû±iÚ
 
e
) {

54  
def
;

55 
	}
}

57 
public
 
	$g‘IÁ
(
Objeù
 
key
) {

58  
	`g‘IÁ
(
key
, 0);

59 
	}
}

61 
public
 
	$g‘IÁ
(
Objeù
 
key
, 
def
) {

62 
Œy
 {

63 
SŒšg
 
s
 = (SŒšgè
su³r
.
	`g‘
(
key
);

64 ià(
s
 !ğ
nuÎ
)

65  
IÁeg”
.
	`·r£IÁ
(
s
.
	`Œim
());

67 
	`ÿtch
 (
Exû±iÚ
 
e
) {

69  
def
;

70 
	}
}

72 
public
 
	$g‘LÚg
(
Objeù
 
key
) {

73  
	`g‘LÚg
(
key
, 0);

74 
	}
}

76 
public
 
	$g‘LÚg
(
Objeù
 
key
, 
def
) {

77 
Œy
 {

78 
SŒšg
 
s
 = (SŒšgè
su³r
.
	`g‘
(
key
);

79 ià(
s
 !ğ
nuÎ
)

80  
LÚg
.
	`·r£LÚg
(
s
);

82 
	`ÿtch
 (
Exû±iÚ
 
e
) {

84  
def
;

85 
	}
}

87 
public
 
SŒšg
 
	$g‘SŒšg
(
Objeù
 
key
) {

88  (
SŒšg
è
su³r
.
	`g‘
(
key
);

89 
	}
}

91 
public
 
	$lßd
(
SŒšg
 
Çme
è
throws
 
IOExû±iÚ
 {

92 
	`lßd
(
Ãw
 
	`FeR—d”
(
Çme
));

93 
	}
}

95 
public
 
	$lßd
(
R—d”
 
»ad¡»am
è
throws
 
IOExû±iÚ
 {

96 
Bufã»dR—d”
 
š
 = 
Ãw
 
	`Bufã»dR—d”
(
»ad¡»am
);

97 
SŒšg
 
lše
;

98 (
lše
 = 
š
.
	`»adLše
()è!ğ
nuÎ
) {

99 ià(
lše
.
	`¡¬tsW™h
("#"))

101 
i
 = 
lše
.
	`šdexOf
('=');

102 ià(
i
 < 0)

104 
SŒšg
 
key
 = 
lše
.
	`sub¡ršg
(0, 
i
);

105 
SŒšg
 
v®ue
 = 
lše
.
	`sub¡ršg
(
i
 + 1);

106 
	`put
(
key
, 
v®ue
);

108 
	}
}

	@spec/reporter/Reporter.java

10 
·ckage
 
	g¥ec
.
	g»pÜ‹r
;

12 
impÜt
 
	gjava
.
	gio
.
	gFe
;

14 
public
 cÏs 
	cR•Ü‹r
 {

16 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

31 
´iv©e
 
boŞ—n
 
	mİ
 = 
çl£
;

33 
´iv©e
 
boŞ—n
 
	mİ‹
 = 
Œue
;

35 
´iv©e
 
boŞ—n
 
	mİth
 = 
çl£
;

37 
´iv©e
 
boŞ—n
 
	mİts
 = 
çl£
;

39 
´iv©e
 
SŒšg
 
	mİ
;

41 
´iv©e
 
SŒšg
 
	mİŠ
;

43 
´iv©e
 
SŒšg
 
	mİto
;

45 
´iv©e
 
SŒšg
 
	mİŒ
;

47 
´iv©e
 
SŒšg
 
	mİtc
;

49 
´iv©e
 
boŞ—n
 
	mİtv
 = 
çl£
;

51 
public
 
	$maš
(
SŒšg
[] 
¬gs
) {

52 
SŒšg
 
Şd´İ
 = 
Sy¡em
.
	`£tPrİ”ty
("java.awt.headless", "true");

53 ià(!
	`g‘O±
(
¬gs
))

55 ià(
İ
) {

56 
TextiR•Üt
 
r
 = 
Ãw
 
	`TextiR•Üt
(
İŠ
, 
İŒ
, 
İts
);

57 ià(
İto
 =ğ
nuÎ
)

58 
r
.
	`´št
(
Sy¡em
.
out
);

60 
r
.
	`´št
(
İto
);

63 
SŒšg
 
ouut_dœeùÜy
 = ".";

64 ià(
İto
 =ğ
nuÎ
)

65 
ouut_dœeùÜy
 = ".";

67 
ouut_dœeùÜy
 = 
Ãw
 
	`Fe
(
İto
).
	`g‘P¬’t
();

68 ià(
ouut_dœeùÜy
 =ğ
nuÎ
)

69 
ouut_dœeùÜy
 = ".";

70 
R•Üt
 
r
 = 
Ãw
 
	`R•Üt
(
İ‹
, 
İts
, 
İŠ
, 
İŒ
, 
İtv
, 
İtc
, 
İ
,

71 
İth
, 
ouut_dœeùÜy
);

72 ià(
İto
 =ğ
nuÎ
)

73 
r
.
	`´št
(
Sy¡em
.
out
);

75 
r
.
	`´št
(
İto
);

76 
Sy¡em
.
out
.
	`´šn
(
r
.
	`mes§ges
());

80 
´iv©e
 
boŞ—n
 
	$g‘O±
(
SŒšg
[] 
¬gs
) {

81 
Œy
 {

82 
i
 = 0; i < 
¬gs
.
Ëngth
; i++)

83 ià(
¬gs
[
i
].
	`equ®s
("-a"))

84 
İ
 = 
Œue
;

85 ià(
¬gs
[
i
].
	`equ®s
("-e"))

86 
İ‹
 = 
çl£
;

87 ià(
¬gs
[
i
].
	`equ®s
("-h"))

88 
İth
 = 
Œue
;

89 ià(
¬gs
[
i
].
	`equ®s
("-s"))

90 
İts
 = 
Œue
;

91 ià(
¬gs
[
i
].
	`equ®s
("-l"))

92 
İ
 = 
¬gs
[++
i
];

93 ià(
¬gs
[
i
].
	`equ®s
("-n"))

94 
İŠ
 = 
¬gs
[++
i
];

95 ià(
¬gs
[
i
].
	`equ®s
("-o"))

96 
İto
 = 
¬gs
[++
i
];

97 ià(
¬gs
[
i
].
	`equ®s
("-r"))

98 
İŒ
 = 
¬gs
[++
i
];

99 ià(
¬gs
[
i
].
	`equ®s
("-c"))

100 
İtc
 = 
¬gs
[++
i
];

101 ià(
¬gs
[
i
].
	`equ®s
("-v"))

102 
İtv
 = 
Œue
;

104 
throw
 
Ãw
 
	`A¼ayIndexOutOfBoundsExû±iÚ
();

106 
	`ÿtch
 (
A¼ayIndexOutOfBoundsExû±iÚ
 
e
) {

107 
	`u§ge
();

108  
çl£
;

110 ià(
İŒ
 !ğ
nuÎ
)

111  
Œue
;

113 
	`u§ge
();

114  
çl£
;

115 
	}
}

117 
´iv©e
 
	$u§ge
() {

118 
Sy¡em
.
out


119 .
	`´šn
("Usage: java spec.reporter.Reporter [options]\n"

138 
	}
}

	@spec/reporter/Result.java

10 
·ckage
 
	g¥ec
.
	g»pÜ‹r
;

12 
impÜt
 
	gjava
.
	g‹xt
.*;

13 
impÜt
 
	gjava
.
	gut
.
	gVeùÜ
;

14 
impÜt
 
	g¥ec
.
	g»pÜ‹r
.
	gM‘rics
;

15 
impÜt
 
	g¥ec
.
	g»pÜ‹r
.
	gRun
;

17 
public
 cÏs 
	cResuÉ
 {

19 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

31 
´iv©e
 
	mmaxB¬Width
 = 0;

33 
´iv©e
 
Decim®FÜm©
 
	mmemFÜm©
 = 
Ãw
 DecimalFormat("##.0");

38 
´iv©e
 
	mbe¡
 = -1;

40 
´iv©e
 
	mdig™s
 = 3;

42 
public
 
SŒšgBufãr
 
	mšv®idR—sÚ
 = 
Ãw
 StringBuffer();

44 
public
 
SŒšg
 
	mÇme
;

47 
public
 
	m»ã»nûTime
;

49 
public
 
	mRun
[] 
	mrun
;

51 
public
 
boŞ—n
 
	mv®id
 = 
Œue
;

53 
public
 
	mweight
;

55 
´iv©e
 
	mwÜ¡
 = -1;

57 
´iv©e
 
	mscÜe
;

59 
´iv©e
 
	mw¬ehou£s
;

61 
public
 
	mh—psize
;

63 
public
 
	mh—pu£d
;

65 
public
 
	mmš_th»ad_Œª§ùiÚs
;

67 
public
 
	mmax_th»ad_Œª§ùiÚs
;

69 
public
 
	m–­£d
;

71 
public
 
	mm—s_št
;

73 
public
 
	mex³ùed_³ak
;

75 
public
 
	mjvm_š¡ªûs
;

77 
public
 
	m¿mp_up_št
;

79 
public
 
	m¡¬t_¿mpup_time_mli£cÚds
;

81 
public
 
	m’d_¿mpdown_time_mli£cÚds
;

83 
public
 
	m¡¬t_time_mli£cÚds
;

85 
public
 
	m’d_time_mli£cÚds
;

90 
public
 
	$ResuÉ
(
SŒšg
 
Çme
, 
R•ÜtPrİs
 
´İs
) {

91 
this
.
Çme
 =‚ame;

92 
weight
 = 1;

93 
»ã»nûTime
 = 
´İs
.
	`g‘DoubË
("cÚfig." + 
Çme
 + ".ref");

94 ià(
maxB¬Width
 <= 0)

95 
maxB¬Width
 = 
´İs
.
	`g‘DoubË
("config.report.maxBarWidth");

96 
VeùÜ
<
Run
> 
rv
 = 
Ãw
 Vector<Run>(8);

97 
scÜe
 = 
´İs
.
	`g‘DoubË
("»suÉ." + 
Çme
 + ".company.score");

98 
w¬ehou£s
 = 
´İs
.
	`g‘IÁ
("»suÉ." + 
Çme
 + ".warehouses");

99 
–­£d
 = 
´İs
.
	`g‘DoubË
("»suÉ." + 
Çme
 + ".elapsed_milliseconds");

100 
m—s_št
 = 
´İs
.
	`g‘DoubË
("input.measurement_seconds");

101 
jvm_š¡ªûs
 = 
´İs
.
	`g‘IÁ
("input.jvm_instances");

102 
ex³ùed_³ak
 = 
´İs
.
	`g‘DoubË
("input.expected_peak_warehouse");

103 
¿mp_up_št
 = 
´İs
.
	`g‘DoubË
("input.ramp_up_seconds");

104 
h—psize
 = 
´İs
.
	`g‘DoubË
("»suÉ." + 
Çme
 + ".company.heapsize");

105 
h—pu£d
 = 
´İs
.
	`g‘DoubË
("»suÉ." + 
Çme
 + ".company.heapused");

106 ià(
jvm_š¡ªûs
 > 1) {

107 
¡¬t_¿mpup_time_mli£cÚds
 = 
´İs
.
	`g‘LÚg
("»suÉ." + 
Çme


109 
’d_¿mpdown_time_mli£cÚds
 = 
´İs
.
	`g‘LÚg
("»suÉ." + 
Çme


111 
¡¬t_time_mli£cÚds
 = 
´İs
.
	`g‘LÚg
("»suÉ." + 
Çme


113 
’d_time_mli£cÚds
 = 
´İs
.
	`g‘LÚg
("»suÉ." + 
Çme


116 
mš_th»ad_Œª§ùiÚs
 = 
´İs
.
	`g‘DoubË
("»suÉ." + 
Çme


118 
max_th»ad_Œª§ùiÚs
 = 
´İs
.
	`g‘DoubË
("»suÉ." + 
Çme


120 
Run
 
r
;

121 
i
 = 0; i < 6; i++) {

122 
r
 = 
Ãw
 
	`Run
(
´İs
, 
i
, 17.0, 
this
);

123 
rv
.
	`addEËm’t
(
r
);

125 
be¡
 = 2;

126 
wÜ¡
 = 1;

127 
run
 = 
Ãw
 
Run
[
rv
.
	`size
()];

128 ià(
run
.
Ëngth
 == 0) {

129 
v®id
 = 
çl£
;

130 
šv®idR—sÚ
.
	`­³nd
(
Çme
 + " was‚ot„un\n");

133 
i
 = 0; i < 
run
.
Ëngth
; i++)

134 
run
[
i
] = (
Run
è
rv
.
	`–em’tAt
(i);

144 
public
 
	$scÜe
() {

145  
scÜe
;

146 
	}
}

148 
public
 
	$w¬ehou£s
() {

149  
w¬ehou£s
;

150 
	}
}

152 
public
 
	$–­£d
() {

153  
–­£d
;

154 
	}
}

156 
public
 
	$m—s_št
() {

157  
m—s_št
;

158 
	}
}

160 
public
 
	$¿mp_up_št
() {

161  
¿mp_up_št
;

162 
	}
}

164 
public
 
	$ex³ùed_³ak
() {

165  
ex³ùed_³ak
;

166 
	}
}

168 
public
 
	$¿mpup_mlis
() {

169  
¡¬t_¿mpup_time_mli£cÚds
;

170 
	}
}

172 
public
 
	$¿mpdown_mlis
() {

173  
’d_¿mpdown_time_mli£cÚds
;

174 
	}
}

176 
public
 
	$¡¬t_mlis
() {

177  
¡¬t_time_mli£cÚds
;

178 
	}
}

180 
public
 
	$’d_mlis
() {

181  
’d_time_mli£cÚds
;

182 
	}
}

184 
public
 
SŒšg
 
	$toD‘aRows
() {

185 
SŒšgBufãr
 
buf
 = 
Ãw
 
	`SŒšgBufãr
("<TR>\n");

186 ià(
run
.
Ëngth
 == 0) {

187 
buf
.
	`­³nd
(" <TD>" + 
Çme
 + "</TD>\n");

188 
buf
.
	`­³nd
(" <TD COLSPAN=8><I>not„un</I></TD>\n");

189 
buf
.
	`­³nd
("</TABLE>");

194 
buf
.
	`­³nd
(" <TD VALIGN=TOP ALIGN=RIGHT ROWSPAN=" + 
run
.
Ëngth


195 + ">" + ((è
w¬ehou£s
) + "</TD>\n");

196 
buf
.
	`­³nd
(" <TD VALIGN=TOP ALIGN=RIGHT ROWSPAN=" + 
run
.
Ëngth


197 + ">" + 
M‘rics
.
	`fÜm©
(
scÜe
) + "</TD>\n");

198 
buf
.
	`­³nd
(" <TD VALIGN=TOP ALIGN=RIGHT ROWSPAN=" + 
run
.
Ëngth


199 + ">" + 
M‘rics
.
	`fÜm©
(
h—psize
) + "</TD>\n");

200 
buf
.
	`­³nd
(" <TD VALIGN=TOP ALIGN=RIGHT ROWSPAN=" + 
run
.
Ëngth


201 + ">" + 
M‘rics
.
	`fÜm©
(
h—pu£d
) + "</TD>\n");

202 
buf


203 .
	`­³nd
(" <TD VALIGN=TOP ALIGN=CENTER ROWSPAN="

204 + 
run
.
Ëngth


206 + 
M‘rics


207 .
	`fÜm©
((100 * (
max_th»ad_Œª§ùiÚs
 - 
mš_th»ad_Œª§ùiÚs
) / max_thread_transactions))

209 
buf


210 .
	`­³nd
(" <TD VALIGN=TOP ALIGN=RIGHT ROWSPAN="

211 + 
run
.
Ëngth


213 + 
M‘rics


214 .
	`fÜm©
(0.1 * ((
–­£d
 - 1000 * 
m—s_št
) / meas_int))

216 
buf
.
	`­³nd
(
	`d‘aRow
(0));

217 
buf
.
	`­³nd
("</TR>\n");

218 
i
 = 1; i < 
run
.
Ëngth
; i++) {

219 
buf
.
	`­³nd
("<TR>\n");

220 
buf
.
	`­³nd
(
	`d‘aRow
(
i
));

221 
buf
.
	`­³nd
("</TR>\n");

225  
buf
.
	`toSŒšg
();

226 
	}
}

228 
´iv©e
 
SŒšg
 
	$d‘aRow
(
n
) {

229 
SŒšgBufãr
 
buf
 = 
Ãw
 
	`SŒšgBufãr
();

230 
buf
.
	`­³nd
(" <TD ALIGN=RIGHT>" + 
Run
.
Œª§ùiÚ
[
n
] + "</TD>\n");

231 
buf
.
	`­³nd
(" <TD ALIGN=RIGHT>" + (
run
[
n
].
couÁ
) + "</TD>\n");

232 
buf
.
	`­³nd
(" <TD ALIGN=RIGHT>" + 
M‘rics
.
	`fÜm©
(
run
[
n
].
tÙ®time
)

234 
buf
.
	`­³nd
(" <TD ALIGN=RIGHT>" + 
M‘rics
.
	`fÜm©
(
run
[
n
].
maximumtime
)

236  
buf
.
	`toSŒšg
();

237 
	}
}

239 
public
 
SŒšg
 
	$toRow
(
whAtP—k
) {

240 
SŒšgBufãr
 
buf
 = 
Ãw
 
	`SŒšgBufãr
("<TR>\n");

242 
buf
.
	`­³nd
(" <TD ALIGN=RIGHT>" + ((è
	`w¬ehou£s
()) + "</TD>\n");

243 
buf
.
	`­³nd
(" <TD ALIGN=RIGHT>" + 
M‘rics
.
	`fÜm©
(
	`scÜe
()) + "</TD>\n");

244 ià((
whAtP—k
 <ğ(è
	`w¬ehou£s
())

245 && ((è
	`w¬ehou£s
(è<ğ2 * 
whAtP—k
)) {

246 
buf
.
	`­³nd
(" <TD ALIGN=RIGHT> * </TD>\n");

249 
buf
.
	`­³nd
(" <TD ALIGN=RIGHT> </TD>\n");

251 
buf
.
	`­³nd
("</TR>\n");

252  
buf
.
	`toSŒšg
();

253 
	}
}

255 
public
 
SŒšg
 
	$toFœ¡Row
(
whAtP—k
) {

256 
SŒšgBufãr
 
buf
 = 
Ãw
 
	`SŒšgBufãr
("<TR>\n");

258 
buf
.
	`­³nd
(" <TD ALIGN=RIGHT>" + ((è
	`w¬ehou£s
()) + "</TD>\n");

259 
buf
.
	`­³nd
(" <TD ALIGN=RIGHT>" + 
M‘rics
.
	`fÜm©
(
	`scÜe
()) + "</TD>\n");

260 ià((
whAtP—k
 <ğ(è
	`w¬ehou£s
())

261 && ((è
	`w¬ehou£s
(è<ğ2 * 
whAtP—k
)) {

262 
buf
.
	`­³nd
(" <TD ALIGN=RIGHT> * </TD>\n");

265 
buf
.
	`­³nd
(" <TD ALIGN=RIGHT> &nbsp </TD>\n");

267 
buf
.
	`­³nd
(" <TD ALIGN=RIGHT> &nbsp </TD>\n");

268 
buf
.
	`­³nd
(" <TD ALIGN=RIGHT> &nbsp </TD>\n");

269 
buf
.
	`­³nd
("</TR>\n");

270  
buf
.
	`toSŒšg
();

271 
	}
}

273 
public
 
SŒšg
 
	$shiáed_toRow
(
whAtP—k
) {

274 
SŒšgBufãr
 
buf
 = 
Ãw
 
	`SŒšgBufãr
("<TR>\n");

276 
buf
.
	`­³nd
(" <TD ALIGN=RIGHT>" + ((è
	`w¬ehou£s
()) + "</TD>\n");

277 
buf
.
	`­³nd
(" <TD ALIGN=RIGHT>&nbsp</TD>\n");

278 
buf
.
	`­³nd
(" <TD ALIGN=RIGHT>&nbsp</TD>\n");

279 
buf
.
	`­³nd
(" <TD ALIGN=RIGHT>" + 
M‘rics
.
	`fÜm©
(
	`scÜe
()) + "</TD>\n");

280 ià((
whAtP—k
 <ğ(è
	`w¬ehou£s
())

281 && ((è
	`w¬ehou£s
(è<ğ2 * 
whAtP—k
)) {

282 
buf
.
	`­³nd
(" <TD ALIGN=RIGHT> * </TD>\n");

285 
buf
.
	`­³nd
(" <TD ALIGN=RIGHT> &nbsp </TD>\n");

287 
buf
.
	`­³nd
("</TR>\n");

288  
buf
.
	`toSŒšg
();

289 
	}
}

293 
public
 
SŒšg
 
	$TwoRow
(
ResuÉ
 
»suÉ_2
, 
M‘rics
 
m‘rics_2
, 
whAtP—k
,

294 
whAtP—k2
) {

295 
SŒšgBufãr
 
buf
 = 
Ãw
 
	`SŒšgBufãr
("<TR>\n");

296 
buf
.
	`­³nd
(" <TD ALIGN=RIGHT>" + ((è
	`w¬ehou£s
()) + "</TD>\n");

297 
buf
.
	`­³nd
(" <TD ALIGN=RIGHT>" + 
M‘rics
.
	`fÜm©
(
	`scÜe
()) + "</TD>\n");

298 ià((
whAtP—k
 <ğ(è
	`w¬ehou£s
())

299 && ((è
	`w¬ehou£s
(è<ğ2 * 
whAtP—k
)) {

300 
buf
.
	`­³nd
(" <TD ALIGN=RIGHT> * </TD>\n");

303 
buf
.
	`­³nd
(" <TD ALIGN=RIGHT> &nbsp </TD>\n");

305 
buf
.
	`­³nd
(" <TD ALIGN=RIGHT>" +

308 
M‘rics
.
	`fÜm©
(
m‘rics_2
.
	`scÜe_©_wh
((è
	`w¬ehou£s
()))

310 ià((
whAtP—k2
 <ğ
	`w¬ehou£s
()) && (warehouses() <= 2 * whAtPeak2)) {

311 
buf
.
	`­³nd
(" <TD ALIGN=RIGHT> * </TD>\n");

314 
buf
.
	`­³nd
(" <TD ALIGN=RIGHT> &nbsp </TD>\n");

316 
buf
.
	`­³nd
("</TR>\n");

317  
buf
.
	`toSŒšg
();

318 
	}
}

	@spec/reporter/Run.java

10 
·ckage
 
	g¥ec
.
	g»pÜ‹r
;

12 
impÜt
 
	g¥ec
.
	g»pÜ‹r
.
	gResuÉ
;

14 
public
 cÏs 
	cRun
 {

16 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

28 
´iv©e
 
fš®
 
	mMB
 = 1024 * 1024;

33 
public
 
	mcouÁ
;

35 
public
 
	mtÙ®time
;

37 
public
 
	mmšimumtime
;

39 
public
 
	mmaximumtime
;

41 
public
 
	mav”ag‘ime
;

43 
public
 
	mu£dMemÜyEnd
;

45 
public
 
	mu£dMemÜyS¹
;

47 
´iv©e
 
R•ÜtPrİs
 
	m´İs
;

49 
public
 
ResuÉ
 
	m»suÉ
;

51 
public
 
	mtime
;

53 
public
 
	mtÙ®MemÜyEnd
;

55 
public
 
	mtÙ®MemÜyS¹
;

57 
public
 
SŒšg
 
	mŒª§ùiÚ
[] = {

62 
public
 
	$Run
(
R•ÜtPrİs
 
´İs
, 
runNumb”
, 
time
, 
ResuÉ
 
»suÉ
) {

63 
this
.
´İs
 =…rops;

64 
this
.
time
 =ime;

65 
this
.
»suÉ
 =„esult;

66 
SŒšg
 
´efix
 = "»suÉ." + 
»suÉ
.
Çme
 + ".company."

67 + 
Œª§ùiÚ
[
runNumb”
];

68 
couÁ
 = 
´İs
.
	`g‘IÁ
(
´efix
 + ".count");

69 
tÙ®time
 = 
´İs
.
	`g‘DoubË
(
´efix
 + ".totaltime");

70 
mšimumtime
 = 
´İs
.
	`g‘DoubË
(
´efix
 + ".minimumtime");

71 
maximumtime
 = 
´İs
.
	`g‘DoubË
(
´efix
 + ".maximumtime");

72 
av”ag‘ime
 = 
´İs
.
	`g‘DoubË
(
´efix
 + ".averagetime");

73 
	}
}

75 
public
 
	$¿tio
() {

76 
»f
 = 
»suÉ
.
»ã»nûTime
;

77 ià(
time
 <= 0)

80  
»f
 / 
time
;

81 
	}
}

	@spec/reporter/Table.java

10 
·ckage
 
	g¥ec
.
	g»pÜ‹r
;

12 
impÜt
 
	gjava
.
	gio
.*;

13 
impÜt
 
	gjava
.
	gut
.
	gVeùÜ
;

15 
public
 cÏs 
	cTabË
 {

17 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

29 
´iv©e
 
SŒšg
 
	mbËP»fix
 = "<TABLE WIDTH=\"100%\" BORDER=1 CELLSPACING=2 CELLPADDING=0>"

35 
´iv©e
 
boŞ—n
 
	mä“
;

43 
´iv©e
 
SŒšg
 
	mh—dšg
;

45 
´iv©e
 
	mVeùÜ
<
	mSŒšg
> 
	m™ems
;

47 
´iv©e
 
R•ÜtPrİs
 
	m´İs
;

49 
´iv©e
 
R•ÜtPrİs
 
	mt™Ës
;

54 
	$TabË
(
SŒšg
 
h
, 
Bufã»dR—d”
 
š
, 
R•ÜtPrİs
 
´İs
, R•ÜtPrİ 
t™Ës
,

55 
boŞ—n
 
ä“
) {

56 
h—dšg
 = 
h
;

57 
this
.
´İs
 =…rops;

58 
this
.
t™Ës
 =itles;

59 
this
.
ä“
 = free;

60 
™ems
 = 
Ãw
 
VeùÜ
<
SŒšg
>();

61 
SŒšg
 
lše
;

62 
Œy
 {

63 (
lše
 = 
š
.
	`»adLše
()è!ğ
nuÎ
) {

64 ià(
lše
.
	`equ®s
(""))

66 
™ems
.
	`addEËm’t
(
lše
);

69 
	`ÿtch
 (
IOExû±iÚ
 
e
) {

73 
´iv©e
 
SŒšg
 
	$ex·ndN
(
SŒšg
 
s
) {

74 
SŒšgBufãr
 
sb
 = 
Ãw
 
	`SŒšgBufãr
();

75 [] 
nb
 = 
Ãw
 [
s
.
	`Ëngth
()];

76 
s
.
	`g‘Ch¬s
(0, 
nb
.
Ëngth
,‚b, 0);

77 
boŞ—n
 
sub
 = 
çl£
;

78 
i
 = 0; i < 
nb
.
Ëngth
 - 1; i++)

79 ià(
nb
[
i
] == '\\' &&‚b[i + 1] == 'n') {

80 
sb
.
	`­³nd
('\n');

81 
i
++;

82 
sub
 = 
Œue
;

85 
sb
.
	`­³nd
(
nb
[
i
]);

86 
sub
 = 
çl£
;

88 ià(!
sub
)

89 
sb
.
	`­³nd
(
nb
[nb.
Ëngth
 - 1]);

90  
sb
.
	`toSŒšg
();

91 
	}
}

93 
´iv©e
 
SŒšg
 
	$š£¹B»akAá”CŞÚs
(
SŒšg
 
s
) {

94 
SŒšgBufãr
 
sb
 = 
Ãw
 
	`SŒšgBufãr
();

95 [] 
c
 = 
Ãw
 [
s
.
	`Ëngth
()];

96 
s
.
	`g‘Ch¬s
(0, 
c
.
Ëngth
, c, 0);

97 
i
 = 0; i < 
c
.
Ëngth
; i++) {

98 
sb
.
	`­³nd
(
c
[
i
]);

99 ià(
i
 > 1 && (
c
[i] == ':' || c[i] == ';')) {

100 ià(
c
[
i
 - 2] != ':' && c[i - 2] != ';') {

101 
sb
.
	`­³nd
("<BR>");

105  
sb
.
	`toSŒšg
();

106 
	}
}

108 
public
 
SŒšg
 
	$toSŒšg
() {

109 
SŒšgBufãr
 
buf
 = 
Ãw
 
	`SŒšgBufãr
(
bËP»fix
);

110 
buf
.
	`­³nd
(
h—dšg
);

111 
buf
.
	`­³nd
("</TH></TR>\n");

112 
i
 = 0; i < 
™ems
.
	`size
(); i++) {

113 
SŒšg
 
Çme
 = (SŒšgè
™ems
.
	`–em’tAt
(
i
);

114 
SŒšg
 
Ïb–
 = 
t™Ës
.
	`g‘
(
Çme
);

115 ià(
Ïb–
 =ğ
nuÎ
)

116 
Ïb–
 = 
Çme
 + "=null";

117 
SŒšg
 
v®
 = 
´İs
.
	`g‘
(
Çme
);

118 ià(
v®
 =ğ
nuÎ
 || v®.
	`equ®s
("")) {

119 
v®
 = "&nbsp;";

122 ià(
Çme
.
	`’dsW™h
(".path")) {

123 
v®
 = 
	`š£¹B»akAá”CŞÚs
(val);

125 ià(
v®
.
	`¡¬tsW™h
("http://")) {

126 
v®
 = "<a href=\"" + val + "\">" + val + "</a>";

128 ià(
ä“
) {

129 
buf
.
	`­³nd
("<TR><TD>");

130 
buf
.
	`­³nd
(
	`ex·ndN
(
v®
));

133 
buf
.
	`­³nd
("<TR><TD><B>");

134 
buf
.
	`­³nd
(
Ïb–
);

135 
buf
.
	`­³nd
("</B></TD>\n<TD>");

136 
buf
.
	`­³nd
(
v®
);

138 
buf
.
	`­³nd
("</TD></TR>\n");

140 
buf
.
	`­³nd
("</TABLE>\n");

141  
buf
.
	`toSŒšg
();

142 
	}
}

	@spec/reporter/TableGroup.java

11 
·ckage
 
	g¥ec
.
	g»pÜ‹r
;

13 
impÜt
 
	gjava
.
	gio
.*;

14 
impÜt
 
	gjava
.
	gut
.
	gSŒšgTok’iz”
;

15 
impÜt
 
	gjava
.
	gut
.
	gloggšg
.
	gLev–
;

16 
impÜt
 
	g¥ec
.
	gjbb
.
	gJBBut
;

18 
public
 cÏs 
	cTabËGroup
 {

20 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

32 
public
 
fš®
 
	mMAXGROUPS
 = 10;

34 
public
 
fš®
 
	mMAXROWS
 = 10;

36 
public
 
fš®
 
	mMAXCOLUMNS
 = 3;

38 
	mTabË
[][][] 
	mbËs
 = 
Ãw
 
TabË
[
MAXGROUPS
][
MAXCOLUMNS
][
MAXROWS
];

40 [][] 
	mrows
 = 
Ãw
 [
MAXGROUPS
][
MAXCOLUMNS
];

42 
	mboŞ—n
[][] 
	mªyEÁry
 = 
Ãw
 
boŞ—n
[
MAXGROUPS
][
MAXCOLUMNS
];

44 
´iv©e
 
R•ÜtPrİs
 
	m´İs
;

46 
´iv©e
 
SŒšg
 
	mbËBegš
 = "<TABLE WIDTH=\"100%\" BORDER=0 CELLSPACING=0 CELLPADDING=2>\n";

48 
´iv©e
 
SŒšg
 
	mfœ¡CŞumn
 = "<TR><TD WIDTH=\"50%\" VALIGN=\"TOP\">\n";

50 
´iv©e
 
SŒšg
 
	mÙh”CŞumn
 = "</TD><TD WIDTH=\"50%\" VALIGN=\"TOP\">\n";

52 
´iv©e
 
SŒšg
 
	mbËEnd
 = "</TD></TR></TABLE>";

60 
	$TabËGroup
(
Bufã»dR—d”
 
š
, 
R•ÜtPrİs
 
´İs
, R•ÜtPrİ 
t™Ës
)

61 
throws
 
IÎeg®Argum’tExû±iÚ
 {

62 
this
.
´İs
 =…rops;

63 
SŒšg
 
lše
;

64 
SŒšg
 
bËT™Ë
 = "Untitled";

65 
Œy
 {

66 (
lše
 = 
š
.
	`»adLše
()è!ğ
nuÎ
) {

67 ià(
lše
.
	`¡¬tsW™h
("Title")) {

68 
bËT™Ë
 = 
lše
.
	`sub¡ršg
(5).
	`Œim
();

70 ià(
lše
.
	`¡¬tsW™h
("Table")) {

71 
SŒšgTok’iz”
 
tok’
 = 
Ãw
 
	`SŒšgTok’iz”
(
lše


72 .
	`sub¡ršg
(5));

73 
group
 = 
IÁeg”
.
	`·r£IÁ
(
tok’
.
	`ÃxtTok’
());

74 
cŞumn
 = 
IÁeg”
.
	`·r£IÁ
(
tok’
.
	`ÃxtTok’
());

75 
boŞ—n
 
ä“FÜm
 = (
IÁeg”
.
	`·r£IÁ
(
tok’
.
	`ÃxtTok’
()) == 1);

76 ià(
group
 < 0 || grou°>ğ
MAXGROUPS
 || 
cŞumn
 < 0

77 || 
cŞumn
 >ğ
MAXCOLUMNS
) {

78 
throw
 
Ãw
 
	`IÎeg®Argum’tExû±iÚ
(
bËT™Ë
);

80 
row
 = 
rows
[
group
][
cŞumn
]++;

81 ià(
row
 < 0 ||„ow >ğ
MAXROWS
) {

82 
throw
 
Ãw
 
	`IÎeg®Argum’tExû±iÚ
(
bËT™Ë
);

84 
bËs
[
group
][
cŞumn
][
row
] = 
Ãw
 
	`TabË
(
bËT™Ë
, 
š
,

85 
´İs
, 
t™Ës
, 
ä“FÜm
);

86 
ªyEÁry
[
group
][
cŞumn
] = 
Œue
;

90 
	`ÿtch
 (
IOExû±iÚ
 
e
) {

91 
JBBut
.
	`g‘Log
().
	`log
(
Lev–
.
WARNING
, "E¼Ü: " + 
e
,ƒ);

95 
public
 
SŒšg
 
	$toSŒšg
() {

96 
SŒšgBufãr
 
buf
 = 
Ãw
 
	`SŒšgBufãr
(
bËBegš
);

97 
TabË
 
t
;

98 
ig
 = 0; ig < 
MAXGROUPS
; ig++) {

99 ià(!
ªyEÁry
[
ig
][0])

101 
buf
.
	`­³nd
(
fœ¡CŞumn
);

102 
œ
 = 0; i¸< 
MAXROWS
; ir++) {

103 
t
 = 
bËs
[
ig
][0][
œ
];

104 ià(
t
 !ğ
nuÎ
)

105 
buf
.
	`­³nd
(
t
.
	`toSŒšg
());

107 
ic
 = 1; iø< 
MAXCOLUMNS
; ic++) {

108 ià(!
ªyEÁry
[
ig
][
ic
])

110 
buf
.
	`­³nd
(
Ùh”CŞumn
);

111 
œ
 = 0; i¸< 
MAXROWS
; ir++) {

112 
t
 = 
bËs
[
ig
][
ic
][
œ
];

113 ià(
t
 !ğ
nuÎ
)

114 
buf
.
	`­³nd
(
t
.
	`toSŒšg
());

118 
buf
.
	`­³nd
(
bËEnd
);

119  
buf
.
	`toSŒšg
();

120 
	}
}

	@spec/reporter/TableGroupCompare.java

11 
·ckage
 
	g¥ec
.
	g»pÜ‹r
;

13 
impÜt
 
	gjava
.
	gio
.*;

14 
impÜt
 
	gjava
.
	gut
.
	gSŒšgTok’iz”
;

15 
impÜt
 
	gjava
.
	gut
.
	gloggšg
.
	gLev–
;

16 
impÜt
 
	g¥ec
.
	gjbb
.
	gJBBut
;

18 
public
 cÏs 
	cTabËGroupCom·»
 {

20 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

32 
public
 
fš®
 
	mMAXGROUPS
 = 10;

34 
public
 
fš®
 
	mMAXROWS
 = 10;

36 
public
 
fš®
 
	mMAXCOLUMNS
 = 3;

38 
	mTabË
[][][] 
	mbËs
 = 
Ãw
 
TabË
[
MAXGROUPS
][
MAXCOLUMNS
][
MAXROWS
];

40 [][] 
	mrows
 = 
Ãw
 [
MAXGROUPS
][
MAXCOLUMNS
];

42 
	mboŞ—n
[][] 
	mªyEÁry
 = 
Ãw
 
boŞ—n
[
MAXGROUPS
][
MAXCOLUMNS
];

44 
´iv©e
 
R•ÜtPrİs
 
	m´İs
;

46 
´iv©e
 
R•ÜtPrİs
 
	m´İs_2
;

50 
´iv©e
 
SŒšg
 
	mbËBegš
 = "<TABLE WIDTH=\"100%\" BORDER=0 CELLSPACING=0 CELLPADDING=2>\n";

54 
´iv©e
 
SŒšg
 
	mfœ¡CŞumn
 = "<TR><TD WIDTH=\"50%\" VALIGN=\"TOP\">\n";

56 
´iv©e
 
SŒšg
 
	mÙh”CŞumn
 =

61 
´iv©e
 
SŒšg
 
	mbËEnd
 = "</TD></TR></TABLE>";

69 
	$TabËGroupCom·»
(
Bufã»dR—d”
 
š
, Bufã»dR—d” 
š_2
,

70 
R•ÜtPrİs
 
´İs
, R•ÜtPrİ 
´İs_2
, R•ÜtPrİ 
t™Ës
)

71 
throws
 
IÎeg®Argum’tExû±iÚ
 {

72 
this
.
´İs
 =…rops;

73 
this
.
´İs_2
 =…rops_2;

74 
SŒšg
 
lše
;

75 
SŒšg
 
bËT™Ë
 = "Untitled";

76 
Œy
 {

77 (
lše
 = 
š
.
	`»adLše
()è!ğ
nuÎ
) {

78 
š_2
.
	`»adLše
();

79 ià(
lše
.
	`¡¬tsW™h
("Title")) {

80 
bËT™Ë
 = 
lše
.
	`sub¡ršg
(5).
	`Œim
();

82 ià(
lše
.
	`¡¬tsW™h
("Table")) {

83 
SŒšgTok’iz”
 
tok’
 = 
Ãw
 
	`SŒšgTok’iz”
(
lše


84 .
	`sub¡ršg
(5));

85 
group
 = 
IÁeg”
.
	`·r£IÁ
(
tok’
.
	`ÃxtTok’
());

86 
cŞumn
 = 
IÁeg”
.
	`·r£IÁ
(
tok’
.
	`ÃxtTok’
());

87 
boŞ—n
 
ä“FÜm
 = (
IÁeg”
.
	`·r£IÁ
(
tok’
.
	`ÃxtTok’
()) == 1);

88 ià(
group
 < 0 || grou°>ğ
MAXGROUPS
 || 
cŞumn
 < 0

89 || 
cŞumn
 >ğ
MAXCOLUMNS
) {

90 
throw
 
Ãw
 
	`IÎeg®Argum’tExû±iÚ
(
bËT™Ë
);

92 
row
 = 
rows
[
group
][
cŞumn
]++;

93 ià(
row
 < 0 ||„ow >ğ
MAXROWS
) {

94 
throw
 
Ãw
 
	`IÎeg®Argum’tExû±iÚ
(
bËT™Ë
);

96 ià(
´İs_2
 !ğ
nuÎ
) {

97 
bËs
[
group
][0][
row
] = 
Ãw
 
	`TabË
(
bËT™Ë
, 
š
,

98 
´İs
, 
t™Ës
, 
ä“FÜm
);

99 
bËs
[
group
][1][
row
] = 
Ãw
 
	`TabË
(
bËT™Ë
, 
š_2
,

100 
´İs_2
, 
t™Ës
, 
ä“FÜm
);

101 
ªyEÁry
[
group
][0] = 
Œue
;

102 
ªyEÁry
[
group
][1] = 
Œue
;

105 
bËs
[
group
][
cŞumn
][
row
] = 
Ãw
 
	`TabË
(
bËT™Ë
, 
š
,

106 
´İs
, 
t™Ës
, 
ä“FÜm
);

107 
ªyEÁry
[
group
][
cŞumn
] = 
Œue
;

112 
	`ÿtch
 (
IOExû±iÚ
 
e
) {

113 
JBBut
.
	`g‘Log
().
	`log
(
Lev–
.
WARNING
, "E¼Ü: " + 
e
,ƒ);

123 
public
 
SŒšg
 
	$toSŒšg
() {

124 
SŒšgBufãr
 
buf
 = 
Ãw
 
	`SŒšgBufãr
(
bËBegš
);

125 
TabË
 
t
;

126 
ig
 = 0; ig < 
MAXGROUPS
; ig++) {

127 ià(!
ªyEÁry
[
ig
][0])

129 
buf
.
	`­³nd
(
fœ¡CŞumn
);

130 
œ
 = 0; i¸< 
MAXROWS
; ir++) {

131 
t
 = 
bËs
[
ig
][0][
œ
];

132 ià(
t
 !ğ
nuÎ
)

133 
buf
.
	`­³nd
(
t
.
	`toSŒšg
());

135 
ic
 = 1; iø< 
MAXCOLUMNS
; ic++) {

136 ià(!
ªyEÁry
[
ig
][
ic
])

138 
buf
.
	`­³nd
(
Ùh”CŞumn
);

139 
œ
 = 0; i¸< 
MAXROWS
; ir++) {

140 
t
 = 
bËs
[
ig
][
ic
][
œ
];

141 ià(
t
 !ğ
nuÎ
)

142 
buf
.
	`­³nd
(
t
.
	`toSŒšg
());

146 
buf
.
	`­³nd
(
bËEnd
);

147  
buf
.
	`toSŒšg
();

148 
	}
}

	@spec/reporter/Template.java

16 
·ckage
 
	g¥ec
.
	g»pÜ‹r
;

18 
public
 cÏs 
	cTem¶©e
 {

20 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

29 
SŒšg
 
	mt
;

31 
public
 
	$Tem¶©e
() {

32 
t
 = "Title Hardware\n" + "Table 0 0 0\n" + "config.hw.vendor\n"

59 
public
 
SŒšg
 
	$g‘Tem¶©eSŒšg
() {

60  
t
;

61 
	}
}

	@spec/reporter/TemplateCompare.java

16 
·ckage
 
	g¥ec
.
	g»pÜ‹r
;

18 
public
 cÏs 
	cTem¶©eCom·»
 {

20 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

29 
SŒšg
 
	mt
;

31 
public
 
	$Tem¶©eCom·»
() {

32 
t
 = "Title Fake\n" + "Table 0 0 0\n" + "\n" + "Title Hardware\n"

59 
public
 
SŒšg
 
	$g‘Tem¶©eSŒšg
() {

60  
t
;

61 
	}
}

	@spec/reporter/TextBlock.java

11 
·ckage
 
	g¥ec
.
	g»pÜ‹r
;

13 
impÜt
 
	gjava
.
	gut
.
	gEnum”©iÚ
;

14 
impÜt
 
	gjava
.
	gut
.
	gVeùÜ
;

16 
public
 cÏs 
	cTextBlock
 {

18 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

30 
´iv©e
 
fš®
 
	mNL
 = (è
Ch¬aù”
.
LINE_SEPARATOR
;

32 
´iv©e
 
fš®
 
SŒšg
 
	mcŞumnS•¬©Ü
 = " | ";

37 
´iv©e
 
	mVeùÜ
<
	mSŒšg
> 
	mlšes
 = 
Ãw
 
VeùÜ
<
SŒšg
>();

39 
´iv©e
 
SŒšg
 
	m¥aûs
;

41 
´iv©e
 
	mwidth
;

46 
public
 
	$TextBlock
(
width
) {

47 
this
.
width
 = width;

48 
¥aûs
 = 
	`»p
(" ", 
width
);

51 
public
 
	$TextBlock
(
width
, 
SŒšg
 
‹xt
) {

52 
	`this
(
width
);

53 
	`add
(
‹xt
);

54 
¥aûs
 = 
	`»p
(" ", 
width
);

55 
	}
}

60 
public
 
	$maš
(
SŒšg
[] 
¬gs
) {

61 
width
 = 40;

62 ià(
¬gs
.
Ëngth
 > 0)

63 
Œy
 {

64 
width
 = 
IÁeg”
.
	`·r£IÁ
(
¬gs
[0]);

66 
	`ÿtch
 (
Numb”FÜm©Exû±iÚ
 
e
) {

68 
TextBlock
 
t
 = 
Ãw
 
	`TextBlock
(
width
);

69 
t


70 .
	`add
("Now isheime for‡ll good meno comeohe‡id ofheir country");

71 
t
.
	`add
("Mary had‡†ittle†amb. Its fleece was white‡s snow.");

72 
t
.
	`add
("A veryverylongwordalmomstlikeaGermanwordinlength‡dded here");

73 
Sy¡em
.
out
.
	`´šn
("***†eft");

74 
Sy¡em
.
out
.
	`´šn
(
t
.
	`toSŒšg
());

75 
TextBlock
 
t1
 = 
Ãw
 
	`TextBlock
(20);

76 
t1
.
	`add
("The quick brown fox jumped overhe†azy white dog.");

77 
t1
.
	`add
("She sells sea shells byhe sea shore.");

78 
Sy¡em
.
out
.
	`´šn
("***„ight");

79 
Sy¡em
.
out
.
	`´šn
(
t1
.
	`toSŒšg
());

80 
TextBlock
 
t2
 = 
t
.
	`još
(
t1
);

81 
Sy¡em
.
out
.
	`´šn
("***ogether");

82 
Sy¡em
.
out
.
	`´šn
(
t2
.
	`toSŒšg
());

83 
t2
.
	`add
(
t
);

84 
Sy¡em
.
out
.
	`´šn
("***‡ppended");

85 
Sy¡em
.
out
.
	`´šn
(
t2
.
	`toSŒšg
());

86 
	}
}

88 
´iv©e
 
SŒšg
 
	$»p
(
SŒšg
 
s
, 
n
) {

89 
SŒšgBufãr
 
buf
 = 
Ãw
 
	`SŒšgBufãr
();

90 
i
 = 0; i < 
n
; i++)

91 
buf
.
	`­³nd
(
s
);

92  
buf
.
	`toSŒšg
();

93 
	}
}

95 
public
 
SŒšg
 
	$ju¡ifyLeá
(
SŒšg
 
s
, 
width
) {

96 
¦’
 = 
s
.
	`Ëngth
();

97 ià(
¦’
 < 
width
)

98  
s
 + 
	`»p
(" ", 
width
 - 
¦’
);

100  
s
.
	`sub¡ršg
(0, 
width
);

101 
	}
}

103 
public
 
SŒšg
 
	$ju¡ifyRight
(
SŒšg
 
s
, 
width
) {

104 
¦’
 = 
s
.
	`Ëngth
();

105 ià(
¦’
 < 
width
)

106  
	`»p
(" ", 
width
 - 
¦’
è+ 
s
;

108  
s
.
	`sub¡ršg
(
¦’
 - 
width
);

109 
	}
}

114 
public
 
	$add
(
SŒšg
 
‹xt
) {

115 
Ën
 = 
‹xt
.
	`Ëngth
();

116 
i
 = 0;

117 
Ou‹r
: 
Ën
 - 
i
 > 
width
) {

119 
‹xt
.
	`ch¬At
(
i
) == ' ')

120 ià(
Ën
 - ++
i
 > 
width
)

121  
Ou‹r
;

123 
j
 = 
‹xt
.
	`Ï¡IndexOf
(' ');

124 
j
 > 
i
 + 
width
)

125 
j
 = 
‹xt
.
	`Ï¡IndexOf
(' ', j - 1);

127 ià(
j
 < 
i
) {

129 
lšes
.
	`addEËm’t
(
‹xt
.
	`sub¡ršg
(
i
, i + 
width
));

130 
i
 +ğ
width
;

134 
lšes
.
	`addEËm’t
(
	`ju¡ifyLeá
(
‹xt
.
	`sub¡ršg
(
i
, 
j
)));

135 
i
 = 
j
 + 1;

139 
lšes
.
	`addEËm’t
(
	`ju¡ifyLeá
(
‹xt
.
	`sub¡ršg
(
i
)));

140 
	}
}

142 
public
 
	$addRight
(
SŒšg
 
‹xt
) {

143 
Ën
 = 
‹xt
.
	`Ëngth
();

144 
i
 = 0;

145 
Ou‹r
: 
Ën
 - 
i
 > 
width
) {

147 
‹xt
.
	`ch¬At
(
i
) == ' ')

148 ià(
Ën
 - ++
i
 > 
width
)

149  
Ou‹r
;

151 
j
 = 
‹xt
.
	`Ï¡IndexOf
(' ');

152 
j
 > 
i
 + 
width
)

153 
j
 = 
‹xt
.
	`Ï¡IndexOf
(' ', j - 1);

155 ià(
j
 < 
i
) {

157 
lšes
.
	`addEËm’t
(
‹xt
.
	`sub¡ršg
(
i
, i + 
width
));

158 
i
 +ğ
width
;

162 
lšes
.
	`addEËm’t
(
	`ju¡ifyRight
(
‹xt
.
	`sub¡ršg
(
i
, 
j
)));

163 
i
 = 
j
 + 1;

167 
lšes
.
	`addEËm’t
(
	`ju¡ifyRight
(
‹xt
.
	`sub¡ršg
(
i
)));

168 
	}
}

170 
public
 
	$add
(
TextBlock
 
block
) {

171 
Enum”©iÚ
<
SŒšg
> 
e
 = 
block
.
lšes
.
	`–em’ts
();ƒ

172 .
	`hasMÜeEËm’ts
();)

173 
lšes
.
	`addEËm’t
(
e
.
	`ÃxtEËm’t
());

174 
width
 = 
M©h
.
	`max
(width, 
block
.width);

175 
	}
}

177 
public
 
TextBlock
 
	$još
(
TextBlock
 
right
) {

178  
	`još
(
right
, 
cŞumnS•¬©Ü
);

179 
	}
}

181 
public
 
TextBlock
 
	$još
(
TextBlock
 
right
, 
SŒšg
 
cŞumnS•¬©Ü
) {

182 
Æeá
 = 
	`size
();

183 
Äight
 = 
right
.
	`size
();

184 
n
 = 
M©h
.
	`mš
(
Æeá
, 
Äight
);

185 
TextBlock
 
combšed
 = 
Ãw
 
	`TextBlock
(
width
 + 
cŞumnS•¬©Ü
.
	`Ëngth
()

186 + 
right
.
width
);

187 
i
 = 0; i < 
n
; i++)

188 
combšed
.
lšes
.
	`addEËm’t
((
SŒšg
èlšes.
	`–em’tAt
(
i
)

189 + 
cŞumnS•¬©Ü
 + (
SŒšg
è
right
.
lšes
.
	`–em’tAt
(
i
));

190 ià(
Æeá
 < 
Äight
) {

191 
i
 = 
n
; i < 
Äight
; i++)

192 
combšed
.
lšes
.
	`addEËm’t
(
¥aûs
 + 
cŞumnS•¬©Ü


193 + (
SŒšg
è
right
.
lšes
.
	`–em’tAt
(
i
));

196 
i
 = 
n
; i < 
Æeá
; i++)

197 
combšed
.
lšes
.
	`addEËm’t
((
SŒšg
èlšes.
	`–em’tAt
(
i
)

198 + 
cŞumnS•¬©Ü
 + 
¥aûs
);

200  
combšed
;

201 
	}
}

203 
´iv©e
 
SŒšg
 
	$ju¡ifyLeá
(
SŒšg
 
s
) {

204 
s
 = s + 
¥aûs
;

205  
s
.
	`sub¡ršg
(0, 
width
);

206 
	}
}

208 
´iv©e
 
SŒšg
 
	$ju¡ifyRight
(
SŒšg
 
s
) {

209 
s
 = 
¥aûs
 + s;

210 
¦’
 = 
s
.
	`Ëngth
();

211  
s
.
	`sub¡ršg
(
¦’
 - 
width
);

212 
	}
}

214 
public
 
	$size
() {

215  
lšes
.
	`size
();

216 
	}
}

218 
public
 
SŒšg
 
	$toSŒšg
() {

219 
SŒšgBufãr
 
buf
 = 
Ãw
 
	`SŒšgBufãr
();

220 
Enum”©iÚ
 
e
 = 
lšes
.
	`–em’ts
();ƒ.
	`hasMÜeEËm’ts
();) {

221 
buf
.
	`­³nd
((
SŒšg
è
e
.
	`ÃxtEËm’t
());

222 ià(
e
.
	`hasMÜeEËm’ts
())

223 
buf
.
	`­³nd
("\n");

225  
buf
.
	`toSŒšg
();

226 
	}
}

	@spec/reporter/TextColumn.java

11 
·ckage
 
	g¥ec
.
	g»pÜ‹r
;

13 
impÜt
 
	gjava
.
	gut
.
	gEnum”©iÚ
;

14 
impÜt
 
	gjava
.
	gut
.
	gVeùÜ
;

16 
public
 cÏs 
	cTextCŞumn
 {

18 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

30 
´iv©e
 
fš®
 
	mNL
 = (è
Ch¬aù”
.
LINE_SEPARATOR
;

32 
´iv©e
 
fš®
 
SŒšg
 
	mcŞumnS•¬©Ü
 = " | ";

37 
´iv©e
 
	mVeùÜ
<
	mTextBlock
> 
	mblocks
 = 
Ãw
 
VeùÜ
<
TextBlock
>();

39 
´iv©e
 
	mwidth
;

44 
public
 
	$TextCŞumn
(
width
) {

45 
this
.
width
 = width;

48 
public
 
	$TextCŞumn
(
width
, 
SŒšg
 
‹xt
) {

49 
	`this
(
width
);

50 
	`add
(
‹xt
);

51 
	}
}

56 
public
 
	$maš
(
SŒšg
[] 
¬gs
) {

57 
width
 = 40;

58 ià(
¬gs
.
Ëngth
 > 0)

59 
Œy
 {

60 
width
 = 
IÁeg”
.
	`·r£IÁ
(
¬gs
[0]);

62 
	`ÿtch
 (
Numb”FÜm©Exû±iÚ
 
e
) {

64 
TextCŞumn
 
t
 = 
Ãw
 
	`TextCŞumn
(
width
);

65 
t


66 .
	`add
("Now isheime for‡ll good meno comeohe‡id ofheir country");

67 
t
.
	`add
("Mary had‡†ittle†amb. Its fleece was white‡s snow.");

68 
t
.
	`add
("A veryverylongwordalmomstlikeaGermanwordinlength‡dded here");

69 
Sy¡em
.
out
.
	`´šn
("***†eft");

70 
Sy¡em
.
out
.
	`´šn
(
t
.
	`toSŒšg
());

71 
TextCŞumn
 
t1
 = 
Ãw
 
	`TextCŞumn
(20);

72 
t1
.
	`add
("The quick brown fox jumped overhe†azy white dog.");

73 
t1
.
	`add
("She sells sea shells byhe sea shore.");

74 
Sy¡em
.
out
.
	`´šn
("***„ight");

75 
Sy¡em
.
out
.
	`´šn
(
t1
.
	`toSŒšg
());

76 
TextCŞumn
 
t2
 = 
t
.
	`još
(
t1
);

77 
Sy¡em
.
out
.
	`´šn
("***ogether");

78 
Sy¡em
.
out
.
	`´šn
(
t2
.
	`toSŒšg
());

79 
	}
}

84 
public
 
	$add
(
SŒšg
 
‹xt
) {

85 
blocks
.
	`addEËm’t
(
Ãw
 
	`TextBlock
(
width
, 
‹xt
));

86 
	}
}

88 
public
 
TextCŞumn
 
	$još
(
TextCŞumn
 
right
) {

89  
	`još
(
right
, 
cŞumnS•¬©Ü
);

90 
	}
}

92 
public
 
TextCŞumn
 
	$još
(
TextCŞumn
 
right
, 
SŒšg
 
cŞumnS•¬©Ü
) {

93 
Æeá
 = 
	`size
();

94 
Äight
 = 
right
.
	`size
();

95 
n
 = 
M©h
.
	`mš
(
Æeá
, 
Äight
);

96 
TextCŞumn
 
combšed
 = 
Ãw
 
	`TextCŞumn
(
width
 + 
cŞumnS•¬©Ü
.
	`Ëngth
()

97 + 
right
.
width
);

98 
i
 = 0; i < 
n
; i++)

99 
combšed
.
blocks
.
	`addEËm’t
(((
TextBlock
èblocks.
	`–em’tAt
(
i
)).
	`još
(

100 ((
TextBlock
è
right
.
blocks
.
	`–em’tAt
(
i
)), 
cŞumnS•¬©Ü
));

101 ià(
Æeá
 < 
Äight
) {

102 
TextBlock
 
em±y
 = 
Ãw
 
	`TextBlock
(
width
);

103 
i
 = 
n
; i < 
Äight
; i++)

104 
combšed
.
blocks
.
	`addEËm’t
(
em±y
.
	`još
(((
TextBlock
è
right
.blocks

105 .
	`–em’tAt
(
i
)), 
cŞumnS•¬©Ü
));

108 
TextBlock
 
em±y
 = 
Ãw
 
	`TextBlock
(
right
.
width
);

109 
i
 = 
n
; i < 
Æeá
; i++)

110 
combšed
.
blocks
.
	`addEËm’t
(((
TextBlock
èblocks.
	`–em’tAt
(
i
))

111 .
	`još
(
em±y
, 
cŞumnS•¬©Ü
));

113  
combšed
;

114 
	}
}

116 
public
 
TextBlock
 
	$m”ge
() {

117 
TextBlock
 
m”ged
 = 
Ãw
 
	`TextBlock
(
width
);

118 
Enum”©iÚ
 
e
 = 
blocks
.
	`–em’ts
();ƒ.
	`hasMÜeEËm’ts
();)

119 
m”ged
.
	`add
((
TextBlock
è
e
.
	`ÃxtEËm’t
());

120  
m”ged
;

121 
	}
}

123 
public
 
	$size
() {

124  
blocks
.
	`size
();

125 
	}
}

127 
public
 
SŒšg
 
	$toSŒšg
() {

128  
	`m”ge
().
	`toSŒšg
();

129 
	}
}

	@spec/reporter/TextMetrics.java

10 
·ckage
 
	g¥ec
.
	g»pÜ‹r
;

12 
impÜt
 
	gjava
.
	g‹xt
.*;

14 
public
 cÏs 
	cTextM‘rics
 
ex‹nds
 
	mM‘rics
 {

16 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

28 
´iv©e
 
	mdig™s
 = 3;

30 
´iv©e
 
Decim®FÜm©
 
	mmemFÜm©
 = 
Ãw
 DecimalFormat("#0");

32 
public
 
	$TextM‘rics
(
R•ÜtPrİs
 
´İs
, 
boŞ—n
 
SPECIÁ”ÇlU£
) {

33 
	`su³r
(
´İs
, 
SPECIÁ”ÇlU£
);

36 
public
 
SŒšg
 
	$w¿p
(
SŒšg
 
s
) {

37  
s
 + "\n";

38 
	}
}

40 
public
 
SŒšg
 
	$d‘a
() {

41 
SŒšgBufãr
 
buf
 = 
Ãw
 
	`SŒšgBufãr
();

42 ià(!
v®id
) {

43 
buf
.
	`­³nd
("*** Invalid Result\n");

44 
buf


45 .
	`­³nd
("This„esult is‚ot valid forhe following„eason(s):\n");

46 
buf
.
	`­³nd
(
this
.
šv®id_buf
.
	`toSŒšg
());

47 
buf
.
	`­³nd
("\n");

49 
buf
.
	`­³nd
("\n* Details of Runs\n\n");

50 
TextBlock
 
c1
 = 
Ãw
 
	`TextBlock
(5);

51 
TextBlock
 
c2
 = 
Ãw
 
	`TextBlock
(8);

52 
TextBlock
 
c3
 = 
Ãw
 
	`TextBlock
(9);

53 
TextBlock
 
c4
 = 
Ãw
 
	`TextBlock
(9);

54 
TextBlock
 
c5
 = 
Ãw
 
	`TextBlock
(8);

55 
TextBlock
 
c6
 = 
Ãw
 
	`TextBlock
(8);

56 
TextBlock
 
c7
 = 
Ãw
 
	`TextBlock
(12, "Trans.");

57 
TextBlock
 
c8
 = 
Ãw
 
	`TextBlock
(10);

58 
TextBlock
 
c9
 = 
Ãw
 
	`TextBlock
(6, "Resp.");

59 
TextBlock
 
c10
 = 
Ãw
 
	`TextBlock
(8, "Time (s)");

60 
c1
.
	`addRight
("Wh.");

61 
c1
.
	`add
("");

62 
c2
.
	`addRight
("Score");

63 
c2
.
	`add
("");

64 
c3
.
	`addRight
("Tot.");

65 
c3
.
	`addRight
("Heap");

66 
c4
.
	`addRight
("Used");

67 
c4
.
	`addRight
("Heap");

68 
c5
.
	`addRight
("Thread");

69 
c5
.
	`addRight
("spread");

70 
c6
.
	`addRight
("elapsed");

71 
c6
.
	`addRight
("> 120s");

72 
c7
.
	`add
("Type");

73 
c8
.
	`addRight
("Count");

74 
c8
.
	`add
("");

75 
c9
.
	`add
("total");

76 
c10
.
	`add
("max");

77 
c1
.
	`add
("");

78 
c2
.
	`add
("");

79 
c3
.
	`addRight
("(MB)");

80 
c4
.
	`addRight
("(MB)");

81 
c5
.
	`add
("%");

82 
c6
.
	`add
("%");

83 
c7
.
	`add
("");

84 
c8
.
	`add
("");

85 
c9
.
	`add
("");

86 
c10
.
	`add
("");

87 
i
 = 0; i < 
»suÉ
.
Ëngth
; i++) {

88 
ResuÉ
 
r
 = 
»suÉ
[
i
];

89 ià(
r
.
run
.
Ëngth
 <= 0) {

90 
c3
.
	`add
("not„un");

91 
c4
.
	`add
("");

92 
c5
.
	`add
("");

93 
c6
.
	`add
("");

94 
c7
.
	`add
("");

95 
c8
.
	`add
("");

96 
c9
.
	`add
("");

97 
c10
.
	`add
("");

100 
j
 = 0; j < 
r
.
run
.
Ëngth
; j++) {

101 ià(
j
 > 0) {

102 
c1
.
	`add
("");

103 
c2
.
	`add
("");

104 
c3
.
	`add
("");

105 
c4
.
	`add
("");

106 
c5
.
	`add
("");

107 
c6
.
	`add
("");

110 
c1
.
	`addRight
("" + (
r
.
	`w¬ehou£s
()));

111 
c2
.
	`addRight
(
M‘rics
.
	`fÜm©
(
r
.
	`scÜe
()));

112 
c3
.
	`addRight
(
memFÜm©
.
	`fÜm©
(
r
.
h—psize
));

113 
c4
.
	`addRight
(
memFÜm©
.
	`fÜm©
(
r
.
h—pu£d
));

114 
c5


115 .
	`addRight
(
M‘rics


116 .
	`fÜm©
((100 * (
r
.
max_th»ad_Œª§ùiÚs
 -„.
mš_th»ad_Œª§ùiÚs
) /„.max_thread_transactions)));

117 
c6


118 .
	`addRight
(
M‘rics
.
	`fÜm©
(0.1

119 * (
r
.
–­£d
 - 1000 *„.
m—s_št
)

120 / 
r
.
m—s_št
));

122 
c7
.
	`add
(
Run
.
Œª§ùiÚ
[
j
]);

123 
c8
.
	`addRight
(
M‘rics
.
	`fÜm©
(
r
.
run
[
j
].
couÁ
));

124 
c9
.
	`add
(
M‘rics
.
	`fÜm©
(
r
.
run
[
j
].
tÙ®time
));

125 
c10
.
	`add
(
M‘rics
.
	`fÜm©
(
r
.
run
[
j
].
maximumtime
));

129 
buf
.
	`­³nd
(
c1
.
	`još
(
c2
, "").još(
c3
, "").još(
c4
, "").još(
c5
, "").join(

130 
c6
, "").
	`još
(
c7
, " ").još(
c8
, "").još(
c9
, " ").još(
c10
, "")

131 .
	`toSŒšg
());

132  
buf
.
	`toSŒšg
();

133 
	}
}

135 
public
 
SŒšg
 
	$¿tioTabË
() {

136 
SŒšgBufãr
 
buf
 = 
Ãw
 
	`SŒšgBufãr
();

137 
buf
.
	`­³nd
("\nValidity\n");

138 
SŒšg
 
”rÜ_mes§ges
 = 
check_®l_buf
.
	`toSŒšg
();

140 ià(
”rÜ_mes§ges
 =ğ
nuÎ
)

141 
buf
.
	`­³nd
("Valid„un;‚oƒrrors");

143 
buf
.
	`­³nd
(
”rÜ_mes§ges
);

144 
TextBlock
 
mes§ges
 = 
Ãw
 
	`TextBlock
(119);

145 
TextBlock
 
wh
 = 
Ãw
 
	`TextBlock
(15);

146 
wh
.
	`addRight
("Warehouses");

147 
TextBlock
 
th½
 = 
Ãw
 
	`TextBlock
(20);

148 
th½
.
	`addRight
("Thrput");

150 
mes§ges
.
	`add
("\n SPEC scores");

151 
i
 = 0; i < 
»suÉ
.
Ëngth
; i++) {

152 ià((
ex³ùedP—kWh
 <ğ(
»suÉ
[
i
].
	`w¬ehou£s
()))

153 && ((
»suÉ
[
i
].
	`w¬ehou£s
()è<ğ2 * 
ex³ùedP—kWh
))

154 
wh
.
	`addRight
(" * " + (
»suÉ
[
i
].
	`w¬ehou£s
()));

156 
wh
.
	`addRight
(" " + (
»suÉ
[
i
].
	`w¬ehou£s
()));

157 
th½
.
	`addRight
(
M‘rics
.
	`fÜm©
(
»suÉ
[
i
].
	`scÜe
()));

159 
wh
.
	`add
("");

160 
th½
.
	`add
("");

161 
wh
.
	`add
("Throughput");

162 
th½
.
	`add
(
this
.
	`m‘ric
());

163 
mes§ges
.
	`add
(
wh
.
	`još
(
th½
, " "));

164 
buf
.
	`­³nd
(
mes§ges
.
	`toSŒšg
());

165  
buf
.
	`toSŒšg
();

166 
	}
}

	@spec/reporter/TextiReport.java

10 
·ckage
 
	g¥ec
.
	g»pÜ‹r
;

12 
impÜt
 
	gjava
.
	gio
.*;

13 
impÜt
 
	gjava
.
	gut
.
	gloggšg
.
	gLev–
;

14 
impÜt
 
	g¥ec
.
	gjbb
.
	gJBBut
;

16 
public
 cÏs 
	cTextiR•Üt
 {

18 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

27 
public
 
SŒšg
 
	mh¬dw¬e
, 
	mm‘ric
, 
	msoáw¬e
;

29 
public
 
SŒšg
 
	mba£
;

31 
´iv©e
 
TextCŞumn
 
	mcŞumnT™Ë
;

33 
´iv©e
 
TextCŞumn
 
	mcŞumnV®ue
;

35 
public
 
SŒšg
 
	missue
;

37 
´iv©e
 
SŒšg
 
	mmemÜy
;

39 
´iv©e
 
SŒšg
 
	mmemÜyDesütiÚ
;

41 
public
 
TextM‘rics
 
	mm‘rics
;

43 
´iv©e
 
fš®
 
	m·geWidth
 = 120;

45 
public
 
R•ÜtPrİs
 
	m»suÉs
 = 
Ãw
 ReportProps();

47 
public
 
boŞ—n
 
	mSPECIÁ”ÇlU£
;

49 
public
 
	$TextiR•Üt
(
SŒšg
 
Ãw¦‘‹r
, SŒšg 
»suÉFe
,

50 
boŞ—n
 
SPECIÁ”ÇlU£
) {

51 
this
.
issue
 = 
Ãw¦‘‹r
;

52 
this
.
SPECIÁ”ÇlU£
 = SPECInternalUse;

53 
Œy
 {

54 ià(
»suÉFe
 =ğ
nuÎ
)

55 
»suÉs
.
	`lßd
(
Ãw
 
	`IÅutSŒ—mR—d”
(
Sy¡em
.
š
));

57 
»suÉs
.
	`lßd
(
»suÉFe
);

59 
	`ÿtch
 (
IOExû±iÚ
 
e
) {

60 
JBBut
.
	`g‘Log
().
	`log
(
Lev–
.
WARNING
,

61 "E¼Ü„—dšg„esuÉ f" + 
»suÉFe
 + ": " + 
e
,ƒ);

62 
Sy¡em
.
	`ex™
(1);

64 
m‘rics
 = 
Ãw
 
	`TextM‘rics
(
»suÉs
, 
SPECIÁ”ÇlU£
);

65 
this
.
h¬dw¬e
 = 
	`g‘
("config.hw.vendor") + " " + get("config.hw.model");

66 ià(
m‘ric
 =ğ
nuÎ
)

67 
m‘ric
 = 
m‘rics
.
	`m‘ric
();

68 ià(
m‘rics
.
v®id
) {

69 
m‘rics
.
	`ouut_´İ”ly
("V®id„un, ScÜi " + 
m‘ric
 + "\n");

72 ià(
m‘rics
.
´št_scÜe
) {

73 
m‘rics
.
	`ouut_´İ”ly
("INVALID„un; ScÜi " + 
m‘ric


77 
m‘rics


78 .
	`ouut_´İ”ly
("INVALID„un,…reventing score calculation.");

80 
this
.
soáw¬e
 = 
	`g‘
("config.sw.vendor") + " " + get("config.sw.JVM");

81 
this
.
memÜy
 = 
»suÉs
.
	`g‘
("config.hw.memory");

82 
this
.
memÜyDesütiÚ
 = 
»suÉs
.
	`g‘
("config.hw.memory_description");

85 
´iv©e
 
SŒšg
 
	$cÚfigSeùiÚ
() {

91 
TextBlock
 
Ëá
 = 
Ãw
 
	`TextBlock
(51, "HARDWARE");

92 
cŞumnT™Ë
 = 
Ãw
 
	`TextCŞumn
(25);

93 
cŞumnV®ue
 = 
Ãw
 
	`TextCŞumn
(25);

94 
	`ıut
("config.hw.vendor", "Vendor");

95 
	`ıut
("config.hw.vendor.url", "Vendor URL");

96 
	`ıut
("config.hw.model", "Model");

97 
	`ıut
("config.hw.processor", "Processor");

98 
	`ıut
("config.hw.MHz", "MHz");

99 
	`ıut
("config.hw.nchips", "# of Chips");

100 
	`ıut
("config.hw.ncores", "# of Cores");

101 
	`ıut
("config.hw.ncoresperchip", "# of Cores/Chip");

102 
	`ıut
("config.hw.hwThreads", "HW Threading Enabled");

103 
	`ıut
("config.sw.procsAvailtoJava", "Procs‡vailo Java");

104 
	`ıut
("config.hw.memory", "Memory (MB)");

105 
	`ıut
("config.hw.memory_description", "Memory Details");

106 
	`ıut
("config.hw.primaryCache", "L1 Cache");

107 
	`ıut
("config.hw.secondaryCache", "L2 Cache");

108 
	`ıut
("config.hw.otherCache", "Other Cache");

109 
	`ıut
("config.hw.fileSystem", "Filesystem");

110 
	`ıut
("config.hw.disk", "Disks");

111 
	`ıut
("config.hw.other", "Other H/W");

112 
Ëá
.
	`add
(
cŞumnT™Ë
.
	`još
(
cŞumnV®ue
, " ").
	`m”ge
());

118 
TextBlock
 
right
 = 
Ãw
 
	`TextBlock
(65, "SOFTWARE");

119 
cŞumnT™Ë
 = 
Ãw
 
	`TextCŞumn
(20);

120 
cŞumnV®ue
 = 
Ãw
 
	`TextCŞumn
(44);

121 
	`ıut
("config.sw.vendor", "Vendor");

122 
	`ıut
("config.sw.vendor.url", "Vendor URL");

123 
	`ıut
("config.sw.JVM", "JVM Version");

124 
	`ıut
("config.sw.command_line", "Command Line");

125 
	`ıut
("config.sw.JVMheapInitial", "Initial Heap Mem (MB)");

126 
	`ıut
("config.sw.JVMheapMax", "Max Heap Mem (MB)");

127 
	`ıut
("config.sw.JVMbitness", "JVM‡ddressing bits");

129 
	`ıut
("java.class.path", "JVM CLASSPATH");

130 
	`ıut
("java.library.path", "JVM BOOTCLASSPATH");

131 
	`ıut
("config.sw.OS", "OS Version");

132 
	`ıut
("config.sw.other", "Other S/W");

133 
right
.
	`add
(
cŞumnT™Ë
.
	`još
(
cŞumnV®ue
, " ").
	`m”ge
());

134 
right
.
	`add
("");

135 
right
.
	`add
("AOT Compilation Details");

136 ià((
»suÉs
.
	`g‘
("cÚfig.sw.aÙ")è!ğ
nuÎ
)

137 
right
.
	`add
(
»suÉs
.
	`g‘
("config.sw.aot"));

138 
right
.
	`add
("");

139 
right
.
	`add
("TUNING AND NOTES");

140 ià((
»suÉs
.
	`g‘
("cÚfig.sw.tunšg")è!ğ
nuÎ
)

141 
right
.
	`add
(
»suÉs
.
	`g‘
("config.sw.tuning"));

142 ià((
»suÉs
.
	`g‘
("cÚfig.sw.nÙes")è!ğ
nuÎ
)

143 
right
.
	`add
(
»suÉs
.
	`g‘
("config.sw.notes"));

144 
right
.
	`add
("");

149 
TextBlock
 
tİ
 = 
Ëá
.
	`još
(
right
);

150 
tİ
.
	`add
("");

161 
right
 = 
Ãw
 
	`TextBlock
(37, "TEST INFORMATION");

162 
cŞumnT™Ë
 = 
Ãw
 
	`TextCŞumn
(18);

163 
cŞumnV®ue
 = 
Ãw
 
	`TextCŞumn
(18);

164 
	`ıut
("config.test.testedBy", "Tested by");

165 
	`ıut
("config.test.specLicense", "SPEC License");

166 
	`ıut
("config.test.location", "Test Location");

167 
	`ıut
("config.test.date", "Test Date");

168 
	`ıut
("config.sw.JVMavailable", "JVM‡vailable");

169 
	`ıut
("config.hw.available", "H/w‡vailable");

170 
	`ıut
("config.sw.OSavailable", "OS‡vailable");

171 
	`ıut
("config.sw.otherAvailable", "Other s/w‡vailable");

172 
right
.
	`add
(
cŞumnT™Ë
.
	`još
(
cŞumnV®ue
, " ").
	`m”ge
());

176 
tİ
.
	`add
(
right
);

177  
tİ
.
	`toSŒšg
();

178 
	}
}

180 
´iv©e
 
	$ıut
(
SŒšg
 
Çme
, SŒšg 
t™Ë
) {

181 
cŞumnT™Ë
.
	`add
(
t™Ë
);

182 
cŞumnV®ue
.
	`add
(
	`g‘
(
Çme
));

183 
	}
}

185 
´iv©e
 
SŒšg
 
	$g‘
(
SŒšg
 
Çme
) {

186  
	`g‘
(
Çme
, "MISSING");

187 
	}
}

189 
´iv©e
 
SŒšg
 
	$g‘
(
SŒšg
 
Çme
, SŒšg 
def
) {

190 
SŒšg
 
s
 = 
»suÉs
.
	`g‘
(
Çme
, 
def
);

191 ià(
s
.
	`šdexOf
('<') >= 0) {

192 
i
 = 
s
.
	`šdexOf
("<i>");

193 ià(
i
 >= 0)

194 
s
 = s.
	`sub¡ršg
(0, 
i
) + s.substring(i + 3);

195 
i
 = 
s
.
	`šdexOf
("<I>");

196 ià(
i
 >= 0)

197 
s
 = s.
	`sub¡ršg
(0, 
i
) + s.substring(i + 3);

198 
i
 = 
s
.
	`šdexOf
("</i>");

199 ià(
i
 >= 0)

200 
s
 = s.
	`sub¡ršg
(0, 
i
) + s.substring(i + 4);

201 
i
 = 
s
.
	`šdexOf
("</I>");

202 ià(
i
 >= 0)

203 
s
 = s.
	`sub¡ršg
(0, 
i
) + s.substring(i + 4);

205  
s
;

206 
	}
}

208 
public
 
	$´št
(
SŒšg
 
outFe
) {

209 
Œy
 {

210 
	`´št
(
Ãw
 
	`PrštSŒ—m
Òew 
	`Bufã»dOuutSŒ—m
(

211 
Ãw
 
	`FeOuutSŒ—m
(
outFe
))));

213 
	`ÿtch
 (
IOExû±iÚ
 
e
) {

214 
JBBut
.
	`g‘Log
().
	`log
(
Lev–
.
WARNING
, "E¼Ü c»©šg ouut: " + 
e
,

215 
e
);

217 
	}
}

219 
public
 
	$´št
(
PrštSŒ—m
 
out
) {

220 
Œy
 {

221 
out
.
	`´šn
("SPECjbb2005 bops = "

222 + 
m‘ric
 + ", SPECjbb2005 bops/JVM = " + metric);

224 
out
.
	`´šn
();

225 
out
.
	`´šn
(
h¬dw¬e
);

226 
out
.
	`´šn
(
soáw¬e
);

227 
	`‹¡B¬
(
out
);

228 
out
.
	`´šn
(
m‘rics
.
	`¿tioTabË
());

229 
out
.
	`´šn
();

230 
out
.
	`´šn
(
	`cÚfigSeùiÚ
());

231 
out
.
	`´šn
(
m‘rics
.
	`d‘a
());

232 
out
.
	`´šn
("\nSPECjbb2005 Version: ["

233 + 
»suÉs
.
	`g‘
("config.benchmark_version", "N/A") + ", "

234 + 
»suÉs
.
	`g‘
("config.benchmark_versionDate", "-") + "]");

235 ià(
issue
 !ğ
nuÎ
 && !issue.
	`equ®s
(""è&& 
m‘rics
.
v®id
)

236 
out
.
	`´šn
("Published by SPEC " + 
issue
);

237 
out
.
	`´šn
("Reporting…age (C) Copyright SPEC, 2005. "

239 
out
.
	`şo£
();

241 
	`ÿtch
 (
Exû±iÚ
 
e
) {

242 
JBBut
.
	`g‘Log
().
	`log
(
Lev–
.
WARNING
, "E¼Ü: " + 
e
,ƒ);

244 
	}
}

246 
public
 
	$‹¡B¬
(
PrštSŒ—m
 
out
è
throws
 
IOExû±iÚ
 {

247 
SŒšg
 
liûn£
 = 
»suÉs
.
	`g‘
("config.test.specLicense", "MISSING");

248 
SŒšg
 
‹¡edBy
 = 
»suÉs
.
	`g‘
("config.test.testedBy", "MISSING");

249 
SŒšg
 
‹¡D©e
 = 
»suÉs
.
	`g‘
("config.test.date", "MISSING");

250 
out
.
	`´šn
("SPEC†iûn£ # " + 
liûn£
 + ", " + "Tested by: "

251 + 
‹¡edBy
 + ", " + "Te¡ d©e: " + 
‹¡D©e
);

252 
	}
}

	@spec/reporter/Title.java

18 
·ckage
 
	g¥ec
.
	g»pÜ‹r
;

20 
public
 cÏs 
	cT™Ë
 {

22 
fš®
 
SŒšg
 
	mCOPYRIGHT
 = "SPECjbb2005,"

31 
SŒšg
 
	mt
;

33 
public
 
	$T™Ë
() {

34 
t
 =

87 
public
 
SŒšg
 
	$g‘T™ËSŒšg
() {

88  
t
;

89 
	}
}

	@
1
.
0
63
1846
spec/jbb/Address.java
spec/jbb/Company.java
spec/jbb/Controller.java
spec/jbb/Customer.java
spec/jbb/CustomerReportTransaction.java
spec/jbb/DeliveryHandler.java
spec/jbb/DeliveryTransaction.java
spec/jbb/District.java
spec/jbb/History.java
spec/jbb/Infrastructure.java
spec/jbb/Item.java
spec/jbb/JBBDataStorage.java
spec/jbb/JBBLogFormatter.java
spec/jbb/JBBProperties.java
spec/jbb/JBBSortedStorage.java
spec/jbb/JBBmain.java
spec/jbb/JBButil.java
spec/jbb/MapDataStorage.java
spec/jbb/NewOrder.java
spec/jbb/NewOrderTransaction.java
spec/jbb/Order.java
spec/jbb/OrderStatusTransaction.java
spec/jbb/Orderline.java
spec/jbb/PaymentTransaction.java
spec/jbb/RunSequencer.java
spec/jbb/SaveOutput.java
spec/jbb/Stock.java
spec/jbb/StockLevelTransaction.java
spec/jbb/TimerData.java
spec/jbb/Transaction.java
spec/jbb/TransactionManager.java
spec/jbb/TreeMapDataStorage.java
spec/jbb/Warehouse.java
spec/jbb/infra/Util/TransactionLogBuffer.java
spec/jbb/infra/Util/XMLTransactionLog.java
spec/jbb/validity/Check.java
spec/jbb/validity/LoopBounds.java
spec/jbb/validity/PepTest.java
spec/jbb/validity/Sub.java
spec/jbb/validity/Super.java
spec/jbb/validity/digest.java
spec/jbb/validity/digestExpected.java
spec/reporter/GraphImage.java
spec/reporter/HTMLTableGraphGenerator3.java
spec/reporter/Metrics.java
spec/reporter/MultiVMReport.java
spec/reporter/MultiVMReporter.java
spec/reporter/MultiVMTxtReport.java
spec/reporter/Report.java
spec/reporter/ReportProps.java
spec/reporter/Reporter.java
spec/reporter/Result.java
spec/reporter/Run.java
spec/reporter/Table.java
spec/reporter/TableGroup.java
spec/reporter/TableGroupCompare.java
spec/reporter/Template.java
spec/reporter/TemplateCompare.java
spec/reporter/TextBlock.java
spec/reporter/TextColumn.java
spec/reporter/TextMetrics.java
spec/reporter/TextiReport.java
spec/reporter/Title.java
